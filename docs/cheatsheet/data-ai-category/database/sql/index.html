<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL チートシート</title>

    <!-- ダークモード早期適用（フラッシュ防止） -->
    <script src="main.js"></script>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans JP"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Highlight.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/sql.min.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- カスタムスタイル -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="font-sans bg-slate-50 text-slate-800 antialiased">
    <!-- ヘッダー -->
    <header class="header-rich text-white py-4 shadow-lg no-print">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center backdrop-blur-sm border border-white/20">
                        <i class="fas fa-database text-2xl"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold">SQL チートシート</h1>
                        <p class="text-sm text-white/80">エンジニアのための実践リファレンス</p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <!-- ダークモード切り替えボタン -->
                    <button id="dark-mode-toggle" class="w-10 h-10 flex items-center justify-center rounded-lg bg-white/20 hover:bg-white/30 transition" title="ダークモード切り替え">
                        <i class="fas fa-moon dark-icon"></i>
                        <i class="fas fa-sun light-icon hidden"></i>
                    </button>
                    <!-- 印刷ボタン -->
                    <button onclick="window.print()" class="hidden md:flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition">
                        <i class="fas fa-print"></i>
                        <span>印刷</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- イントロ -->
        <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-8">
            <div class="flex items-start gap-4">
                <div class="flex-shrink-0 w-12 h-12 bg-primary-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-table text-white text-xl"></i>
                </div>
                <div>
                    <h2 class="text-xl font-bold text-slate-800 mb-2">SQLとは？</h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        SQL（Structured Query Language）は、リレーショナルデータベースを操作するための標準言語です。
                        データの検索・挿入・更新・削除を行うことができます。
                    </p>
                    <div class="flex flex-wrap gap-2">
                        <span class="px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-sm font-medium">
                            <i class="fas fa-search mr-1"></i>SELECT
                        </span>
                        <span class="px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm font-medium">
                            <i class="fas fa-plus mr-1"></i>INSERT
                        </span>
                        <span class="px-3 py-1 bg-amber-100 text-amber-700 rounded-full text-sm font-medium">
                            <i class="fas fa-edit mr-1"></i>UPDATE
                        </span>
                        <span class="px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium">
                            <i class="fas fa-trash mr-1"></i>DELETE
                        </span>
                    </div>
                </div>
            </div>
        </section>

        <!-- グリッドレイアウト -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

            <!-- SELECT基本 -->
            <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 bg-primary-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-search text-white"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800">SELECT - データ取得</h3>
                </div>

                <div class="space-y-4">
                    <div class="bg-primary-50 border border-primary-200 rounded-lg p-3">
                        <p class="text-sm text-primary-800">
                            <i class="fas fa-lightbulb text-primary-500 mr-2"></i>
                            基本形：SELECT 列名 FROM テーブル名
                        </p>
                    </div>

                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg"><code class="language-sql">-- 全カラム取得
SELECT * FROM users;

-- 特定カラムのみ
SELECT name, email FROM users;

-- エイリアス（別名）
SELECT name AS 氏名, email AS メール
FROM users;</code></pre>
                    </div>

                    <div class="text-sm text-slate-600 space-y-1">
                        <p><span class="text-primary-600 font-medium">●</span> <code class="bg-slate-100 px-1 rounded">*</code> は全カラム（本番では非推奨）</p>
                        <p><span class="text-primary-600 font-medium">●</span> 必要なカラムだけ指定するのがベスト</p>
                    </div>
                </div>
            </section>

            <!-- WHERE条件 -->
            <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 bg-amber-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-filter text-white"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800">WHERE - 条件絞り込み</h3>
                </div>

                <div class="space-y-4">
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg"><code class="language-sql">-- 比較演算子
SELECT * FROM users WHERE age >= 20;
SELECT * FROM users WHERE status = 'active';

-- 複数条件（AND / OR）
SELECT * FROM users
WHERE age >= 20 AND status = 'active';

-- IN（複数値マッチ）
SELECT * FROM users
WHERE department IN ('営業', '開発', '人事');

-- LIKE（パターンマッチ）
SELECT * FROM users WHERE name LIKE '田%';
-- % = 任意の文字列, _ = 任意の1文字</code></pre>
                    </div>

                    <div class="grid grid-cols-2 gap-3 text-sm">
                        <div class="bg-amber-50 border border-amber-200 rounded-lg p-3">
                            <p class="font-medium text-amber-800 mb-1">比較演算子</p>
                            <code class="text-xs text-amber-700">=  !=  &lt;  &gt;  &lt;=  &gt;=</code>
                        </div>
                        <div class="bg-amber-50 border border-amber-200 rounded-lg p-3">
                            <p class="font-medium text-amber-800 mb-1">NULL判定</p>
                            <code class="text-xs text-amber-700">IS NULL / IS NOT NULL</code>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ORDER BY / LIMIT -->
            <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-sort text-white"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800">ORDER BY / LIMIT</h3>
                </div>

                <div class="space-y-4">
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg"><code class="language-sql">-- 昇順ソート（ASC = デフォルト）
SELECT * FROM users ORDER BY created_at;

-- 降順ソート
SELECT * FROM users ORDER BY created_at DESC;

-- 複数カラムでソート
SELECT * FROM users
ORDER BY department, name;

-- 上位N件のみ取得
SELECT * FROM users
ORDER BY score DESC LIMIT 10;

-- ページング（11件目から10件）
SELECT * FROM users
ORDER BY id LIMIT 10 OFFSET 10;</code></pre>
                    </div>

                    <div class="flex items-center gap-4 text-sm bg-purple-50 border border-purple-200 rounded-lg p-3">
                        <div class="flex items-center gap-2">
                            <i class="fas fa-arrow-up text-purple-500"></i>
                            <span class="text-purple-800">ASC（昇順）</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-arrow-down text-purple-500"></i>
                            <span class="text-purple-800">DESC（降順）</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- JOIN -->
            <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 bg-emerald-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-link text-white"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800">JOIN - テーブル結合</h3>
                </div>

                <div class="space-y-4">
                    <!-- JOINの図解 -->
                    <div class="bg-emerald-50 border border-emerald-200 rounded-lg p-4">
                        <div class="flex items-center justify-center gap-4 text-sm">
                            <div class="text-center">
                                <div class="w-14 h-14 bg-blue-200 rounded-full flex items-center justify-center font-bold text-blue-700">A</div>
                                <p class="mt-1 text-slate-600">users</p>
                            </div>
                            <div class="flex flex-col items-center">
                                <i class="fas fa-arrows-alt-h text-xl text-emerald-500"></i>
                                <span class="text-xs text-slate-500">JOIN</span>
                            </div>
                            <div class="text-center">
                                <div class="w-14 h-14 bg-pink-200 rounded-full flex items-center justify-center font-bold text-pink-700">B</div>
                                <p class="mt-1 text-slate-600">orders</p>
                            </div>
                        </div>
                    </div>

                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg"><code class="language-sql">-- INNER JOIN（両方に存在するデータ）
SELECT u.name, o.order_date
FROM users u
INNER JOIN orders o ON u.id = o.user_id;

-- LEFT JOIN（左テーブル全件＋右の一致分）
SELECT u.name, o.order_date
FROM users u
LEFT JOIN orders o ON u.id = o.user_id;</code></pre>
                    </div>

                    <div class="grid grid-cols-2 gap-2 text-xs">
                        <div class="bg-emerald-100 rounded-lg p-2 text-center">
                            <p class="font-bold text-emerald-800">INNER JOIN</p>
                            <p class="text-emerald-700">共通部分のみ</p>
                        </div>
                        <div class="bg-blue-100 rounded-lg p-2 text-center">
                            <p class="font-bold text-blue-800">LEFT JOIN</p>
                            <p class="text-blue-700">左テーブル基準</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- GROUP BY / 集計関数 -->
            <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 bg-rose-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-chart-bar text-white"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800">GROUP BY - 集計</h3>
                </div>

                <div class="space-y-4">
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg"><code class="language-sql">-- 部署ごとの人数
SELECT department, COUNT(*) AS 人数
FROM users
GROUP BY department;

-- 集計結果の絞り込み（HAVING）
SELECT department, AVG(salary) AS 平均給与
FROM users
GROUP BY department
HAVING AVG(salary) > 500000;</code></pre>
                    </div>

                    <div class="bg-rose-50 border border-rose-200 rounded-lg p-4">
                        <h4 class="font-medium text-rose-800 mb-3">主要な集計関数</h4>
                        <div class="grid grid-cols-3 gap-2 text-sm">
                            <div class="bg-white rounded-lg p-2 text-center border border-rose-100">
                                <p class="font-mono text-rose-600 font-bold">COUNT</p>
                                <p class="text-xs text-slate-500">件数</p>
                            </div>
                            <div class="bg-white rounded-lg p-2 text-center border border-rose-100">
                                <p class="font-mono text-rose-600 font-bold">SUM</p>
                                <p class="text-xs text-slate-500">合計</p>
                            </div>
                            <div class="bg-white rounded-lg p-2 text-center border border-rose-100">
                                <p class="font-mono text-rose-600 font-bold">AVG</p>
                                <p class="text-xs text-slate-500">平均</p>
                            </div>
                            <div class="bg-white rounded-lg p-2 text-center border border-rose-100">
                                <p class="font-mono text-rose-600 font-bold">MAX</p>
                                <p class="text-xs text-slate-500">最大値</p>
                            </div>
                            <div class="bg-white rounded-lg p-2 text-center border border-rose-100">
                                <p class="font-mono text-rose-600 font-bold">MIN</p>
                                <p class="text-xs text-slate-500">最小値</p>
                            </div>
                            <div class="bg-white rounded-lg p-2 text-center border border-rose-100">
                                <p class="font-mono text-rose-600 font-bold">DISTINCT</p>
                                <p class="text-xs text-slate-500">重複除外</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- サブクエリ -->
            <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 bg-indigo-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-layer-group text-white"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800">サブクエリ</h3>
                </div>

                <div class="space-y-4">
                    <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3">
                        <p class="text-sm text-indigo-800">
                            <i class="fas fa-info-circle text-indigo-500 mr-2"></i>
                            クエリの中にクエリを入れる。括弧 <code class="bg-white px-1 rounded">()</code> で囲む。
                        </p>
                    </div>

                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg"><code class="language-sql">-- WHERE句でサブクエリ
SELECT * FROM users
WHERE department_id IN (
    SELECT id FROM departments
    WHERE location = '東京'
);

-- FROM句でサブクエリ（派生テーブル）
SELECT dept, avg_salary
FROM (
    SELECT department AS dept,
           AVG(salary) AS avg_salary
    FROM users
    GROUP BY department
) AS dept_stats
WHERE avg_salary > 400000;</code></pre>
                    </div>
                </div>
            </section>

        </div>

        <!-- データ操作セクション（フル幅） -->
        <section class="mt-6 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-edit text-white"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800">INSERT / UPDATE / DELETE - データ操作</h3>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- INSERT -->
                <div class="bg-emerald-50 border border-emerald-200 rounded-lg p-4">
                    <h4 class="font-bold text-emerald-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-plus-circle"></i>INSERT（挿入）
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-sql">-- 単一行挿入
INSERT INTO users
(name, email, age)
VALUES
('田中太郎',
 'tanaka@example.com',
 30);

-- 複数行挿入
INSERT INTO users
(name, email) VALUES
('佐藤', 'sato@ex.com'),
('鈴木', 'suzuki@ex.com');</code></pre>
                    </div>
                </div>

                <!-- UPDATE -->
                <div class="bg-amber-50 border border-amber-200 rounded-lg p-4">
                    <h4 class="font-bold text-amber-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-pen"></i>UPDATE（更新）
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-sql">-- 条件付き更新
UPDATE users
SET status = 'inactive',
    updated_at = NOW()
WHERE last_login <
  '2024-01-01';

-- 全件更新（危険！）
UPDATE users
SET is_verified = true;</code></pre>
                    </div>
                    <div class="mt-2 text-xs text-amber-700 flex items-center gap-1">
                        <i class="fas fa-exclamation-triangle"></i>
                        WHERE忘れに注意！
                    </div>
                </div>

                <!-- DELETE -->
                <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                    <h4 class="font-bold text-red-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-trash"></i>DELETE（削除）
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-sql">-- 条件付き削除
DELETE FROM users
WHERE status = 'deleted'
  AND created_at <
      '2023-01-01';

-- 全件削除（危険！）
DELETE FROM users;
-- または
TRUNCATE TABLE users;</code></pre>
                    </div>
                    <div class="mt-2 text-xs text-red-700 flex items-center gap-1">
                        <i class="fas fa-skull-crossbones"></i>
                        本番では要注意！
                    </div>
                </div>
            </div>
        </section>

        <!-- 実務Tips セクション -->
        <section class="mt-6 bg-slate-800 rounded-xl shadow-sm p-6 text-white">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-amber-400 rounded-lg flex items-center justify-center">
                    <i class="fas fa-star text-slate-800"></i>
                </div>
                <h3 class="text-lg font-bold">実務で役立つTips</h3>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="bg-white/10 rounded-lg p-4">
                    <h4 class="font-bold text-amber-300 mb-2 flex items-center gap-2">
                        <i class="fas fa-bolt"></i>インデックス
                    </h4>
                    <p class="text-sm text-slate-300">WHERE, JOIN, ORDER BYで使うカラムにはインデックスを検討</p>
                </div>

                <div class="bg-white/10 rounded-lg p-4">
                    <h4 class="font-bold text-amber-300 mb-2 flex items-center gap-2">
                        <i class="fas fa-search"></i>EXPLAIN
                    </h4>
                    <p class="text-sm text-slate-300">クエリの前に<code class="bg-white/20 px-1 rounded">EXPLAIN</code>をつけて実行計画を確認</p>
                </div>

                <div class="bg-white/10 rounded-lg p-4">
                    <h4 class="font-bold text-amber-300 mb-2 flex items-center gap-2">
                        <i class="fas fa-shield-alt"></i>SQLインジェクション対策
                    </h4>
                    <p class="text-sm text-slate-300">プレースホルダ（?や:name）を使い、文字列結合でSQL組み立てない</p>
                </div>

                <div class="bg-white/10 rounded-lg p-4">
                    <h4 class="font-bold text-amber-300 mb-2 flex items-center gap-2">
                        <i class="fas fa-undo"></i>トランザクション
                    </h4>
                    <p class="text-sm text-slate-300">複数の更新は<code class="bg-white/20 px-1 rounded">BEGIN</code>〜<code class="bg-white/20 px-1 rounded">COMMIT</code>で囲む</p>
                </div>
            </div>
        </section>

        <!-- SQL実行順序 -->
        <section class="mt-6 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-teal-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-list-ol text-white"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800">SQLの実行順序</h3>
            </div>

            <div class="flex flex-wrap items-center justify-center gap-2 md:gap-3">
                <div class="flex items-center gap-2 bg-teal-100 px-3 py-2 rounded-lg">
                    <span class="w-6 h-6 bg-teal-500 text-white rounded-full flex items-center justify-center text-sm font-bold">1</span>
                    <span class="font-mono font-bold text-teal-800">FROM</span>
                </div>
                <i class="fas fa-chevron-right text-teal-400 hidden md:block"></i>
                <div class="flex items-center gap-2 bg-teal-100 px-3 py-2 rounded-lg">
                    <span class="w-6 h-6 bg-teal-500 text-white rounded-full flex items-center justify-center text-sm font-bold">2</span>
                    <span class="font-mono font-bold text-teal-800">WHERE</span>
                </div>
                <i class="fas fa-chevron-right text-teal-400 hidden md:block"></i>
                <div class="flex items-center gap-2 bg-teal-100 px-3 py-2 rounded-lg">
                    <span class="w-6 h-6 bg-teal-500 text-white rounded-full flex items-center justify-center text-sm font-bold">3</span>
                    <span class="font-mono font-bold text-teal-800">GROUP BY</span>
                </div>
                <i class="fas fa-chevron-right text-teal-400 hidden md:block"></i>
                <div class="flex items-center gap-2 bg-teal-100 px-3 py-2 rounded-lg">
                    <span class="w-6 h-6 bg-teal-500 text-white rounded-full flex items-center justify-center text-sm font-bold">4</span>
                    <span class="font-mono font-bold text-teal-800">HAVING</span>
                </div>
                <i class="fas fa-chevron-right text-teal-400 hidden md:block"></i>
                <div class="flex items-center gap-2 bg-teal-100 px-3 py-2 rounded-lg">
                    <span class="w-6 h-6 bg-teal-500 text-white rounded-full flex items-center justify-center text-sm font-bold">5</span>
                    <span class="font-mono font-bold text-teal-800">SELECT</span>
                </div>
                <i class="fas fa-chevron-right text-teal-400 hidden md:block"></i>
                <div class="flex items-center gap-2 bg-teal-100 px-3 py-2 rounded-lg">
                    <span class="w-6 h-6 bg-teal-500 text-white rounded-full flex items-center justify-center text-sm font-bold">6</span>
                    <span class="font-mono font-bold text-teal-800">ORDER BY</span>
                </div>
                <i class="fas fa-chevron-right text-teal-400 hidden md:block"></i>
                <div class="flex items-center gap-2 bg-teal-100 px-3 py-2 rounded-lg">
                    <span class="w-6 h-6 bg-teal-500 text-white rounded-full flex items-center justify-center text-sm font-bold">7</span>
                    <span class="font-mono font-bold text-teal-800">LIMIT</span>
                </div>
            </div>

            <p class="text-center text-sm text-slate-500 mt-4">
                <i class="fas fa-info-circle mr-1"></i>
                書く順番と実行順序は異なります。SELECTで定義したエイリアスはWHEREでは使えません。
            </p>
        </section>

        <!-- よく使うパターン -->
        <section class="mt-6 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-violet-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-magic text-white"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800">ビジネスでよく使うパターン</h3>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-violet-50 border border-violet-200 rounded-lg p-4">
                    <h4 class="font-bold text-violet-800 mb-3">月別売上集計</h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-sql">SELECT
  DATE_FORMAT(order_date, '%Y-%m') AS 年月,
  COUNT(*) AS 注文数,
  SUM(amount) AS 売上合計
FROM orders
WHERE order_date >= '2024-01-01'
GROUP BY DATE_FORMAT(order_date, '%Y-%m')
ORDER BY 年月;</code></pre>
                    </div>
                </div>

                <div class="bg-violet-50 border border-violet-200 rounded-lg p-4">
                    <h4 class="font-bold text-violet-800 mb-3">ランキング取得</h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-sql">SELECT
  name,
  sales,
  RANK() OVER (ORDER BY sales DESC) AS 順位
FROM employees
ORDER BY 順位
LIMIT 10;</code></pre>
                    </div>
                </div>

                <div class="bg-violet-50 border border-violet-200 rounded-lg p-4">
                    <h4 class="font-bold text-violet-800 mb-3">重複データの検出</h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-sql">SELECT email, COUNT(*) AS cnt
FROM users
GROUP BY email
HAVING COUNT(*) > 1;</code></pre>
                    </div>
                </div>

                <div class="bg-violet-50 border border-violet-200 rounded-lg p-4">
                    <h4 class="font-bold text-violet-800 mb-3">CASE式で条件分岐</h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-sql">SELECT name,
  CASE
    WHEN age < 20 THEN '10代'
    WHEN age < 30 THEN '20代'
    WHEN age < 40 THEN '30代'
    ELSE '40代以上'
  END AS 年代
FROM users;</code></pre>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- フッター -->
    <footer class="bg-slate-800 text-slate-300 mt-12 no-print">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <p class="text-sm text-center">
                &copy; 2025 F-Circle. All rights reserved.<br>
                本資料はAIツールを活用し、人間による編集・監修のもと作成されています。
            </p>
        </div>
    </footer>
</body>
</html>
