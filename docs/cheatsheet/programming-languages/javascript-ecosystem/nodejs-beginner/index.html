<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node.js初心者 チートシート</title>

    <!-- ダークモード早期適用(フラッシュ防止) -->
    <script src="main.js"></script>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Node.js Green Theme
                        primary: {
                            50: '#ecfdf5',
                            100: '#d1fae5',
                            200: '#a7f3d0',
                            300: '#6ee7b7',
                            400: '#34d399',
                            500: '#10b981',
                            600: '#059669',
                            700: '#047857',
                            800: '#065f46',
                            900: '#064e3b',
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans JP"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Highlight.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- カスタムスタイル -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="font-sans bg-slate-50 text-slate-800 antialiased">
    <!-- ヘッダー -->
    <header class="header-rich header-emerald text-white py-4 shadow-lg no-print">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center backdrop-blur-sm border border-white/20">
                        <i class="fab fa-node-js text-2xl"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold">Node.js初心者 チートシート</h1>
                        <p class="text-sm text-white/80">サーバーサイドJavaScriptの基礎リファレンス</p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <!-- ダークモード切り替えボタン -->
                    <button id="dark-mode-toggle" class="w-10 h-10 flex items-center justify-center rounded-lg bg-white/20 hover:bg-white/30 transition" title="ダークモード切り替え">
                        <i class="fas fa-moon dark-icon"></i>
                        <i class="fas fa-sun light-icon hidden"></i>
                    </button>
                    <!-- 印刷ボタン -->
                    <button onclick="window.print()" class="hidden md:flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition">
                        <i class="fas fa-print"></i>
                        <span>印刷</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- ============================================
             イントロセクション
             ============================================ -->
        <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-8">
            <div class="flex items-start gap-4">
                <div class="flex-shrink-0 w-12 h-12 bg-primary-500 rounded-lg flex items-center justify-center">
                    <i class="fab fa-node-js text-white text-xl"></i>
                </div>
                <div>
                    <h2 class="text-xl font-bold text-slate-800 mb-2">Node.jsとは？</h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        Node.jsは、ChromeのV8 JavaScriptエンジン上に構築されたサーバーサイドJavaScript実行環境です。非同期I/Oとイベント駆動アーキテクチャにより、高速で効率的なWebアプリケーション開発を実現します。
                    </p>
                    <!-- タグ -->
                    <div class="flex flex-wrap gap-2">
                        <span class="px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-sm font-medium">
                            <i class="fas fa-tag mr-1"></i>サーバーサイド
                        </span>
                        <span class="px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm font-medium">
                            <i class="fas fa-tag mr-1"></i>非同期処理
                        </span>
                        <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium">
                            <i class="fas fa-tag mr-1"></i>npm
                        </span>
                        <span class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium">
                            <i class="fas fa-tag mr-1"></i>Express
                        </span>
                    </div>
                </div>
            </div>
        </section>

        <!-- ============================================
             2カラムグリッドレイアウト
             ============================================ -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

            <!-- ----------------------------------------
                 基本的なNode.js実行
                 ---------------------------------------- -->
            <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 bg-primary-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-play text-white"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800">基本的な実行</h3>
                </div>

                <div class="space-y-4">
                    <!-- Node.jsファイル実行 -->
                    <div>
                        <p class="text-sm text-slate-700 font-medium mb-2"><i class="fas fa-terminal text-primary-500 mr-1"></i>Node.jsファイルを実行</p>
                        <div class="code-block-wrapper">
                            <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                                <i class="fas fa-copy"></i>
                            </button>
                            <pre class="rounded-lg"><code class="language-bash">node app.js</code></pre>
                        </div>
                    </div>

                    <!-- REPL起動 -->
                    <div>
                        <p class="text-sm text-slate-700 font-medium mb-2"><i class="fas fa-code text-primary-500 mr-1"></i>対話型モード (REPL)</p>
                        <div class="code-block-wrapper">
                            <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                                <i class="fas fa-copy"></i>
                            </button>
                            <pre class="rounded-lg"><code class="language-bash">node
> console.log("Hello, Node.js!")
> .exit</code></pre>
                        </div>
                    </div>

                    <!-- Hello World -->
                    <div>
                        <p class="text-sm text-slate-700 font-medium mb-2"><i class="fas fa-file-code text-primary-500 mr-1"></i>Hello World (app.js)</p>
                        <div class="code-block-wrapper">
                            <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                                <i class="fas fa-copy"></i>
                            </button>
                            <pre class="rounded-lg"><code class="language-javascript">console.log("Hello, Node.js!");
console.log("Node version:", process.version);</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ----------------------------------------
                 モジュールシステム
                 ---------------------------------------- -->
            <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-cubes text-white"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800">モジュールシステム</h3>
                </div>

                <div class="space-y-4">
                    <!-- CommonJS (require/module.exports) -->
                    <div>
                        <p class="text-sm text-slate-700 font-medium mb-2"><i class="fas fa-box text-blue-500 mr-1"></i>CommonJS (require)</p>
                        <div class="code-block-wrapper">
                            <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                                <i class="fas fa-copy"></i>
                            </button>
                            <pre class="rounded-lg"><code class="language-javascript">// モジュールのエクスポート (utils.js)
module.exports = {
    add: (a, b) => a + b,
    multiply: (a, b) => a * b
};

// モジュールのインポート (app.js)
const utils = require('./utils');
console.log(utils.add(2, 3)); // 5</code></pre>
                        </div>
                    </div>

                    <!-- ES Modules (import/export) -->
                    <div>
                        <p class="text-sm text-slate-700 font-medium mb-2"><i class="fas fa-cube text-blue-500 mr-1"></i>ES Modules (import)</p>
                        <div class="code-block-wrapper">
                            <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                                <i class="fas fa-copy"></i>
                            </button>
                            <pre class="rounded-lg"><code class="language-javascript">// utils.mjs または package.json に "type": "module"
export const add = (a, b) => a + b;
export const multiply = (a, b) => a * b;

// app.mjs
import { add, multiply } from './utils.mjs';
console.log(add(2, 3)); // 5</code></pre>
                        </div>
                    </div>

                    <!-- ヒント -->
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                        <p class="text-sm text-blue-800">
                            <i class="fas fa-lightbulb text-blue-500 mr-2"></i>
                            package.jsonに<code class="bg-blue-100 px-1 rounded">"type": "module"</code>を追加すると、.jsファイルでES Modulesが使えます
                        </p>
                    </div>
                </div>
            </section>

            <!-- ----------------------------------------
                 npm基本コマンド
                 ---------------------------------------- -->
            <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center">
                        <i class="fab fa-npm text-white"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800">npm基本操作</h3>
                </div>

                <div class="space-y-4">
                    <!-- package.json作成 -->
                    <div>
                        <p class="text-sm text-slate-700 font-medium mb-2"><i class="fas fa-file-alt text-red-500 mr-1"></i>package.json作成</p>
                        <div class="code-block-wrapper">
                            <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                                <i class="fas fa-copy"></i>
                            </button>
                            <pre class="rounded-lg"><code class="language-bash">npm init -y</code></pre>
                        </div>
                    </div>

                    <!-- パッケージインストール -->
                    <div>
                        <p class="text-sm text-slate-700 font-medium mb-2"><i class="fas fa-download text-red-500 mr-1"></i>パッケージインストール</p>
                        <div class="code-block-wrapper">
                            <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                                <i class="fas fa-copy"></i>
                            </button>
                            <pre class="rounded-lg"><code class="language-bash"># 本番依存関係
npm install express

# 開発依存関係
npm install --save-dev nodemon

# グローバルインストール
npm install -g typescript</code></pre>
                        </div>
                    </div>

                    <!-- パッケージアンインストール -->
                    <div>
                        <p class="text-sm text-slate-700 font-medium mb-2"><i class="fas fa-trash text-red-500 mr-1"></i>パッケージ削除</p>
                        <div class="code-block-wrapper">
                            <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                                <i class="fas fa-copy"></i>
                            </button>
                            <pre class="rounded-lg"><code class="language-bash">npm uninstall express</code></pre>
                        </div>
                    </div>

                    <!-- その他コマンド -->
                    <div class="grid grid-cols-2 gap-3 text-sm">
                        <div class="bg-red-50 border border-red-200 rounded-lg p-3">
                            <p class="font-medium text-red-800 mb-1">依存関係インストール</p>
                            <code class="text-xs text-red-700">npm install</code>
                        </div>
                        <div class="bg-red-50 border border-red-200 rounded-lg p-3">
                            <p class="font-medium text-red-800 mb-1">パッケージ更新</p>
                            <code class="text-xs text-red-700">npm update</code>
                        </div>
                        <div class="bg-red-50 border border-red-200 rounded-lg p-3">
                            <p class="font-medium text-red-800 mb-1">スクリプト実行</p>
                            <code class="text-xs text-red-700">npm run [script]</code>
                        </div>
                        <div class="bg-red-50 border border-red-200 rounded-lg p-3">
                            <p class="font-medium text-red-800 mb-1">パッケージ検索</p>
                            <code class="text-xs text-red-700">npm search express</code>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ----------------------------------------
                 非同期処理
                 ---------------------------------------- -->
            <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-sync-alt text-white"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800">非同期処理パターン</h3>
                </div>

                <div class="space-y-4">
                    <!-- Promise -->
                    <div>
                        <p class="text-sm text-slate-700 font-medium mb-2"><i class="fas fa-hourglass-half text-purple-500 mr-1"></i>Promise</p>
                        <div class="code-block-wrapper">
                            <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                                <i class="fas fa-copy"></i>
                            </button>
                            <pre class="rounded-lg"><code class="language-javascript">const fs = require('fs').promises;

fs.readFile('data.txt', 'utf-8')
  .then(data => console.log(data))
  .catch(err => console.error(err));</code></pre>
                        </div>
                    </div>

                    <!-- async/await -->
                    <div>
                        <p class="text-sm text-slate-700 font-medium mb-2"><i class="fas fa-bolt text-purple-500 mr-1"></i>async/await (推奨)</p>
                        <div class="code-block-wrapper">
                            <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                                <i class="fas fa-copy"></i>
                            </button>
                            <pre class="rounded-lg"><code class="language-javascript">const fs = require('fs').promises;

async function readData() {
  try {
    const data = await fs.readFile('data.txt', 'utf-8');
    console.log(data);
  } catch (err) {
    console.error(err);
  }
}

readData();</code></pre>
                        </div>
                    </div>

                    <!-- ヒント -->
                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                        <p class="text-sm text-purple-800">
                            <i class="fas fa-lightbulb text-purple-500 mr-2"></i>
                            async/awaitは可読性が高く、エラーハンドリングがしやすいため、現代的なNode.js開発では推奨されています
                        </p>
                    </div>
                </div>
            </section>

        </div>

        <!-- ============================================
             組み込みモジュール
             ============================================ -->
        <section class="mt-6 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-toolbox text-white"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800">よく使う組み込みモジュール</h3>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- fs (ファイルシステム) -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <h4 class="font-bold text-blue-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-folder-open"></i>fs - ファイルシステム
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-javascript">const fs = require('fs').promises;

// ファイル読み込み
const data = await fs.readFile('file.txt', 'utf-8');

// ファイル書き込み
await fs.writeFile('output.txt', 'Hello');</code></pre>
                    </div>
                </div>

                <!-- path -->
                <div class="bg-teal-50 border border-teal-200 rounded-lg p-4">
                    <h4 class="font-bold text-teal-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-route"></i>path - パス操作
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-javascript">const path = require('path');

path.join('/users', 'john', 'file.txt');
// '/users/john/file.txt'

path.basename('/users/john/file.txt');
// 'file.txt'</code></pre>
                    </div>
                </div>

                <!-- http -->
                <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                    <h4 class="font-bold text-green-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-server"></i>http - HTTPサーバー
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-javascript">const http = require('http');

const server = http.createServer((req, res) => {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
});

server.listen(3000);</code></pre>
                    </div>
                </div>

                <!-- os -->
                <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-4">
                    <h4 class="font-bold text-indigo-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-desktop"></i>os - OS情報
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-javascript">const os = require('os');

console.log(os.platform()); // 'darwin', 'win32'
console.log(os.arch());     // 'x64', 'arm64'
console.log(os.cpus().length); // CPUコア数</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- ============================================
             Expressフレームワーク
             ============================================ -->
        <section class="mt-6 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-slate-700 rounded-lg flex items-center justify-center">
                    <i class="fas fa-bolt text-white"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800">Express.js基本パターン</h3>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- 基本セットアップ -->
                <div class="bg-slate-50 border border-slate-200 rounded-lg p-4">
                    <h4 class="font-bold text-slate-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-rocket"></i>基本セットアップ
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-javascript">const express = require('express');
const app = express();

// JSONボディパーサー
app.use(express.json());

// ルート定義
app.get('/', (req, res) => {
  res.send('Hello Express!');
});

app.listen(3000, () => {
  console.log('Server running on port 3000');
});</code></pre>
                    </div>
                </div>

                <!-- ルーティング -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <h4 class="font-bold text-blue-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-route"></i>ルーティング
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-javascript">// GETリクエスト
app.get('/users', (req, res) => {
  res.json({ users: [] });
});

// POSTリクエスト
app.post('/users', (req, res) => {
  const user = req.body;
  res.status(201).json(user);
});

// URLパラメータ
app.get('/users/:id', (req, res) => {
  const id = req.params.id;
  res.json({ id });
});</code></pre>
                    </div>
                </div>

                <!-- ミドルウェア -->
                <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                    <h4 class="font-bold text-purple-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-layer-group"></i>ミドルウェア
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-javascript">// グローバルミドルウェア
app.use((req, res, next) => {
  console.log(`${req.method} ${req.path}`);
  next();
});

// ルート固有ミドルウェア
const auth = (req, res, next) => {
  if (req.headers.authorization) {
    next();
  } else {
    res.status(401).json({ error: 'Unauthorized' });
  }
};

app.get('/admin', auth, (req, res) => {
  res.send('Admin page');
});</code></pre>
                    </div>
                </div>

                <!-- エラーハンドリング -->
                <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                    <h4 class="font-bold text-red-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-exclamation-triangle"></i>エラーハンドリング
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-javascript">// 404エラー
app.use((req, res) => {
  res.status(404).json({ error: 'Not Found' });
});

// グローバルエラーハンドラ
app.use((err, req, res, next) => {
  console.error(err.stack);
  res.status(500).json({
    error: 'Internal Server Error'
  });
});</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- ============================================
             ダーク背景のTipsセクション
             ============================================ -->
        <section class="mt-6 bg-slate-800 rounded-xl shadow-sm p-6 text-white">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-amber-400 rounded-lg flex items-center justify-center">
                    <i class="fas fa-star text-slate-800"></i>
                </div>
                <h3 class="text-lg font-bold">実務で役立つTips</h3>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="bg-white/10 rounded-lg p-4">
                    <h4 class="font-bold text-amber-300 mb-2 flex items-center gap-2">
                        <i class="fas fa-sync"></i>nodemon
                    </h4>
                    <p class="text-sm text-slate-300 mb-2">ファイル変更を自動検知して再起動</p>
                    <code class="text-xs text-slate-400 block bg-slate-900/50 p-2 rounded">npm i -D nodemon<br>npx nodemon app.js</code>
                </div>

                <div class="bg-white/10 rounded-lg p-4">
                    <h4 class="font-bold text-amber-300 mb-2 flex items-center gap-2">
                        <i class="fas fa-file-alt"></i>dotenv
                    </h4>
                    <p class="text-sm text-slate-300 mb-2">環境変数を.envファイルから読み込み</p>
                    <code class="text-xs text-slate-400 block bg-slate-900/50 p-2 rounded">npm i dotenv<br>require('dotenv').config();</code>
                </div>

                <div class="bg-white/10 rounded-lg p-4">
                    <h4 class="font-bold text-amber-300 mb-2 flex items-center gap-2">
                        <i class="fas fa-shield-alt"></i>CORS対応
                    </h4>
                    <p class="text-sm text-slate-300 mb-2">クロスオリジンリクエストを許可</p>
                    <code class="text-xs text-slate-400 block bg-slate-900/50 p-2 rounded">npm i cors<br>app.use(cors());</code>
                </div>

                <div class="bg-white/10 rounded-lg p-4">
                    <h4 class="font-bold text-amber-300 mb-2 flex items-center gap-2">
                        <i class="fas fa-bug"></i>デバッグ
                    </h4>
                    <p class="text-sm text-slate-300 mb-2">VS Codeでデバッグ実行</p>
                    <code class="text-xs text-slate-400 block bg-slate-900/50 p-2 rounded">node --inspect app.js<br>F5でアタッチ</code>
                </div>
            </div>
        </section>

        <!-- ============================================
             ファイル操作パターン
             ============================================ -->
        <section class="mt-6 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-indigo-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-file-code text-white"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800">よく使うファイル操作</h3>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- ファイル読み書き -->
                <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-4">
                    <h4 class="font-bold text-indigo-800 mb-3">ファイルの読み書き</h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-javascript">const fs = require('fs').promises;

// ファイル読み込み
const data = await fs.readFile('data.txt', 'utf-8');

// ファイル書き込み
await fs.writeFile('output.txt', data);

// ファイル追記
await fs.appendFile('log.txt', 'New log\n');</code></pre>
                    </div>
                </div>

                <!-- ディレクトリ操作 -->
                <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-4">
                    <h4 class="font-bold text-indigo-800 mb-3">ディレクトリ操作</h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-javascript">const fs = require('fs').promises;

// ディレクトリ作成
await fs.mkdir('uploads', { recursive: true });

// ファイル一覧取得
const files = await fs.readdir('./data');

// ファイル/ディレクトリ削除
await fs.rm('temp.txt');
await fs.rm('uploads', { recursive: true });</code></pre>
                    </div>
                </div>

                <!-- JSON操作 -->
                <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-4">
                    <h4 class="font-bold text-indigo-800 mb-3">JSONファイル操作</h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-javascript">const fs = require('fs').promises;

// JSON読み込み
const json = await fs.readFile('data.json', 'utf-8');
const data = JSON.parse(json);

// JSON書き込み
const output = JSON.stringify(data, null, 2);
await fs.writeFile('output.json', output);</code></pre>
                    </div>
                </div>

                <!-- ストリーム処理 -->
                <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-4">
                    <h4 class="font-bold text-indigo-800 mb-3">ストリーム処理(大容量)</h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-javascript">const fs = require('fs');

// ファイルコピー(ストリーム)
const readStream = fs.createReadStream('large.txt');
const writeStream = fs.createWriteStream('copy.txt');

readStream.pipe(writeStream);

writeStream.on('finish', () => {
  console.log('Copy completed');
});</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- ============================================
             package.jsonスクリプト例
             ============================================ -->
        <section class="mt-6 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-violet-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-scroll text-white"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800">package.jsonスクリプト例</h3>
            </div>

            <div class="code-block-wrapper">
                <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                    <i class="fas fa-copy"></i>
                </button>
                <pre class="rounded-lg"><code class="language-json">{
  "name": "my-nodejs-app",
  "version": "1.0.0",
  "description": "My Node.js Application",
  "main": "app.js",
  "scripts": {
    "start": "node app.js",
    "dev": "nodemon app.js",
    "test": "jest",
    "lint": "eslint ."
  },
  "dependencies": {
    "express": "^4.18.0",
    "dotenv": "^16.0.0"
  },
  "devDependencies": {
    "nodemon": "^3.0.0",
    "jest": "^29.0.0"
  }
}</code></pre>
            </div>

            <div class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-3">
                <div class="bg-violet-50 border border-violet-200 rounded-lg p-3">
                    <p class="text-sm font-medium text-violet-800 mb-1">本番実行</p>
                    <code class="text-xs text-violet-700">npm start</code>
                </div>
                <div class="bg-violet-50 border border-violet-200 rounded-lg p-3">
                    <p class="text-sm font-medium text-violet-800 mb-1">開発実行</p>
                    <code class="text-xs text-violet-700">npm run dev</code>
                </div>
                <div class="bg-violet-50 border border-violet-200 rounded-lg p-3">
                    <p class="text-sm font-medium text-violet-800 mb-1">テスト実行</p>
                    <code class="text-xs text-violet-700">npm test</code>
                </div>
                <div class="bg-violet-50 border border-violet-200 rounded-lg p-3">
                    <p class="text-sm font-medium text-violet-800 mb-1">Lint実行</p>
                    <code class="text-xs text-violet-700">npm run lint</code>
                </div>
            </div>
        </section>

        <!-- ============================================
             環境変数とプロセス情報
             ============================================ -->
        <section class="mt-6 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-teal-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-cog text-white"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800">環境変数とプロセス情報</h3>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- 環境変数 -->
                <div class="bg-teal-50 border border-teal-200 rounded-lg p-4">
                    <h4 class="font-bold text-teal-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-key"></i>環境変数アクセス
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-javascript">// 環境変数取得
const port = process.env.PORT || 3000;
const dbUrl = process.env.DATABASE_URL;

// .envファイルを使う場合
require('dotenv').config();
console.log(process.env.API_KEY);</code></pre>
                    </div>
                    <div class="mt-3 bg-teal-100 rounded p-2">
                        <p class="text-xs text-teal-800"><strong>.env</strong></p>
                        <code class="text-xs text-teal-700">PORT=3000<br>DATABASE_URL=mongodb://localhost</code>
                    </div>
                </div>

                <!-- プロセス情報 -->
                <div class="bg-teal-50 border border-teal-200 rounded-lg p-4">
                    <h4 class="font-bold text-teal-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-info-circle"></i>プロセス情報
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-javascript">// Node.jsバージョン
console.log(process.version); // v18.17.0

// プラットフォーム
console.log(process.platform); // darwin, win32

// カレントディレクトリ
console.log(process.cwd());

// コマンドライン引数
console.log(process.argv);</code></pre>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- フッター -->
    <footer class="bg-slate-800 text-slate-300 mt-12 no-print">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <p class="text-sm text-center">
                &copy; 2025 F-Circle. All rights reserved.<br>
                本資料はAIツールを活用し、人間による編集・監修のもと作成されています。
            </p>
        </div>
    </footer>
</body>
</html>
