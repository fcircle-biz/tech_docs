<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JDBC チートシート</title>

    <!-- ダークモード早期適用（フラッシュ防止） -->
    <script src="main.js"></script>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Orange (Java)
                        primary: {
                            50: '#fff7ed',
                            100: '#ffedd5',
                            200: '#fed7aa',
                            300: '#fdba74',
                            400: '#fb923c',
                            500: '#f97316',
                            600: '#ea580c',
                            700: '#c2410c',
                            800: '#9a3412',
                            900: '#7c2d12',
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans JP"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Highlight.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- カスタムスタイル -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="font-sans bg-slate-50 text-slate-800 antialiased">
    <!-- ヘッダー -->
    <header class="header-rich header-orange text-white py-4 shadow-lg no-print">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <div class="w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center backdrop-blur-sm border border-white/20">
                        <i class="fab fa-java text-2xl"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold">JDBC チートシート</h1>
                        <p class="text-sm text-white/80">Java Database Connectivity クイックリファレンス</p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <!-- ダークモード切り替えボタン -->
                    <button id="dark-mode-toggle" class="w-10 h-10 flex items-center justify-center rounded-lg bg-white/20 hover:bg-white/30 transition" title="ダークモード切り替え">
                        <i class="fas fa-moon dark-icon"></i>
                        <i class="fas fa-sun light-icon hidden"></i>
                    </button>
                    <!-- 印刷ボタン -->
                    <button onclick="window.print()" class="hidden md:flex items-center gap-2 bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition">
                        <i class="fas fa-print"></i>
                        <span>印刷</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- ============================================
             イントロセクション
             ============================================ -->
        <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-8">
            <div class="flex items-start gap-4">
                <div class="flex-shrink-0 w-12 h-12 bg-primary-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-database text-white text-xl"></i>
                </div>
                <div>
                    <h2 class="text-xl font-bold text-slate-800 mb-2">JDBCとは？</h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        JDBC（Java Database Connectivity）は、Javaアプリケーションからデータベースへアクセスするための標準API。データベースの種類に依存しない統一的なインターフェースを提供し、CRUD操作、トランザクション管理、バッチ処理などを実現します。
                    </p>
                    <!-- タグ -->
                    <div class="flex flex-wrap gap-2">
                        <span class="px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-sm font-medium">
                            <i class="fas fa-tag mr-1"></i>データベース接続
                        </span>
                        <span class="px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm font-medium">
                            <i class="fas fa-tag mr-1"></i>SQL実行
                        </span>
                        <span class="px-3 py-1 bg-amber-100 text-amber-700 rounded-full text-sm font-medium">
                            <i class="fas fa-tag mr-1"></i>トランザクション
                        </span>
                    </div>
                </div>
            </div>
        </section>

        <!-- ============================================
             2カラムグリッドレイアウト
             ============================================ -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

            <!-- ----------------------------------------
                 ドライバ読み込みと接続
                 ---------------------------------------- -->
            <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 bg-primary-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-plug text-white"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800">ドライバ読み込みと接続</h3>
                </div>

                <div class="space-y-4">
                    <!-- ヒントボックス -->
                    <div class="bg-primary-50 border border-primary-200 rounded-lg p-3">
                        <p class="text-sm text-primary-800">
                            <i class="fas fa-lightbulb text-primary-500 mr-2"></i>
                            JDBC 4.0以降はドライバの明示的なロードが不要（自動検出）
                        </p>
                    </div>

                    <!-- コードブロック -->
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg"><code class="language-java">// データベース接続
String url = "jdbc:mysql://localhost:3306/mydb";
String user = "username";
String password = "password";

try (Connection conn = DriverManager.getConnection(url, user, password)) {
    // 接続成功
    System.out.println("接続成功");
} catch (SQLException e) {
    e.printStackTrace();
}</code></pre>
                    </div>

                    <!-- 補足テキスト -->
                    <div class="text-sm text-slate-600 space-y-1">
                        <p><span class="text-primary-600 font-medium">●</span> try-with-resources で自動クローズ</p>
                        <p><span class="text-primary-600 font-medium">●</span> URL形式: jdbc:[subprotocol]://[host]:[port]/[database]</p>
                    </div>
                </div>
            </section>

            <!-- ----------------------------------------
                 主要インターフェース
                 ---------------------------------------- -->
            <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <div class="flex items-center gap-3 mb-4">
                    <div class="w-10 h-10 bg-indigo-500 rounded-lg flex items-center justify-center">
                        <i class="fas fa-code text-white"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800">主要インターフェース</h3>
                </div>

                <div class="space-y-3">
                    <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3">
                        <p class="font-bold text-indigo-800 mb-1">Connection</p>
                        <p class="text-sm text-indigo-700">データベースとの接続を管理</p>
                    </div>

                    <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3">
                        <p class="font-bold text-indigo-800 mb-1">Statement</p>
                        <p class="text-sm text-indigo-700">静的SQL文を実行（PreparedStatementを推奨）</p>
                    </div>

                    <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3">
                        <p class="font-bold text-indigo-800 mb-1">PreparedStatement</p>
                        <p class="text-sm text-indigo-700">パラメータ付きSQL文を実行（SQLインジェクション対策）</p>
                    </div>

                    <div class="bg-indigo-50 border border-indigo-200 rounded-lg p-3">
                        <p class="font-bold text-indigo-800 mb-1">ResultSet</p>
                        <p class="text-sm text-indigo-700">SELECT文の結果セットを保持</p>
                    </div>
                </div>
            </section>

        </div>

        <!-- ============================================
             CRUD操作（フル幅セクション）
             ============================================ -->
        <section class="mt-6 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-violet-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-database text-white"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800">CRUD操作</h3>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- SELECT -->
                <div class="bg-primary-50 border border-primary-200 rounded-lg p-4">
                    <h4 class="font-bold text-primary-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-search"></i>SELECT（データ取得）
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-java">String sql = "SELECT * FROM users WHERE age > ?";
try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
    pstmt.setInt(1, 20);

    try (ResultSet rs = pstmt.executeQuery()) {
        while (rs.next()) {
            int id = rs.getInt("id");
            String name = rs.getString("name");
            int age = rs.getInt("age");
            System.out.println(id + ", " + name + ", " + age);
        }
    }
}</code></pre>
                    </div>
                </div>

                <!-- INSERT -->
                <div class="bg-emerald-50 border border-emerald-200 rounded-lg p-4">
                    <h4 class="font-bold text-emerald-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-plus-circle"></i>INSERT（データ追加）
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-java">String sql = "INSERT INTO users (name, age) VALUES (?, ?)";
try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
    pstmt.setString(1, "山田太郎");
    pstmt.setInt(2, 25);

    int rowsAffected = pstmt.executeUpdate();
    System.out.println(rowsAffected + "件追加されました");
}</code></pre>
                    </div>
                </div>

                <!-- UPDATE -->
                <div class="bg-amber-50 border border-amber-200 rounded-lg p-4">
                    <h4 class="font-bold text-amber-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-pen"></i>UPDATE（データ更新）
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-java">String sql = "UPDATE users SET age = ? WHERE id = ?";
try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
    pstmt.setInt(1, 30);
    pstmt.setInt(2, 1);

    int rowsAffected = pstmt.executeUpdate();
    System.out.println(rowsAffected + "件更新されました");
}</code></pre>
                    </div>
                    <div class="mt-2 text-xs text-amber-700 flex items-center gap-1">
                        <i class="fas fa-exclamation-triangle"></i>
                        WHERE句を忘れると全レコードが対象
                    </div>
                </div>

                <!-- DELETE -->
                <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                    <h4 class="font-bold text-red-800 mb-3 flex items-center gap-2">
                        <i class="fas fa-trash"></i>DELETE（データ削除）
                    </h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-java">String sql = "DELETE FROM users WHERE id = ?";
try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
    pstmt.setInt(1, 1);

    int rowsAffected = pstmt.executeUpdate();
    System.out.println(rowsAffected + "件削除されました");
}</code></pre>
                    </div>
                    <div class="mt-2 text-xs text-red-700 flex items-center gap-1">
                        <i class="fas fa-skull-crossbones"></i>
                        削除は元に戻せません！WHERE句を必ず確認
                    </div>
                </div>
            </div>
        </section>

        <!-- ============================================
             トランザクション管理
             ============================================ -->
        <section class="mt-6 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-sync-alt text-white"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800">トランザクション管理</h3>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                <!-- 基本的なトランザクション -->
                <div class="space-y-3">
                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                        <p class="text-sm text-purple-800">
                            <i class="fas fa-info-circle text-purple-500 mr-2"></i>
                            デフォルトは自動コミット（autoCommit = true）
                        </p>
                    </div>

                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg"><code class="language-java">Connection conn = null;
try {
    conn = DriverManager.getConnection(url, user, password);

    // 自動コミットを無効化
    conn.setAutoCommit(false);

    // SQL実行
    String sql1 = "INSERT INTO accounts (name, balance) VALUES (?, ?)";
    try (PreparedStatement pstmt = conn.prepareStatement(sql1)) {
        pstmt.setString(1, "口座A");
        pstmt.setInt(2, 1000);
        pstmt.executeUpdate();
    }

    String sql2 = "INSERT INTO accounts (name, balance) VALUES (?, ?)";
    try (PreparedStatement pstmt = conn.prepareStatement(sql2)) {
        pstmt.setString(1, "口座B");
        pstmt.setInt(2, 2000);
        pstmt.executeUpdate();
    }

    // コミット
    conn.commit();
    System.out.println("トランザクション成功");

} catch (SQLException e) {
    // ロールバック
    if (conn != null) {
        try {
            conn.rollback();
            System.out.println("トランザクションをロールバック");
        } catch (SQLException ex) {
            ex.printStackTrace();
        }
    }
    e.printStackTrace();
} finally {
    if (conn != null) {
        try {
            conn.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}</code></pre>
                    </div>
                </div>

                <!-- トランザクション関連メソッド -->
                <div class="space-y-3">
                    <h4 class="font-bold text-purple-800 mb-3">主要メソッド</h4>

                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                        <p class="font-mono text-sm text-purple-800 mb-1">setAutoCommit(false)</p>
                        <p class="text-xs text-purple-700">自動コミットを無効化</p>
                    </div>

                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                        <p class="font-mono text-sm text-purple-800 mb-1">commit()</p>
                        <p class="text-xs text-purple-700">変更をデータベースに確定</p>
                    </div>

                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                        <p class="font-mono text-sm text-purple-800 mb-1">rollback()</p>
                        <p class="text-xs text-purple-700">変更を取り消して元に戻す</p>
                    </div>

                    <div class="bg-amber-50 border border-amber-200 rounded-lg p-3 mt-4">
                        <p class="text-sm text-amber-800">
                            <i class="fas fa-exclamation-triangle text-amber-500 mr-2"></i>
                            <strong>注意:</strong> autoCommit=false の状態で接続をクローズすると、未コミットの変更は失われます
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ============================================
             バッチ処理
             ============================================ -->
        <section class="mt-6 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-teal-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-layer-group text-white"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800">バッチ処理</h3>
            </div>

            <div class="bg-teal-50 border border-teal-200 rounded-lg p-3 mb-4">
                <p class="text-sm text-teal-800">
                    <i class="fas fa-lightbulb text-teal-500 mr-2"></i>
                    複数のSQL文をまとめて実行することでパフォーマンス向上
                </p>
            </div>

            <div class="code-block-wrapper">
                <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                    <i class="fas fa-copy"></i>
                </button>
                <pre class="rounded-lg"><code class="language-java">String sql = "INSERT INTO users (name, age) VALUES (?, ?)";
try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
    // バッチに追加
    pstmt.setString(1, "山田太郎");
    pstmt.setInt(2, 25);
    pstmt.addBatch();

    pstmt.setString(1, "佐藤花子");
    pstmt.setInt(2, 30);
    pstmt.addBatch();

    pstmt.setString(1, "鈴木一郎");
    pstmt.setInt(2, 28);
    pstmt.addBatch();

    // バッチ実行
    int[] results = pstmt.executeBatch();
    System.out.println(results.length + "件のバッチ処理が完了");
}</code></pre>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mt-4">
                <div class="bg-teal-100 border border-teal-200 rounded-lg p-3">
                    <p class="font-mono text-sm text-teal-800 mb-1">addBatch()</p>
                    <p class="text-xs text-teal-700">バッチにSQL文を追加</p>
                </div>
                <div class="bg-teal-100 border border-teal-200 rounded-lg p-3">
                    <p class="font-mono text-sm text-teal-800 mb-1">executeBatch()</p>
                    <p class="text-xs text-teal-700">バッチ内の全SQL文を実行</p>
                </div>
                <div class="bg-teal-100 border border-teal-200 rounded-lg p-3">
                    <p class="font-mono text-sm text-teal-800 mb-1">clearBatch()</p>
                    <p class="text-xs text-teal-700">バッチをクリア</p>
                </div>
            </div>
        </section>

        <!-- ============================================
             例外処理
             ============================================ -->
        <section class="mt-6 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-exclamation-triangle text-white"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800">例外処理（SQLException）</h3>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                <div>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg"><code class="language-java">try {
    // JDBC処理
    Connection conn = DriverManager.getConnection(url, user, password);
    // ...
} catch (SQLException e) {
    System.err.println("SQLエラー: " + e.getMessage());
    System.err.println("SQLState: " + e.getSQLState());
    System.err.println("ErrorCode: " + e.getErrorCode());
    e.printStackTrace();
}</code></pre>
                    </div>
                </div>

                <div class="space-y-3">
                    <h4 class="font-bold text-red-800 mb-3">SQLExceptionのメソッド</h4>

                    <div class="bg-red-50 border border-red-200 rounded-lg p-3">
                        <p class="font-mono text-sm text-red-800 mb-1">getMessage()</p>
                        <p class="text-xs text-red-700">エラーメッセージを取得</p>
                    </div>

                    <div class="bg-red-50 border border-red-200 rounded-lg p-3">
                        <p class="font-mono text-sm text-red-800 mb-1">getSQLState()</p>
                        <p class="text-xs text-red-700">SQLStateコードを取得</p>
                    </div>

                    <div class="bg-red-50 border border-red-200 rounded-lg p-3">
                        <p class="font-mono text-sm text-red-800 mb-1">getErrorCode()</p>
                        <p class="text-xs text-red-700">ベンダー固有のエラーコードを取得</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ============================================
             実務で役立つTips
             ============================================ -->
        <section class="mt-6 bg-slate-800 rounded-xl shadow-sm p-6 text-white">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-amber-400 rounded-lg flex items-center justify-center">
                    <i class="fas fa-star text-slate-800"></i>
                </div>
                <h3 class="text-lg font-bold">実務で役立つTips</h3>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="bg-white/10 rounded-lg p-4">
                    <h4 class="font-bold text-amber-300 mb-2 flex items-center gap-2">
                        <i class="fas fa-shield-alt"></i>SQLインジェクション対策
                    </h4>
                    <p class="text-sm text-slate-300">必ずPreparedStatementを使用し、文字列結合でSQLを組み立てない</p>
                </div>

                <div class="bg-white/10 rounded-lg p-4">
                    <h4 class="font-bold text-amber-300 mb-2 flex items-center gap-2">
                        <i class="fas fa-lock-open"></i>リソース管理
                    </h4>
                    <p class="text-sm text-slate-300">try-with-resourcesを使ってConnection、Statement、ResultSetを確実にクローズ</p>
                </div>

                <div class="bg-white/10 rounded-lg p-4">
                    <h4 class="font-bold text-amber-300 mb-2 flex items-center gap-2">
                        <i class="fas fa-swimming-pool"></i>接続プール
                    </h4>
                    <p class="text-sm text-slate-300">実運用ではHikariCP等の接続プールライブラリを使用してパフォーマンス向上</p>
                </div>

                <div class="bg-white/10 rounded-lg p-4">
                    <h4 class="font-bold text-amber-300 mb-2 flex items-center gap-2">
                        <i class="fas fa-search"></i>NULL値の処理
                    </h4>
                    <p class="text-sm text-slate-300">ResultSet.wasNull()でNULL判定を行う（getString等はnullを返す）</p>
                </div>
            </div>
        </section>

        <!-- ============================================
             処理フロー
             ============================================ -->
        <section class="mt-6 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-list-ol text-white"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800">JDBC実行フロー</h3>
            </div>

            <div class="flex flex-wrap items-center justify-center gap-2 md:gap-3">
                <div class="flex items-center gap-2 bg-blue-100 px-3 py-2 rounded-lg">
                    <span class="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold">1</span>
                    <span class="font-mono font-bold text-blue-800">ドライバロード</span>
                </div>
                <i class="fas fa-chevron-right text-blue-400 hidden md:block"></i>
                <div class="flex items-center gap-2 bg-blue-100 px-3 py-2 rounded-lg">
                    <span class="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold">2</span>
                    <span class="font-mono font-bold text-blue-800">接続確立</span>
                </div>
                <i class="fas fa-chevron-right text-blue-400 hidden md:block"></i>
                <div class="flex items-center gap-2 bg-blue-100 px-3 py-2 rounded-lg">
                    <span class="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold">3</span>
                    <span class="font-mono font-bold text-blue-800">SQL実行</span>
                </div>
                <i class="fas fa-chevron-right text-blue-400 hidden md:block"></i>
                <div class="flex items-center gap-2 bg-blue-100 px-3 py-2 rounded-lg">
                    <span class="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold">4</span>
                    <span class="font-mono font-bold text-blue-800">結果処理</span>
                </div>
                <i class="fas fa-chevron-right text-blue-400 hidden md:block"></i>
                <div class="flex items-center gap-2 bg-blue-100 px-3 py-2 rounded-lg">
                    <span class="w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold">5</span>
                    <span class="font-mono font-bold text-blue-800">リソース解放</span>
                </div>
            </div>

            <p class="text-center text-sm text-slate-500 mt-4">
                <i class="fas fa-info-circle mr-1"></i>
                try-with-resourcesを使えばステップ5は自動実行
            </p>
        </section>

        <!-- ============================================
             よく使うパターン
             ============================================ -->
        <section class="mt-6 bg-white rounded-xl shadow-sm border border-slate-200 p-6">
            <div class="flex items-center gap-3 mb-6">
                <div class="w-10 h-10 bg-violet-500 rounded-lg flex items-center justify-center">
                    <i class="fas fa-magic text-white"></i>
                </div>
                <h3 class="text-lg font-bold text-slate-800">よく使うパターン</h3>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-violet-50 border border-violet-200 rounded-lg p-4">
                    <h4 class="font-bold text-violet-800 mb-3">単一レコード取得</h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-java">String sql = "SELECT * FROM users WHERE id = ?";
try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
    pstmt.setInt(1, userId);

    try (ResultSet rs = pstmt.executeQuery()) {
        if (rs.next()) {
            // レコードが存在
            String name = rs.getString("name");
            int age = rs.getInt("age");
            // 処理...
        } else {
            // レコードが存在しない
            System.out.println("ユーザーが見つかりません");
        }
    }
}</code></pre>
                    </div>
                </div>

                <div class="bg-violet-50 border border-violet-200 rounded-lg p-4">
                    <h4 class="font-bold text-violet-800 mb-3">接続プール使用例（HikariCP）</h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-java">// HikariCPの設定
HikariConfig config = new HikariConfig();
config.setJdbcUrl("jdbc:mysql://localhost:3306/mydb");
config.setUsername("username");
config.setPassword("password");
config.setMaximumPoolSize(10);

HikariDataSource dataSource = new HikariDataSource(config);

// 接続取得（プールから）
try (Connection conn = dataSource.getConnection()) {
    // SQL実行
}</code></pre>
                    </div>
                </div>

                <div class="bg-violet-50 border border-violet-200 rounded-lg p-4">
                    <h4 class="font-bold text-violet-800 mb-3">自動生成キーの取得</h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-java">String sql = "INSERT INTO users (name, age) VALUES (?, ?)";
try (PreparedStatement pstmt = conn.prepareStatement(sql,
        Statement.RETURN_GENERATED_KEYS)) {
    pstmt.setString(1, "山田太郎");
    pstmt.setInt(2, 25);
    pstmt.executeUpdate();

    // 自動生成されたIDを取得
    try (ResultSet rs = pstmt.getGeneratedKeys()) {
        if (rs.next()) {
            int generatedId = rs.getInt(1);
            System.out.println("生成されたID: " + generatedId);
        }
    }
}</code></pre>
                    </div>
                </div>

                <div class="bg-violet-50 border border-violet-200 rounded-lg p-4">
                    <h4 class="font-bold text-violet-800 mb-3">メタデータ取得</h4>
                    <div class="code-block-wrapper">
                        <button onclick="copyCode(this)" class="copy-btn px-2 py-1 bg-slate-600 hover:bg-slate-500 text-white text-xs rounded transition">
                            <i class="fas fa-copy"></i>
                        </button>
                        <pre class="rounded-lg text-sm"><code class="language-java">// データベースメタデータ
DatabaseMetaData metaData = conn.getMetaData();
String dbName = metaData.getDatabaseProductName();
String dbVersion = metaData.getDatabaseProductVersion();

// ResultSetメタデータ
ResultSet rs = pstmt.executeQuery();
ResultSetMetaData rsMetaData = rs.getMetaData();
int columnCount = rsMetaData.getColumnCount();
for (int i = 1; i <= columnCount; i++) {
    String columnName = rsMetaData.getColumnName(i);
    String columnType = rsMetaData.getColumnTypeName(i);
}</code></pre>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- フッター -->
    <footer class="bg-slate-800 text-slate-300 mt-12 no-print">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <p class="text-sm text-center">
                &copy; 2025 F-Circle. All rights reserved.<br>
                本資料はAIツールを活用し、人間による編集・監修のもと作成されています。
            </p>
        </div>
    </footer>
</body>
</html>
