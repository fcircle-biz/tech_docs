<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript初心者向け学習教材 - 第3章：配列・オブジェクトと組み込みAPI</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        .navbar {
            background-color: #1565c0;
        }
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        .chapter-title {
            color: #1565c0;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #1565c0;
            padding-bottom: 0.5rem;
        }
        .section-title {
            color: #1976d2;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        code {
            display: block;
            background-color: #f5f5f5;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            white-space: pre;
            overflow-x: auto;
        }
        .quiz-container {
            background-color: #e3f2fd;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .quiz-question {
            font-weight: 500;
            margin-bottom: 1rem;
        }
        .diagram {
            max-width: 100%;
            height: auto;
            margin: 1.5rem 0;
            text-align: center;
        }
        .exercise {
            background-color: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1.5rem 0;
        }
        .note {
            background-color: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 1rem;
            margin: 1.5rem 0;
        }
        #table-of-contents .list-group-item {
            border: none;
            padding: 0.5rem 1rem;
        }
        #table-of-contents .list-group-item-action {
            color: #1976d2;
        }
        #table-of-contents .list-group-item-action.active,
        .list-group-item.active {
            color: white !important;
            background-color: #1976d2;
            border-color: #1976d2;
        }
        .section-nav {
            padding-left: 1rem;
        }
        .inline-code {
            background-color: #f5f5f5;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            display: inline;
        }
        footer {
            background-color: #1565c0;
            color: white;
            padding: 1rem 0;
            margin-top: 3rem;
        }
        .table-example {
            width: 100%;
            margin-bottom: 1rem;
            border-collapse: collapse;
        }
        .table-example th {
            background-color: #e3f2fd;
            border: 1px solid #b3e5fc;
            padding: 0.5rem;
            text-align: center;
        }
        .table-example td {
            border: 1px solid #b3e5fc;
            padding: 0.5rem;
            text-align: left;
        }
        .example-result {
            background-color: #f1f8e9;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
        }
        .warning {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
            padding: 1rem;
            margin: 1.5rem 0;
        }
        .step-number {
            background-color: #1976d2;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }
        .comparison-table {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1rem 0;
        }
        .comparison-item {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        .good-practice {
            background-color: #d4edda;
            border-left: 4px solid #28a745;
            padding: 1rem;
            margin: 1.5rem 0;
        }
    </style>
</head>
<body data-bs-spy="scroll" data-bs-target="#tableOfContents">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">JavaScript初心者向け学習教材</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#introduction">はじめに</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#chapter3">第3章: 配列・オブジェクト</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container my-4">
        <div class="row">
            <!-- Sidebar - Table of Contents -->
            <div class="col-lg-3">
                <div class="sidebar">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">目次</h5>
                        </div>
                        <div id="table-of-contents" class="list-group list-group-flush">
                            <a href="#introduction" class="list-group-item list-group-item-action">はじめに</a>
                            <a href="#chapter3" class="list-group-item list-group-item-action">第3章: 配列・オブジェクト</a>
                            <div class="section-nav">
                                <a href="#array-basics" class="list-group-item list-group-item-action">3.1 配列の基本操作</a>
                                <a href="#array-methods" class="list-group-item list-group-item-action">3.2 配列メソッド</a>
                                <a href="#object-basics" class="list-group-item list-group-item-action">3.3 オブジェクトの基本</a>
                                <a href="#destructuring" class="list-group-item list-group-item-action">3.4 分割代入</a>
                                <a href="#modern-apis" class="list-group-item list-group-item-action">3.5 最新API</a>
                                <a href="#todo-project" class="list-group-item list-group-item-action">3.6 ToDoリスト実装</a>
                                <a href="#chapter3-quiz" class="list-group-item list-group-item-action">3.7 理解度確認テスト</a>
                            </div>
                            <a href="#next-steps" class="list-group-item list-group-item-action">次のステップ</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="col-lg-9">
                <section id="introduction">
                    <h1 class="display-5 mb-4">JavaScript初心者向け学習教材</h1>
                    <p class="lead">第3章では、JavaScriptでデータを効率的に扱うための配列とオブジェクトについて学習します。配列の高階メソッド（map、filter、reduce）、オブジェクトリテラル、分割代入など、モダンなJavaScriptの重要な機能を習得し、実際のToDoリストアプリケーションを通じて実践的なスキルを身につけます。</p>

                    <div class="note">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>配列の基本操作と高階メソッド（map、filter、reduce）</li>
                            <li>スプレッド構文（...）の使い方</li>
                            <li>オブジェクトリテラルの操作</li>
                            <li>分割代入によるデータの取り出し</li>
                            <li>ES2023以降の最新API（at()、Object.hasOwn()など）</li>
                            <li>ToDoリストのデータ操作ロジック実装</li>
                        </ul>
                    </div>

                    <div class="warning">
                        <h5>前提知識</h5>
                        <p>この章を学習する前に、第2章「JavaScript基本構文」を完了し、変数宣言、関数、基本的な制御構造について理解していることを前提とします。</p>
                    </div>
                </section>

                <section id="chapter3">
                    <h2 class="chapter-title">第3章：配列・オブジェクトと組み込みAPI（2週目）</h2>
                    <p>JavaScriptにおいて、データの集合を効率的に扱うための配列とオブジェクトは非常に重要な概念です。この章では、これらのデータ構造を操作するための様々なメソッドや構文を学習し、実際のプロジェクトで活用できるスキルを身につけます。</p>

                    <section id="array-basics">
                        <h3 class="section-title">3.1 配列の基本操作</h3>
                        <p>配列はJavaScriptで複数の値を順序付きで格納するためのデータ構造です。まずは基本的な操作から始めましょう。</p>

                        <h4>配列の作成と基本操作</h4>
                        <code>// 配列の作成
let fruits = ['apple', 'banana', 'orange'];
let numbers = [1, 2, 3, 4, 5];
let mixed = ['text', 42, true, null];

// 要素へのアクセス
console.log(fruits[0]); // 'apple'
console.log(fruits[1]); // 'banana'

// 配列の長さ
console.log(fruits.length); // 3

// 要素の追加
fruits.push('grape'); // 末尾に追加
fruits.unshift('strawberry'); // 先頭に追加

// 要素の削除
let lastFruit = fruits.pop(); // 末尾から削除して値を返す
let firstFruit = fruits.shift(); // 先頭から削除して値を返す

console.log(fruits); // ['apple', 'banana', 'orange']</code>

                        <h4>スプレッド構文（...）の活用</h4>
                        <p>ES6で導入されたスプレッド構文は、配列の操作を非常に便利にします。</p>

                        <code>// 配列のコピー
let originalArray = [1, 2, 3];
let copiedArray = [...originalArray];

// 配列の結合
let array1 = [1, 2, 3];
let array2 = [4, 5, 6];
let combined = [...array1, ...array2]; // [1, 2, 3, 4, 5, 6]

// 要素の追加
let newArray = [...originalArray, 4, 5]; // [1, 2, 3, 4, 5]

// 配列の展開
function sum(a, b, c) {
    return a + b + c;
}
let numbers = [1, 2, 3];
console.log(sum(...numbers)); // 6

// 最大値・最小値の取得
let scores = [85, 92, 78, 96, 87];
let maxScore = Math.max(...scores); // 96
let minScore = Math.min(...scores); // 78</code>

                        <div class="exercise">
                            <h5>実習 3.1.1: 配列の基本操作</h5>
                            <p>以下の要求を満たすコードを書いてください：</p>
                            <ol>
                                <li>学生の名前を格納した配列を作成</li>
                                <li>新しい学生を追加</li>
                                <li>最初の学生を削除</li>
                                <li>配列をコピーして別の配列を作成</li>
                            </ol>
                            <code>// 解答例
let students = ['田中', '佐藤', '鈴木'];
students.push('高橋');
students.shift();
let studentsCopy = [...students];
console.log(students); // ['佐藤', '鈴木', '高橋']
console.log(studentsCopy); // ['佐藤', '鈴木', '高橋']</code>
                        </div>
                    </section>

                    <section id="array-methods">
                        <h3 class="section-title">3.2 配列メソッド（map、filter、reduce）</h3>
                        <p>配列の高階メソッドは、関数型プログラミングの考え方を取り入れた強力な機能です。これらのメソッドを習得することで、より読みやすく保守性の高いコードが書けるようになります。</p>

                        <div class="diagram">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 300" width="600" height="300">
                                <!-- map -->
                                <rect x="50" y="50" width="120" height="60" fill="#4caf50" stroke="#388e3c" stroke-width="2" rx="5" />
                                <text x="110" y="85" text-anchor="middle" font-size="14" fill="white" font-weight="bold">map()</text>
                                <text x="110" y="130" text-anchor="middle" font-size="12" fill="#666">要素を変換</text>
                                
                                <!-- filter -->
                                <rect x="200" y="50" width="120" height="60" fill="#2196f3" stroke="#1976d2" stroke-width="2" rx="5" />
                                <text x="260" y="85" text-anchor="middle" font-size="14" fill="white" font-weight="bold">filter()</text>
                                <text x="260" y="130" text-anchor="middle" font-size="12" fill="#666">条件で絞り込み</text>
                                
                                <!-- reduce -->
                                <rect x="350" y="50" width="120" height="60" fill="#ff9800" stroke="#f57c00" stroke-width="2" rx="5" />
                                <text x="410" y="85" text-anchor="middle" font-size="14" fill="white" font-weight="bold">reduce()</text>
                                <text x="410" y="130" text-anchor="middle" font-size="12" fill="#666">単一の値に集約</text>
                                
                                <!-- Input Array -->
                                <rect x="50" y="180" width="420" height="40" fill="#f5f5f5" stroke="#ddd" stroke-width="1" />
                                <text x="260" y="205" text-anchor="middle" font-size="14" font-weight="bold">[1, 2, 3, 4, 5]</text>
                                
                                <!-- Arrows -->
                                <line x1="110" y1="110" x2="110" y2="180" stroke="#666" stroke-width="2" marker-end="url(#arrow)" />
                                <line x1="260" y1="110" x2="260" y2="180" stroke="#666" stroke-width="2" marker-end="url(#arrow)" />
                                <line x1="410" y1="110" x2="410" y2="180" stroke="#666" stroke-width="2" marker-end="url(#arrow)" />
                                
                                <!-- Results -->
                                <text x="110" y="250" text-anchor="middle" font-size="12" fill="#4caf50">[2,4,6,8,10]</text>
                                <text x="260" y="250" text-anchor="middle" font-size="12" fill="#2196f3">[2,4]</text>
                                <text x="410" y="250" text-anchor="middle" font-size="12" fill="#ff9800">15</text>
                                
                                <defs>
                                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                        <path d="M0,0 L0,6 L9,3 z" fill="#666" />
                                    </marker>
                                </defs>
                            </svg>
                            <p class="text-center">図3.1: 配列の高階メソッドの動作</p>
                        </div>

                        <h4>map()メソッド - 要素の変換</h4>
                        <p>map()は配列の各要素に対して関数を適用し、新しい配列を返します。</p>

                        <code>// 基本的なmap()の使用例
let numbers = [1, 2, 3, 4, 5];

// 各要素を2倍にする
let doubled = numbers.map(num =&gt; num * 2);
console.log(doubled); // [2, 4, 6, 8, 10]

// 文字列に変換
let strings = numbers.map(num =&gt; `数値: ${num}`);
console.log(strings); // ['数値: 1', '数値: 2', '数値: 3', '数値: 4', '数値: 5']

// オブジェクトの配列の操作
let users = [
    { name: '田中', age: 25 },
    { name: '佐藤', age: 30 },
    { name: '鈴木', age: 28 }
];

// 名前だけを抽出
let names = users.map(user =&gt; user.name);
console.log(names); // ['田中', '佐藤', '鈴木']

// 年齢を1歳増やした新しいオブジェクト配列を作成
let olderUsers = users.map(user =&gt; ({
    ...user,
    age: user.age + 1
}));
console.log(olderUsers);</code>

                        <h4>filter()メソッド - 条件による絞り込み</h4>
                        <p>filter()は条件を満たす要素のみを含む新しい配列を返します。</p>

                        <code>// 基本的なfilter()の使用例
let numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

// 偶数のみを抽出
let evenNumbers = numbers.filter(num =&gt; num % 2 === 0);
console.log(evenNumbers); // [2, 4, 6, 8, 10]

// 5より大きい数値を抽出
let bigNumbers = numbers.filter(num =&gt; num &gt; 5);
console.log(bigNumbers); // [6, 7, 8, 9, 10]

// オブジェクト配列の絞り込み
let products = [
    { name: 'ノートPC', price: 80000, category: 'electronics' },
    { name: 'デスク', price: 15000, category: 'furniture' },
    { name: 'マウス', price: 3000, category: 'electronics' },
    { name: '椅子', price: 25000, category: 'furniture' }
];

// 電子機器のみを抽出
let electronics = products.filter(product =&gt; product.category === 'electronics');

// 価格が20000円以下の商品を抽出
let affordableProducts = products.filter(product =&gt; product.price &lt;= 20000);</code>

                        <h4>reduce()メソッド - 値の集約</h4>
                        <p>reduce()は配列の要素を順次処理して、単一の値に集約します。</p>

                        <code>// 基本的なreduce()の使用例
let numbers = [1, 2, 3, 4, 5];

// 合計値を計算
let sum = numbers.reduce((accumulator, current) =&gt; accumulator + current, 0);
console.log(sum); // 15

// 最大値を取得
let max = numbers.reduce((acc, current) =&gt; 
    current &gt; acc ? current : acc, numbers[0]);
console.log(max); // 5

// オブジェクト配列の操作
let orders = [
    { id: 1, amount: 1200 },
    { id: 2, amount: 800 },
    { id: 3, amount: 1500 }
];

// 総売上を計算
let totalSales = orders.reduce((total, order) =&gt; total + order.amount, 0);
console.log(totalSales); // 3500

// カテゴリごとの商品数をカウント
let items = ['apple', 'banana', 'apple', 'orange', 'banana', 'apple'];
let count = items.reduce((acc, item) =&gt; {
    acc[item] = (acc[item] || 0) + 1;
    return acc;
}, {});
console.log(count); // { apple: 3, banana: 2, orange: 1 }</code>

                        <h4>メソッドチェーン</h4>
                        <p>複数のメソッドを連続して適用することで、複雑なデータ処理を簡潔に書けます。</p>

                        <code>// メソッドチェーンの例
let sales = [
    { product: 'ノートPC', price: 80000, quantity: 2 },
    { product: 'マウス', price: 3000, quantity: 5 },
    { product: 'キーボード', price: 8000, quantity: 3 },
    { product: 'モニター', price: 25000, quantity: 1 }
];

// 1. 各商品の売上を計算
// 2. 売上が10000円以上の商品のみ抽出
// 3. 商品名のみを配列で取得
let highSalesProducts = sales
    .map(item =&gt; ({ ...item, total: item.price * item.quantity }))
    .filter(item =&gt; item.total &gt;= 10000)
    .map(item =&gt; item.product);

console.log(highSalesProducts); // ['ノートPC', 'キーボード', 'モニター']

// 総売上を計算（複数メソッドの組み合わせ）
let totalRevenue = sales
    .map(item =&gt; item.price * item.quantity)
    .reduce((total, amount) =&gt; total + amount, 0);

console.log(totalRevenue); // 219000</code>

                        <div class="exercise">
                            <h5>実習 3.2.1: 配列メソッドの実践</h5>
                            <p>以下のデータを使って、配列メソッドを組み合わせた処理を書いてください：</p>
                            <code>let students = [
    { name: '田中', score: 85, subject: 'math' },
    { name: '佐藤', score: 92, subject: 'english' },
    { name: '鈴木', score: 78, subject: 'math' },
    { name: '高橋', score: 96, subject: 'english' },
    { name: '伊藤', score: 87, subject: 'math' }
];

// 課題:
// 1. 数学の成績が80点以上の学生の名前を配列で取得
// 2. 全学生の平均点を計算
// 3. 最高得点の学生情報を取得</code>
                        </div>
                    </section>

                    <section id="object-basics">
                        <h3 class="section-title">3.3 オブジェクトの基本</h3>
                        <p>オブジェクトはJavaScriptでキーと値のペアを格納するデータ構造です。現実世界のものや概念をプログラムで表現するのに適しています。</p>

                        <h4>オブジェクトリテラルの基本</h4>
                        <code>// オブジェクトの作成
let person = {
    name: '田中太郎',
    age: 25,
    email: 'tanaka@example.com',
    hobbies: ['読書', '映画鑑賞', 'プログラミング']
};

// プロパティへのアクセス
console.log(person.name); // ドット記法
console.log(person['age']); // ブラケット記法

// プロパティの追加・変更
person.job = 'エンジニア';
person.age = 26;

// プロパティの削除
delete person.email;

console.log(person);</code>

                        <h4>メソッドを持つオブジェクト</h4>
                        <code>// メソッドを含むオブジェクト
let calculator = {
    result: 0,
    
    add: function(num) {
        this.result += num;
        return this; // メソッドチェーンのため
    },
    
    subtract: function(num) {
        this.result -= num;
        return this;
    },
    
    multiply: function(num) {
        this.result *= num;
        return this;
    },
    
    getValue: function() {
        return this.result;
    },
    
    reset: function() {
        this.result = 0;
        return this;
    }
};

// メソッドチェーンの使用
let result = calculator
    .add(10)
    .multiply(2)
    .subtract(5)
    .getValue();

console.log(result); // 15</code>

                        <h4>ES6以降のオブジェクト構文</h4>
                        <code>// 短縮プロパティ記法
let name = '佐藤花子';
let age = 28;

// 従来の書き方
let person1 = {
    name: name,
    age: age
};

// ES6の短縮記法
let person2 = { name, age };

// 算出プロパティ名
let propName = 'dynamicProperty';
let obj = {
    [propName]: 'この値は動的に設定されました',
    ['computed' + 'Name']: '計算されたプロパティ名'
};

// メソッドの短縮記法
let user = {
    name: '山田',
    
    // 従来の書き方
    greet1: function() {
        return `こんにちは、${this.name}です`;
    },
    
    // ES6の短縮記法
    greet2() {
        return `こんにちは、${this.name}です`;
    },
    
    // アロー関数（thisの動作に注意）
    greet3: () =&gt; {
        return 'アロー関数のグリーティング';
    }
};</code>

                        <h4>オブジェクトの操作メソッド</h4>
                        <code>let student = {
    name: '鈴木一郎',
    age: 20,
    grade: 'A',
    subjects: ['数学', '英語', '物理']
};

// Object.keys() - プロパティ名の配列を取得
let keys = Object.keys(student);
console.log(keys); // ['name', 'age', 'grade', 'subjects']

// Object.values() - 値の配列を取得
let values = Object.values(student);
console.log(values); // ['鈴木一郎', 20, 'A', ['数学', '英語', '物理']]

// Object.entries() - キーと値のペアの配列を取得
let entries = Object.entries(student);
console.log(entries);
// [['name', '鈴木一郎'], ['age', 20], ['grade', 'A'], ['subjects', ['数学', '英語', '物理']]]

// Object.assign() - オブジェクトの複製・結合
let additionalInfo = { school: '東京大学', year: 2024 };
let fullStudent = Object.assign({}, student, additionalInfo);

// ES6スプレッド構文を使った方法（推奨）
let fullStudent2 = { ...student, ...additionalInfo };

// Object.freeze() - オブジェクトを変更不可にする
let frozenObj = Object.freeze({ a: 1, b: 2 });
frozenObj.a = 10; // 変更されない
console.log(frozenObj.a); // 1</code>

                        <div class="exercise">
                            <h5>実習 3.3.1: オブジェクトの操作</h5>
                            <p>以下の要求を満たすオブジェクトとメソッドを作成してください：</p>
                            <ol>
                                <li>商品情報を管理するオブジェクト</li>
                                <li>在庫を増減するメソッド</li>
                                <li>商品情報を表示するメソッド</li>
                            </ol>
                        </div>
                    </section>

                    <section id="destructuring">
                        <h3 class="section-title">3.4 分割代入（Destructuring）</h3>
                        <p>分割代入は、配列やオブジェクトからデータを抽出して、個別の変数に代入する構文です。コードをより読みやすく、簡潔にできます。</p>

                        <h4>配列の分割代入</h4>
                        <code>// 基本的な配列の分割代入
let colors = ['red', 'green', 'blue'];
let [first, second, third] = colors;

console.log(first);  // 'red'
console.log(second); // 'green'
console.log(third);  // 'blue'

// 一部の要素をスキップ
let [primary, , tertiary] = colors;
console.log(primary); // 'red'
console.log(tertiary); // 'blue'

// デフォルト値の設定
let [a, b, c, d = 'yellow'] = colors;
console.log(d); // 'yellow'

// 残りの要素を取得
let numbers = [1, 2, 3, 4, 5];
let [head, ...rest] = numbers;
console.log(head); // 1
console.log(rest); // [2, 3, 4, 5]

// 変数の値を交換
let x = 10;
let y = 20;
[x, y] = [y, x];
console.log(x); // 20
console.log(y); // 10</code>

                        <h4>オブジェクトの分割代入</h4>
                        <code>// 基本的なオブジェクトの分割代入
let person = {
    name: '田中太郎',
    age: 30,
    job: 'エンジニア',
    location: '東京'
};

let { name, age } = person;
console.log(name); // '田中太郎'
console.log(age);  // 30

// 変数名を変更
let { name: personName, age: personAge } = person;
console.log(personName); // '田中太郎'

// デフォルト値の設定
let { salary = 50000 } = person;
console.log(salary); // 50000

// ネストしたオブジェクトの分割代入
let user = {
    id: 1,
    profile: {
        name: '佐藤花子',
        contact: {
            email: 'sato@example.com',
            phone: '080-1234-5678'
        }
    }
};

let { 
    profile: { 
        name: userName, 
        contact: { email } 
    } 
} = user;
console.log(userName); // '佐藤花子'
console.log(email);    // 'sato@example.com'

// 残りのプロパティを取得
let { name: n, ...otherProps } = person;
console.log(otherProps); // { age: 30, job: 'エンジニア', location: '東京' }</code>

                        <h4>関数パラメータでの分割代入</h4>
                        <code>// 関数パラメータで分割代入を使用
function greetUser({ name, age, job = '未設定' }) {
    return `こんにちは、${name}さん（${age}歳、${job}）`;
}

let user1 = { name: '山田', age: 25, job: 'デザイナー' };
console.log(greetUser(user1));

// 配列を受け取る関数
function calculateDistance([x1, y1], [x2, y2]) {
    return Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
}

let point1 = [0, 0];
let point2 = [3, 4];
console.log(calculateDistance(point1, point2)); // 5

// API レスポンスの処理例
function processApiResponse({ data, status, message = 'OK' }) {
    if (status === 'success') {
        return data;
    } else {
        throw new Error(message);
    }
}

// 配列のメソッドと組み合わせ
let users = [
    { name: '田中', score: 85 },
    { name: '佐藤', score: 92 },
    { name: '鈴木', score: 78 }
];

// map()で分割代入を使用
let userSummaries = users.map(({ name, score }) =&gt; 
    `${name}: ${score}点`
);
console.log(userSummaries);</code>

                        <div class="good-practice">
                            <h5>分割代入のベストプラクティス</h5>
                            <ul>
                                <li>関数の戻り値が複数の値を持つ場合に活用する</li>
                                <li>APIレスポンスの処理で必要なデータのみを抽出する</li>
                                <li>React等のライブラリでpropsの受け取りに使用する</li>
                                <li>設定オブジェクトのデフォルト値を設定する</li>
                            </ul>
                        </div>
                    </section>

                    <section id="modern-apis">
                        <h3 class="section-title">3.5 最新API（ES2023以降）</h3>
                        <p>JavaScriptは継続的に進化しており、新しいメソッドや機能が追加されています。ES2023以降で追加された便利なAPIを学習しましょう。</p>

                        <h4>配列の新しいメソッド</h4>
                        <code>// Array.prototype.at() - 負のインデックスに対応
let arr = ['a', 'b', 'c', 'd', 'e'];

// 従来の方法
console.log(arr[arr.length - 1]); // 'e'

// at()メソッドを使用
console.log(arr.at(-1)); // 'e' （最後の要素）
console.log(arr.at(-2)); // 'd' （最後から2番目）
console.log(arr.at(0));  // 'a' （最初の要素）

// Array.prototype.findLast() - 条件に合う最後の要素を検索
let numbers = [1, 2, 3, 4, 5, 4, 3, 2, 1];
let lastEven = numbers.findLast(num =&gt; num % 2 === 0);
console.log(lastEven); // 2

// Array.prototype.findLastIndex() - 条件に合う最後の要素のインデックス
let lastEvenIndex = numbers.findLastIndex(num =&gt; num % 2 === 0);
console.log(lastEvenIndex); // 7

// Array.prototype.toReversed() - 非破壊的な逆順
let original = [1, 2, 3, 4, 5];
let reversed = original.toReversed();
console.log(original); // [1, 2, 3, 4, 5] （変更されない）
console.log(reversed); // [5, 4, 3, 2, 1]

// Array.prototype.toSorted() - 非破壊的なソート
let unsorted = [3, 1, 4, 1, 5, 9];
let sorted = unsorted.toSorted();
console.log(unsorted); // [3, 1, 4, 1, 5, 9] （変更されない）
console.log(sorted);   // [1, 1, 3, 4, 5, 9]

// Array.prototype.with() - 非破壊的な要素置換
let fruits = ['apple', 'banana', 'orange'];
let newFruits = fruits.with(1, 'grape');
console.log(fruits);    // ['apple', 'banana', 'orange'] （変更されない）
console.log(newFruits); // ['apple', 'grape', 'orange']</code>

                        <h4>オブジェクトの新しいメソッド</h4>
                        <code>// Object.hasOwn() - より安全なプロパティ存在チェック
let obj = { name: 'test', age: 25 };

// 従来の方法（プロトタイプチェーンの影響を受ける可能性）
console.log(obj.hasOwnProperty('name')); // true

// Object.hasOwn()（推奨）
console.log(Object.hasOwn(obj, 'name')); // true
console.log(Object.hasOwn(obj, 'toString')); // false

// Object.groupBy() - 配列をオブジェクトでグループ化
let products = [
    { name: 'ノートPC', category: 'electronics', price: 80000 },
    { name: 'デスク', category: 'furniture', price: 15000 },
    { name: 'マウス', category: 'electronics', price: 3000 },
    { name: '椅子', category: 'furniture', price: 25000 }
];

let groupedByCategory = Object.groupBy(products, ({ category }) =&gt; category);
console.log(groupedByCategory);
/*
{
  electronics: [...],
  furniture: [...]
}
*/

// Map.groupBy() - Mapでグループ化
let groupedByPriceRange = Map.groupBy(products, ({ price }) =&gt; {
    if (price &lt; 10000) return 'low';
    if (price &lt; 50000) return 'medium';
    return 'high';
});
console.log(groupedByPriceRange);</code>

                        <h4>文字列の新しいメソッド</h4>
                        <code>// String.prototype.isWellFormed() - UTF-16の妥当性チェック
let validString = 'Hello, World!';
let invalidString = 'Hello\uD800World'; // 不正なサロゲートペア

console.log(validString.isWellFormed());   // true
console.log(invalidString.isWellFormed()); // false

// String.prototype.toWellFormed() - 不正な文字を修正
console.log(invalidString.toWellFormed()); // 'Hello\uFFFDWorld'

// 実用的な使用例
function processUserInput(input) {
    if (!input.isWellFormed()) {
        input = input.toWellFormed();
        console.warn('入力文字列を修正しました');
    }
    return input;
}</code>

                        <div class="comparison-table">
                            <div class="comparison-item">
                                <h6>従来のメソッド（破壊的）</h6>
                                <code>let arr = [3, 1, 4];
arr.sort();
console.log(arr); // [1, 3, 4]
// 元の配列が変更される</code>
                            </div>
                            <div class="comparison-item">
                                <h6>新しいメソッド（非破壊的）</h6>
                                <code>let arr = [3, 1, 4];
let sorted = arr.toSorted();
console.log(arr);    // [3, 1, 4]
console.log(sorted); // [1, 3, 4]</code>
                            </div>
                        </div>

                        <div class="exercise">
                            <h5>実習 3.5.1: 最新APIの活用</h5>
                            <p>以下のデータを使って、新しいAPIを活用した処理を書いてください：</p>
                            <code>let employees = [
    { name: '田中', department: 'IT', salary: 500000 },
    { name: '佐藤', department: 'Sales', salary: 450000 },
    { name: '鈴木', department: 'IT', salary: 520000 },
    { name: '高橋', department: 'HR', salary: 480000 },
    { name: '伊藤', department: 'Sales', salary: 470000 }
];

// 課題:
// 1. at()を使って最後の従業員を取得
// 2. Object.groupBy()で部署ごとにグループ化
// 3. toSorted()を使って給与順に並べ替え（元配列は保持）</code>
                        </div>
                    </section>

                    <section id="todo-project">
                        <h3 class="section-title">3.6 ToDoリストのデータ操作ロジック実装</h3>
                        <p>これまで学習した配列とオブジェクトの操作を活用して、ToDoリストアプリケーションのデータ操作ロジックを実装しましょう。</p>

                        <h4>ToDoデータ構造の設計</h4>
                        <code>// ToDoアイテムの基本構造
let todoItem = {
    id: 1,
    title: 'JavaScriptを学習する',
    description: '配列とオブジェクトの操作を習得する',
    completed: false,
    priority: 'high', // 'low', 'medium', 'high'
    category: 'study',
    createdAt: new Date('2024-01-15'),
    dueDate: new Date('2024-01-20')
};

// ToDoリスト（配列）
let todos = [
    {
        id: 1,
        title: 'JavaScriptを学習する',
        description: '配列とオブジェクトの操作を習得する',
        completed: false,
        priority: 'high',
        category: 'study',
        createdAt: new Date('2024-01-15'),
        dueDate: new Date('2024-01-20')
    },
    {
        id: 2,
        title: '買い物に行く',
        description: '牛乳とパンを買う',
        completed: true,
        priority: 'medium',
        category: 'personal',
        createdAt: new Date('2024-01-14'),
        dueDate: new Date('2024-01-16')
    },
    {
        id: 3,
        title: 'プロジェクトレポート作成',
        description: '月次レポートを作成して提出する',
        completed: false,
        priority: 'high',
        category: 'work',
        createdAt: new Date('2024-01-10'),
        dueDate: new Date('2024-01-18')
    }
];</code>

                        <h4>ToDoマネージャーの実装</h4>
                        <code>// ToDoマネージャークラス
class TodoManager {
    constructor() {
        this.todos = [];
        this.nextId = 1;
    }
    
    // ToDoアイテムを追加
    addTodo({ title, description = '', priority = 'medium', category = 'general', dueDate = null }) {
        const newTodo = {
            id: this.nextId++,
            title,
            description,
            completed: false,
            priority,
            category,
            createdAt: new Date(),
            dueDate: dueDate ? new Date(dueDate) : null
        };
        
        this.todos.push(newTodo);
        return newTodo;
    }
    
    // ToDoアイテムを削除
    deleteTodo(id) {
        const index = this.todos.findIndex(todo =&gt; todo.id === id);
        if (index !== -1) {
            return this.todos.splice(index, 1)[0];
        }
        return null;
    }
    
    // ToDoアイテムを更新
    updateTodo(id, updates) {
        const index = this.todos.findIndex(todo =&gt; todo.id === id);
        if (index !== -1) {
            this.todos[index] = { ...this.todos[index], ...updates };
            return this.todos[index];
        }
        return null;
    }
    
    // 完了状態を切り替え
    toggleComplete(id) {
        const todo = this.todos.find(todo =&gt; todo.id === id);
        if (todo) {
            todo.completed = !todo.completed;
            return todo;
        }
        return null;
    }
    
    // 未完了のToDoを取得
    getIncompleteTodos() {
        return this.todos.filter(todo =&gt; !todo.completed);
    }
    
    // 完了済みのToDoを取得
    getCompletedTodos() {
        return this.todos.filter(todo =&gt; todo.completed);
    }
    
    // 優先度でフィルタリング
    getTodosByPriority(priority) {
        return this.todos.filter(todo =&gt; todo.priority === priority);
    }
    
    // カテゴリでフィルタリング
    getTodosByCategory(category) {
        return this.todos.filter(todo =&gt; todo.category === category);
    }
    
    // 期限でソート
    getTodosSortedByDueDate() {
        return this.todos.toSorted((a, b) =&gt; {
            if (!a.dueDate && !b.dueDate) return 0;
            if (!a.dueDate) return 1;
            if (!b.dueDate) return -1;
            return a.dueDate - b.dueDate;
        });
    }
    
    // 検索機能
    searchTodos(keyword) {
        const lowercaseKeyword = keyword.toLowerCase();
        return this.todos.filter(todo =&gt; 
            todo.title.toLowerCase().includes(lowercaseKeyword) ||
            todo.description.toLowerCase().includes(lowercaseKeyword)
        );
    }
    
    // 統計情報を取得
    getStatistics() {
        const total = this.todos.length;
        const completed = this.todos.filter(todo =&gt; todo.completed).length;
        const incomplete = total - completed;
        
        // カテゴリ別の集計
        const byCategory = Object.groupBy(this.todos, ({ category }) =&gt; category);
        const categoryStats = Object.fromEntries(
            Object.entries(byCategory).map(([category, todos]) =&gt; [
                category, 
                { total: todos.length, completed: todos.filter(t =&gt; t.completed).length }
            ])
        );
        
        // 優先度別の集計
        const byPriority = Object.groupBy(this.todos, ({ priority }) =&gt; priority);
        const priorityStats = Object.fromEntries(
            Object.entries(byPriority).map(([priority, todos]) =&gt; [
                priority,
                { total: todos.length, completed: todos.filter(t =&gt; t.completed).length }
            ])
        );
        
        return {
            total,
            completed,
            incomplete,
            completionRate: total &gt; 0 ? (completed / total * 100).toFixed(1) + '%' : '0%',
            categories: categoryStats,
            priorities: priorityStats
        };
    }
    
    // 期限切れのToDoを取得
    getOverdueTodos() {
        const now = new Date();
        return this.todos.filter(todo =&gt; 
            !todo.completed && 
            todo.dueDate && 
            todo.dueDate &lt; now
        );
    }
    
    // ToDoのエクスポート（JSON形式）
    exportTodos() {
        return JSON.stringify(this.todos, null, 2);
    }
    
    // ToDoのインポート
    importTodos(jsonData) {
        try {
            const importedTodos = JSON.parse(jsonData);
            this.todos = importedTodos.map(todo =&gt; ({
                ...todo,
                createdAt: new Date(todo.createdAt),
                dueDate: todo.dueDate ? new Date(todo.dueDate) : null
            }));
            this.nextId = Math.max(...this.todos.map(t =&gt; t.id)) + 1;
            return true;
        } catch (error) {
            console.error('インポートエラー:', error);
            return false;
        }
    }
}</code>

                        <h4>使用例とテストコード</h4>
                        <code>// ToDoマネージャーのテスト
const todoManager = new TodoManager();

// ToDoを追加
todoManager.addTodo({
    title: 'JavaScript学習',
    description: '配列とオブジェクトをマスターする',
    priority: 'high',
    category: 'study',
    dueDate: '2024-01-25'
});

todoManager.addTodo({
    title: '買い物',
    description: '食材を買いに行く',
    priority: 'medium',
    category: 'personal',
    dueDate: '2024-01-20'
});

todoManager.addTodo({
    title: 'ミーティング資料作成',
    description: 'プロジェクトの進捗報告資料',
    priority: 'high',
    category: 'work',
    dueDate: '2024-01-22'
});

// 操作例
console.log('=== 全てのToDo ===');
console.log(todoManager.todos);

console.log('=== 未完了のToDo ===');
console.log(todoManager.getIncompleteTodos());

console.log('=== 優先度がhighのToDo ===');
console.log(todoManager.getTodosByPriority('high'));

console.log('=== 期限順にソート ===');
console.log(todoManager.getTodosSortedByDueDate());

// 完了状態を切り替え
todoManager.toggleComplete(1);

console.log('=== 統計情報 ===');
console.log(todoManager.getStatistics());

// 検索
console.log('=== "JavaScript"で検索 ===');
console.log(todoManager.searchTodos('JavaScript'));</code>

                        <div class="exercise">
                            <h5>実習 3.6.1: ToDoマネージャーの拡張</h5>
                            <p>TodoManagerクラスに以下の機能を追加してください：</p>
                            <ol>
                                <li>締切まで3日以内のToDoを取得する機能</li>
                                <li>ToDoの優先度を一括変更する機能</li>
                                <li>完了済みToDoを一括削除する機能</li>
                                <li>重複するタイトルをチェックする機能</li>
                            </ol>
                        </div>
                    </section>

                    <section id="chapter3-quiz">
                        <h3 class="section-title">3.7 理解度確認テスト</h3>
                        <div class="quiz-container">
                            <h4>第3章の理解度チェック</h4>
                            <p>以下の問題に答えて、第3章の内容の理解度を確認しましょう。</p>
                            
                            <div class="quiz-question">
                                <p><strong>問題1:</strong> 配列 [1, 2, 3, 4, 5] から偶数のみを抽出する正しいコードはどれですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1a" value="a">
                                    <label class="form-check-label" for="q1a">
                                        array.map(n =&gt; n % 2 === 0)
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1b" value="b">
                                    <label class="form-check-label" for="q1b">
                                        array.filter(n =&gt; n % 2 === 0)
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1c" value="c">
                                    <label class="form-check-label" for="q1c">
                                        array.reduce(n =&gt; n % 2 === 0)
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題2:</strong> ES6のオブジェクト短縮プロパティ記法で正しいものはどれですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2a" value="a">
                                    <label class="form-check-label" for="q2a">
                                        let obj = { name: name, age: age };
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2b" value="b">
                                    <label class="form-check-label" for="q2b">
                                        let obj = { name, age };
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2c" value="c">
                                    <label class="form-check-label" for="q2c">
                                        let obj = { :name, :age };
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題3:</strong> 分割代入で配列の最後の要素を取得する方法として正しいものはどれですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3a" value="a">
                                    <label class="form-check-label" for="q3a">
                                        let [last] = array;
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3b" value="b">
                                    <label class="form-check-label" for="q3b">
                                        let [..., last] = array;
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3c" value="c">
                                    <label class="form-check-label" for="q3c">
                                        let last = array.at(-1);
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題4:</strong> reduce()メソッドの主な用途として最も適切なものはどれですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4a" value="a">
                                    <label class="form-check-label" for="q4a">
                                        配列の各要素を変換する
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4b" value="b">
                                    <label class="form-check-label" for="q4b">
                                        条件に合う要素を抽出する
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4c" value="c">
                                    <label class="form-check-label" for="q4c">
                                        配列を単一の値に集約する
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題5:</strong> ES2023で追加された配列の非破壊的なソートメソッドはどれですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5a" value="a">
                                    <label class="form-check-label" for="q5a">
                                        sort()
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5b" value="b">
                                    <label class="form-check-label" for="q5b">
                                        toSorted()
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5c" value="c">
                                    <label class="form-check-label" for="q5c">
                                        sortBy()
                                    </label>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary mt-3" id="checkAnswers">回答を確認</button>
                            <div id="quizResults" class="mt-3 d-none">
                                <div class="alert alert-success">
                                    <h5>正解:</h5>
                                    <ol>
                                        <li>b（array.filter(n =&gt; n % 2 === 0)）</li>
                                        <li>b（let obj = { name, age };）</li>
                                        <li>c（let last = array.at(-1);）</li>
                                        <li>c（配列を単一の値に集約する）</li>
                                        <li>b（toSorted()）</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section id="next-steps">
                        <h3 class="section-title">次のステップ</h3>
                        <p>お疲れさまでした！第3章では、JavaScriptでデータを効率的に扱うための重要な概念を学習しました。配列の高階メソッド、オブジェクトの操作、分割代入、最新のAPIなど、モダンなJavaScript開発で欠かせないスキルを習得できました。</p>
                        
                        <div class="note">
                            <h5>第3章で習得したスキル</h5>
                            <ul>
                                <li>配列の基本操作とスプレッド構文の活用</li>
                                <li>map()、filter()、reduce()メソッドの使い分け</li>
                                <li>オブジェクトリテラルの操作とメソッド</li>
                                <li>分割代入による効率的なデータ抽出</li>
                                <li>ES2023以降の最新API（at()、Object.hasOwn()等）</li>
                                <li>ToDoリストアプリケーションの実装</li>
                            </ul>
                        </div>

                        <p>次の第4章では、ブラウザのDOM（Document Object Model）操作について学習します。HTMLとJavaScriptを連携させて、ユーザーインターフェースを動的に操作する方法を習得していきます。</p>
                        
                        <div class="exercise">
                            <h5>第4章に向けた準備</h5>
                            <p>第4章に進む前に、以下の点を確認してください：</p>
                            <ol>
                                <li>配列の高階メソッド（map、filter、reduce）が使えること</li>
                                <li>オブジェクトの分割代入ができること</li>
                                <li>ToDoマネージャーのようなデータ操作ロジックが理解できること</li>
                                <li>ES6以降のモダンな構文に慣れていること</li>
                            </ol>
                        </div>

                        <div class="good-practice">
                            <h5>継続学習のポイント</h5>
                            <ul>
                                <li>実際のプロジェクトで配列操作メソッドを積極的に使用する</li>
                                <li>複雑なデータ構造に対してもメソッドチェーンを活用する</li>
                                <li>最新のJavaScript仕様をチェックして新機能を学習する</li>
                                <li>パフォーマンスを意識したデータ操作を心がける</li>
                            </ul>
                        </div>
                    </section>
                </section>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center py-4">
        <div class="container">
            <p class="mb-0">Copyright © 2025 F-Circle All rights reserved.</p>
        </div>
    </footer>

    <!-- Bootstrap JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 理解度テストの回答確認ボタンの処理
        document.getElementById('checkAnswers').addEventListener('click', function() {
            document.getElementById('quizResults').classList.remove('d-none');
        });

        // スムーススクロールの実装
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>