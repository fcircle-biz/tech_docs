<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScriptå­¦ç¿’æ•™æ ç¬¬8ç«  - é›»å“ã‚¢ãƒ—ãƒªã‚’ä½œã‚ã†</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        .navbar {
            background-color: #1565c0;
        }
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        .chapter-title {
            color: #1565c0;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #1565c0;
            padding-bottom: 0.5rem;
        }
        .section-title {
            color: #1976d2;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        /* ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ©ã‚¤ãƒˆ */
        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        code {
            display: block;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            white-space: pre;
            overflow-x: auto;
        }
        .quiz-container {
            background-color: #e3f2fd;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .highlight {
            background-color: #fff3e0;
            padding: 1rem;
            border-left: 4px solid #ff9800;
            margin: 1rem 0;
        }
        .project-container {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .demo-container {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">JavaScriptå­¦ç¿’ã‚¬ã‚¤ãƒ‰</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../../../README.md">ãƒ›ãƒ¼ãƒ </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="README.md">ã‚¬ã‚¤ãƒ‰ä¸€è¦§</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading">å­¦ç¿’å†…å®¹</h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="chapter1.html">ç¬¬1ç« : ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã£ã¦ä½•ï¼Ÿ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="chapter2.html">ç¬¬2ç« : æ•°å­—ã¨æ–‡å­—ã‚’æ‰±ãŠã†</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="chapter3.html">ç¬¬3ç« : æ¡ä»¶ã«ã‚ˆã£ã¦å‡¦ç†ã‚’å¤‰ãˆã‚ˆã†</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="chapter4.html">ç¬¬4ç« : ç¹°ã‚Šè¿”ã—å‡¦ç†ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã‚ˆã†</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="chapter5.html">ç¬¬5ç« : é–¢æ•°ã§å‡¦ç†ã‚’ã¾ã¨ã‚ã‚ˆã†</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="chapter6.html">ç¬¬6ç« : Webãƒšãƒ¼ã‚¸ã‚’æ“ä½œã—ã‚ˆã†</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="chapter7.html">ç¬¬7ç« : ToDoãƒªã‚¹ãƒˆã‚¢ãƒ—ãƒªã‚’ä½œã‚ã†</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="#chapter8">ç¬¬8ç« : é›»å“ã‚¢ãƒ—ãƒªã‚’ä½œã‚ã†</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">ç¬¬8ç« : é›»å“ã‚¢ãƒ—ãƒªã‚’ä½œã‚ã†</h1>
                </div>

                <div id="chapter8">
                    <div class="project-container">
                        <h5>ğŸ¯ ã“ã®ç« ã®å®Ÿè·µãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</h5>
                        <p><strong>æœ¬æ ¼çš„ãªé›»å“ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</strong>ã‚’ä½œæˆã—ã¾ã™</p>
                        <p>ç¾ã—ã„UIã¨å …ç‰¢ãªè¨ˆç®—æ©Ÿèƒ½ã‚’æŒã¤é›»å“ã‚¢ãƒ—ãƒªã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€å±¥æ­´æ©Ÿèƒ½ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œãªã©ã€ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªã‚¢ãƒ—ãƒªã®æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ï¼</p>
                    </div>

                    <div class="highlight">
                        <h5>ã“ã®ç« ã§å­¦ã¶ã“ã¨</h5>
                        <ul>
                            <li>é›»å“ã®UIè¨­è¨ˆã¨CSSé€£æº</li>
                            <li>è¤‡é›‘ãªã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†</li>
                            <li>è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…</li>
                            <li>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</li>
                            <li>å±¥æ­´æ©Ÿèƒ½ã®å®Ÿè£…</li>
                        </ul>
                    </div>

                    <h2 class="chapter-title">é›»å“ã‚¢ãƒ—ãƒªã®è¨­è¨ˆ</h2>
                    
                    <h3 class="section-title">8.1 å¿…è¦ãªæ©Ÿèƒ½ã‚’æ•´ç†ã—ã‚ˆã†</h3>
                    <p>
                        ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªé›»å“ã‚¢ãƒ—ãƒªã«ã¯ä»¥ä¸‹ã®æ©Ÿèƒ½ãŒå¿…è¦ã§ã™ï¼š
                    </p>
                    
                    <ul>
                        <li>ğŸ”¢ <strong>åŸºæœ¬çš„ãªå››å‰‡æ¼”ç®—</strong>ï¼šè¶³ã—ç®—ã€å¼•ãç®—ã€æ›ã‘ç®—ã€å‰²ã‚Šç®—</li>
                        <li>ğŸ”„ <strong>é€£ç¶šè¨ˆç®—</strong>ï¼šè¨ˆç®—çµæœã‚’æ¬¡ã®è¨ˆç®—ã«ä½¿ç”¨</li>
                        <li>ğŸ¯ <strong>å°æ•°ç‚¹è¨ˆç®—</strong>ï¼šç²¾åº¦ã®é«˜ã„å°æ•°ç‚¹è¨ˆç®—</li>
                        <li>ğŸš« <strong>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</strong>ï¼š0é™¤ç®—ãªã©ã®ã‚¨ãƒ©ãƒ¼å‡¦ç†</li>
                        <li>âŒ¨ï¸ <strong>ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å¯¾å¿œ</strong>ï¼šæ•°å­—ã‚­ãƒ¼ã‚„æ¼”ç®—å­ã‚­ãƒ¼ã§ã®æ“ä½œ</li>
                        <li>ğŸ“œ <strong>å±¥æ­´æ©Ÿèƒ½</strong>ï¼šéå»ã®è¨ˆç®—çµæœã‚’ä¿å­˜ãƒ»è¡¨ç¤º</li>
                        <li>ğŸ¨ <strong>ç¾ã—ã„UI</strong>ï¼šå®Ÿéš›ã®é›»å“ã®ã‚ˆã†ãªè¦‹ãŸç›®</li>
                    </ul>

                    <h3 class="section-title">8.2 çŠ¶æ…‹ç®¡ç†ã‚’è€ƒãˆã‚‹</h3>
                    <p>
                        é›»å“ã‚¢ãƒ—ãƒªã®çŠ¶æ…‹ã‚’ã©ã†ç®¡ç†ã™ã‚‹ã‹ã‚’è€ƒãˆã¾ã—ã‚‡ã†ï¼š
                    </p>
                    
                    <div class="exercise-container">
                        <h5>é›»å“ã®çŠ¶æ…‹ç®¡ç†</h5>
                        <pre class="code-block"><code class="language-javascript">// é›»å“ã®çŠ¶æ…‹
const calculatorState = {
    display: '0',        // è¡¨ç¤ºã•ã‚Œã‚‹æ•°å€¤
    previousValue: null, // å‰ã®å€¤
    operation: null,     // ç¾åœ¨ã®æ¼”ç®—å­
    waitingForNext: false, // æ¬¡ã®å…¥åŠ›ã‚’å¾…ã£ã¦ã„ã‚‹ã‹
    history: []         // å±¥æ­´
};</code></pre>
                    </div>

                    <h2 class="chapter-title">é«˜åº¦ãªã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†</h2>

                    <h3 class="section-title">8.3 ã‚¤ãƒ™ãƒ³ãƒˆå§”è­²ï¼ˆEvent Delegationï¼‰</h3>
                    <p>
                        å¤šãã®ãƒœã‚¿ãƒ³ã‚’åŠ¹ç‡çš„ã«ç®¡ç†ã™ã‚‹ãŸã‚ã«ã€ã‚¤ãƒ™ãƒ³ãƒˆå§”è­²ã‚’ä½¿ã„ã¾ã™ã€‚
                    </p>
                    
                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 8-1: ã‚¤ãƒ™ãƒ³ãƒˆå§”è­²ã®åŸºæœ¬</h5>
                        <pre class="code-block"><code class="language-javascript">// è¦ªè¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
document.getElementById('calculator').addEventListener('click', function(event) {
    // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸè¦ç´ ã‚’å–å¾—
    const target = event.target;
    
    // ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸå ´åˆã®ã¿å‡¦ç†
    if (target.tagName === 'BUTTON') {
        const buttonType = target.dataset.type;
        const buttonValue = target.dataset.value;
        
        console.log(`${buttonType}ãƒœã‚¿ãƒ³ã®${buttonValue}ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ`);
    }
});</code></pre>
                    </div>

                    <h3 class="section-title">8.4 ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆ</h3>
                    <p>
                        ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§ã®æ“ä½œã«ã‚‚å¯¾å¿œã—ã¾ã—ã‚‡ã†ã€‚
                    </p>
                    
                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 8-2: ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆ</h5>
                        <pre class="code-block"><code class="language-javascript">// ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†
document.addEventListener('keydown', function(event) {
    const key = event.key;
    
    // æ•°å­—ã‚­ãƒ¼
    if (key >= '0' && key <= '9') {
        handleNumberInput(key);
    }
    
    // æ¼”ç®—å­ã‚­ãƒ¼
    switch (key) {
        case '+':
        case '-':
        case '*':
        case '/':
            handleOperatorInput(key);
            break;
        case 'Enter':
        case '=':
            handleEquals();
            break;
        case 'Escape':
            handleClear();
            break;
        case 'Backspace':
            handleBackspace();
            break;
    }
});</code></pre>
                    </div>

                    <h2 class="chapter-title">å®Ÿè·µãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼šé›»å“ã‚¢ãƒ—ãƒª</h2>

                    <div class="project-container">
                        <h5>ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: æœ¬æ ¼çš„ãªé›»å“ã‚¢ãƒ—ãƒªã‚’ä½œã‚ã†</h5>
                        <p>ã“ã‚Œã¾ã§å­¦ã‚“ã çŸ¥è­˜ã‚’ä½¿ã£ã¦ã€ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªé›»å“ã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚</p>
                        
                        <h6>ã‚¹ãƒ†ãƒƒãƒ—1: HTMLæ§‹é€ ã¨CSS</h6>
                        <p>ã¾ãšã¯ç¾ã—ã„é›»å“ã®UI ã‚’ä½œæˆã—ã¾ã™ï¼š</p>
                        <pre class="code-block"><code class="language-javascript">&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;é›»å“ã‚¢ãƒ—ãƒª&lt;/title&gt;
    &lt;style&gt;
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .calculator-container {
            display: flex;
            gap: 20px;
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .calculator {
            background: #2c3e50;
            border-radius: 15px;
            padding: 20px;
            width: 300px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .display {
            background: #34495e;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: right;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .display-history {
            font-size: 14px;
            color: #bdc3c7;
            min-height: 20px;
        }
        
        .display-current {
            font-size: 2.5em;
            color: white;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
        
        .button {
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            height: 60px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .button:active {
            transform: translateY(0);
        }
        
        .button.number {
            background: #ecf0f1;
            color: #2c3e50;
        }
        
        .button.operator {
            background: #3498db;
            color: white;
        }
        
        .button.equals {
            background: #e74c3c;
            color: white;
        }
        
        .button.clear {
            background: #f39c12;
            color: white;
        }
        
        .button.zero {
            grid-column: span 2;
        }
        
        .history-panel {
            background: #ecf0f1;
            border-radius: 15px;
            padding: 20px;
            width: 250px;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .history-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .history-item {
            background: white;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.9em;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .history-item:hover {
            background: #3498db;
            color: white;
        }
        
        .history-clear {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            width: 100%;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="calculator-container"&gt;
        &lt;div class="calculator"&gt;
            &lt;div class="display"&gt;
                &lt;div class="display-history" id="historyDisplay"&gt;&lt;/div&gt;
                &lt;div class="display-current" id="currentDisplay"&gt;0&lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="buttons"&gt;
                &lt;button class="button clear" data-type="clear"&gt;C&lt;/button&gt;
                &lt;button class="button clear" data-type="clear-entry"&gt;CE&lt;/button&gt;
                &lt;button class="button operator" data-type="backspace"&gt;âŒ«&lt;/button&gt;
                &lt;button class="button operator" data-type="operator" data-value="/"&gt;Ã·&lt;/button&gt;
                
                &lt;button class="button number" data-type="number" data-value="7"&gt;7&lt;/button&gt;
                &lt;button class="button number" data-type="number" data-value="8"&gt;8&lt;/button&gt;
                &lt;button class="button number" data-type="number" data-value="9"&gt;9&lt;/button&gt;
                &lt;button class="button operator" data-type="operator" data-value="*"&gt;Ã—&lt;/button&gt;
                
                &lt;button class="button number" data-type="number" data-value="4"&gt;4&lt;/button&gt;
                &lt;button class="button number" data-type="number" data-value="5"&gt;5&lt;/button&gt;
                &lt;button class="button number" data-type="number" data-value="6"&gt;6&lt;/button&gt;
                &lt;button class="button operator" data-type="operator" data-value="-"&gt;-&lt;/button&gt;
                
                &lt;button class="button number" data-type="number" data-value="1"&gt;1&lt;/button&gt;
                &lt;button class="button number" data-type="number" data-value="2"&gt;2&lt;/button&gt;
                &lt;button class="button number" data-type="number" data-value="3"&gt;3&lt;/button&gt;
                &lt;button class="button operator" data-type="operator" data-value="+"&gt;+&lt;/button&gt;
                
                &lt;button class="button number zero" data-type="number" data-value="0"&gt;0&lt;/button&gt;
                &lt;button class="button number" data-type="decimal"&gt;.&lt;/button&gt;
                &lt;button class="button equals" data-type="equals"&gt;=&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        
        &lt;div class="history-panel"&gt;
            &lt;div class="history-title"&gt;ğŸ“œ å±¥æ­´&lt;/div&gt;
            &lt;div id="historyList"&gt;&lt;/div&gt;
            &lt;button class="history-clear" id="clearHistory"&gt;å±¥æ­´ã‚’ã‚¯ãƒªã‚¢&lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;script&gt;
        // JavaScript ã‚³ãƒ¼ãƒ‰ã‚’ã“ã“ã«æ›¸ãã¾ã™
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                        <h6>ã‚¹ãƒ†ãƒƒãƒ—2: é›»å“ã®ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…</h6>
                        <p>æ¬¡ã«ã€é›»å“ã®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã—ã¾ã™ï¼š</p>
                        <pre class="code-block"><code class="language-javascript">// é›»å“ã‚¯ãƒ©ã‚¹
class Calculator {
    constructor() {
        this.reset();
        this.history = this.loadHistory();
        
        // DOMè¦ç´ ã®å–å¾—
        this.currentDisplay = document.getElementById('currentDisplay');
        this.historyDisplay = document.getElementById('historyDisplay');
        this.historyList = document.getElementById('historyList');
        this.clearHistoryBtn = document.getElementById('clearHistory');
        
        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
        this.setupEventListeners();
        
        // å±¥æ­´ã‚’è¡¨ç¤º
        this.updateHistoryDisplay();
    }
    
    // é›»å“ã®çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
    reset() {
        this.currentValue = '0';
        this.previousValue = null;
        this.operation = null;
        this.waitingForNext = false;
        this.expression = '';
    }
    
    // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰å±¥æ­´ã‚’èª­ã¿è¾¼ã¿
    loadHistory() {
        const saved = localStorage.getItem('calculatorHistory');
        return saved ? JSON.parse(saved) : [];
    }
    
    // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«å±¥æ­´ã‚’ä¿å­˜
    saveHistory() {
        localStorage.setItem('calculatorHistory', JSON.stringify(this.history));
    }
    
    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
    setupEventListeners() {
        // é›»å“ã®ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
        document.querySelector('.calculator').addEventListener('click', (e) => {
            if (e.target.classList.contains('button')) {
                this.handleButtonClick(e.target);
            }
        });
        
        // å±¥æ­´ã‚¯ãƒªã‚¢
        this.clearHistoryBtn.addEventListener('click', () => {
            this.clearHistory();
        });
        
        // å±¥æ­´é …ç›®ã®ã‚¯ãƒªãƒƒã‚¯
        this.historyList.addEventListener('click', (e) => {
            if (e.target.classList.contains('history-item')) {
                this.loadFromHistory(e.target.dataset.result);
            }
        });
        
        // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¥åŠ›
        document.addEventListener('keydown', (e) => {
            this.handleKeyPress(e);
        });
    }
}</code></pre>

                        <h6>ã‚¹ãƒ†ãƒƒãƒ—3: å…¥åŠ›å‡¦ç†ã¨ãƒœã‚¿ãƒ³æ“ä½œ</h6>
                        <p>å„ç¨®ãƒœã‚¿ãƒ³ã®å‡¦ç†ã‚’å®Ÿè£…ã—ã¾ã™ï¼š</p>
                        <pre class="code-block"><code class="language-javascript">    // ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã®å‡¦ç†
    handleButtonClick(button) {
        const type = button.dataset.type;
        const value = button.dataset.value;
        
        switch (type) {
            case 'number':
                this.inputNumber(value);
                break;
            case 'operator':
                this.inputOperator(value);
                break;
            case 'equals':
                this.calculate();
                break;
            case 'decimal':
                this.inputDecimal();
                break;
            case 'clear':
                this.clear();
                break;
            case 'clear-entry':
                this.clearEntry();
                break;
            case 'backspace':
                this.backspace();
                break;
        }
        
        this.updateDisplay();
    }
    
    // æ•°å­—ã®å…¥åŠ›
    inputNumber(num) {
        if (this.waitingForNext) {
            this.currentValue = num;
            this.waitingForNext = false;
        } else {
            this.currentValue = this.currentValue === '0' ? num : this.currentValue + num;
        }
    }
    
    // æ¼”ç®—å­ã®å…¥åŠ›
    inputOperator(op) {
        if (this.operation !== null && !this.waitingForNext) {
            this.calculate();
        }
        
        this.previousValue = this.currentValue;
        this.operation = op;
        this.waitingForNext = true;
        
        // å¼ã®è¡¨ç¤ºã‚’æ›´æ–°
        this.expression = `${this.previousValue} ${this.getOperatorSymbol(op)} `;
    }
    
    // å°æ•°ç‚¹ã®å…¥åŠ›
    inputDecimal() {
        if (this.waitingForNext) {
            this.currentValue = '0.';
            this.waitingForNext = false;
        } else if (this.currentValue.indexOf('.') === -1) {
            this.currentValue += '.';
        }
    }
    
    // è¨ˆç®—å®Ÿè¡Œ
    calculate() {
        if (this.operation === null || this.waitingForNext) {
            return;
        }
        
        const prev = parseFloat(this.previousValue);
        const current = parseFloat(this.currentValue);
        let result;
        
        try {
            switch (this.operation) {
                case '+':
                    result = prev + current;
                    break;
                case '-':
                    result = prev - current;
                    break;
                case '*':
                    result = prev * current;
                    break;
                case '/':
                    if (current === 0) {
                        throw new Error('0ã§å‰²ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“');
                    }
                    result = prev / current;
                    break;
                default:
                    return;
            }
            
            // çµæœã‚’å±¥æ­´ã«è¿½åŠ 
            const calculation = `${this.previousValue} ${this.getOperatorSymbol(this.operation)} ${this.currentValue} = ${result}`;
            this.addToHistory(calculation, result);
            
            this.currentValue = result.toString();
            this.previousValue = null;
            this.operation = null;
            this.waitingForNext = true;
            this.expression = '';
            
        } catch (error) {
            this.currentValue = 'ã‚¨ãƒ©ãƒ¼';
            this.previousValue = null;
            this.operation = null;
            this.waitingForNext = true;
            this.expression = '';
        }
    }</code></pre>

                        <h6>ã‚¹ãƒ†ãƒƒãƒ—4: å±¥æ­´æ©Ÿèƒ½ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</h6>
                        <p>å±¥æ­´æ©Ÿèƒ½ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’å®Ÿè£…ã—ã¾ã™ï¼š</p>
                        <pre class="code-block"><code class="language-javascript">    // å±¥æ­´ã«è¿½åŠ 
    addToHistory(calculation, result) {
        const historyItem = {
            calculation: calculation,
            result: result,
            timestamp: new Date().toLocaleString()
        };
        
        this.history.unshift(historyItem);
        
        // å±¥æ­´ã‚’50ä»¶ã¾ã§ã«åˆ¶é™
        if (this.history.length > 50) {
            this.history = this.history.slice(0, 50);
        }
        
        this.saveHistory();
        this.updateHistoryDisplay();
    }
    
    // å±¥æ­´è¡¨ç¤ºã®æ›´æ–°
    updateHistoryDisplay() {
        this.historyList.innerHTML = '';
        
        if (this.history.length === 0) {
            this.historyList.innerHTML = '&lt;div style="text-align:center; color:#7f8c8d;"&gt;å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“&lt;/div&gt;';
            return;
        }
        
        this.history.forEach((item, index) => {
            const historyItem = document.createElement('div');
            historyItem.className = 'history-item';
            historyItem.dataset.result = item.result;
            historyItem.innerHTML = `
                &lt;div&gt;${item.calculation}&lt;/div&gt;
                &lt;div style="font-size:0.8em; color:#7f8c8d;"&gt;${item.timestamp}&lt;/div&gt;
            `;
            this.historyList.appendChild(historyItem);
        });
    }
    
    // å±¥æ­´ã‹ã‚‰å€¤ã‚’èª­ã¿è¾¼ã¿
    loadFromHistory(result) {
        this.currentValue = result.toString();
        this.waitingForNext = true;
        this.updateDisplay();
    }
    
    // å±¥æ­´ã‚’ã‚¯ãƒªã‚¢
    clearHistory() {
        this.history = [];
        this.saveHistory();
        this.updateHistoryDisplay();
    }
    
    // ãã®ä»–ã®æ“ä½œ
    clear() {
        this.reset();
    }
    
    clearEntry() {
        this.currentValue = '0';
        this.waitingForNext = false;
    }
    
    backspace() {
        if (this.currentValue !== '0' && !this.waitingForNext) {
            this.currentValue = this.currentValue.slice(0, -1);
            if (this.currentValue === '') {
                this.currentValue = '0';
            }
        }
    }
    
    // è¡¨ç¤ºã®æ›´æ–°
    updateDisplay() {
        this.currentDisplay.textContent = this.currentValue;
        this.historyDisplay.textContent = this.expression;
    }
    
    // æ¼”ç®—å­è¨˜å·ã®å¤‰æ›
    getOperatorSymbol(op) {
        switch (op) {
            case '+': return '+';
            case '-': return '-';
            case '*': return 'Ã—';
            case '/': return 'Ã·';
            default: return op;
        }
    }
}</code></pre>

                        <h6>ã‚¹ãƒ†ãƒƒãƒ—5: ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å¯¾å¿œã¨å®Œæˆ</h6>
                        <p>æœ€å¾Œã«ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å¯¾å¿œã‚’è¿½åŠ ã—ã¦å®Œæˆã•ã›ã¾ã™ï¼š</p>
                        <pre class="code-block"><code class="language-javascript">    // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¥åŠ›ã®å‡¦ç†
    handleKeyPress(event) {
        const key = event.key;
        
        // æ•°å­—ã‚­ãƒ¼
        if (key >= '0' && key <= '9') {
            this.inputNumber(key);
            this.updateDisplay();
            return;
        }
        
        switch (key) {
            case '+':
            case '-':
            case '*':
            case '/':
                this.inputOperator(key);
                break;
            case 'Enter':
            case '=':
                this.calculate();
                break;
            case '.':
                this.inputDecimal();
                break;
            case 'Escape':
                this.clear();
                break;
            case 'Backspace':
                this.backspace();
                break;
            case 'Delete':
                this.clearEntry();
                break;
            default:
                return; // ä½•ã‚‚ã—ãªã„
        }
        
        this.updateDisplay();
        event.preventDefault(); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œã‚’é˜²ã
    }
    
    // æ•°å€¤ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
    formatNumber(num) {
        if (num === 'ã‚¨ãƒ©ãƒ¼') return num;
        
        const number = parseFloat(num);
        if (isNaN(number)) return num;
        
        // å°æ•°ç‚¹ä»¥ä¸‹10æ¡ã§å››æ¨äº”å…¥
        const rounded = Math.round(number * 10000000000) / 10000000000;
        
        // å¤§ããªæ•°å€¤ã¯æŒ‡æ•°è¡¨è¨˜
        if (Math.abs(rounded) >= 1e10) {
            return rounded.toExponential(6);
        }
        
        return rounded.toString();
    }
    
    // é«˜åº¦ãªæ©Ÿèƒ½ï¼šãƒ¡ãƒ¢ãƒªæ©Ÿèƒ½
    memoryStore() {
        localStorage.setItem('calculatorMemory', this.currentValue);
    }
    
    memoryRecall() {
        const memory = localStorage.getItem('calculatorMemory');
        if (memory) {
            this.currentValue = memory;
            this.waitingForNext = true;
            this.updateDisplay();
        }
    }
    
    memoryClear() {
        localStorage.removeItem('calculatorMemory');
    }
}

// é›»å“ã‚¢ãƒ—ãƒªã‚’åˆæœŸåŒ–
const calculator = new Calculator();

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®å‡¦ç†
document.addEventListener('DOMContentLoaded', () => {
    console.log('ğŸ§® é›»å“ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã—ã¾ã—ãŸï¼');
    console.log('ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§ã‚‚æ“ä½œã§ãã¾ã™ï¼š');
    console.log('- æ•°å­—ã‚­ãƒ¼: 0-9');
    console.log('- æ¼”ç®—å­: +, -, *, /');
    console.log('- å®Ÿè¡Œ: Enter ã¾ãŸã¯ =');
    console.log('- ã‚¯ãƒªã‚¢: Escape');
    console.log('- ãƒãƒƒã‚¯ã‚¹ãƒšãƒ¼ã‚¹: Backspace');
});</code></pre>
                    </div>

                    <div class="quiz-container">
                        <h5>ç†è§£åº¦ç¢ºèªã‚¯ã‚¤ã‚º</h5>
                        <ol>
                            <li>å¤šãã®ãƒœã‚¿ãƒ³ã‚’åŠ¹ç‡çš„ã«ç®¡ç†ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã¯ä½•ã§ã™ã‹ï¼Ÿ</li>
                            <li>ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã¯ä½•ã§ã™ã‹ï¼Ÿ</li>
                            <li>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã§0å‰²ã‚Šç®—ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹æ¡ä»¶ã¯ä½•ã§ã™ã‹ï¼Ÿ</li>
                            <li>æ•°å€¤ã®ç²¾åº¦ã‚’ä¿ã¤ãŸã‚ã«ä½¿ç”¨ã™ã‚‹é–¢æ•°ã¯ä½•ã§ã™ã‹ï¼Ÿ</li>
                            <li>å±¥æ­´ãƒ‡ãƒ¼ã‚¿ã‚’æ°¸ç¶šåŒ–ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ä»•çµ„ã¿ã¯ä½•ã§ã™ã‹ï¼Ÿ</li>
                        </ol>
                        
                        <h6>ç­”ãˆ</h6>
                        <ol>
                            <li>ã‚¤ãƒ™ãƒ³ãƒˆå§”è­²ï¼ˆEvent Delegationï¼‰</li>
                            <li>keydown ã‚¤ãƒ™ãƒ³ãƒˆ</li>
                            <li>current === 0 (é™¤æ•°ãŒ0ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯)</li>
                            <li>Math.round() ã¾ãŸã¯ parseFloat()</li>
                            <li>ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆlocalStorageï¼‰</li>
                        </ol>
                    </div>

                    <h2 class="chapter-title">ç« ã®ã¾ã¨ã‚</h2>
                    <p>ã“ã®ç« ã§ã¯ä»¥ä¸‹ã®ã“ã¨ã‚’å­¦ã³ã¾ã—ãŸï¼š</p>
                    <ul>
                        <li>ã‚¤ãƒ™ãƒ³ãƒˆå§”è­²ã‚’ä½¿ã£ãŸåŠ¹ç‡çš„ãªã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†</li>
                        <li>ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†</li>
                        <li>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨try-catchæ–‡</li>
                        <li>æ•°å€¤ã®ç²¾åº¦å‡¦ç†ã¨å°æ•°ç‚¹è¨ˆç®—</li>
                        <li>å±¥æ­´æ©Ÿèƒ½ã¨ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–</li>
                        <li>CSSã‚’ä½¿ã£ãŸç¾ã—ã„UIãƒ‡ã‚¶ã‚¤ãƒ³</li>
                    </ul>

                    <div class="highlight">
                        <h5>ç¬¬8ç« ã‚¯ãƒªã‚¢æ¡ä»¶</h5>
                        <p>æ¬¡ã®ãƒ¬ãƒ™ãƒ«ã«é€²ã‚€å‰ã«ã€ä»¥ä¸‹ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã‹ç¢ºèªã—ã¦ãã ã•ã„ï¼š</p>
                        <ul>
                            <li>â˜ é›»å“ã®åŸºæœ¬è¨ˆç®—ï¼ˆ+ã€-ã€Ã—ã€Ã·ï¼‰ãŒã§ãã‚‹</li>
                            <li>â˜ ç¾ã—ã„UIãƒ‡ã‚¶ã‚¤ãƒ³ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹</li>
                            <li>â˜ ã‚¨ãƒ©ãƒ¼å‡¦ç†ãŒé©åˆ‡ã«è¡Œã‚ã‚Œã¦ã„ã‚‹</li>
                            <li>â˜ é›»å“ã‚¢ãƒ—ãƒªãŒå®Œæˆã—ã¦ã„ã‚‹</li>
                        </ul>
                    </div>

                    <h2 class="chapter-title">ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</h2>
                    <p>JavaScriptå…¥é–€ã‚³ãƒ¼ã‚¹ã‚’å®Œäº†ã—ã¾ã—ãŸï¼</p>
                    <p>ã‚ãªãŸã¯ä»¥ä¸‹ã®ã‚¹ã‚­ãƒ«ã‚’èº«ã«ã¤ã‘ã¾ã—ãŸï¼š</p>
                    <ul>
                        <li>âœ… JavaScriptã®åŸºæœ¬æ–‡æ³•</li>
                        <li>âœ… å¤‰æ•°ã€æ¡ä»¶åˆ†å²ã€ãƒ«ãƒ¼ãƒ—ã€é–¢æ•°ã®ä½¿ã„æ–¹</li>
                        <li>âœ… DOMæ“ä½œã«ã‚ˆã‚‹Webãƒšãƒ¼ã‚¸ã®å‹•çš„å¤‰æ›´</li>
                        <li>âœ… æœ¬æ ¼çš„ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹ç™º</li>
                        <li>âœ… ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–ã¨çŠ¶æ…‹ç®¡ç†</li>
                    </ul>

                    <div class="highlight">
                        <h5>ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h5>
                        <p>ã“ã®ã‚³ãƒ¼ã‚¹ã‚’å®Œäº†ã—ãŸã‚ãªãŸã¯ã€ä»¥ä¸‹ã®ã‚ˆã‚Šé«˜åº¦ãªå­¦ç¿’ã«é€²ã‚€ã“ã¨ãŒã§ãã¾ã™ï¼š</p>
                        <ul>
                            <li>ES6+ã®æ–°æ©Ÿèƒ½ï¼ˆã‚¢ãƒ­ãƒ¼é–¢æ•°ã€ã‚¯ãƒ©ã‚¹ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãªã©ï¼‰</li>
                            <li>Reactã€Vue.jsã€Angularãªã©ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯</li>
                            <li>Node.jsã‚’ä½¿ã£ãŸã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰é–‹ç™º</li>
                            <li>TypeScriptã«ã‚ˆã‚‹å‹å®‰å…¨ãªé–‹ç™º</li>
                            <li>æœ¬æ ¼çš„ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™º</li>
                        </ul>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="chapter7.html" class="btn btn-secondary">â† å‰ã®ç« </a>
                        <a href="README.md" class="btn btn-success">å®Œäº†ï¼ã‚¬ã‚¤ãƒ‰ä¸€è¦§ã¸</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js åˆæœŸåŒ– -->
    <script>hljs.highlightAll();</script>
</body>
</html>