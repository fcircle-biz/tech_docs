<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript学習教材 第8章 - 電卓アプリを作ろう</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        .navbar {
            background-color: #1565c0;
        }
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        .chapter-title {
            color: #1565c0;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #1565c0;
            padding-bottom: 0.5rem;
        }
        .section-title {
            color: #1976d2;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        /* コードハイライト */
        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        code {
            display: block;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            white-space: pre;
            overflow-x: auto;
        }
        .quiz-container {
            background-color: #e3f2fd;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .highlight {
            background-color: #fff3e0;
            padding: 1rem;
            border-left: 4px solid #ff9800;
            margin: 1rem 0;
        }
        .project-container {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .demo-container {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">JavaScript学習ガイド</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../../../README.md">ホーム</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="README.md">ガイド一覧</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading">学習内容</h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="chapter1.html">第1章: プログラミングって何？</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="chapter2.html">第2章: 数字と文字を扱おう</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="chapter3.html">第3章: 条件によって処理を変えよう</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="chapter4.html">第4章: 繰り返し処理をマスターしよう</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="chapter5.html">第5章: 関数で処理をまとめよう</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="chapter6.html">第6章: Webページを操作しよう</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="chapter7.html">第7章: ToDoリストアプリを作ろう</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="#chapter8">第8章: 電卓アプリを作ろう</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第8章: 電卓アプリを作ろう</h1>
                </div>

                <div id="chapter8">
                    <div class="project-container">
                        <h5>🎯 この章の実践プロジェクト</h5>
                        <p><strong>本格的な電卓アプリケーション</strong>を作成します</p>
                        <p>美しいUIと堅牢な計算機能を持つ電卓アプリを作りましょう。エラーハンドリング、履歴機能、キーボード操作など、プロフェッショナルなアプリの機能を実装します！</p>
                    </div>

                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>電卓のUI設計とCSS連携</li>
                            <li>複雑なイベント処理</li>
                            <li>計算ロジックの実装</li>
                            <li>エラーハンドリング</li>
                            <li>履歴機能の実装</li>
                        </ul>
                    </div>

                    <h2 class="chapter-title">電卓アプリの設計</h2>
                    
                    <h3 class="section-title">8.1 必要な機能を整理しよう</h3>
                    <p>
                        プロフェッショナルな電卓アプリには以下の機能が必要です：
                    </p>
                    
                    <ul>
                        <li>🔢 <strong>基本的な四則演算</strong>：足し算、引き算、掛け算、割り算</li>
                        <li>🔄 <strong>連続計算</strong>：計算結果を次の計算に使用</li>
                        <li>🎯 <strong>小数点計算</strong>：精度の高い小数点計算</li>
                        <li>🚫 <strong>エラーハンドリング</strong>：0除算などのエラー処理</li>
                        <li>⌨️ <strong>キーボード対応</strong>：数字キーや演算子キーでの操作</li>
                        <li>📜 <strong>履歴機能</strong>：過去の計算結果を保存・表示</li>
                        <li>🎨 <strong>美しいUI</strong>：実際の電卓のような見た目</li>
                    </ul>

                    <h3 class="section-title">8.2 状態管理を考える</h3>
                    <p>
                        電卓アプリの状態をどう管理するかを考えましょう：
                    </p>
                    
                    <div class="exercise-container">
                        <h5>電卓の状態管理</h5>
                        <pre class="code-block"><code class="language-javascript">// 電卓の状態
const calculatorState = {
    display: '0',        // 表示される数値
    previousValue: null, // 前の値
    operation: null,     // 現在の演算子
    waitingForNext: false, // 次の入力を待っているか
    history: []         // 履歴
};</code></pre>
                    </div>

                    <h2 class="chapter-title">高度なイベント処理</h2>

                    <h3 class="section-title">8.3 イベント委譲（Event Delegation）</h3>
                    <p>
                        多くのボタンを効率的に管理するために、イベント委譲を使います。
                    </p>
                    
                    <div class="exercise-container">
                        <h5>実習 8-1: イベント委譲の基本</h5>
                        <pre class="code-block"><code class="language-javascript">// 親要素にイベントリスナーを設定
document.getElementById('calculator').addEventListener('click', function(event) {
    // クリックされた要素を取得
    const target = event.target;
    
    // ボタンがクリックされた場合のみ処理
    if (target.tagName === 'BUTTON') {
        const buttonType = target.dataset.type;
        const buttonValue = target.dataset.value;
        
        console.log(`${buttonType}ボタンの${buttonValue}がクリックされました`);
    }
});</code></pre>
                    </div>

                    <h3 class="section-title">8.4 キーボードイベント</h3>
                    <p>
                        キーボードでの操作にも対応しましょう。
                    </p>
                    
                    <div class="exercise-container">
                        <h5>実習 8-2: キーボードイベント</h5>
                        <pre class="code-block"><code class="language-javascript">// キーボードイベントの処理
document.addEventListener('keydown', function(event) {
    const key = event.key;
    
    // 数字キー
    if (key >= '0' && key <= '9') {
        handleNumberInput(key);
    }
    
    // 演算子キー
    switch (key) {
        case '+':
        case '-':
        case '*':
        case '/':
            handleOperatorInput(key);
            break;
        case 'Enter':
        case '=':
            handleEquals();
            break;
        case 'Escape':
            handleClear();
            break;
        case 'Backspace':
            handleBackspace();
            break;
    }
});</code></pre>
                    </div>

                    <h2 class="chapter-title">実践プロジェクト：電卓アプリ</h2>

                    <div class="project-container">
                        <h5>🎯 プロジェクト: 本格的な電卓アプリを作ろう</h5>
                        <p>これまで学んだ知識を使って、プロフェッショナルな電卓アプリを作成しましょう。</p>
                        
                        <h6>ステップ1: HTML構造とCSS</h6>
                        <p>まずは美しい電卓のUI を作成します：</p>
                        <pre class="code-block"><code class="language-javascript">&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;電卓アプリ&lt;/title&gt;
    &lt;style&gt;
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .calculator-container {
            display: flex;
            gap: 20px;
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .calculator {
            background: #2c3e50;
            border-radius: 15px;
            padding: 20px;
            width: 300px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .display {
            background: #34495e;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: right;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .display-history {
            font-size: 14px;
            color: #bdc3c7;
            min-height: 20px;
        }
        
        .display-current {
            font-size: 2.5em;
            color: white;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
        
        .button {
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            height: 60px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .button:active {
            transform: translateY(0);
        }
        
        .button.number {
            background: #ecf0f1;
            color: #2c3e50;
        }
        
        .button.operator {
            background: #3498db;
            color: white;
        }
        
        .button.equals {
            background: #e74c3c;
            color: white;
        }
        
        .button.clear {
            background: #f39c12;
            color: white;
        }
        
        .button.zero {
            grid-column: span 2;
        }
        
        .history-panel {
            background: #ecf0f1;
            border-radius: 15px;
            padding: 20px;
            width: 250px;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .history-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .history-item {
            background: white;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 0.9em;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .history-item:hover {
            background: #3498db;
            color: white;
        }
        
        .history-clear {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            width: 100%;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="calculator-container"&gt;
        &lt;div class="calculator"&gt;
            &lt;div class="display"&gt;
                &lt;div class="display-history" id="historyDisplay"&gt;&lt;/div&gt;
                &lt;div class="display-current" id="currentDisplay"&gt;0&lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="buttons"&gt;
                &lt;button class="button clear" data-type="clear"&gt;C&lt;/button&gt;
                &lt;button class="button clear" data-type="clear-entry"&gt;CE&lt;/button&gt;
                &lt;button class="button operator" data-type="backspace"&gt;⌫&lt;/button&gt;
                &lt;button class="button operator" data-type="operator" data-value="/"&gt;÷&lt;/button&gt;
                
                &lt;button class="button number" data-type="number" data-value="7"&gt;7&lt;/button&gt;
                &lt;button class="button number" data-type="number" data-value="8"&gt;8&lt;/button&gt;
                &lt;button class="button number" data-type="number" data-value="9"&gt;9&lt;/button&gt;
                &lt;button class="button operator" data-type="operator" data-value="*"&gt;×&lt;/button&gt;
                
                &lt;button class="button number" data-type="number" data-value="4"&gt;4&lt;/button&gt;
                &lt;button class="button number" data-type="number" data-value="5"&gt;5&lt;/button&gt;
                &lt;button class="button number" data-type="number" data-value="6"&gt;6&lt;/button&gt;
                &lt;button class="button operator" data-type="operator" data-value="-"&gt;-&lt;/button&gt;
                
                &lt;button class="button number" data-type="number" data-value="1"&gt;1&lt;/button&gt;
                &lt;button class="button number" data-type="number" data-value="2"&gt;2&lt;/button&gt;
                &lt;button class="button number" data-type="number" data-value="3"&gt;3&lt;/button&gt;
                &lt;button class="button operator" data-type="operator" data-value="+"&gt;+&lt;/button&gt;
                
                &lt;button class="button number zero" data-type="number" data-value="0"&gt;0&lt;/button&gt;
                &lt;button class="button number" data-type="decimal"&gt;.&lt;/button&gt;
                &lt;button class="button equals" data-type="equals"&gt;=&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        
        &lt;div class="history-panel"&gt;
            &lt;div class="history-title"&gt;📜 履歴&lt;/div&gt;
            &lt;div id="historyList"&gt;&lt;/div&gt;
            &lt;button class="history-clear" id="clearHistory"&gt;履歴をクリア&lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;script&gt;
        // JavaScript コードをここに書きます
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                        <h6>ステップ2: 電卓のロジック実装</h6>
                        <p>次に、電卓の計算ロジックを実装します：</p>
                        <pre class="code-block"><code class="language-javascript">// 電卓クラス
class Calculator {
    constructor() {
        this.reset();
        this.history = this.loadHistory();
        
        // DOM要素の取得
        this.currentDisplay = document.getElementById('currentDisplay');
        this.historyDisplay = document.getElementById('historyDisplay');
        this.historyList = document.getElementById('historyList');
        this.clearHistoryBtn = document.getElementById('clearHistory');
        
        // イベントリスナーの設定
        this.setupEventListeners();
        
        // 履歴を表示
        this.updateHistoryDisplay();
    }
    
    // 電卓の状態をリセット
    reset() {
        this.currentValue = '0';
        this.previousValue = null;
        this.operation = null;
        this.waitingForNext = false;
        this.expression = '';
    }
    
    // ローカルストレージから履歴を読み込み
    loadHistory() {
        const saved = localStorage.getItem('calculatorHistory');
        return saved ? JSON.parse(saved) : [];
    }
    
    // ローカルストレージに履歴を保存
    saveHistory() {
        localStorage.setItem('calculatorHistory', JSON.stringify(this.history));
    }
    
    // イベントリスナーの設定
    setupEventListeners() {
        // 電卓のボタンクリック
        document.querySelector('.calculator').addEventListener('click', (e) => {
            if (e.target.classList.contains('button')) {
                this.handleButtonClick(e.target);
            }
        });
        
        // 履歴クリア
        this.clearHistoryBtn.addEventListener('click', () => {
            this.clearHistory();
        });
        
        // 履歴項目のクリック
        this.historyList.addEventListener('click', (e) => {
            if (e.target.classList.contains('history-item')) {
                this.loadFromHistory(e.target.dataset.result);
            }
        });
        
        // キーボード入力
        document.addEventListener('keydown', (e) => {
            this.handleKeyPress(e);
        });
    }
}</code></pre>

                        <h6>ステップ3: 入力処理とボタン操作</h6>
                        <p>各種ボタンの処理を実装します：</p>
                        <pre class="code-block"><code class="language-javascript">    // ボタンクリックの処理
    handleButtonClick(button) {
        const type = button.dataset.type;
        const value = button.dataset.value;
        
        switch (type) {
            case 'number':
                this.inputNumber(value);
                break;
            case 'operator':
                this.inputOperator(value);
                break;
            case 'equals':
                this.calculate();
                break;
            case 'decimal':
                this.inputDecimal();
                break;
            case 'clear':
                this.clear();
                break;
            case 'clear-entry':
                this.clearEntry();
                break;
            case 'backspace':
                this.backspace();
                break;
        }
        
        this.updateDisplay();
    }
    
    // 数字の入力
    inputNumber(num) {
        if (this.waitingForNext) {
            this.currentValue = num;
            this.waitingForNext = false;
        } else {
            this.currentValue = this.currentValue === '0' ? num : this.currentValue + num;
        }
    }
    
    // 演算子の入力
    inputOperator(op) {
        if (this.operation !== null && !this.waitingForNext) {
            this.calculate();
        }
        
        this.previousValue = this.currentValue;
        this.operation = op;
        this.waitingForNext = true;
        
        // 式の表示を更新
        this.expression = `${this.previousValue} ${this.getOperatorSymbol(op)} `;
    }
    
    // 小数点の入力
    inputDecimal() {
        if (this.waitingForNext) {
            this.currentValue = '0.';
            this.waitingForNext = false;
        } else if (this.currentValue.indexOf('.') === -1) {
            this.currentValue += '.';
        }
    }
    
    // 計算実行
    calculate() {
        if (this.operation === null || this.waitingForNext) {
            return;
        }
        
        const prev = parseFloat(this.previousValue);
        const current = parseFloat(this.currentValue);
        let result;
        
        try {
            switch (this.operation) {
                case '+':
                    result = prev + current;
                    break;
                case '-':
                    result = prev - current;
                    break;
                case '*':
                    result = prev * current;
                    break;
                case '/':
                    if (current === 0) {
                        throw new Error('0で割ることはできません');
                    }
                    result = prev / current;
                    break;
                default:
                    return;
            }
            
            // 結果を履歴に追加
            const calculation = `${this.previousValue} ${this.getOperatorSymbol(this.operation)} ${this.currentValue} = ${result}`;
            this.addToHistory(calculation, result);
            
            this.currentValue = result.toString();
            this.previousValue = null;
            this.operation = null;
            this.waitingForNext = true;
            this.expression = '';
            
        } catch (error) {
            this.currentValue = 'エラー';
            this.previousValue = null;
            this.operation = null;
            this.waitingForNext = true;
            this.expression = '';
        }
    }</code></pre>

                        <h6>ステップ4: 履歴機能とエラーハンドリング</h6>
                        <p>履歴機能とエラーハンドリングを実装します：</p>
                        <pre class="code-block"><code class="language-javascript">    // 履歴に追加
    addToHistory(calculation, result) {
        const historyItem = {
            calculation: calculation,
            result: result,
            timestamp: new Date().toLocaleString()
        };
        
        this.history.unshift(historyItem);
        
        // 履歴を50件までに制限
        if (this.history.length > 50) {
            this.history = this.history.slice(0, 50);
        }
        
        this.saveHistory();
        this.updateHistoryDisplay();
    }
    
    // 履歴表示の更新
    updateHistoryDisplay() {
        this.historyList.innerHTML = '';
        
        if (this.history.length === 0) {
            this.historyList.innerHTML = '&lt;div style="text-align:center; color:#7f8c8d;"&gt;履歴がありません&lt;/div&gt;';
            return;
        }
        
        this.history.forEach((item, index) => {
            const historyItem = document.createElement('div');
            historyItem.className = 'history-item';
            historyItem.dataset.result = item.result;
            historyItem.innerHTML = `
                &lt;div&gt;${item.calculation}&lt;/div&gt;
                &lt;div style="font-size:0.8em; color:#7f8c8d;"&gt;${item.timestamp}&lt;/div&gt;
            `;
            this.historyList.appendChild(historyItem);
        });
    }
    
    // 履歴から値を読み込み
    loadFromHistory(result) {
        this.currentValue = result.toString();
        this.waitingForNext = true;
        this.updateDisplay();
    }
    
    // 履歴をクリア
    clearHistory() {
        this.history = [];
        this.saveHistory();
        this.updateHistoryDisplay();
    }
    
    // その他の操作
    clear() {
        this.reset();
    }
    
    clearEntry() {
        this.currentValue = '0';
        this.waitingForNext = false;
    }
    
    backspace() {
        if (this.currentValue !== '0' && !this.waitingForNext) {
            this.currentValue = this.currentValue.slice(0, -1);
            if (this.currentValue === '') {
                this.currentValue = '0';
            }
        }
    }
    
    // 表示の更新
    updateDisplay() {
        this.currentDisplay.textContent = this.currentValue;
        this.historyDisplay.textContent = this.expression;
    }
    
    // 演算子記号の変換
    getOperatorSymbol(op) {
        switch (op) {
            case '+': return '+';
            case '-': return '-';
            case '*': return '×';
            case '/': return '÷';
            default: return op;
        }
    }
}</code></pre>

                        <h6>ステップ5: キーボード対応と完成</h6>
                        <p>最後に、キーボード対応を追加して完成させます：</p>
                        <pre class="code-block"><code class="language-javascript">    // キーボード入力の処理
    handleKeyPress(event) {
        const key = event.key;
        
        // 数字キー
        if (key >= '0' && key <= '9') {
            this.inputNumber(key);
            this.updateDisplay();
            return;
        }
        
        switch (key) {
            case '+':
            case '-':
            case '*':
            case '/':
                this.inputOperator(key);
                break;
            case 'Enter':
            case '=':
                this.calculate();
                break;
            case '.':
                this.inputDecimal();
                break;
            case 'Escape':
                this.clear();
                break;
            case 'Backspace':
                this.backspace();
                break;
            case 'Delete':
                this.clearEntry();
                break;
            default:
                return; // 何もしない
        }
        
        this.updateDisplay();
        event.preventDefault(); // デフォルト動作を防ぐ
    }
    
    // 数値のフォーマット
    formatNumber(num) {
        if (num === 'エラー') return num;
        
        const number = parseFloat(num);
        if (isNaN(number)) return num;
        
        // 小数点以下10桁で四捨五入
        const rounded = Math.round(number * 10000000000) / 10000000000;
        
        // 大きな数値は指数表記
        if (Math.abs(rounded) >= 1e10) {
            return rounded.toExponential(6);
        }
        
        return rounded.toString();
    }
    
    // 高度な機能：メモリ機能
    memoryStore() {
        localStorage.setItem('calculatorMemory', this.currentValue);
    }
    
    memoryRecall() {
        const memory = localStorage.getItem('calculatorMemory');
        if (memory) {
            this.currentValue = memory;
            this.waitingForNext = true;
            this.updateDisplay();
        }
    }
    
    memoryClear() {
        localStorage.removeItem('calculatorMemory');
    }
}

// 電卓アプリを初期化
const calculator = new Calculator();

// ページ読み込み時の処理
document.addEventListener('DOMContentLoaded', () => {
    console.log('🧮 電卓アプリが起動しました！');
    console.log('キーボードでも操作できます：');
    console.log('- 数字キー: 0-9');
    console.log('- 演算子: +, -, *, /');
    console.log('- 実行: Enter または =');
    console.log('- クリア: Escape');
    console.log('- バックスペース: Backspace');
});</code></pre>
                    </div>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>多くのボタンを効率的に管理するために使用するテクニックは何ですか？</li>
                            <li>キーボードイベントを処理するために使用するイベントは何ですか？</li>
                            <li>エラーハンドリングで0割り算をチェックするために使用する条件は何ですか？</li>
                            <li>数値の精度を保つために使用する関数は何ですか？</li>
                            <li>履歴データを永続化するために使用する仕組みは何ですか？</li>
                        </ol>
                        
                        <h6>答え</h6>
                        <ol>
                            <li>イベント委譲（Event Delegation）</li>
                            <li>keydown イベント</li>
                            <li>current === 0 (除数が0かどうかをチェック)</li>
                            <li>Math.round() または parseFloat()</li>
                            <li>ローカルストレージ（localStorage）</li>
                        </ol>
                    </div>

                    <h2 class="chapter-title">章のまとめ</h2>
                    <p>この章では以下のことを学びました：</p>
                    <ul>
                        <li>イベント委譲を使った効率的なイベント処理</li>
                        <li>キーボードイベントの処理</li>
                        <li>エラーハンドリングとtry-catch文</li>
                        <li>数値の精度処理と小数点計算</li>
                        <li>履歴機能とデータの永続化</li>
                        <li>CSSを使った美しいUIデザイン</li>
                    </ul>

                    <div class="highlight">
                        <h5>第8章クリア条件</h5>
                        <p>次のレベルに進む前に、以下ができるようになったか確認してください：</p>
                        <ul>
                            <li>☐ 電卓の基本計算（+、-、×、÷）ができる</li>
                            <li>☐ 美しいUIデザインが実装されている</li>
                            <li>☐ エラー処理が適切に行われている</li>
                            <li>☐ 電卓アプリが完成している</li>
                        </ul>
                    </div>

                    <h2 class="chapter-title">🎉 おめでとうございます！</h2>
                    <p>JavaScript入門コースを完了しました！</p>
                    <p>あなたは以下のスキルを身につけました：</p>
                    <ul>
                        <li>✅ JavaScriptの基本文法</li>
                        <li>✅ 変数、条件分岐、ループ、関数の使い方</li>
                        <li>✅ DOM操作によるWebページの動的変更</li>
                        <li>✅ 本格的なWebアプリケーションの開発</li>
                        <li>✅ データの永続化と状態管理</li>
                    </ul>

                    <div class="highlight">
                        <h5>🚀 次のステップ</h5>
                        <p>このコースを完了したあなたは、以下のより高度な学習に進むことができます：</p>
                        <ul>
                            <li>ES6+の新機能（アロー関数、クラス、モジュールなど）</li>
                            <li>React、Vue.js、Angularなどのフレームワーク</li>
                            <li>Node.jsを使ったサーバーサイド開発</li>
                            <li>TypeScriptによる型安全な開発</li>
                            <li>本格的なWebアプリケーション開発</li>
                        </ul>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="chapter7.html" class="btn btn-secondary">← 前の章</a>
                        <a href="README.md" class="btn btn-success">完了！ガイド一覧へ</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
</body>
</html>