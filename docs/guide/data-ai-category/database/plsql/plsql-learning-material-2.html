<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PL/SQL学習教材 第2章 - 変数とデータ型</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        .navbar {
            background-color: #1565c0;
        }
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        .chapter-title {
            color: #1565c0;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #1565c0;
            padding-bottom: 0.5rem;
        }
        .section-title {
            color: #1976d2;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        code {
            background-color: #f8f9fa;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            color: #d63384;
        }
        .quiz-container {
            background-color: #e3f2fd;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .highlight {
            background-color: #fff3e0;
            padding: 1rem;
            border-left: 4px solid #ff9800;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">PL/SQL学習ガイド</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../../../README.md">ホーム</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="README.md">ガイド一覧</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading">学習内容</h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="plsql-learning-material-01.html">第1章: PL/SQLの基本</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="#chapter2">第2章: 変数とデータ型</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="plsql-learning-material-03.html">第3章: 制御構造</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="plsql-learning-material-04.html">第4章: プロシージャとファンクション</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="plsql-learning-material-05.html">第5章: 例外処理</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="plsql-learning-material-06.html">第6章: カーソル</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="plsql-learning-material-07.html">第7章: トリガー</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="plsql-learning-material-08.html">第8章: パッケージ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="plsql-learning-material-09.html">第9章: 動的SQL</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="plsql-learning-material-10.html">第10章: パフォーマンスとベストプラクティス</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第2章: 変数とデータ型</h1>
                </div>

                <div id="chapter2">
                    <h2 class="chapter-title">変数とデータ型</h2>
                    
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>変数の宣言方法</li>
                            <li>PL/SQLの主要なデータ型</li>
                            <li>定数の定義と使用</li>
                            <li>%TYPE属性と%ROWTYPE属性</li>
                            <li>変数の初期化とスコープ</li>
                        </ul>
                    </div>

                    <h3 class="section-title">2.1 変数の宣言</h3>
                    <p>
                        PL/SQLでは、DECLAREセクションで変数を宣言します。
                        変数名、データ型、オプションとして初期値を指定できます。
                    </p>

                    <pre class="code-block"><code class="language-sql">DECLARE
    変数名 データ型 [NOT NULL] [:= 初期値];
BEGIN
    -- 変数を使用
END;
/</code></pre>

                    <h3 class="section-title">2.2 主要なデータ型</h3>
                    <h4>数値型</h4>
                    <ul>
                        <li><strong>NUMBER</strong>: 整数や小数点を含む数値</li>
                        <li><strong>INTEGER</strong>: 整数のみ</li>
                        <li><strong>BINARY_INTEGER</strong>: 整数（-2147483647～2147483647）</li>
                    </ul>

                    <h4>文字型</h4>
                    <ul>
                        <li><strong>VARCHAR2(n)</strong>: 可変長文字列（最大4000文字）</li>
                        <li><strong>CHAR(n)</strong>: 固定長文字列</li>
                        <li><strong>CLOB</strong>: 大きなテキストデータ</li>
                    </ul>

                    <h4>日付型</h4>
                    <ul>
                        <li><strong>DATE</strong>: 日付と時刻</li>
                        <li><strong>TIMESTAMP</strong>: より精密な日付と時刻</li>
                    </ul>

                    <h4>真偽値型</h4>
                    <ul>
                        <li><strong>BOOLEAN</strong>: TRUE、FALSE、NULL</li>
                    </ul>

                    <div class="exercise-container">
                        <h5>実習 2-1: 変数の宣言と使用</h5>
                        <pre class="code-block"><code class="language-sql">DECLARE
    v_employee_name VARCHAR2(50) := 'John Smith';
    v_salary NUMBER(8,2) := 5000.00;
    v_hire_date DATE := SYSDATE;
    v_is_active BOOLEAN := TRUE;
BEGIN
    DBMS_OUTPUT.PUT_LINE('従業員名: ' || v_employee_name);
    DBMS_OUTPUT.PUT_LINE('給与: ' || TO_CHAR(v_salary, '9,999.99'));
    DBMS_OUTPUT.PUT_LINE('入社日: ' || TO_CHAR(v_hire_date, 'YYYY-MM-DD'));
    
    IF v_is_active THEN
        DBMS_OUTPUT.PUT_LINE('ステータス: アクティブ');
    ELSE
        DBMS_OUTPUT.PUT_LINE('ステータス: 非アクティブ');
    END IF;
END;
/</code></pre>
                    </div>

                    <h3 class="section-title">2.3 定数の定義</h3>
                    <p>CONSTANTキーワードを使用して定数を定義できます。定数は初期化が必須で、実行中に値を変更できません。</p>
                    
                    <pre class="code-block"><code class="language-sql">DECLARE
    c_tax_rate CONSTANT NUMBER(3,2) := 0.10;
    c_company_name CONSTANT VARCHAR2(50) := 'ABC Corporation';
BEGIN
    DBMS_OUTPUT.PUT_LINE('税率: ' || (c_tax_rate * 100) || '%');
    DBMS_OUTPUT.PUT_LINE('会社名: ' || c_company_name);
END;
/</code></pre>

                    <h3 class="section-title">2.4 %TYPE属性</h3>
                    <p>%TYPE属性を使用すると、既存のテーブル列やその他の変数と同じデータ型で変数を宣言できます。</p>
                    
                    <pre class="code-block"><code class="language-sql">DECLARE
    v_employee_id employees.employee_id%TYPE;
    v_first_name employees.first_name%TYPE;
    v_last_name v_first_name%TYPE;  -- 他の変数の型を参照
BEGIN
    v_employee_id := 100;
    v_first_name := 'John';
    v_last_name := 'Doe';
    
    DBMS_OUTPUT.PUT_LINE('ID: ' || v_employee_id);
    DBMS_OUTPUT.PUT_LINE('名前: ' || v_first_name || ' ' || v_last_name);
END;
/</code></pre>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>PL/SQLで変数を宣言するセクションは何ですか？</li>
                            <li>定数を定義するために使用するキーワードは何ですか？</li>
                            <li>%TYPE属性の利点は何ですか？</li>
                            <li>VARCHAR2とCHARの違いを説明してください。</li>
                        </ol>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="plsql-learning-material-01.html" class="btn btn-secondary">← 前の章</a>
                        <a href="plsql-learning-material-03.html" class="btn btn-primary">次の章 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
</body>
</html>