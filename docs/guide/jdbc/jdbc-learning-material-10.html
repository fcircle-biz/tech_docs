<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JDBC初心者向け学習教材 - データベース固有の設定</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        .navbar {
            background-color: #1565c0;
        }
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        .chapter-title {
            color: #1565c0;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #1565c0;
            padding-bottom: 0.5rem;
        }
        .section-title {
            color: #1976d2;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        code {
            display: block;
            background-color: #f5f5f5;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            white-space: pre;
            overflow-x: auto;
        }
        .quiz-container {
            background-color: #e3f2fd;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .quiz-question {
            font-weight: 500;
            margin-bottom: 1rem;
        }
        .diagram {
            max-width: 100%;
            height: auto;
            margin: 1.5rem 0;
            text-align: center;
        }
        .exercise {
            background-color: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1.5rem 0;
        }
        .note {
            background-color: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 1rem;
            margin: 1.5rem 0;
        }
        #table-of-contents .list-group-item {
            border: none;
            padding: 0.5rem 1rem;
        }
        #table-of-contents .list-group-item-action {
            color: #1976d2;
        }
        /* 選択された目次項目のスタイル */
        #table-of-contents .list-group-item-action.active,
        .list-group-item.active {
            color: white !important; /* テキストを白色にして青い背景に対してコントラストをつける */
            background-color: #1976d2;
            border-color: #1976d2;
        }
        .section-nav {
            padding-left: 1rem;
        }
        .inline-code {
            background-color: #f5f5f5;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            display: inline;
        }
        footer {
            background-color: #1565c0;
            color: white;
            padding: 1rem 0;
            margin-top: 3rem;
        }
        .table-example {
            width: 100%;
            margin-bottom: 1rem;
            border-collapse: collapse;
        }
        .table-example th {
            background-color: #e3f2fd;
            border: 1px solid #b3e5fc;
            padding: 0.5rem;
            text-align: center;
        }
        .table-example td {
            border: 1px solid #b3e5fc;
            padding: 0.5rem;
            text-align: center;
        }
        .example-result {
            background-color: #f1f8e9;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
        }
        .warning {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
            padding: 1rem;
            margin: 1.5rem 0;
        }
        .comparison {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 20px;
            margin: 1.5rem 0;
        }
        .comparison-item {
            flex: 1;
            min-width: 300px;
            background-color: #f5f5f5;
            border-radius: 8px;
            padding: 1rem;
        }
        .comparison-item h5 {
            color: #1976d2;
            border-bottom: 1px solid #b3e5fc;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body data-bs-spy="scroll" data-bs-target="#tableOfContents">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">JDBC初心者向け学習教材</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#introduction">はじめに</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#chapter10">第10章: データベース固有の設定</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container my-4">
        <div class="row">
            <!-- Sidebar - Table of Contents -->
            <div class="col-lg-3">
                <div class="sidebar">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">目次</h5>
                        </div>
                        <div id="table-of-contents" class="list-group list-group-flush">
                            <a href="#introduction" class="list-group-item list-group-item-action">はじめに</a>
                            <a href="#chapter10" class="list-group-item list-group-item-action">第10章: データベース固有の設定</a>
                            <div class="section-nav">
                                <a href="#mysql-connection" class="list-group-item list-group-item-action">10.1 MySQL接続設定</a>
                                <a href="#postgresql-connection" class="list-group-item list-group-item-action">10.2 PostgreSQL接続設定</a>
                                <a href="#oracle-connection" class="list-group-item list-group-item-action">10.3 Oracle接続設定</a>
                                <a href="#sqlserver-connection" class="list-group-item list-group-item-action">10.4 SQL Server接続設定</a>
                                <a href="#connection-comparison" class="list-group-item list-group-item-action">10.5 各データベース接続設定の比較</a>
                                <a href="#db-specific-features" class="list-group-item list-group-item-action">10.6 データベース固有の機能</a>
                                <a href="#chapter10-quiz" class="list-group-item list-group-item-action">10.7 理解度確認テスト</a>
                            </div>
                            <a href="#next-steps" class="list-group-item list-group-item-action">次のステップ</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="col-lg-9">
                <section id="introduction">
                    <h1 class="display-5 mb-4">JDBC初心者向け学習教材</h1>
                    <p class="lead">この第10章では、各データベース管理システム（DBMS）に固有の接続設定について学習します。MySQLやPostgreSQL、Oracle、SQL Serverなど、それぞれのデータベースに適切に接続するための設定方法を理解し、実践していきます。</p>

                    <div class="note">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>各データベース管理システム（MySQL、PostgreSQL、Oracle、SQL Server）の接続設定方法</li>
                            <li>データベース固有のJDBC URL形式とパラメータ</li>
                            <li>各データベースドライバの特徴と注意点</li>
                            <li>データベース固有のプロパティと設定オプション</li>
                            <li>各データベース特有の機能をJDBCから利用する方法</li>
                        </ul>
                    </div>
                </section>

                <section id="chapter10">
                    <h2 class="chapter-title">第10章：データベース固有の設定</h2>
                    <p>JDBCは異なるデータベース管理システムへの統一的なアクセス方法を提供しますが、各データベースには固有の設定やパラメータがあります。この章では、主要な4つのデータベース（MySQL、PostgreSQL、Oracle、SQL Server）への接続設定と特徴について詳しく学びます。</p>

                    <section id="mysql-connection">
                        <h3 class="section-title">10.1 MySQL接続設定</h3>
                        <p>MySQLはオープンソースのリレーショナルデータベース管理システムで、広く利用されています。MySQLへのJDBC接続を設定するための基本的な情報を見ていきましょう。</p>

                        <h4>MySQLのJDBCドライバ</h4>
                        <p>MySQLに接続するには、「MySQL Connector/J」というJDBCドライバを使用します。</p>

                        <h5>Maven依存関係</h5>
                        <code>&lt;dependency&gt;
    &lt;groupId&gt;com.mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;
    &lt;version&gt;8.0.33&lt;/version&gt;
&lt;/dependency&gt;</code>

                        <h5>Gradle依存関係</h5>
                        <code>implementation 'com.mysql:mysql-connector-j:8.0.33'</code>

                        <h4>MySQL JDBC URL形式</h4>
                        <p>MySQL接続用のJDBC URLの基本形式は以下の通りです：</p>
                        <code>jdbc:mysql://ホスト名:ポート番号/データベース名?パラメータ=値&パラメータ=値...</code>

                        <p>例えば、以下のようなJDBC URLを使用できます：</p>
                        <code>jdbc:mysql://localhost:3306/testdb?useSSL=false&serverTimezone=UTC&characterEncoding=UTF-8</code>

                        <h4>主なMySQL接続パラメータ</h4>
                        <div class="table-responsive">
                            <table class="table-example">
                                <tr>
                                    <th>パラメータ名</th>
                                    <th>説明</th>
                                    <th>デフォルト値</th>
                                    <th>使用例</th>
                                </tr>
                                <tr>
                                    <td>useSSL</td>
                                    <td>SSL接続を使用するかどうか</td>
                                    <td>true</td>
                                    <td>useSSL=false</td>
                                </tr>
                                <tr>
                                    <td>serverTimezone</td>
                                    <td>サーバーのタイムゾーン設定</td>
                                    <td>なし</td>
                                    <td>serverTimezone=UTC</td>
                                </tr>
                                <tr>
                                    <td>characterEncoding</td>
                                    <td>文字エンコーディング</td>
                                    <td>UTF-8</td>
                                    <td>characterEncoding=UTF-8</td>
                                </tr>
                                <tr>
                                    <td>useUnicode</td>
                                    <td>Unicodeの使用</td>
                                    <td>true</td>
                                    <td>useUnicode=true</td>
                                </tr>
                                <tr>
                                    <td>allowPublicKeyRetrieval</td>
                                    <td>公開キー取得の許可</td>
                                    <td>false</td>
                                    <td>allowPublicKeyRetrieval=true</td>
                                </tr>
                                <tr>
                                    <td>connectTimeout</td>
                                    <td>接続タイムアウト（ミリ秒）</td>
                                    <td>0（無制限）</td>
                                    <td>connectTimeout=30000</td>
                                </tr>
                                <tr>
                                    <td>autoReconnect</td>
                                    <td>自動再接続の有効化</td>
                                    <td>false</td>
                                    <td>autoReconnect=true</td>
                                </tr>
                                <tr>
                                    <td>rewriteBatchedStatements</td>
                                    <td>バッチ処理の最適化</td>
                                    <td>false</td>
                                    <td>rewriteBatchedStatements=true</td>
                                </tr>
                            </table>
                        </div>

                        <h4>MySQLへの接続サンプルコード</h4>
                        <code>import java.sql.*;
import java.util.Properties;

public class MySQLConnectionExample {
    public static void main(String[] args) {
        // 接続情報
        String url = "jdbc:mysql://localhost:3306/testdb";
        Properties props = new Properties();
        props.setProperty("user", "username");
        props.setProperty("password", "password");
        props.setProperty("useSSL", "false");
        props.setProperty("serverTimezone", "UTC");
        props.setProperty("characterEncoding", "UTF-8");
        
        // 接続とクエリの実行
        try (Connection conn = DriverManager.getConnection(url, props);
             Statement stmt = conn.createStatement();
             ResultSet rs = stmt.executeQuery("SELECT version()")) {
             
            if (rs.next()) {
                System.out.println("MySQL バージョン: " + rs.getString(1));
            }
            
            // データベースのメタデータ取得
            DatabaseMetaData metaData = conn.getMetaData();
            System.out.println("ドライバ名: " + metaData.getDriverName());
            System.out.println("ドライババージョン: " + metaData.getDriverVersion());
            System.out.println("データベース製品名: " + metaData.getDatabaseProductName());
            System.out.println("データベース製品バージョン: " + metaData.getDatabaseProductVersion());
            
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}</code>

                        <div class="note">
                            <h5>MySQL 8.0以降の接続注意点</h5>
                            <p>MySQL 8.0以降では認証プラグインがデフォルトで「caching_sha2_password」に変更されました。JDBCドライバが対応していない場合、以下のいずれかの対応が必要です：</p>
                            <ol>
                                <li>接続URLに<code class="inline-code">allowPublicKeyRetrieval=true</code>を追加</li>
                                <li>MySQLユーザーの認証方式を<code class="inline-code">mysql_native_password</code>に変更:
                                   <br><code class="inline-code">ALTER USER 'username'@'localhost' IDENTIFIED WITH mysql_native_password BY 'password';</code>
                                </li>
                            </ol>
                        </div>

                        <div class="exercise">
                            <h5>練習問題 10.1.1: MySQL接続パラメータの設定</h5>
                            <p>以下の要件を満たすMySQL接続URLを作成してください：</p>
                            <ol>
                                <li>ホスト: db.example.com</li>
                                <li>ポート: 3306</li>
                                <li>データベース名: customer_db</li>
                                <li>SSL接続を無効化</li>
                                <li>タイムゾーンをJST（日本標準時）に設定</li>
                                <li>接続タイムアウトを10秒に設定</li>
                                <li>自動再接続を有効化</li>
                            </ol>
                        </div>
                    </section>

                    <section id="postgresql-connection">
                        <h3 class="section-title">10.2 PostgreSQL接続設定</h3>
                        <p>PostgreSQLは高度な機能を持つオープンソースのオブジェクトリレーショナルデータベース管理システムです。PostgreSQLへのJDBC接続設定を見ていきましょう。</p>

                        <h4>PostgreSQLのJDBCドライバ</h4>
                        <p>PostgreSQLに接続するには、「PostgreSQL JDBC Driver」（別名pgjdbc）を使用します。</p>

                        <h5>Maven依存関係</h5>
                        <code>&lt;dependency&gt;
    &lt;groupId&gt;org.postgresql&lt;/groupId&gt;
    &lt;artifactId&gt;postgresql&lt;/artifactId&gt;
    &lt;version&gt;42.7.1&lt;/version&gt;
&lt;/dependency&gt;</code>

                        <h5>Gradle依存関係</h5>
                        <code>implementation 'org.postgresql:postgresql:42.7.1'</code>

                        <h4>PostgreSQL JDBC URL形式</h4>
                        <p>PostgreSQL接続用のJDBC URLの基本形式は以下の通りです：</p>
                        <code>jdbc:postgresql://ホスト名:ポート番号/データベース名?パラメータ=値&パラメータ=値...</code>

                        <p>例えば、以下のようなJDBC URLを使用できます：</p>
                        <code>jdbc:postgresql://localhost:5432/testdb?sslmode=require&tcpKeepAlive=true</code>

                        <h4>主なPostgreSQL接続パラメータ</h4>
                        <div class="table-responsive">
                            <table class="table-example">
                                <tr>
                                    <th>パラメータ名</th>
                                    <th>説明</th>
                                    <th>デフォルト値</th>
                                    <th>使用例</th>
                                </tr>
                                <tr>
                                    <td>sslmode</td>
                                    <td>SSL接続モード</td>
                                    <td>prefer</td>
                                    <td>sslmode=require</td>
                                </tr>
                                <tr>
                                    <td>tcpKeepAlive</td>
                                    <td>TCP接続の維持</td>
                                    <td>false</td>
                                    <td>tcpKeepAlive=true</td>
                                </tr>
                                <tr>
                                    <td>connectTimeout</td>
                                    <td>接続タイムアウト（秒）</td>
                                    <td>なし</td>
                                    <td>connectTimeout=10</td>
                                </tr>
                                <tr>
                                    <td>socketTimeout</td>
                                    <td>ソケットタイムアウト（秒）</td>
                                    <td>なし</td>
                                    <td>socketTimeout=10</td>
                                </tr>
                                <tr>
                                    <td>ApplicationName</td>
                                    <td>アプリケーション名</td>
                                    <td>PostgreSQL JDBC Driver</td>
                                    <td>ApplicationName=MyApp</td>
                                </tr>
                                <tr>
                                    <td>currentSchema</td>
                                    <td>デフォルトスキーマ</td>
                                    <td>public</td>
                                    <td>currentSchema=myschema</td>
                                </tr>
                                <tr>
                                    <td>user</td>
                                    <td>ユーザー名</td>
                                    <td>なし</td>
                                    <td>user=postgres</td>
                                </tr>
                                <tr>
                                    <td>password</td>
                                    <td>パスワード</td>
                                    <td>なし</td>
                                    <td>password=secret</td>
                                </tr>
                            </table>
                        </div>

                        <h4>PostgreSQLへの接続サンプルコード</h4>
                        <code>import java.sql.*;
import java.util.Properties;

public class PostgreSQLConnectionExample {
    public static void main(String[] args) {
        // 接続情報
        String url = "jdbc:postgresql://localhost:5432/testdb";
        Properties props = new Properties();
        props.setProperty("user", "postgres");
        props.setProperty("password", "password");
        props.setProperty("ApplicationName", "MyJDBCApp");
        props.setProperty("sslmode", "prefer");
        
        // 接続とクエリの実行
        try (Connection conn = DriverManager.getConnection(url, props);
             Statement stmt = conn.createStatement();
             ResultSet rs = stmt.executeQuery("SELECT version()")) {
             
            if (rs.next()) {
                System.out.println("PostgreSQL バージョン: " + rs.getString(1));
            }
            
            // データベースのスキーマ情報取得
            DatabaseMetaData metaData = conn.getMetaData();
            try (ResultSet schemas = metaData.getSchemas()) {
                System.out.println("利用可能なスキーマ:");
                while (schemas.next()) {
                    System.out.println("  " + schemas.getString("TABLE_SCHEM"));
                }
            }
            
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}</code>

                        <div class="note">
                            <h5>PostgreSQLの特殊なデータ型</h5>
                            <p>PostgreSQLには独自のデータ型がいくつかあります。JDBCで扱う場合の代表的な例を紹介します：</p>
                            <ul>
                                <li><strong>UUID型</strong>: java.util.UUIDとして取得可能</li>
                                <li><strong>JSON/JSONB型</strong>: 文字列として取得し、Jackson等のライブラリで処理</li>
                                <li><strong>配列型</strong>: Array型として取得可能</li>
                                <li><strong>Interval型</strong>: PGIntervalまたはStringとして取得</li>
                                <li><strong>hstore型</strong>: Mapとして取得するには追加の設定が必要</li>
                            </ul>
                        </div>

                        <div class="exercise">
                            <h5>練習問題 10.2.1: PostgreSQL特有の機能を使ったJDBC接続</h5>
                            <p>以下の要件を満たすPostgreSQLへの接続コードを作成してください：</p>
                            <ol>
                                <li>ホスト: pgserver.example.org、ポート: 5432、データベース: analysis_db</li>
                                <li>デフォルトスキーマを「reports」に設定</li>
                                <li>接続タイムアウトを5秒に設定</li>
                                <li>アプリケーション名を「ReportGenerator」に設定</li>
                                <li>接続後に、テーブル「monthly_stats」から最新の10件のレコードを取得して表示</li>
                            </ol>
                        </div>
                    </section>

                    <section id="oracle-connection">
                        <h3 class="section-title">10.3 Oracle接続設定</h3>
                        <p>Oracleデータベースは企業向けの高性能商用データベース管理システムです。OracleデータベースへのJDBC接続設定について見ていきましょう。</p>

                        <h4>OracleのJDBCドライバ</h4>
                        <p>Oracleデータベースに接続するには、「Oracle JDBC Driver」（ojdbc）を使用します。</p>

                        <h5>Maven依存関係</h5>
                        <code>&lt;dependency&gt;
    &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;
    &lt;artifactId&gt;ojdbc11&lt;/artifactId&gt;
    &lt;version&gt;23.3.0.23.09&lt;/version&gt;
&lt;/dependency&gt;</code>

                        <h5>Gradle依存関係</h5>
                        <code>implementation 'com.oracle.database.jdbc:ojdbc11:23.3.0.23.09'</code>

                        <h4>Oracle JDBC URL形式</h4>
                        <p>Oracle接続用のJDBC URLには複数の形式があります：</p>

                        <h5>1. 基本的なThin接続（SIDベース）</h5>
                        <code>jdbc:oracle:thin:@ホスト名:ポート番号:SID</code>
                        <p>例: <code class="inline-code">jdbc:oracle:thin:@localhost:1521:orcl</code></p>

                        <h5>2. サービス名を使った接続</h5>
                        <code>jdbc:oracle:thin:@//ホスト名:ポート番号/サービス名</code>
                        <p>例: <code class="inline-code">jdbc:oracle:thin:@//localhost:1521/XEPDB1</code></p>

                        <h5>3. TNSエントリを使った接続</h5>
                        <code>jdbc:oracle:thin:@TNS_ALIAS</code>
                        <p>例: <code class="inline-code">jdbc:oracle:thin:@my_tns_alias</code></p>

                        <h5>4. 接続記述子を使った接続</h5>
                        <code>jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=ホスト名)(PORT=ポート番号))(CONNECT_DATA=(SERVICE_NAME=サービス名)))</code>

                        <h4>主なOracle接続パラメータ</h4>
                        <div class="table-responsive">
                            <table class="table-example">
                                <tr>
                                    <th>パラメータ名</th>
                                    <th>説明</th>
                                    <th>使用例</th>
                                </tr>
                                <tr>
                                    <td>oracle.jdbc.readTimeout</td>
                                    <td>読み取りタイムアウト（ミリ秒）</td>
                                    <td>props.setProperty("oracle.jdbc.readTimeout", "30000");</td>
                                </tr>
                                <tr>
                                    <td>oracle.jdbc.connectTimeout</td>
                                    <td>接続タイムアウト（ミリ秒）</td>
                                    <td>props.setProperty("oracle.jdbc.connectTimeout", "10000");</td>
                                </tr>
                                <tr>
                                    <td>oracle.jdbc.fanEnabled</td>
                                    <td>Fast Application Notification（FAN）の有効化</td>
                                    <td>props.setProperty("oracle.jdbc.fanEnabled", "true");</td>
                                </tr>
                                <tr>
                                    <td>defaultRowPrefetch</td>
                                    <td>デフォルトのフェッチサイズ</td>
                                    <td>props.setProperty("defaultRowPrefetch", "100");</td>
                                </tr>
                                <tr>
                                    <td>oracle.net.CONNECT_TIMEOUT</td>
                                    <td>Oracleネットワーク接続タイムアウト（ミリ秒）</td>
                                    <td>props.setProperty("oracle.net.CONNECT_TIMEOUT", "10000");</td>
                                </tr>
                                <tr>
                                    <td>v$session.program</td>
                                    <td>接続元プログラム名の設定</td>
                                    <td>props.setProperty("v$session.program", "MyJavaApp");</td>
                                </tr>
                            </table>
                        </div>

                        <h4>Oracleへの接続サンプルコード</h4>
                        <code>import java.sql.*;
import java.util.Properties;

public class OracleConnectionExample {
    public static void main(String[] args) {
        // 接続情報
        String url = "jdbc:oracle:thin:@//localhost:1521/XEPDB1";
        Properties props = new Properties();
        props.setProperty("user", "system");
        props.setProperty("password", "password");
        props.setProperty("oracle.jdbc.readTimeout", "30000");
        props.setProperty("defaultRowPrefetch", "50");
        
        // 接続とクエリの実行
        try (Connection conn = DriverManager.getConnection(url, props);
             Statement stmt = conn.createStatement();
             ResultSet rs = stmt.executeQuery("SELECT BANNER FROM V$VERSION")) {
             
            while (rs.next()) {
                System.out.println("Oracle バージョン情報: " + rs.getString(1));
            }
            
            // Oracleシステムテーブルからユーザー情報を取得
            System.out.println("\nデータベースユーザー一覧:");
            try (Statement stmt2 = conn.createStatement();
                 ResultSet rs2 = stmt2.executeQuery("SELECT username, created FROM all_users ORDER BY username")) {
                
                while (rs2.next()) {
                    System.out.printf("%-30s | %s%n", 
                        rs2.getString("username"), 
                        rs2.getTimestamp("created"));
                }
            }
            
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}</code>

                        <div class="note">
                            <h5>Oracle特有の機能</h5>
                            <p>Oracleデータベースには特有の機能があり、JDBCから利用できるものがいくつかあります：</p>
                            <ul>
                                <li><strong>REF CURSOR</strong>: ストアドプロシージャから結果セットを返すための機能</li>
                                <li><strong>BLOB/CLOB操作</strong>: 大容量バイナリ/テキストデータの効率的な操作</li>
                                <li><strong>Oracle RAC（Real Application Clusters）サポート</strong>: 高可用性構成への対応</li>
                                <li><strong>Oracle Data Guard</strong>: ディザスタリカバリ設定への対応</li>
                                <li><strong>RETURNING句</strong>: INSERT/UPDATE/DELETEで影響を受けた行の値を取得</li>
                            </ul>
                        </div>

                        <h4>Oracleの特殊なデータ型の扱い</h4>
                        <code>import java.sql.*;
import oracle.jdbc.OracleTypes;
import oracle.sql.CLOB;

public class OracleSpecialTypesExample {
    public static void main(String[] args) {
        // 接続情報省略...
        
        try (Connection conn = DriverManager.getConnection(url, user, password)) {
            // REF CURSORの使用例
            String callSql = "{call get_employees_by_dept(?, ?)}";
            try (CallableStatement cstmt = conn.prepareCall(callSql)) {
                cstmt.setInt(1, 10); // 部門ID
                cstmt.registerOutParameter(2, OracleTypes.CURSOR); // REF CURSOR
                cstmt.execute();
                
                // REF CURSORから結果セットを取得
                try (ResultSet rs = (ResultSet) cstmt.getObject(2)) {
                    while (rs.next()) {
                        System.out.println("Employee: " + rs.getString("FIRST_NAME") + " " + 
                                           rs.getString("LAST_NAME"));
                    }
                }
            }
            
            // CLOBの操作例
            try (PreparedStatement pstmt = conn.prepareStatement(
                     "SELECT document_content FROM documents WHERE id = ?")) {
                pstmt.setInt(1, 1);
                
                try (ResultSet rs = pstmt.executeQuery()) {
                    if (rs.next()) {
                        // CLOBデータの取得
                        Clob clob = rs.getClob("document_content");
                        if (clob != null) {
                            String content = clob.getSubString(1, (int) clob.length());
                            System.out.println("Document content: " + content.substring(0, 100) + "...");
                        }
                    }
                }
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}</code>

                        <div class="exercise">
                            <h5>練習問題 10.3.1: Oracleデータベースへの接続</h5>
                            <p>以下の要件を満たすOracleデータベースへの接続コードを作成してください：</p>
                            <ol>
                                <li>サービス名を使用した接続URL（ホスト: oracledb.example.com、ポート: 1521、サービス名: PRODDB）</li>
                                <li>読み取りタイムアウトを1分に設定</li>
                                <li>デフォルトのフェッチサイズを200に設定</li>
                                <li>接続プールを設定（最小接続数: 5、最大接続数: 20）</li>
                                <li>システムテーブルから現在のセッション情報を取得して表示</li>
                            </ol>
                        </div>
                    </section>

                    <section id="sqlserver-connection">
                        <h3 class="section-title">10.4 SQL Server接続設定</h3>
                        <p>Microsoft SQL Serverは、Microsoftが開発した商用リレーショナルデータベース管理システムです。SQL ServerへのJDBC接続設定について見ていきましょう。</p>

                        <h4>SQL ServerのJDBCドライバ</h4>
                        <p>SQL Serverに接続するには、「Microsoft JDBC Driver for SQL Server」を使用します。</p>

                        <h5>Maven依存関係</h5>
                        <code>&lt;dependency&gt;
    &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;
    &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;
    &lt;version&gt;12.4.2.jre11&lt;/version&gt;
&lt;/dependency&gt;</code>

                        <h5>Gradle依存関係</h5>
                        <code>implementation 'com.microsoft.sqlserver:mssql-jdbc:12.4.2.jre11'</code>

                        <h4>SQL Server JDBC URL形式</h4>
                        <p>SQL Server接続用のJDBC URLの基本形式は以下の通りです：</p>
                        <code>jdbc:sqlserver://ホスト名:ポート番号;databaseName=データベース名;パラメータ=値;パラメータ=値...</code>

                        <p>例えば、以下のようなJDBC URLを使用できます：</p>
                        <code>jdbc:sqlserver://localhost:1433;databaseName=testdb;encrypt=true;trustServerCertificate=true;loginTimeout=30;</code>

                        <h4>主なSQL Server接続パラメータ</h4>
                        <div class="table-responsive">
                            <table class="table-example">
                                <tr>
                                    <th>パラメータ名</th>
                                    <th>説明</th>
                                    <th>デフォルト値</th>
                                    <th>使用例</th>
                                </tr>
                                <tr>
                                    <td>encrypt</td>
                                    <td>接続の暗号化</td>
                                    <td>true（最新のドライバ）</td>
                                    <td>encrypt=true</td>
                                </tr>
                                <tr>
                                    <td>trustServerCertificate</td>
                                    <td>サーバー証明書の検証スキップ</td>
                                    <td>false</td>
                                    <td>trustServerCertificate=true</td>
                                </tr>
                                <tr>
                                    <td>loginTimeout</td>
                                    <td>ログインタイムアウト（秒）</td>
                                    <td>15</td>
                                    <td>loginTimeout=30</td>
                                </tr>
                                <tr>
                                    <td>integratedSecurity</td>
                                    <td>Windows認証の使用</td>
                                    <td>false</td>
                                    <td>integratedSecurity=true</td>
                                </tr>
                                <tr>
                                    <td>applicationName</td>
                                    <td>アプリケーション名</td>
                                    <td>Microsoft JDBC Driver for SQL Server</td>
                                    <td>applicationName=MyJDBCApp</td>
                                </tr>
                                <tr>
                                    <td>multiSubnetFailover</td>
                                    <td>AlwaysOnフェイルオーバー用</td>
                                    <td>false</td>
                                    <td>multiSubnetFailover=true</td>
                                </tr>
                                <tr>
                                    <td>sendTimeAsDatetime</td>
                                    <td>TIME型をDATETIME型で送信</td>
                                    <td>true</td>
                                    <td>sendTimeAsDatetime=false</td>
                                </tr>
                                <tr>
                                    <td>responseBuffering</td>
                                    <td>レスポンスのバッファリング方法</td>
                                    <td>adaptive</td>
                                    <td>responseBuffering=full</td>
                                </tr>
                            </table>
                        </div>

                        <h4>SQL Serverへの接続サンプルコード</h4>
                        <code>import java.sql.*;
import java.util.Properties;

public class SQLServerConnectionExample {
    public static void main(String[] args) {
        // 接続情報
        String url = "jdbc:sqlserver://localhost:1433;databaseName=testdb";
        Properties props = new Properties();
        props.setProperty("user", "sa");
        props.setProperty("password", "YourPassword123");
        props.setProperty("encrypt", "true");
        props.setProperty("trustServerCertificate", "true");
        props.setProperty("loginTimeout", "30");
        props.setProperty("applicationName", "MyJDBCApp");
        
        // 接続とクエリの実行
        try (Connection conn = DriverManager.getConnection(url, props);
             Statement stmt = conn.createStatement();
             ResultSet rs = stmt.executeQuery("SELECT @@VERSION")) {
             
            if (rs.next()) {
                System.out.println("SQL Server バージョン: " + rs.getString(1));
            }
            
            // データベース一覧を取得
            System.out.println("\nデータベース一覧:");
            try (ResultSet databases = conn.getMetaData().getCatalogs()) {
                while (databases.next()) {
                    System.out.println("  " + databases.getString("TABLE_CAT"));
                }
            }
            
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}</code>

                        <div class="note">
                            <h5>SQL Server 2022以降の接続注意点</h5>
                            <p>最新のSQL Serverバージョンとドライバでは、セキュリティ向上のため以下の点に注意が必要です：</p>
                            <ul>
                                <li>デフォルトで接続が暗号化されるようになりました（encrypt=true）</li>
                                <li>開発環境での自己署名証明書使用時には、<code class="inline-code">trustServerCertificate=true</code>の設定が必要</li>
                                <li>本番環境では正式な証明書検証のため、<code class="inline-code">trustServerCertificate=false</code>を推奨</li>
                                <li>TLS 1.2以上の使用が推奨（古いバージョンは脆弱性あり）</li>
                            </ul>
                        </div>

                        <h4>SQL Serverの特殊な機能</h4>
                        <p>SQL Serverには特有の機能があり、JDBCから利用できるものがいくつかあります：</p>

                        <code>import java.sql.*;
import microsoft.sql.DateTimeOffset;
import com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement;
import com.microsoft.sqlserver.jdbc.SQLServerCallableStatement;

public class SQLServerSpecialFeaturesExample {
    public static void main(String[] args) {
        // 接続情報省略...
        
        try (Connection conn = DriverManager.getConnection(url, props)) {
            // 1. バルクコピー機能の使用例
            String bulkSql = "INSERT INTO customers (name, email) VALUES (?, ?)";
            try (SQLServerPreparedStatement pstmt = (SQLServerPreparedStatement) 
                    conn.prepareStatement(bulkSql)) {
                
                // バッチ実行用にパラメータを設定
                for (int i = 0; i < 1000; i++) {
                    pstmt.setString(1, "Customer " + i);
                    pstmt.setString(2, "customer" + i + "@example.com");
                    pstmt.addBatch();
                }
                
                // バッチ実行 (SQLServerバージョンはバルク処理を内部で最適化)
                int[] results = pstmt.executeBatch();
                System.out.println("バルク挿入完了: " + results.length + " 件処理");
            }
            
            // 2. OUTPUT句を使ったINSERTの例
            String outputSql = "INSERT INTO orders (customer_id, order_date, total) " +
                              "OUTPUT INSERTED.order_id, INSERTED.order_date " +
                              "VALUES (?, GETDATE(), ?)";
            
            try (PreparedStatement pstmt = conn.prepareStatement(outputSql)) {
                pstmt.setInt(1, 100); // customer_id
                pstmt.setBigDecimal(2, java.math.BigDecimal.valueOf(1250.75)); // total
                
                try (ResultSet rs = pstmt.executeQuery()) {
                    if (rs.next()) {
                        System.out.println("新規注文: ID=" + rs.getInt(1) + 
                                         ", 日付=" + rs.getTimestamp(2));
                    }
                }
            }
            
            // 3. テーブル値パラメータの使用例 (SQL Server 2008以降)
            // この例では、予め作成されたテーブル型とストアドプロシージャを使用
            // CREATE TYPE OrderItemTableType AS TABLE (product_id INT, quantity INT, price DECIMAL(10,2))
            // CREATE PROCEDURE process_order_items @items OrderItemTableType READONLY...
            
            // 注: この機能を使用するためには、SQL Serverに特化したAPIを使用する必要があります
            
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}</code>

                        <div class="exercise">
                            <h5>練習問題 10.4.1: SQL Serverへの安全な接続設定</h5>
                            <p>以下の要件を満たすSQL Serverへの接続コードを作成してください：</p>
                            <ol>
                                <li>ホスト: sqlserver.example.com、ポート: 1433、データベース: crm_system</li>
                                <li>接続の暗号化を有効化</li>
                                <li>ログインタイムアウトを20秒に設定</li>
                                <li>アプリケーション名を「CRMSystem」に設定</li>
                                <li>SQL Server AlwaysOn可用性グループのサポートを有効化</li>
                                <li>接続後に、テーブル「customers」の総顧客数とVIP顧客数を取得して表示</li>
                            </ol>
                        </div>
                    </section>

                    <section id="connection-comparison">
                        <h3 class="section-title">10.5 各データベース接続設定の比較</h3>
                        <p>これまで学んだ4つの主要データベースの接続設定を比較してみましょう。</p>

                        <div class="comparison">
                            <div class="comparison-item">
                                <h5>MySQL</h5>
                                <p><strong>ドライバクラス:</strong> com.mysql.cj.jdbc.Driver</p>
                                <p><strong>URL形式:</strong> jdbc:mysql://host:port/database</p>
                                <p><strong>デフォルトポート:</strong> 3306</p>
                                <p><strong>特徴:</strong></p>
                                <ul>
                                    <li>URLパラメータが多数サポートされている</li>
                                    <li>タイムゾーン設定が重要</li>
                                    <li>認証プラグインの互換性に注意</li>
                                </ul>
                                <p><strong>主要パラメータ:</strong> useSSL, serverTimezone, autoReconnect</p>
                            </div>
                            <div class="comparison-item">
                                <h5>PostgreSQL</h5>
                                <p><strong>ドライバクラス:</strong> org.postgresql.Driver</p>
                                <p><strong>URL形式:</strong> jdbc:postgresql://host:port/database</p>
                                <p><strong>デフォルトポート:</strong> 5432</p>
                                <p><strong>特徴:</strong></p>
                                <ul>
                                    <li>スキーマサポートが充実</li>
                                    <li>高度なデータ型をサポート</li>
                                    <li>JSON操作が可能</li>
                                </ul>
                                <p><strong>主要パラメータ:</strong> sslmode, tcpKeepAlive, currentSchema</p>
                            </div>
                        </div>
                        <div class="comparison">
                            <div class="comparison-item">
                                <h5>Oracle</h5>
                                <p><strong>ドライバクラス:</strong> oracle.jdbc.OracleDriver</p>
                                <p><strong>URL形式:</strong> jdbc:oracle:thin:@host:port:SID</p>
                                <p><strong>デフォルトポート:</strong> 1521</p>
                                <p><strong>特徴:</strong></p>
                                <ul>
                                    <li>複数のURL形式をサポート</li>
                                    <li>REF CURSORなどの独自機能</li>
                                    <li>高度なパフォーマンスチューニング</li>
                                </ul>
                                <p><strong>主要パラメータ:</strong> oracle.jdbc.readTimeout, defaultRowPrefetch</p>
                            </div>
                            <div class="comparison-item">
                                <h5>SQL Server</h5>
                                <p><strong>ドライバクラス:</strong> com.microsoft.sqlserver.jdbc.SQLServerDriver</p>
                                <p><strong>URL形式:</strong> jdbc:sqlserver://host:port;databaseName=database</p>
                                <p><strong>デフォルトポート:</strong> 1433</p>
                                <p><strong>特徴:</strong></p>
                                <ul>
                                    <li>セミコロンでパラメータを区切る</li>
                                    <li>Windows認証をサポート</li>
                                    <li>AlwaysOnクラスタリングに対応</li>
                                </ul>
                                <p><strong>主要パラメータ:</strong> encrypt, trustServerCertificate, integratedSecurity</p>
                            </div>
                        </div>

                        <h4>共通のベストプラクティス</h4>
                        <p>データベースの種類によらず、JDBC接続設定で共通して重要なベストプラクティスがあります：</p>
                        <ol>
                            <li><strong>コネクションプールの使用</strong>: 接続の作成コストを削減し、パフォーマンスを向上させる</li>
                            <li><strong>適切なタイムアウト設定</strong>: 接続、読み取り、ステートメント実行などのタイムアウトを設定</li>
                            <li><strong>セキュリティ設定の最適化</strong>: SSL/TLS暗号化を適切に設定</li>
                            <li><strong>PreparedStatementの使用</strong>: SQLインジェクション防止とパフォーマンス向上</li>
                            <li><strong>アプリケーション名の設定</strong>: 監視と分析のために接続元を特定できるようにする</li>
                            <li><strong>リソースの適切なクローズ</strong>: try-with-resourcesでリソースリークを防止</li>
                            <li><strong>バッチ処理の活用</strong>: 複数の操作をまとめて実行し、ネットワークラウンドトリップを削減</li>
                        </ol>

                        <div class="note">
                            <h5>接続プールライブラリの選択</h5>
                            <p>実際のアプリケーションでは、コネクションプールライブラリを使用することが推奨されます。主なライブラリは以下の通りです：</p>
                            <ul>
                                <li><strong>HikariCP</strong>: 高速で軽量、現在最も人気のあるコネクションプール</li>
                                <li><strong>Apache DBCP2</strong>: Apache Commonsプロジェクトの一部、広く使われている</li>
                                <li><strong>c3p0</strong>: 古くからある信頼性の高いライブラリ</li>
                                <li><strong>Tomcat JDBC Pool</strong>: Tomcatサーバーに組み込まれているプール</li>
                            </ul>
                        </div>

                        <div class="exercise">
                            <h5>練習問題 10.5.1: コネクションプールの設定比較</h5>
                            <p>HikariCPを使用して、以下の各データベースに対するコネクションプール設定を作成してください：</p>
                            <ol>
                                <li>MySQL（最大接続数: 10、アイドルタイムアウト: 5分）</li>
                                <li>PostgreSQL（最大接続数: 20、接続タイムアウト: 30秒）</li>
                                <li>Oracle（最大接続数: 15、最大ライフタイム: 30分）</li>
                                <li>SQL Server（最大接続数: 12、リーク検出のしきい値: 30秒）</li>
                            </ol>
                            <p>各データベース固有の推奨設定も含めてください。</p>
                        </div>
                    </section>

                    <section id="db-specific-features">
                        <h3 class="section-title">10.6 データベース固有の機能</h3>
                        <p>各データベースにはそれぞれ特有の機能があり、JDBCからそれらを活用することで、より効率的なデータアクセスが可能になります。</p>

                        <h4>1. MySQLの独自機能</h4>
                        <ul>
                            <li><strong>LOAD DATA INFILE</strong>: 大量データの高速ロード</li>
                            <li><strong>ON DUPLICATE KEY UPDATE</strong>: 重複キーの処理</li>
                            <li><strong>AUTO_INCREMENT</strong>: 自動採番機能</li>
                            <li><strong>空間データ型</strong>: GISデータの扱い</li>
                            <li><strong>JSON関数</strong>: JSON操作</li>
                        </ul>

                        <code>// MySQLのLOAD DATA INFILEを使用する例
String sql = "LOAD DATA LOCAL INFILE ? INTO TABLE customers " +
           "FIELDS TERMINATED BY ',' ENCLOSED BY '\"' " +
           "LINES TERMINATED BY '\\n' IGNORE 1 LINES " +
           "(name, email, phone, address)";

try (Connection conn = DriverManager.getConnection(url, props);
     PreparedStatement pstmt = conn.prepareStatement(sql)) {
    
    // ローカルCSVファイルのパスを設定
    pstmt.setString(1, "C:/data/customers.csv");
    
    // 実行して行数を取得
    int rowsAffected = pstmt.executeUpdate();
    System.out.println(rowsAffected + "行がロードされました");
}</code>

                        <h4>2. PostgreSQLの独自機能</h4>
                        <ul>
                            <li><strong>LISTEN/NOTIFY</strong>: イベント通知機能</li>
                            <li><strong>COPY</strong>: 大量データのインポート/エクスポート</li>
                            <li><strong>JSON/JSONB</strong>: JSONデータの操作と索引</li>
                            <li><strong>継承テーブル</strong>: テーブル間の継承</li>
                            <li><strong>全文検索</strong>: 文書の検索機能</li>
                        </ul>

                        <code>// PostgreSQLのLISTEN/NOTIFYを使用する例
import org.postgresql.PGConnection;
import org.postgresql.PGNotification;

// リスナーを設定する接続
try (Connection conn = DriverManager.getConnection(url, props)) {
    // PostgreSQL固有のAPIにキャスト
    PGConnection pgconn = conn.unwrap(PGConnection.class);
    
    // チャンネルをリッスン
    try (Statement stmt = conn.createStatement()) {
        stmt.execute("LISTEN user_events");
        System.out.println("user_eventsチャンネルをリッスンしています...");
        
        // 通知を受け取るループ
        while (true) {
            // 一時停止して通知を待機
            Thread.sleep(500);
            
            // 待機中の通知を確認
            PGNotification[] notifications = pgconn.getNotifications();
            
            if (notifications != null) {
                for (PGNotification notification : notifications) {
                    System.out.println("通知受信: チャンネル=" + notification.getName() + 
                                     ", メッセージ=" + notification.getParameter());
                }
            }
        }
    }
}</code>

                        <h4>3. Oracleの独自機能</h4>
                        <ul>
                            <li><strong>REF CURSOR</strong>: 動的結果セット</li>
                            <li><strong>RETURNING INTO</strong>: DML操作の結果取得</li>
                            <li><strong>OracleData/ORAData</strong>: カスタムデータタイプ</li>
                            <li><strong>Oracle固有のSQL構文</strong>: CONNECT BY, ROWNUM等</li>
                            <li><strong>BLOB/CLOB最適化</strong>: 大容量データの効率的な扱い</li>
                        </ul>

                        <code>// OracleのREF CURSORを使用する例
import oracle.jdbc.OracleTypes;

// REF CURSORを返すストアドプロシージャを呼び出す
String callSql = "{call get_employees_by_dept(?, ?)}";
try (Connection conn = DriverManager.getConnection(url, props);
     CallableStatement cstmt = conn.prepareCall(callSql)) {
    
    // IN パラメータ
    cstmt.setInt(1, 10); // 部門ID
    
    // OUT パラメータ (REF CURSOR)
    cstmt.registerOutParameter(2, OracleTypes.CURSOR);
    
    // 実行
    cstmt.execute();
    
    // REF CURSORの結果セットを取得
    try (ResultSet rs = (ResultSet) cstmt.getObject(2)) {
        while (rs.next()) {
            System.out.println(rs.getInt("EMPLOYEE_ID") + ": " + 
                             rs.getString("FIRST_NAME") + " " + 
                             rs.getString("LAST_NAME"));
        }
    }
}</code>

                        <h4>4. SQL Serverの独自機能</h4>
                        <ul>
                            <li><strong>OUTPUT句</strong>: DML操作の結果取得</li>
                            <li><strong>テーブル値パラメータ</strong>: 一時テーブル渡し</li>
                            <li><strong>OFFSET-FETCH</strong>: ページング処理</li>
                            <li><strong>CLR統合</strong>: .NETコードの実行</li>
                            <li><strong>XML操作</strong>: XQuery/XPath</li>
                        </ul>

                        <code>// SQL ServerのOUTPUT句を使用する例
String sql = "INSERT INTO products (name, price, stock) " +
           "OUTPUT INSERTED.product_id, INSERTED.name " +
           "VALUES (?, ?, ?)";

try (Connection conn = DriverManager.getConnection(url, props);
     PreparedStatement pstmt = conn.prepareStatement(sql)) {
    
    pstmt.setString(1, "新製品A");
    pstmt.setBigDecimal(2, new BigDecimal("1299.99"));
    pstmt.setInt(3, 100);
    
    // executeQueryで実行してOUTPUT句の結果を取得
    try (ResultSet rs = pstmt.executeQuery()) {
        while (rs.next()) {
            System.out.println("挿入された製品: ID=" + rs.getInt(1) + 
                             ", 名前=" + rs.getString(2));
        }
    }
}</code>

                        <div class="note">
                            <h5>データベース固有機能の使用における注意点</h5>
                            <p>データベース固有の機能を使用する際は、以下の点に注意してください：</p>
                            <ul>
                                <li><strong>移植性</strong>: 固有機能を使用すると、異なるデータベースへの移行が難しくなります</li>
                                <li><strong>バージョン依存性</strong>: 機能がデータベースの特定バージョンに依存する場合があります</li>
                                <li><strong>ドライバの対応</strong>: 一部の機能は最新のJDBCドライバでのみ対応している場合があります</li>
                                <li><strong>抽象化レイヤーの検討</strong>: ORMツールや抽象化レイヤーを使用して移植性を確保することも検討しましょう</li>
                            </ul>
                        </div>

                        <div class="exercise">
                            <h5>実践課題 10.6.1: データベース固有機能の活用</h5>
                            <p>以下のデータベース固有機能を使用した実装を行ってください：</p>
                            <ol>
                                <li>MySQLの<code class="inline-code">ON DUPLICATE KEY UPDATE</code>を使用して、製品在庫を更新するコード</li>
                                <li>PostgreSQLの<code class="inline-code">COPY</code>コマンドを使用して、CSVファイルからデータをインポートするコード</li>
                                <li>Oracleの<code class="inline-code">RETURNING INTO</code>句を使用して、挿入された複数行のIDを取得するコード</li>
                                <li>SQL Serverのテーブル値パラメータを使用して、複数の注文項目を一度に処理するコード</li>
                            </ol>
                            <p>それぞれの実装で、エラー処理とリソースの適切なクローズを忘れないようにしてください。</p>
                        </div>
                    </section>

                    <section id="chapter10-quiz">
                        <h3 class="section-title">10.7 理解度確認テスト</h3>
                        <div class="quiz-container">
                            <h4>第10章の理解度チェック</h4>
                            <p>以下の問題に答えて、第10章の内容の理解度を確認しましょう。</p>
                            
                            <div class="quiz-question">
                                <p><strong>問題1:</strong> MySQL 8.0以降で接続時に「Public Key Retrieval is not allowed」エラーが発生する場合、どのJDBC URL設定を追加すべきですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1a" value="a">
                                    <label class="form-check-label" for="q1a">
                                        usePublicKey=true
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1b" value="b">
                                    <label class="form-check-label" for="q1b">
                                        allowPublicKeyRetrieval=true
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1c" value="c">
                                        <label class="form-check-label" for="q1c">
                                        publicKeyEnabled=true
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1d" value="d">
                                        <label class="form-check-label" for="q1d">
                                        retrievePublicKey=true
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題2:</strong> PostgreSQLデータベースに接続するための正しいJDBC URLはどれですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2a" value="a">
                                    <label class="form-check-label" for="q2a">
                                        jdbc:postgresql://localhost:5432/testdb
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2b" value="b">
                                    <label class="form-check-label" for="q2b">
                                        jdbc:postgres://localhost:5432/testdb
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2c" value="c">
                                        <label class="form-check-label" for="q2c">
                                        jdbc:postgresql://localhost:5432;database=testdb
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2d" value="d">
                                        <label class="form-check-label" for="q2d">
                                        jdbc:postgresql:@localhost:5432:testdb
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題3:</strong> Oracle JDBCドライバでREF CURSORを使用する場合、どのクラスとメソッドを使用しますか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3a" value="a">
                                    <label class="form-check-label" for="q3a">
                                        OracleTypes.CURSOR と CallableStatement.getObject()
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3b" value="b">
                                    <label class="form-check-label" for="q3b">
                                        Types.REF_CURSOR と CallableStatement.getResultSet()
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3c" value="c">
                                        <label class="form-check-label" for="q3c">
                                        OracleTypes.REF_CURSOR と CallableStatement.getCursor()
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3d" value="d">
                                        <label class="form-check-label" for="q3d">
                                        Types.CURSOR と PreparedStatement.getResultSet()
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題4:</strong> SQL Server JDBCドライバで暗号化を無効にする正しい設定はどれですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4a" value="a">
                                    <label class="form-check-label" for="q4a">
                                        useEncryption=false
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4b" value="b">
                                    <label class="form-check-label" for="q4b">
                                        encryption=disabled
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4c" value="c">
                                        <label class="form-check-label" for="q4c">
                                        encrypt=false
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4d" value="d">
                                        <label class="form-check-label" for="q4d">
                                        ssl=disabled
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題5:</strong> JDBCコネクションプールを使用する主な利点は何ですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5a" value="a">
                                    <label class="form-check-label" for="q5a">
                                        クエリの実行速度が向上する
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5b" value="b">
                                    <label class="form-check-label" for="q5b">
                                        データベース接続の確立コストを削減する
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5c" value="c">
                                        <label class="form-check-label" for="q5c">
                                        データベースサーバーの負荷を減らす
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5d" value="d">
                                        <label class="form-check-label" for="q5d">
                                        SQLインジェクションを防止する
                                    </label>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary mt-3" id="checkAnswers">回答を確認</button>
                            <div id="quizResults" class="mt-3 d-none">
                                <div class="alert alert-success">
                                    <h5>正解:</h5>
                                    <ol>
                                        <li>b（allowPublicKeyRetrieval=true）</li>
                                        <li>a（jdbc:postgresql://localhost:5432/testdb）</li>
                                        <li>a（OracleTypes.CURSOR と CallableStatement.getObject()）</li>
                                        <li>c（encrypt=false）</li>
                                        <li>b（データベース接続の確立コストを削減する）</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section id="next-steps">
                        <h3 class="section-title">次のステップ</h3>
                        <p>この章では、主要なデータベース管理システム（MySQL、PostgreSQL、Oracle、SQL Server）の接続設定と特有の機能について学びました。次のステップとして、以下のトピックについてさらに学習を深めることをお勧めします。</p>
                        <div class="note">
                            <h5>推奨される追加学習</h5>
                            <ul>
                                <li><strong>コネクションプール</strong>: HikariCPやApache DBCP2などの接続プールライブラリの詳細設定</li>
                                <li><strong>JPA/Hibernate</strong>: ORマッピングフレームワークを使ったデータベースアクセス</li>
                                <li><strong>Spring Data</strong>: Springフレームワークを使ったデータアクセス層の抽象化</li>
                                <li><strong>マイクロサービスでのデータベース設計</strong>: 分散システムにおけるデータベース接続戦略</li>
                                <li><strong>データベースセキュリティ</strong>: よりセキュアなデータベース接続の設定と実装</li>
                            </ul>
                        </div>
                        <p>実際のプロジェクトでは、アプリケーションの要件に応じて最適なデータベースと接続設定を選択することが重要です。各データベースの特徴と性能特性を理解し、適切に活用しましょう。</p>
                    </section>
                </section>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center py-4">
        <div class="container">
            <p class="mb-0">Copyright © 2025 F-Circle All rights reserved.</p>
        </div>
    </footer>

    <!-- Bootstrap JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 理解度テストの回答確認ボタンの処理
        document.getElementById('checkAnswers').addEventListener('click', function() {
            document.getElementById('quizResults').classList.remove('d-none');
        });
    </script>
</body>
</html>