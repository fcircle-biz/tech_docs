<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>アジャイル開発学習教材 第4章 - ユーザーストーリーと要件定義</title>

    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>

    <style>
        /* ベースレイアウト */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        /* ナビゲーション */
        .navbar {
            background-color: #0d6efd;
        }

        /* サイドバー */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
            background-color: #f8f9fa;
            padding: 1rem;
        }

        /* タイトル */
        .chapter-title {
            color: #0d6efd;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #0d6efd;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #0dcaf0;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        /* コンテンツボックス */
        .quiz-container {
            background-color: #cfe2ff;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #0d6efd;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        /* コードハイライト */
        .code-block {
            background-color: #1e1e1e;
            color: white;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        /* ナビゲーション */
        .nav-link.active {
            background-color: #0d6efd !important;
            color: white !important;
        }

        /* テーブルスタイル */
        .comparison-table {
            margin: 1.5rem 0;
        }

        .comparison-table th {
            background-color: #0d6efd;
            color: white;
        }

        /* ストーリーカードスタイル */
        .story-card {
            background-color: #fff8dc;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
        }

        .story-card-header {
            font-weight: bold;
            color: #856404;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <strong>アジャイル開発学習教材</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="agile-development-learning-material-1.html">
                                第1章: アジャイル開発の基礎と原則
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="agile-development-learning-material-2.html">
                                第2章: スクラムフレームワーク - 基礎編
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="agile-development-learning-material-3.html">
                                第3章: カンバン手法とビジュアルマネジメント
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="agile-development-learning-material-4.html">
                                第4章: ユーザーストーリーと要件定義
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="agile-development-learning-material-5.html">
                                第5章: スプリント計画と実行
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="agile-development-learning-material-6.html">
                                第6章: デイリースタンドアップとチームコミュニケーション
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="agile-development-learning-material-7.html">
                                第7章: レトロスペクティブと継続的改善
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="agile-development-learning-material-8.html">
                                第8章: テスト駆動開発（TDD）とアジャイルテスティング
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="agile-development-learning-material-9.html">
                                第9章: 継続的インテグレーション/デリバリー（CI/CD）
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="agile-development-learning-material-10.html">
                                第10章: アジャイルチームの運営と組織への導入
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第4章: ユーザーストーリーと要件定義</h1>
                </div>

                <div id="chapter4">
                    <h2 class="chapter-title">ユーザー視点での要件表現</h2>

                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>ユーザーストーリーとは何か、なぜ重要なのか</li>
                            <li>INVESTの原則と良いストーリーの特徴</li>
                            <li>効果的なユーザーストーリーの書き方とテンプレート</li>
                            <li>受け入れ基準（Acceptance Criteria）の定義方法</li>
                            <li>エピックとユーザーストーリーの階層構造</li>
                            <li>ストーリーマッピング技法の実践</li>
                            <li>バックログの優先順位付け手法（MoSCoW法、価値対労力マトリクス）</li>
                            <li>ストーリーポイントによる見積もり</li>
                            <li>プランニングポーカーの実施方法</li>
                        </ul>
                    </div>

                    <h3 class="section-title">4.1 ユーザーストーリーとは</h3>
                    <p>
                        ユーザーストーリー（User Story）は、アジャイル開発における要件定義の手法です。ユーザーの視点から、「誰が」「何を」「なぜ」必要としているのかを簡潔に表現します。
                    </p>

                    <h4>従来の要件定義との違い</h4>
                    <table class="table table-bordered comparison-table">
                        <thead>
                            <tr>
                                <th>比較項目</th>
                                <th>従来の要件定義</th>
                                <th>ユーザーストーリー</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>記述スタイル</strong></td>
                                <td>システム視点（〜ができること）</td>
                                <td>ユーザー視点（私は〜したい）</td>
                            </tr>
                            <tr>
                                <td><strong>詳細度</strong></td>
                                <td>最初から詳細に記述</td>
                                <td>会話のきっかけ、後で詳細化</td>
                            </tr>
                            <tr>
                                <td><strong>サイズ</strong></td>
                                <td>大きな機能仕様書</td>
                                <td>小さく分割された単位</td>
                            </tr>
                            <tr>
                                <td><strong>価値の明示</strong></td>
                                <td>暗黙的</td>
                                <td>「なぜ」を明示</td>
                            </tr>
                            <tr>
                                <td><strong>変更</strong></td>
                                <td>変更管理が厳格</td>
                                <td>柔軟に変更可能</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>ユーザーストーリーの3つのC</h4>
                    <div class="highlight">
                        <p>Ron Jeffriesが提唱した「3C」は、ユーザーストーリーの本質を表しています：</p>
                        <ul>
                            <li><strong>Card（カード）</strong>: ストーリーは物理的またはデジタルのカードに書かれる。詳細すべてではなく、会話のリマインダー</li>
                            <li><strong>Conversation（会話）</strong>: カードは会話のきっかけ。開発チームと顧客が対話し、詳細を明確にする</li>
                            <li><strong>Confirmation（確認）</strong>: 受け入れ基準で、ストーリーが完了したことを確認できる</li>
                        </ul>
                    </div>

                    <div class="mermaid">
                        graph LR
                            A[Card<br/>簡潔な記述] --> B[Conversation<br/>対話で詳細化]
                            B --> C[Confirmation<br/>受け入れ基準]
                            C -.フィードバック.- A
                    </div>

                    <h3 class="section-title">4.2 ユーザーストーリーの書き方</h3>
                    <p>
                        ユーザーストーリーは、一般的に以下のテンプレートを使って書きます：
                    </p>

                    <div class="story-card">
                        <div class="story-card-header">ユーザーストーリーのテンプレート</div>
                        <p><strong>As a</strong> [ユーザーの役割]<br>
                        <strong>I want</strong> [達成したいこと]<br>
                        <strong>So that</strong> [その理由・価値]</p>

                        <p class="mb-0"><small>日本語版：<br>
                        <strong>[役割]として、</strong><br>
                        <strong>[達成したいこと]がしたい。</strong><br>
                        <strong>なぜなら[理由・価値]だからだ。</strong></small></p>
                    </div>

                    <h4>良いユーザーストーリーの例</h4>
                    <div class="story-card">
                        <div class="story-card-header">例1: ECサイトのカート機能</div>
                        <p><strong>オンラインショッパーとして、</strong><br>
                        <strong>カートに商品を追加したい。</strong><br>
                        <strong>なぜなら、複数の商品をまとめて購入したいからだ。</strong></p>

                        <p class="mb-0"><strong>受け入れ基準:</strong></p>
                        <ul class="mb-0">
                            <li>商品ページから「カートに追加」ボタンをクリックできる</li>
                            <li>追加後、カートアイコンに商品数が表示される</li>
                            <li>カート内の商品一覧を確認できる</li>
                            <li>商品の数量を変更できる</li>
                        </ul>
                    </div>

                    <div class="story-card">
                        <div class="story-card-header">例2: プロジェクト管理ツールのレポート機能</div>
                        <p><strong>プロジェクトマネージャーとして、</strong><br>
                        <strong>週次進捗レポートを自動生成したい。</strong><br>
                        <strong>なぜなら、手動でレポートを作成する時間を削減し、チームの現状を迅速に把握したいからだ。</strong></p>

                        <p class="mb-0"><strong>受け入れ基準:</strong></p>
                        <ul class="mb-0">
                            <li>「レポート生成」ボタンをクリックするとPDFが生成される</li>
                            <li>レポートには完了タスク数、進行中タスク数、遅延タスク数が含まれる</li>
                            <li>期間を指定できる（過去7日間、過去30日間など）</li>
                            <li>生成したレポートをメールで送信できる</li>
                        </ul>
                    </div>

                    <h3 class="section-title">4.3 INVESTの原則</h3>
                    <p>
                        良いユーザーストーリーは「INVEST」の原則を満たしています。Bill Wakeが提唱したこの原則は、ストーリーの品質を評価する基準となります。
                    </p>

                    <div class="highlight">
                        <h6>INVEST原則の詳細</h6>
                        <ul>
                            <li><strong>I - Independent（独立している）</strong><br>
                            他のストーリーに依存せず、独立して開発・テスト可能。依存関係が少ないため、優先順位を柔軟に変更できます。</li>

                            <li><strong>N - Negotiable（交渉可能）</strong><br>
                            詳細が固定されておらず、顧客と開発チームが対話で調整できる。「契約書」ではなく「会話のきっかけ」です。</li>

                            <li><strong>V - Valuable（価値がある）</strong><br>
                            ユーザーまたはビジネスに明確な価値を提供する。技術的タスクではなく、ユーザー視点の価値を表現します。</li>

                            <li><strong>E - Estimable（見積もり可能）</strong><br>
                            開発チームが工数を見積もれる程度に理解できる。曖昧すぎず、詳細すぎない適切なレベルです。</li>

                            <li><strong>S - Small（小さい）</strong><br>
                            1スプリント内（通常1〜2週間）で完了できるサイズ。大きすぎる場合はエピックとして扱い、複数のストーリーに分割します。</li>

                            <li><strong>T - Testable（テスト可能）</strong><br>
                            受け入れ基準が明確で、完了したかどうかを客観的にテストできる。曖昧な表現（「使いやすい」など）は避けます。</li>
                        </ul>
                    </div>

                    <div class="exercise-container">
                        <h5>演習 4-1: ユーザーストーリーの作成とINVEST評価</h5>
                        <p><strong>目的:</strong> 実際にユーザーストーリーを作成し、INVEST原則で評価する</p>

                        <h6>シナリオ</h6>
                        <p>あなたはオンライン学習プラットフォームの開発チームに所属しています。以下の機能をユーザーストーリーとして記述してください：</p>
                        <ul>
                            <li>学習者が自分の学習進捗を確認できる機能</li>
                            <li>講師がクイズを作成できる機能</li>
                            <li>学習者が質問を投稿できる機能</li>
                        </ul>

                        <h6>手順</h6>
                        <ol>
                            <li>上記3つの機能について、ユーザーストーリーのテンプレートを使って記述する</li>
                            <li>各ストーリーに受け入れ基準を3〜5個記述する</li>
                            <li>INVEST原則に照らして自己評価する（各項目を満たしているか確認）</li>
                            <li>満たしていない項目があれば、ストーリーを修正する</li>
                        </ol>
                    </div>

                    <h3 class="section-title">4.4 受け入れ基準（Acceptance Criteria）</h3>
                    <p>
                        受け入れ基準は、ユーザーストーリーが「完了」したことを確認するための具体的な条件です。開発チームとプロダクトオーナーが、何を実装すべきかの共通理解を持つために不可欠です。
                    </p>

                    <h4>受け入れ基準の書き方</h4>
                    <p>
                        受け入れ基準は、以下の形式で記述します：
                    </p>

                    <div class="highlight">
                        <p><strong>Given-When-Then形式（ビヘイビア駆動開発 - BDD）</strong></p>
                        <ul>
                            <li><strong>Given</strong>（前提条件）: 特定の状況や文脈</li>
                            <li><strong>When</strong>（操作）: ユーザーが行う操作</li>
                            <li><strong>Then</strong>（期待結果）: 期待される結果や振る舞い</li>
                        </ul>
                    </div>

                    <div class="story-card">
                        <div class="story-card-header">例: ログイン機能</div>
                        <p><strong>ユーザーとして、</strong><br>
                        <strong>メールアドレスとパスワードでログインしたい。</strong><br>
                        <strong>なぜなら、自分の専用ページにアクセスしたいからだ。</strong></p>

                        <p class="mb-0"><strong>受け入れ基準:</strong></p>
                        <ol class="mb-0">
                            <li><strong>Given</strong> 登録済みのメールアドレスとパスワードを持っている<br>
                            <strong>When</strong> 正しいメールアドレスとパスワードを入力してログインボタンをクリックする<br>
                            <strong>Then</strong> ダッシュボードページにリダイレクトされる</li>

                            <li><strong>Given</strong> ログインページにいる<br>
                            <strong>When</strong> 間違ったパスワードを入力してログインボタンをクリックする<br>
                            <strong>Then</strong> エラーメッセージ「メールアドレスまたはパスワードが間違っています」が表示される</li>

                            <li><strong>Given</strong> ログインページにいる<br>
                            <strong>When</strong> 未登録のメールアドレスを入力する<br>
                            <strong>Then</strong> エラーメッセージが表示される</li>
                        </ol>
                    </div>

                    <h4>良い受け入れ基準の特徴</h4>
                    <ul>
                        <li><strong>明確</strong>: 曖昧さがなく、誰が読んでも同じ理解ができる</li>
                        <li><strong>テスト可能</strong>: 自動テストまたは手動テストで確認できる</li>
                        <li><strong>完全</strong>: 正常系だけでなく、異常系やエッジケースもカバーする</li>
                        <li><strong>簡潔</strong>: 必要最小限の記述で、過度に詳細すぎない</li>
                        <li><strong>独立</strong>: 各基準が独立してテストできる</li>
                    </ul>

                    <h3 class="section-title">4.5 エピックとユーザーストーリーの階層</h3>
                    <p>
                        大きな機能や要求は、エピック（Epic）として表現し、複数の小さなユーザーストーリーに分割します。
                    </p>

                    <div class="mermaid">
                        graph TD
                            A["エピック<br/>オンラインショッピング機能"] --> B["ストーリー1<br/>商品検索"]
                            A --> C["ストーリー2<br/>カートに追加"]
                            A --> D["ストーリー3<br/>チェックアウト"]
                            A --> E["ストーリー4<br/>注文履歴確認"]

                            B --> B1[タスク: 検索UI作成]
                            B --> B2[タスク: 検索API実装]
                            B --> B3[タスク: フィルター機能]

                            C --> C1[タスク: カートDB設計]
                            C --> C2[タスク: 追加ボタン実装]

                            style A fill:#ffcccb
                            style B fill:#fff3cd
                            style C fill:#fff3cd
                            style D fill:#fff3cd
                            style E fill:#fff3cd
                    </div>

                    <h4>階層構造の定義</h4>
                    <table class="table table-bordered comparison-table">
                        <thead>
                            <tr>
                                <th>レベル</th>
                                <th>名称</th>
                                <th>期間</th>
                                <th>説明</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>レベル1</strong></td>
                                <td>テーマ（Theme）</td>
                                <td>数ヶ月〜1年</td>
                                <td>戦略的な大きな目標やビジョン</td>
                            </tr>
                            <tr>
                                <td><strong>レベル2</strong></td>
                                <td>エピック（Epic）</td>
                                <td>1〜3ヶ月</td>
                                <td>複数スプリントにまたがる大きな機能</td>
                            </tr>
                            <tr>
                                <td><strong>レベル3</strong></td>
                                <td>ユーザーストーリー</td>
                                <td>数日〜2週間</td>
                                <td>1スプリントで完了する機能単位</td>
                            </tr>
                            <tr>
                                <td><strong>レベル4</strong></td>
                                <td>タスク（Task）</td>
                                <td>数時間〜1日</td>
                                <td>ストーリーを実現するための技術的作業</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>エピックの分割方法</h4>
                    <p>
                        大きなエピックは、以下の観点で分割できます：
                    </p>
                    <ul>
                        <li><strong>ワークフローのステップ</strong>: 「ユーザー登録」→「プロフィール入力」→「確認メール送信」</li>
                        <li><strong>ビジネスルール</strong>: 基本機能と高度な機能を分離</li>
                        <li><strong>データの種類</strong>: 「個人情報の編集」「会社情報の編集」</li>
                        <li><strong>CRUD操作</strong>: Create（作成）、Read（参照）、Update（更新）、Delete（削除）ごとに分割</li>
                        <li><strong>シンプル／複雑</strong>: まず単純版を実装し、後で拡張</li>
                        <li><strong>MVPとその先</strong>: 最小限の価値を提供するバージョンを先に実装</li>
                    </ul>

                    <h3 class="section-title">4.6 ストーリーマッピング</h3>
                    <p>
                        ストーリーマッピング（User Story Mapping）は、Jeff Pattonが提唱した手法で、ユーザーの利用の流れに沿ってストーリーを整理し、優先順位を決定します。
                    </p>

                    <div class="mermaid">
                        graph TB
                            subgraph "ユーザーアクティビティ（横軸：時間の流れ）"
                                A1[アカウント作成]
                                A2[ログイン]
                                A3[商品検索]
                                A4[カート追加]
                                A5[購入]
                            end

                            subgraph "リリース1（MVP）"
                                B1[メール登録]
                                B2[ログイン機能]
                                B3[キーワード検索]
                                B4[カート追加]
                                B5[クレジット決済]
                            end

                            subgraph "リリース2"
                                C1[SNS連携]
                                C3[フィルター検索]
                                C4[数量変更]
                                C5[複数決済方法]
                            end

                            subgraph "リリース3"
                                D3[レコメンド]
                                D4[お気に入り]
                                D5[定期購入]
                            end

                            A1 -.含む.- B1
                            A1 -.含む.- C1
                            A2 -.含む.- B2
                            A3 -.含む.- B3
                            A3 -.含む.- C3
                            A3 -.含む.- D3
                            A4 -.含む.- B4
                            A4 -.含む.- C4
                            A4 -.含む.- D4
                            A5 -.含む.- B5
                            A5 -.含む.- C5
                            A5 -.含む.- D5
                    </div>

                    <h4>ストーリーマッピングの手順</h4>
                    <ol>
                        <li><strong>ユーザーアクティビティを洗い出す</strong>: ユーザーが達成したい主要な活動を時系列で並べる（横軸）</li>
                        <li><strong>各アクティビティを詳細化</strong>: 各アクティビティに含まれるタスクやストーリーを縦に並べる</li>
                        <li><strong>優先順位をつける</strong>: 上から順に重要度が高い（必須）ものを配置</li>
                        <li><strong>リリースに分割</strong>: 横線を引き、各リリースに含める範囲を決める</li>
                        <li><strong>MVP（Minimum Viable Product）を定義</strong>: 最初のリリースで最小限の価値を提供するストーリーを選ぶ</li>
                    </ol>

                    <div class="exercise-container">
                        <h5>演習 4-2: ストーリーマッピングの作成</h5>
                        <p><strong>目的:</strong> チームでストーリーマッピングを作成し、優先順位を決定する</p>

                        <h6>シナリオ</h6>
                        <p>オンライン予約システム（レストラン、美容院、病院など）のストーリーマップを作成します。</p>

                        <h6>手順</h6>
                        <ol>
                            <li>ホワイトボードまたは付箋を準備</li>
                            <li>ユーザーの利用フローを洗い出す（例：「店舗検索」→「予約」→「確認」→「来店」→「レビュー」）</li>
                            <li>各フローに含まれる機能をブレインストーミング</li>
                            <li>優先順位をつけて並べる</li>
                            <li>MVP（最初のリリース）に含める機能を決定</li>
                        </ol>

                        <h6>成果物</h6>
                        <ul>
                            <li>ストーリーマップ（写真またはデジタル版）</li>
                            <li>MVP（リリース1）に含まれるストーリーのリスト</li>
                        </ul>
                    </div>

                    <h3 class="section-title">4.7 バックログの優先順位付け</h3>
                    <p>
                        プロダクトバックログは、開発すべき機能のリストです。すべてを一度に開発することはできないため、優先順位をつけることが重要です。
                    </p>

                    <h4>MoSCoW法</h4>
                    <p>
                        MoSCoW法は、要求を4つのカテゴリーに分類する手法です：
                    </p>
                    <div class="highlight">
                        <ul>
                            <li><strong>Must have（必須）</strong>: このリリースに絶対必要。なければ失敗とみなされる</li>
                            <li><strong>Should have（重要）</strong>: 重要だが、絶対必須ではない。次善の策がある</li>
                            <li><strong>Could have（あればよい）</strong>: あると嬉しいが、なくても問題ない</li>
                            <li><strong>Won't have（今回は対象外）</strong>: 今回のリリースには含めない。将来検討する可能性がある</li>
                        </ul>
                    </div>

                    <h4>価値対労力マトリクス</h4>
                    <p>
                        ストーリーを「ビジネス価値」と「実装の労力」の2軸で評価し、優先順位を決定します。
                    </p>

                    <div class="mermaid">
                        quadrantChart
                            title 価値対労力マトリクス
                            x-axis 低労力 --> 高労力
                            y-axis 低価値 --> 高価値
                            quadrant-1 検討が必要
                            quadrant-2 最優先で実装
                            quadrant-3 低優先度
                            quadrant-4 後回し

                            ストーリーA: [0.2, 0.8]
                            ストーリーB: [0.7, 0.8]
                            ストーリーC: [0.3, 0.3]
                            ストーリーD: [0.8, 0.3]
                            ストーリーE: [0.15, 0.85]
                    </div>

                    <p class="mt-3">
                        <strong>優先順位の推奨順序：</strong>
                    </p>
                    <ol>
                        <li><strong>高価値・低労力</strong>（右上）: 最優先で実装</li>
                        <li><strong>高価値・高労力</strong>（左上）: 2番目の優先度。エピックとして分割を検討</li>
                        <li><strong>低価値・低労力</strong>（右下）: 時間があれば実装</li>
                        <li><strong>低価値・高労力</strong>（左下）: 実装しない、または大幅に簡素化</li>
                    </ol>

                    <h3 class="section-title">4.8 ストーリーポイントと見積もり</h3>
                    <p>
                        ストーリーポイント（Story Point）は、ユーザーストーリーの相対的なサイズや複雑さを表す単位です。時間ではなく、労力・複雑さ・不確実性を総合的に評価します。
                    </p>

                    <h4>なぜ時間ではなくポイントなのか</h4>
                    <ul>
                        <li><strong>相対評価が容易</strong>: 「このタスクはあのタスクの2倍複雑」という比較がしやすい</li>
                        <li><strong>個人差を吸収</strong>: 経験豊富なメンバーも新人も同じポイントで評価できる（チーム全体のベロシティで調整）</li>
                        <li><strong>不確実性を含む</strong>: 複雑さやリスクも考慮できる</li>
                        <li><strong>見積もりのプレッシャー軽減</strong>: 「何時間かかるか」より「どれくらい大変か」の方が答えやすい</li>
                    </ul>

                    <h4>フィボナッチ数列の使用</h4>
                    <p>
                        ストーリーポイントは、フィボナッチ数列（1, 2, 3, 5, 8, 13, 21...）を使うことが一般的です。数が大きくなるほど不確実性が増すため、粗い刻みで十分だからです。
                    </p>

                    <table class="table table-bordered comparison-table">
                        <thead>
                            <tr>
                                <th>ポイント</th>
                                <th>目安</th>
                                <th>説明</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>1</strong></td>
                                <td>非常に小さい</td>
                                <td>数時間で完了する簡単なタスク</td>
                            </tr>
                            <tr>
                                <td><strong>2</strong></td>
                                <td>小さい</td>
                                <td>半日〜1日程度で完了</td>
                            </tr>
                            <tr>
                                <td><strong>3</strong></td>
                                <td>やや小さい</td>
                                <td>1〜2日で完了</td>
                            </tr>
                            <tr>
                                <td><strong>5</strong></td>
                                <td>中程度</td>
                                <td>2〜3日で完了、標準的なサイズ</td>
                            </tr>
                            <tr>
                                <td><strong>8</strong></td>
                                <td>大きい</td>
                                <td>3〜5日、複雑さや不確実性がある</td>
                            </tr>
                            <tr>
                                <td><strong>13</strong></td>
                                <td>非常に大きい</td>
                                <td>1週間以上、エピックとして分割を検討</td>
                            </tr>
                            <tr>
                                <td><strong>21+</strong></td>
                                <td>巨大</td>
                                <td>必ず分割すべき</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 class="section-title">4.9 プランニングポーカー</h3>
                    <p>
                        プランニングポーカー（Planning Poker）は、チーム全体でストーリーポイントを見積もる手法です。各メンバーが独立して見積もり、議論を通じて合意形成します。
                    </p>

                    <h4>プランニングポーカーの手順</h4>
                    <div class="mermaid">
                        flowchart TD
                            A[1. ストーリーを読み上げる] --> B[2. 質疑応答<br/>曖昧な点を明確化]
                            B --> C[3. 各自がカードを選ぶ<br/>裏向きで持つ]
                            C --> D[4. 一斉にカードを公開]
                            D --> E{見積もりが<br/>一致したか?}
                            E -->|Yes| F[合意したポイントを記録]
                            E -->|No| G[最大値と最小値の<br/>メンバーが理由を説明]
                            G --> H[チームで議論]
                            H --> I[再度見積もり]
                            I --> D
                    </div>

                    <h4>プランニングポーカーのカード</h4>
                    <p>
                        各メンバーは、以下の数字が書かれたカードセットを持ちます：
                    </p>
                    <ul>
                        <li><strong>数字カード</strong>: 0, 1, 2, 3, 5, 8, 13, 21, 40, 100</li>
                        <li><strong>特殊カード</strong>:
                            <ul>
                                <li>「?」: わからない、情報不足</li>
                                <li>「∞」: 大きすぎる、分割が必要</li>
                                <li>「コーヒーカップ」: 休憩が必要</li>
                            </ul>
                        </li>
                    </ul>

                    <h4>プランニングポーカーのベストプラクティス</h4>
                    <div class="highlight">
                        <ul>
                            <li><strong>タイムボックス</strong>: 1つのストーリーに5〜10分以上かけない。議論が長引く場合は保留して後で詳細化</li>
                            <li><strong>基準ストーリーを決める</strong>: 最初に「これは5ポイント」という基準ストーリーを設定し、他はそれとの相対評価</li>
                            <li><strong>全員参加</strong>: 開発チーム全員が見積もりに参加。誰も支配的にならないようにする</li>
                            <li><strong>議論を奨励</strong>: 見積もりが分かれたときは、異なる視点を共有する良い機会</li>
                            <li><strong>正確さを求めすぎない</strong>: 見積もりは予測であり、完璧である必要はない</li>
                        </ul>
                    </div>

                    <div class="exercise-container">
                        <h5>演習 4-3: プランニングポーカーの実践</h5>
                        <p><strong>目的:</strong> チームでプランニングポーカーを実施し、ストーリーポイントを見積もる</p>

                        <h6>準備</h6>
                        <ul>
                            <li>各メンバーがプランニングポーカーカードを用意（紙や専用アプリ）</li>
                            <li>見積もる対象のユーザーストーリーを5〜10個準備</li>
                            <li>ファシリテーターを1名決める</li>
                        </ul>

                        <h6>手順</h6>
                        <ol>
                            <li>まず基準となるストーリーを1つ選び、「5ポイント」と設定</li>
                            <li>次のストーリーを読み上げ、質疑応答</li>
                            <li>各自がカードを選び、一斉に公開</li>
                            <li>見積もりが分かれた場合、最大と最小の理由を聞く</li>
                            <li>議論後、再度見積もり</li>
                            <li>合意したら次のストーリーへ</li>
                        </ol>

                        <h6>振り返りポイント</h6>
                        <ul>
                            <li>見積もりが大きく分かれたストーリーは何が原因だったか？</li>
                            <li>基準ストーリーは適切だったか？</li>
                            <li>情報不足で見積もれないストーリーはあったか？</li>
                        </ul>
                    </div>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>
                                <strong>ユーザーストーリーの基本テンプレートを日本語で書いてください。</strong>
                            </li>
                            <li>
                                <strong>INVESTの原則の6つの項目をすべて挙げ、それぞれ簡潔に説明してください。</strong>
                            </li>
                            <li>
                                <strong>受け入れ基準を書く際のGiven-When-Then形式について説明してください。</strong>
                            </li>
                            <li>
                                <strong>エピックとユーザーストーリーの違いは何ですか？</strong>
                            </li>
                            <li>
                                <strong>MoSCoW法の4つのカテゴリーを挙げてください。</strong>
                            </li>
                            <li>
                                <strong>ストーリーポイントを時間ではなく使う理由を3つ挙げてください。</strong>
                            </li>
                            <li>
                                <strong>プランニングポーカーで見積もりが大きく分かれたとき、どうすべきですか？</strong>
                            </li>
                        </ol>
                    </div>

                    <h3 class="section-title">4.10 まとめ</h3>
                    <p>
                        この章では、ユーザーストーリーと要件定義について学びました。ユーザー視点で価値を表現し、チーム全体で共通理解を持つことがアジャイル開発の成功の鍵です。
                    </p>
                    <div class="highlight">
                        <h5>重要ポイント</h5>
                        <ul>
                            <li>ユーザーストーリーは「誰が」「何を」「なぜ」を明確にする</li>
                            <li>INVEST原則を満たす良いストーリーを作成する</li>
                            <li>受け入れ基準で完了の定義を明確にし、テスト可能にする</li>
                            <li>エピックを適切なサイズのストーリーに分割する</li>
                            <li>ストーリーマッピングでユーザーの流れを可視化し、優先順位を決定する</li>
                            <li>価値と労力を考慮してバックログの優先順位をつける</li>
                            <li>ストーリーポイントで相対的な見積もりを行う</li>
                            <li>プランニングポーカーでチーム全体の知識を活用し、合意形成する</li>
                        </ul>
                    </div>

                    <div class="d-flex justify-content-between mt-4 mb-5">
                        <a href="agile-development-learning-material-3.html" class="btn btn-secondary">← 前の章: カンバン手法とビジュアルマネジメント</a>
                        <a href="agile-development-learning-material-5.html" class="btn btn-primary">次の章: スプリント計画と実行 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- フッター -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>

    <!-- Mermaid.js 初期化 -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>
