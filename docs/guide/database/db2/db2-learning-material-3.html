<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DB2学習教材 第3章 - DB2クライアントツールの導入と基本操作</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* ベースレイアウト */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        /* ナビゲーション */
        .navbar {
            background-color: #003d73;
        }

        /* サイドバー */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }

        /* タイトル */
        .chapter-title {
            color: #003d73;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #003d73;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #0062cc;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        /* コード */
        code {
            display: block;
            background-color: #f5f5f5;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            white-space: pre;
            overflow-x: auto;
        }

        /* コンテンツボックス */
        .quiz-container {
            background-color: #e6f1ff;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #003d73;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        /* ナビゲーション */
        .nav-link.active {
            background-color: #003d73 !important;
            color: white !important;
        }

        .nav-link:hover {
            background-color: #0062cc !important;
            color: white !important;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">DB2学習教材</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../README.md">ガイドライン一覧</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>目次</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="db2-learning-material-1.html">第1章: DB2の基本概念と環境構築</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="db2-learning-material-2.html">第2章: Docker環境でのDB2セットアップ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="#chapter3">第3章: DB2クライアントツールの導入</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="db2-learning-material-4.html">第4章: DB2 SQLの基本</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="db2-learning-material-5.html">第5章: テーブル設計とインデックス基礎</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="db2-learning-material-6.html">第6章: DB2組み込み関数とストアドプロシージャ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="db2-learning-material-7.html">第7章: ユーザー管理と基本的なセキュリティ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="db2-learning-material-8.html">第8章: 基本的なデータベース管理操作</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第3章: DB2クライアントツールの導入と基本操作</h1>
                </div>

                <div id="chapter3">
                    <h2 class="chapter-title">DB2クライアントツールの導入と基本操作</h2>
                    
                    <!-- 学習目標 -->
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>DB2 Command Line Processor (CLP) の基本操作</li>
                            <li>DBeaver Community Editionのインストールと設定</li>
                            <li>DB2への接続設定方法</li>
                            <li>SQLワークシートの基本的な使い方</li>
                            <li>データベースオブジェクトの管理方法</li>
                        </ul>
                    </div>

                    <!-- 3.1 DB2クライアントツールの概要 -->
                    <h3 class="section-title">3.1 DB2クライアントツールの概要</h3>
                    <p>DB2データベースに接続して操作するには、適切なクライアントツールが必要です。主なツールには以下があります：</p>

                    <h4>主要なDB2クライアントツール</h4>
                    <ul>
                        <li><strong>DB2 Command Line Processor (CLP)</strong>: DB2標準のコマンドラインインターフェース</li>
                        <li><strong>DBeaver Community Edition</strong>: オープンソースの統合データベース管理ツール</li>
                        <li><strong>IBM Data Studio</strong>: IBM公式のGUI管理ツール（現在は開発終了）</li>
                        <li><strong>IBM Db2 Data Management Console</strong>: Webベースの管理ツール</li>
                    </ul>

                    <p>本コースでは、標準的なCLPとユーザーフレンドリーなDBeaverを中心に学習します。</p>

                    <!-- 3.2 DB2 Command Line Processorの使用 -->
                    <h3 class="section-title">3.2 DB2 Command Line Processorの使用</h3>
                    <p>CLPは、DB2に標準で付属するコマンドラインツールです。前章で起動したDB2コンテナ内で既に使用可能な状態になっています。</p>

                    <!-- 実習 3-1 -->
                    <div class="exercise-container">
                        <h5>実習 3-1: DB2 CLPの基本操作</h5>
                        <p>コンテナ内のCLPを使用して、基本的なDB2コマンドを実行します。</p>
                        
                        <h6>手順</h6>
                        <ol>
                            <li>DB2コンテナにアクセス</li>
                            <li>DB2インスタンス情報の確認</li>
                            <li>データベース一覧の表示</li>
                            <li>データベース接続とテーブル情報の確認</li>
                        </ol>

                        <h6>実行例</h6>
                        <code># DB2コンテナにアクセス
docker exec -it db2-learning bash
su - db2inst1

# DB2インスタンス情報の確認
db2pd -inst

# データベース一覧の表示
db2 list database directory

# データベースに接続
db2 connect to TESTDB

# 現在のユーザー確認
db2 "VALUES USER"

# システムテーブルの確認
db2 "SELECT TABSCHEMA, TABNAME FROM SYSCAT.TABLES WHERE TABSCHEMA = 'DB2INST1'"

# 接続状態の確認
db2 list active databases

# 接続終了
db2 connect reset</code>

                        <h6>期待される結果</h6>
                        <ul>
                            <li>DB2インスタンスの詳細情報が表示される</li>
                            <li>TESTDBデータベースが一覧に表示される</li>
                            <li>現在のユーザー（DB2INST1）が表示される</li>
                            <li>システムテーブルの一覧が表示される</li>
                        </ul>
                    </div>

                    <!-- 3.3 DBeaver Community Editionのインストール -->
                    <h3 class="section-title">3.3 DBeaver Community Editionのインストール</h3>
                    <p>DBeaverは、多くのデータベースに対応したオープンソースの統合データベース管理ツールです。直感的なGUIでデータベース操作が行えます。</p>

                    <!-- 実習 3-2 -->
                    <div class="exercise-container">
                        <h5>実習 3-2: DBeaverのインストール</h5>
                        <p>DBeaver Community Editionをダウンロードしてインストールします。</p>
                        
                        <h6>手順</h6>
                        <ol>
                            <li>DBeaver公式サイトにアクセス</li>
                            <li>Community Editionをダウンロード</li>
                            <li>インストール実行</li>
                            <li>初期設定</li>
                        </ol>

                        <h6>ダウンロードとインストール</h6>
                        <ul>
                            <li><strong>公式サイト</strong>: https://dbeaver.io/download/</li>
                            <li><strong>対象</strong>: DBeaver Community Edition</li>
                            <li><strong>プラットフォーム</strong>: Windows, macOS, Linux対応</li>
                            <li><strong>サイズ</strong>: 約100MB</li>
                        </ul>

                        <h6>インストール後の初期設定</h6>
                        <ol>
                            <li>DBeaverを起動</li>
                            <li>「Sample Database」のセットアップをスキップ</li>
                            <li>メイン画面が表示されることを確認</li>
                        </ol>

                        <div class="warning">
                            <strong>注意：</strong> Javaランタイムが必要です。インストール中にJavaが不足している場合は、案内に従ってJavaをインストールしてください。
                        </div>
                    </div>

                    <!-- 3.4 DBeaverでのDB2接続設定 -->
                    <h3 class="section-title">3.4 DBeaverでのDB2接続設定</h3>
                    <p>インストールしたDBeaverを使用してDB2データベースに接続します。</p>

                    <!-- 実習 3-3 -->
                    <div class="exercise-container">
                        <h5>実習 3-3: DBeaverでのDB2接続設定</h5>
                        <p>DBeaverを使用してDB2コンテナに接続する設定を行います。</p>
                        
                        <h6>手順</h6>
                        <ol>
                            <li>新しい接続の作成</li>
                            <li>DB2ドライバーの選択</li>
                            <li>接続情報の入力</li>
                            <li>接続テストと確認</li>
                        </ol>

                        <h6>接続設定の詳細</h6>
                        <code>Database Type: IBM DB2
Host: localhost
Port: 50000
Database: TESTDB
Username: db2inst1
Password: mypassword</code>

                        <h6>設定手順</h6>
                        <ol>
                            <li>DBeaverを起動</li>
                            <li>「新しい接続」ボタンをクリック</li>
                            <li>「IBM DB2」を選択して「次へ」</li>
                            <li>サーバー情報を入力：
                                <ul>
                                    <li>Host: localhost</li>
                                    <li>Port: 50000</li>
                                    <li>Database: TESTDB</li>
                                    <li>Username: db2inst1</li>
                                    <li>Password: mypassword</li>
                                </ul>
                            </li>
                            <li>「Test Connection」をクリックして接続を確認</li>
                            <li>ドライバーのダウンロードが求められた場合は「Download」</li>
                            <li>接続成功後、「完了」をクリック</li>
                        </ol>

                        <h6>期待される結果</h6>
                        <ul>
                            <li>接続テストが成功する</li>
                            <li>データベースナビゲーターにDB2接続が表示される</li>
                            <li>TESTDBデータベースの構造が表示される</li>
                        </ul>
                    </div>

                    <!-- 3.5 DBeaverの基本操作 -->
                    <h3 class="section-title">3.5 DBeaverの基本操作</h3>
                    <p>DBeaverの主要な機能と基本的な操作方法を学習します。</p>

                    <!-- 実習 3-4 -->
                    <div class="exercise-container">
                        <h5>実習 3-4: DBeaverでのSQL実行とデータ操作</h5>
                        <p>DBeaverのSQLエディタを使用して、基本的なSQL文を実行します。</p>
                        
                        <h6>手順</h6>
                        <ol>
                            <li>SQLエディタを開く</li>
                            <li>テーブル作成とデータ挿入</li>
                            <li>データ検索</li>
                            <li>結果の確認とエクスポート</li>
                        </ol>

                        <h6>実行するSQL</h6>
                        <code>-- テーブルの作成
CREATE TABLE employees (
    emp_id INTEGER NOT NULL PRIMARY KEY,
    first_name VARCHAR(50),
    last_name VARCHAR(50),
    department VARCHAR(30),
    salary DECIMAL(10,2)
);

-- データの挿入
INSERT INTO employees VALUES 
(1, 'John', 'Smith', 'IT', 75000.00),
(2, 'Jane', 'Johnson', 'HR', 65000.00),
(3, 'Bob', 'Wilson', 'Finance', 80000.00);

-- データの検索
SELECT * FROM employees;

-- 部門別の平均給与
SELECT department, AVG(salary) as avg_salary
FROM employees
GROUP BY department;</code>

                        <h6>操作手順</h6>
                        <ol>
                            <li>DB2接続を右クリック → 「SQLエディタ」 → 「SQLスクリプトを開く」</li>
                            <li>上記のSQLをエディタに貼り付け</li>
                            <li>各SQL文を選択して「Ctrl+Enter」で実行</li>
                            <li>結果タブで実行結果を確認</li>
                            <li>テーブルデータを右クリックして「データをエクスポート」</li>
                        </ol>

                        <h6>期待される結果</h6>
                        <ul>
                            <li>employeesテーブルが正常に作成される</li>
                            <li>3件のデータが挿入される</li>
                            <li>全データと部門別平均給与が表示される</li>
                            <li>データのエクスポートができる</li>
                        </ul>
                    </div>

                    <!-- 3.6 データベースオブジェクトの管理 -->
                    <h3 class="section-title">3.6 データベースオブジェクトの管理</h3>
                    <p>DBeaverを使用してテーブル、インデックス、制約などのデータベースオブジェクトを管理する方法を学習します。</p>

                    <!-- 実習 3-5 -->
                    <div class="exercise-container">
                        <h5>実習 3-5: データベースオブジェクトの操作</h5>
                        <p>DBeaverのGUI機能を使用してデータベースオブジェクトを操作します。</p>
                        
                        <h6>手順</h6>
                        <ol>
                            <li>テーブル構造の確認と編集</li>
                            <li>インデックスの作成</li>
                            <li>制約の追加</li>
                            <li>ERダイアグラムの生成</li>
                        </ol>

                        <h6>操作内容</h6>
                        <ol>
                            <li><strong>テーブル構造の確認</strong>
                                <ul>
                                    <li>employeesテーブルを右クリック → 「プロパティ」</li>
                                    <li>「列」タブで列の詳細を確認</li>
                                    <li>「制約」タブで主キー制約を確認</li>
                                </ul>
                            </li>
                            <li><strong>インデックスの作成</strong>
                                <ul>
                                    <li>employeesテーブル → 「インデックス」を右クリック</li>
                                    <li>「新しいインデックス」を選択</li>
                                    <li>departmentカラムにインデックスを作成</li>
                                </ul>
                            </li>
                            <li><strong>制約の追加</strong>
                                <ul>
                                    <li>salaryカラムにCHECK制約を追加（salary > 0）</li>
                                    <li>SQLエディタで実行: <code>ALTER TABLE employees ADD CONSTRAINT chk_salary CHECK (salary > 0)</code></li>
                                </ul>
                            </li>
                            <li><strong>ERダイアグラムの生成</strong>
                                <ul>
                                    <li>データベースを右クリック → 「ERダイアグラムを生成」</li>
                                    <li>employeesテーブルを選択してダイアグラムを表示</li>
                                </ul>
                            </li>
                        </ol>

                        <h6>期待される結果</h6>
                        <ul>
                            <li>テーブル構造の詳細が確認できる</li>
                            <li>department列にインデックスが作成される</li>
                            <li>給与のCHECK制約が追加される</li>
                            <li>視覚的なERダイアグラムが生成される</li>
                        </ul>
                    </div>

                    <!-- 3.7 クライアントツールの使い分け -->
                    <h3 class="section-title">3.7 クライアントツールの使い分け</h3>
                    <p>CLPとDBeaverの特徴を理解し、適切な場面で使い分けることが重要です。</p>

                    <h4>Command Line Processor (CLP)の適用場面</h4>
                    <ul>
                        <li><strong>自動化・スクリプト実行</strong>: バッチ処理やシェルスクリプトからの実行</li>
                        <li><strong>サーバー管理</strong>: リモートサーバーでのメンテナンス作業</li>
                        <li><strong>パフォーマンス分析</strong>: db2pd等の管理コマンドの実行</li>
                        <li><strong>軽量な操作</strong>: リソース使用量を抑えたい場合</li>
                    </ul>

                    <h4>DBeaverの適用場面</h4>
                    <ul>
                        <li><strong>開発作業</strong>: SQL開発、テスト、デバッグ</li>
                        <li><strong>データ分析</strong>: データの可視化、エクスポート・インポート</li>
                        <li><strong>学習・教育</strong>: データベース構造の理解、ERダイアグラム</li>
                        <li><strong>アドホックな操作</strong>: 一回限りのデータ操作や確認</li>
                    </ul>

                    <div class="highlight">
                        <h5>💡 ベストプラクティス</h5>
                        <ul>
                            <li>開発・学習にはDBeaverを使用し、本番環境の管理にはCLPを使用</li>
                            <li>複雑なSQLはDBeaverで開発・テストし、CLPで本番実行</li>
                            <li>データベース構造の理解にはDBeaverのER図機能を活用</li>
                            <li>パフォーマンス分析や監視にはCLPの管理コマンドを使用</li>
                        </ul>
                    </div>

                    <!-- 理解度確認 -->
                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li><strong>DB2のCommand Line Processorでデータベース一覧を表示するコマンドはどれですか？</strong>
                                <ol type="a">
                                    <li>db2 show databases</li>
                                    <li>db2 list database directory</li>
                                    <li>db2 list databases</li>
                                    <li>db2 display databases</li>
                                </ol>
                            </li>
                            <li><strong>DBeaverでDB2に接続する際のデフォルトポート番号はいくつですか？</strong>
                                <ol type="a">
                                    <li>1521</li>
                                    <li>3306</li>
                                    <li>5432</li>
                                    <li>50000</li>
                                </ol>
                            </li>
                            <li><strong>CLPとDBeaverの使い分けについて、正しくない説明はどれですか？</strong>
                                <ol type="a">
                                    <li>開発作業にはDBeaverが適している</li>
                                    <li>自動化・スクリプト実行にはCLPが適している</li>
                                    <li>ERダイアグラム作成にはCLPが適している</li>
                                    <li>データの可視化にはDBeaverが適している</li>
                                </ol>
                            </li>
                            <li><strong>DBeaverでSQLを実行するキーボードショートカットはどれですか？</strong>
                                <ol type="a">
                                    <li>F5</li>
                                    <li>Ctrl+Enter</li>
                                    <li>Ctrl+R</li>
                                    <li>Alt+Enter</li>
                                </ol>
                            </li>
                        </ol>
                        
                        <details style="margin-top: 1rem;">
                            <summary>解答を見る</summary>
                            <div style="margin-top: 0.5rem;">
                                <p><strong>解答:</strong></p>
                                <ol>
                                    <li>b) db2 list database directory</li>
                                    <li>d) 50000</li>
                                    <li>c) ERダイアグラム作成にはCLPが適している（DBeaverが適している）</li>
                                    <li>b) Ctrl+Enter</li>
                                </ol>
                            </div>
                        </details>
                    </div>

                    <!-- 章間ナビゲーション -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="db2-learning-material-2.html" class="btn btn-secondary">← 前の章</a>
                        <a href="db2-learning-material-4.html" class="btn btn-primary">次の章 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>