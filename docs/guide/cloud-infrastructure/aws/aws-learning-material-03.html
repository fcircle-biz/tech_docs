<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS学習教材 第3章 - ストレージサービス</title>

    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>

    <style>
        /* ベースレイアウト */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
            line-height: 1.8;
        }

        /* ナビゲーション - AWS Orange */
        .navbar {
            background-color: #FF9900;
        }

        /* サイドバー */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
            background-color: #f8f9fa;
            padding: 1rem;
        }

        /* タイトル */
        .chapter-title {
            color: #FF9900;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 3px solid #FF9900;
            padding-bottom: 0.5rem;
            font-weight: bold;
        }

        .section-title {
            color: #EC7211;
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        /* コンテンツボックス */
        .quiz-container {
            background-color: #FFF3E0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #FF9900;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #fff9e6;
            border-radius: 8px;
            padding: 1.2rem;
            margin: 1.5rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        /* コードハイライト */
        .code-block {
            background-color: #1e1e1e;
            color: white;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
        }

        /* ナビゲーション */
        .nav-link.active {
            background-color: #FF9900 !important;
            color: white !important;
            border-radius: 5px;
        }

        .nav-link {
            color: #333;
            transition: all 0.3s;
        }

        .nav-link:hover {
            background-color: #FFF3E0;
            border-radius: 5px;
        }

        /* 表スタイル */
        .table-custom {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .table-custom th {
            background-color: #FF9900;
            color: white;
            font-weight: 600;
        }

        /* Mermaid図のスタイル */
        .mermaid {
            text-align: center;
            margin: 2rem 0;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fab fa-aws"></i>
                <strong>AWS学習教材</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-01.html">
                                第1章: AWS入門とアカウント設定
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-02.html">
                                第2章: コンピューティングとネットワークの基礎
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="aws-learning-material-03.html">
                                第3章: ストレージサービス
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-04.html">
                                第4章: データベースサービス
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-05.html">
                                第5章: ネットワークとコンテンツ配信
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-06.html">
                                第6章: セキュリティとアクセス管理
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-07.html">
                                第7章: 監視と運用管理
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-08.html">
                                第8章: サーバーレスコンピューティング
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-09.html">
                                第9章: コンテナサービス
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-10.html">
                                第10章: ベストプラクティスとコスト最適化
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第3章: ストレージサービス - S3とEBSでデータを管理する</h1>
                </div>

                <div id="chapter3">
                    <!-- 学習目標 -->
                    <div class="highlight">
                        <h5><i class="fas fa-lightbulb"></i> この章で学ぶこと</h5>
                        <ul>
                            <li>S3バケットを作成し、オブジェクトの管理ができる</li>
                            <li>S3のストレージクラスとライフサイクル管理を理解する</li>
                            <li>S3のセキュリティとアクセス制御の仕組みを学ぶ</li>
                            <li>EBSボリュームの作成とEC2インスタンスへのアタッチができる</li>
                            <li>バックアップとスナップショットの作成方法を習得する</li>
                        </ul>
                    </div>

                    <!-- 3.1 Amazon S3の基礎 -->
                    <h3 class="section-title">3.1 Amazon S3 (Simple Storage Service)の基礎</h3>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">3.1.1 S3とは - オブジェクトストレージの概念</h4>
                    <p>
                        <strong>Amazon S3 (Simple Storage Service)</strong>は、インターネット経由でデータを保存・取得できる<strong>オブジェクトストレージ</strong>サービスです。画像、動画、ログファイル、バックアップデータなど、あらゆる種類のデータを無制限に保存できます。
                    </p>

                    <p><strong>S3の主な特徴:</strong></p>
                    <ul>
                        <li><strong>無制限の容量</strong>: データ量に制限なし(1オブジェクトは最大5TB)</li>
                        <li><strong>高い耐久性</strong>: 99.999999999%(イレブンナイン)の耐久性</li>
                        <li><strong>スケーラビリティ</strong>: 自動的にスケールし、容量の心配不要</li>
                        <li><strong>低コスト</strong>: 保存したデータ量に応じた従量課金</li>
                        <li><strong>HTTPSアクセス</strong>: インターネット経由でどこからでもアクセス可能</li>
                    </ul>

                    <div class="mermaid">
                        flowchart LR
                            User["ユーザー/アプリ"] -->|アップロード| S3["S3バケット"]
                            S3 -->|格納| Obj1["オブジェクト1<br/>(画像)"]
                            S3 -->|格納| Obj2["オブジェクト2<br/>(ビデオ)"]
                            S3 -->|格納| Obj3["オブジェクト3<br/>(ログ)"]

                            S3 -->|自動レプリケーション| AZ1["AZ-1"]
                            S3 -->|自動レプリケーション| AZ2["AZ-2"]
                            S3 -->|自動レプリケーション| AZ3["AZ-3"]
                    </div>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">3.1.2 バケットとオブジェクトの理解</h4>
                    <p>
                        S3では、データは<strong>バケット</strong>と呼ばれるコンテナに保存されます。
                    </p>

                    <table class="table table-bordered table-custom">
                        <thead>
                            <tr>
                                <th>用語</th>
                                <th>説明</th>
                                <th>例</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>バケット</strong></td>
                                <td>オブジェクトを格納する最上位のコンテナ。グローバルで一意の名前が必要</td>
                                <td>my-company-images</td>
                            </tr>
                            <tr>
                                <td><strong>オブジェクト</strong></td>
                                <td>S3に保存される個々のファイル。データとメタデータで構成</td>
                                <td>photos/2025/vacation.jpg</td>
                            </tr>
                            <tr>
                                <td><strong>キー</strong></td>
                                <td>バケット内のオブジェクトの一意識別子(ファイルパス)</td>
                                <td>docs/report-2025.pdf</td>
                            </tr>
                        </tbody>
                    </table>

                    <p><strong>バケット命名規則:</strong></p>
                    <ul>
                        <li>全世界で一意の名前である必要がある</li>
                        <li>3〜63文字の小文字、数字、ハイフン(-)のみ</li>
                        <li>IPアドレス形式は使用不可(例: 192.168.1.1)</li>
                        <li>バケット作成後に名前変更は不可(再作成が必要)</li>
                    </ul>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">3.1.3 S3のバージョニング機能</h4>
                    <p>
                        <strong>バージョニング</strong>を有効にすると、S3は同じキーのオブジェクトの複数バージョンを保持します。
                    </p>

                    <ul>
                        <li><strong>上書き保護</strong>: 誤って上書きしても、以前のバージョンを復元可能</li>
                        <li><strong>削除保護</strong>: 削除マーカーが付くだけで、実際のデータは削除されない</li>
                        <li><strong>バージョンID</strong>: 各バージョンに一意のIDが割り当てられる</li>
                        <li>バージョニングを有効にすると、無効化はできない(一時停止のみ可能)</li>
                    </ul>

                    <div class="mermaid">
                        flowchart TD
                            File["report.pdf"]
                            File -->|初回アップロード| V1["バージョン1<br/>ID: abc123"]
                            File -->|更新アップロード| V2["バージョン2<br/>ID: def456"]
                            File -->|最新アップロード| V3["バージョン3<br/>ID: ghi789<br/>(最新)"]

                            V3 -.復元可能.- V2
                            V2 -.復元可能.- V1
                    </div>

                    <!-- 3.2 S3のセキュリティとアクセス制御 -->
                    <h3 class="section-title">3.2 S3のセキュリティとアクセス制御</h3>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">3.2.1 バケットポリシーとIAMポリシー</h4>
                    <p>
                        S3のアクセス制御には、主に2つの方法があります。
                    </p>

                    <table class="table table-bordered table-custom">
                        <thead>
                            <tr>
                                <th>方法</th>
                                <th>対象</th>
                                <th>用途</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>IAMポリシー</strong></td>
                                <td>IAMユーザー/ロール</td>
                                <td>特定のユーザーに権限を付与(Who can access?)</td>
                            </tr>
                            <tr>
                                <td><strong>バケットポリシー</strong></td>
                                <td>S3バケット</td>
                                <td>バケット全体のアクセス制御、クロスアカウントアクセス(What can be accessed?)</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">3.2.2 パブリックアクセスのブロック設定</h4>
                    <p>
                        デフォルトでは、S3バケットはプライベートです。<strong>パブリックアクセスのブロック</strong>設定により、意図しないパブリック公開を防ぎます。
                    </p>

                    <div class="warning">
                        <h5>セキュリティのベストプラクティス</h5>
                        <ul>
                            <li>機密データを含むバケットは、パブリックアクセスを<strong>完全にブロック</strong>する</li>
                            <li>静的ウェブサイトホスティングなど、公開が必要な場合のみパブリックアクセスを許可</li>
                            <li>パブリックバケットの設定は定期的に監査する</li>
                        </ul>
                    </div>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">3.2.3 署名付きURL (Pre-signed URL)</h4>
                    <p>
                        <strong>署名付きURL</strong>を使用すると、期限付きでプライベートオブジェクトへのアクセスを許可できます。
                    </p>

                    <ul>
                        <li>一時的なダウンロードリンクを生成</li>
                        <li>有効期限を設定可能(数分〜数日)</li>
                        <li>IAM認証情報を共有せずにアクセスを許可</li>
                        <li>ファイル配布、プライベート動画視聴などに使用</li>
                    </ul>

                    <pre class="code-block"><code class="language-bash"># AWS CLIで署名付きURLを生成する例
# 3600秒(1時間)有効なダウンロードリンク
aws s3 presign s3://my-bucket/private-file.pdf --expires-in 3600

# 生成されるURL例:
# https://my-bucket.s3.amazonaws.com/private-file.pdf?
# AWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&
# Expires=1609459200&
# Signature=xxxxx...
</code></pre>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">3.2.4 S3バケットの暗号化</h4>
                    <p>
                        S3では、保存時の暗号化と転送時の暗号化の両方をサポートしています。
                    </p>

                    <p><strong>保存時の暗号化(Encryption at Rest):</strong></p>
                    <ul>
                        <li><strong>SSE-S3</strong>: AWS管理の鍵で暗号化(デフォルト、追加料金なし)</li>
                        <li><strong>SSE-KMS</strong>: AWS KMS管理の鍵で暗号化(鍵のローテーション、監査ログ)</li>
                        <li><strong>SSE-C</strong>: ユーザー提供の鍵で暗号化(AWS は鍵を保存しない)</li>
                        <li><strong>クライアント側暗号化</strong>: アップロード前にクライアント側で暗号化</li>
                    </ul>

                    <p><strong>転送時の暗号化(Encryption in Transit):</strong></p>
                    <ul>
                        <li>HTTPS/TLSプロトコルを使用</li>
                        <li>バケットポリシーでHTTPS接続を強制可能</li>
                    </ul>

                    <!-- 3.3 ストレージクラスとコスト最適化 -->
                    <h3 class="section-title">3.3 S3のストレージクラスとコスト最適化</h3>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">3.3.1 ストレージクラスの種類</h4>
                    <p>
                        S3には、アクセス頻度とコストに応じた複数の<strong>ストレージクラス</strong>があります。
                    </p>

                    <table class="table table-bordered table-custom">
                        <thead>
                            <tr>
                                <th>ストレージクラス</th>
                                <th>用途</th>
                                <th>特徴</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>S3 Standard</strong></td>
                                <td>頻繁にアクセスするデータ</td>
                                <td>最も高速、最もコストが高い</td>
                            </tr>
                            <tr>
                                <td><strong>S3 Intelligent-Tiering</strong></td>
                                <td>アクセス頻度が不明なデータ</td>
                                <td>アクセスパターンに応じて自動移動</td>
                            </tr>
                            <tr>
                                <td><strong>S3 Standard-IA</strong></td>
                                <td>低頻度アクセス(月1回程度)</td>
                                <td>保存コスト安、取得料金あり</td>
                            </tr>
                            <tr>
                                <td><strong>S3 One Zone-IA</strong></td>
                                <td>低頻度、再作成可能なデータ</td>
                                <td>1つのAZのみ、最も安価</td>
                            </tr>
                            <tr>
                                <td><strong>S3 Glacier Instant Retrieval</strong></td>
                                <td>四半期に1回程度のアクセス</td>
                                <td>アーカイブ、即座に取得可能</td>
                            </tr>
                            <tr>
                                <td><strong>S3 Glacier Flexible Retrieval</strong></td>
                                <td>年1〜2回のアクセス</td>
                                <td>取得に数分〜数時間、非常に安価</td>
                            </tr>
                            <tr>
                                <td><strong>S3 Glacier Deep Archive</strong></td>
                                <td>長期保管(7〜10年以上)</td>
                                <td>取得に12時間、最安</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="mermaid">
                        flowchart TD
                            Upload["データアップロード"] --> Standard["S3 Standard<br/>(頻繁アクセス)"]
                            Standard -->|30日経過| IA["S3 Standard-IA<br/>(低頻度アクセス)"]
                            IA -->|90日経過| Glacier["S3 Glacier<br/>(アーカイブ)"]
                            Glacier -->|365日経過| DeepArchive["S3 Glacier Deep Archive<br/>(長期保管)"]

                            Standard -.高コスト.-x
                            DeepArchive -.低コスト.-x
                    </div>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">3.3.2 ライフサイクルポリシーによる自動アーカイブ</h4>
                    <p>
                        <strong>ライフサイクルポリシー</strong>を設定すると、オブジェクトを自動的に別のストレージクラスに移行したり、削除したりできます。
                    </p>

                    <p><strong>ライフサイクルルールの例:</strong></p>
                    <ul>
                        <li>作成から30日後にS3 Standard-IAに移行</li>
                        <li>作成から90日後にGlacierに移行</li>
                        <li>作成から365日後に削除</li>
                        <li>不完全なマルチパートアップロードを7日後に削除</li>
                    </ul>

                    <div class="highlight">
                        <h5>コスト削減のヒント</h5>
                        <p>
                            ログファイル、バックアップデータなど、時間とともにアクセス頻度が下がるデータには、ライフサイクルポリシーを設定して自動的に安価なストレージクラスに移行させましょう。これにより、手間なくコストを削減できます。
                        </p>
                    </div>

                    <!-- 3.4 Amazon EBS -->
                    <h3 class="section-title">3.4 Amazon EBS (Elastic Block Store)</h3>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">3.4.1 EBSとは - ブロックストレージの概念</h4>
                    <p>
                        <strong>Amazon EBS (Elastic Block Store)</strong>は、EC2インスタンスにアタッチして使用する<strong>ブロックストレージ</strong>です。外付けハードディスクやSSDのように、EC2インスタンスの仮想ディスクとして機能します。
                    </p>

                    <p><strong>S3とEBSの違い:</strong></p>
                    <table class="table table-bordered table-custom">
                        <thead>
                            <tr>
                                <th>項目</th>
                                <th>S3 (オブジェクトストレージ)</th>
                                <th>EBS (ブロックストレージ)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>用途</strong></td>
                                <td>ファイル保存、バックアップ、静的コンテンツ</td>
                                <td>OSインストール、データベース、アプリケーションデータ</td>
                            </tr>
                            <tr>
                                <td><strong>アクセス方法</strong></td>
                                <td>HTTP/HTTPS API</td>
                                <td>ファイルシステムとしてマウント</td>
                            </tr>
                            <tr>
                                <td><strong>容量</strong></td>
                                <td>無制限</td>
                                <td>1GB〜64TB(ボリュームごと)</td>
                            </tr>
                            <tr>
                                <td><strong>アタッチ</strong></td>
                                <td>不要(インターネット経由)</td>
                                <td>EC2インスタンスに1対1でアタッチ</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="mermaid">
                        flowchart LR
                            EC2["EC2インスタンス"]
                            EBS1["EBSボリューム1<br/>(ルート)"]
                            EBS2["EBSボリューム2<br/>(データ)"]

                            EC2 -->|アタッチ| EBS1
                            EC2 -->|アタッチ| EBS2

                            EBS1 -.スナップショット.- S3["S3に保存"]
                            EBS2 -.スナップショット.- S3
                    </div>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">3.4.2 EBSボリュームタイプの選択</h4>
                    <p>
                        EBSには、性能と価格が異なる複数のボリュームタイプがあります。
                    </p>

                    <table class="table table-bordered table-custom">
                        <thead>
                            <tr>
                                <th>ボリュームタイプ</th>
                                <th>特徴</th>
                                <th>用途例</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>gp3 / gp2 (SSD)</strong></td>
                                <td>汎用SSD、バランスの良い性能</td>
                                <td>ほとんどのワークロード、開発/テスト環境</td>
                            </tr>
                            <tr>
                                <td><strong>io2 / io1 (SSD)</strong></td>
                                <td>プロビジョンドIOPS、最高性能</td>
                                <td>高性能データベース、トランザクション処理</td>
                            </tr>
                            <tr>
                                <td><strong>st1 (HDD)</strong></td>
                                <td>スループット最適化HDD</td>
                                <td>ビッグデータ、ログ処理</td>
                            </tr>
                            <tr>
                                <td><strong>sc1 (HDD)</strong></td>
                                <td>コールドHDD、最低コスト</td>
                                <td>低頻度アクセスデータ</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="highlight">
                        <h5>初心者へのアドバイス</h5>
                        <p>
                            ほとんどの用途では<strong>gp3</strong>(汎用SSD)で十分です。gp3はgp2よりも安価で高性能なため、新規作成時はgp3を選択しましょう。
                        </p>
                    </div>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">3.4.3 EBSスナップショットによるバックアップ</h4>
                    <p>
                        <strong>EBSスナップショット</strong>は、EBSボリュームの特定時点のバックアップです。S3に自動的に保存され、高い耐久性を持ちます。
                    </p>

                    <ul>
                        <li><strong>増分バックアップ</strong>: 初回は全データ、2回目以降は変更分のみ保存</li>
                        <li><strong>リージョン間コピー</strong>: 災害対策のため別リージョンにコピー可能</li>
                        <li><strong>ボリューム復元</strong>: スナップショットから新しいEBSボリュームを作成</li>
                        <li><strong>AMI作成</strong>: スナップショットからAMI(インスタンステンプレート)を作成可能</li>
                    </ul>

                    <div class="mermaid">
                        flowchart TD
                            EBS["EBSボリューム<br/>(本番データ)"]
                            EBS -->|スナップショット作成| Snap1["スナップショット1<br/>(全体)"]
                            EBS -->|変更後| Snap2["スナップショット2<br/>(差分のみ)"]

                            Snap1 --> S3["S3に保存<br/>(自動)"]
                            Snap2 --> S3

                            Snap2 -.復元.- NewEBS["新しいEBSボリューム"]
                    </div>

                    <!-- 3.5 その他のストレージサービス -->
                    <h3 class="section-title">3.5 その他のストレージサービス</h3>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">3.5.1 Amazon EFS (Elastic File System)</h4>
                    <p>
                        <strong>Amazon EFS</strong>は、複数のEC2インスタンスから同時にアクセスできる<strong>共有ファイルストレージ</strong>です。
                    </p>

                    <ul>
                        <li>NFSプロトコルを使用</li>
                        <li>複数のAZ、複数のEC2インスタンスから同時マウント可能</li>
                        <li>容量が自動的に拡張・縮小(事前プロビジョニング不要)</li>
                        <li>LinuxベースのワークロードやWebサーバーのコンテンツ共有に最適</li>
                    </ul>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">3.5.2 AWS Storage Gateway</h4>
                    <p>
                        <strong>AWS Storage Gateway</strong>は、オンプレミス環境とAWSクラウドストレージを統合するハイブリッドクラウドストレージサービスです。
                    </p>

                    <ul>
                        <li>オンプレミスアプリケーションからS3、Glacier、EBSを使用</li>
                        <li>ファイルゲートウェイ、ボリュームゲートウェイ、テープゲートウェイの3種類</li>
                        <li>バックアップ、アーカイブ、災害対策に利用</li>
                    </ul>

                    <!-- 演習課題 -->
                    <div class="exercise-container">
                        <h5>演習 3-1: S3バケットの作成と静的ウェブサイトホスティング</h5>
                        <p><strong>目的:</strong> S3バケットを作成し、簡単なWebサイトを公開します。</p>

                        <h6>手順</h6>
                        <ol>
                            <li>S3コンソールにアクセスし、新しいバケットを作成
                                <ul>
                                    <li>バケット名: <strong>my-website-[あなたの名前]-[ランダム数字]</strong></li>
                                    <li>リージョン: 東京</li>
                                    <li>パブリックアクセスのブロックを<strong>すべて解除</strong></li>
                                </ul>
                            </li>
                            <li>index.htmlファイルを作成してアップロード:
                                <pre class="code-block"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;My AWS Website&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Hello from Amazon S3!&lt;/h1&gt;
    &lt;p&gt;これは静的ウェブサイトホスティングのテストです。&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                            </li>
                            <li>バケットのプロパティで「静的ウェブサイトホスティング」を有効化</li>
                            <li>バケットポリシーを追加して、オブジェクトを公開:
                                <pre class="code-block"><code class="language-json">{
  "Version": "2012-10-17",
  "Statement": [{
    "Sid": "PublicReadGetObject",
    "Effect": "Allow",
    "Principal": "*",
    "Action": "s3:GetObject",
    "Resource": "arn:aws:s3:::your-bucket-name/*"
  }]
}</code></pre>
                            </li>
                            <li>ウェブサイトエンドポイントURLにアクセスし、ページが表示されることを確認</li>
                        </ol>

                        <div class="warning">
                            <strong>演習終了後:</strong> 学習後はバケットを削除してください。パブリックバケットは意図しないアクセスやコストが発生する可能性があります。
                        </div>
                    </div>

                    <div class="exercise-container">
                        <h5>演習 3-2: EBSボリュームのアタッチとスナップショット</h5>
                        <p><strong>目的:</strong> EBSボリュームを作成・アタッチし、スナップショットによるバックアップと復元を体験します。</p>

                        <h6>手順</h6>
                        <ol>
                            <li>EC2インスタンスを起動(t2.micro、Amazon Linux 2)</li>
                            <li>新しいEBSボリュームを作成:
                                <ul>
                                    <li>サイズ: 8GB</li>
                                    <li>タイプ: gp3</li>
                                    <li>AZ: インスタンスと同じAZ</li>
                                </ul>
                            </li>
                            <li>EBSボリュームをEC2インスタンスにアタッチ(デバイス名: /dev/sdf)</li>
                            <li>SSH接続してボリュームをフォーマット・マウント:
                                <pre class="code-block"><code class="language-bash"># ボリュームの確認
lsblk

# ファイルシステムの作成
sudo mkfs -t xfs /dev/xvdf

# マウントポイントの作成
sudo mkdir /data

# マウント
sudo mount /dev/xvdf /data

# テストファイルの作成
echo "This is test data" | sudo tee /data/test.txt
</code></pre>
                            </li>
                            <li>EBSボリュームのスナップショットを作成</li>
                            <li>スナップショットから新しいEBSボリュームを作成</li>
                            <li>新しいボリュームをマウントし、データが復元されていることを確認</li>
                        </ol>

                        <div class="warning">
                            <strong>演習終了後:</strong> EC2インスタンス、EBSボリューム、スナップショットを削除してください。
                        </div>
                    </div>

                    <!-- 理解度確認クイズ -->
                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li><strong>問題1:</strong> S3のバケット名はグローバルで一意である必要がある理由を説明してください。</li>
                            <li><strong>問題2:</strong> S3のバージョニングを有効にすることの利点を3つ挙げてください。</li>
                            <li><strong>問題3:</strong> 署名付きURL (Pre-signed URL)を使用する利点とユースケースを説明してください。</li>
                            <li><strong>問題4:</strong> S3のストレージクラスのうち、以下のデータに最適なものを選び、理由を説明してください:
                                <ul>
                                    <li>(a) Webサイトの画像ファイル(頻繁にアクセス)</li>
                                    <li>(b) 月次レポート(月1回アクセス)</li>
                                    <li>(c) 法律で10年保管が義務付けられたデータ(ほとんどアクセスしない)</li>
                                </ul>
                            </li>
                            <li><strong>問題5:</strong> S3とEBSの違いを、用途、アクセス方法、容量の観点から説明してください。</li>
                            <li><strong>問題6:</strong> EBSボリュームタイプのうち、gp3とio2の違いと、それぞれどのような用途に適しているか説明してください。</li>
                            <li><strong>問題7:</strong> EBSスナップショットの「増分バックアップ」とはどういう意味ですか?コスト面でのメリットも説明してください。</li>
                        </ol>
                    </div>

                    <!-- まとめ -->
                    <h3 class="section-title">まとめ</h3>
                    <p>
                        この章では、AWSの主要なストレージサービスであるS3とEBSを学習しました。S3はオブジェクトストレージとして、無制限の容量で様々なデータを保存でき、バージョニング、暗号化、ライフサイクル管理などの機能を提供します。複数のストレージクラスを適切に使い分けることで、コストを最適化できます。
                    </p>
                    <p>
                        EBSはブロックストレージとして、EC2インスタンスの仮想ディスクとして機能し、OSやデータベースなどのデータを保存します。スナップショット機能により、簡単にバックアップと復元が可能です。また、EFS、Storage Gatewayなどの補完的なストレージサービスも存在します。
                    </p>
                    <p>
                        <strong>次の章では、</strong>AWSのデータベースサービスであるRDS(リレーショナルデータベース)とDynamoDB(NoSQLデータベース)について学習します。マネージドデータベースの利点、高可用性構成、バックアップ戦略を理解します。
                    </p>

                    <!-- 章間ナビゲーション -->
                    <div class="d-flex justify-content-between mt-4 mb-5">
                        <a href="aws-learning-material-02.html" class="btn btn-secondary">← 前の章: 第2章 コンピューティングとネットワークの基礎</a>
                        <a href="aws-learning-material-04.html" class="btn btn-primary">次の章: 第4章 データベースサービス →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- フッター -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>

    <!-- Mermaid.js 初期化 -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>
