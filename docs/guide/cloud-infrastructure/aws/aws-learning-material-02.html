<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS学習教材 第2章 - コンピューティングとネットワークの基礎</title>

    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>

    <style>
        /* ベースレイアウト */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
            line-height: 1.8;
        }

        /* ナビゲーション - AWS Orange */
        .navbar {
            background-color: #FF9900;
        }

        /* サイドバー */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
            background-color: #f8f9fa;
            padding: 1rem;
        }

        /* タイトル */
        .chapter-title {
            color: #FF9900;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 3px solid #FF9900;
            padding-bottom: 0.5rem;
            font-weight: bold;
        }

        .section-title {
            color: #EC7211;
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        /* コンテンツボックス */
        .quiz-container {
            background-color: #FFF3E0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #FF9900;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #fff9e6;
            border-radius: 8px;
            padding: 1.2rem;
            margin: 1.5rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        /* コードハイライト */
        .code-block {
            background-color: #1e1e1e;
            color: white;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
        }

        /* ナビゲーション */
        .nav-link.active {
            background-color: #FF9900 !important;
            color: white !important;
            border-radius: 5px;
        }

        .nav-link {
            color: #333;
            transition: all 0.3s;
        }

        .nav-link:hover {
            background-color: #FFF3E0;
            border-radius: 5px;
        }

        /* 表スタイル */
        .table-custom {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .table-custom th {
            background-color: #FF9900;
            color: white;
            font-weight: 600;
        }

        /* Mermaid図のスタイル */
        .mermaid {
            text-align: center;
            margin: 2rem 0;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fab fa-aws"></i>
                <strong>AWS学習教材</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-01.html">
                                第1章: AWS入門とアカウント設定
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="aws-learning-material-02.html">
                                第2章: コンピューティングとネットワークの基礎
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-03.html">
                                第3章: ストレージサービス
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-04.html">
                                第4章: データベースサービス
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-05.html">
                                第5章: ネットワークとコンテンツ配信
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-06.html">
                                第6章: セキュリティとアクセス管理
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-07.html">
                                第7章: 監視と運用管理
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-08.html">
                                第8章: サーバーレスコンピューティング
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-09.html">
                                第9章: コンテナサービス
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-learning-material-10.html">
                                第10章: ベストプラクティスとコスト最適化
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第2章: コンピューティングとネットワークの基礎 - EC2とVPCで始めるAWS</h1>
                </div>

                <div id="chapter2">
                    <!-- 学習目標 -->
                    <div class="highlight">
                        <h5><i class="fas fa-lightbulb"></i> この章で学ぶこと</h5>
                        <ul>
                            <li>Amazon EC2の基本概念と仮想サーバーの起動方法を理解する</li>
                            <li>インスタンスタイプとAMI(Amazon Machine Image)の選び方を学ぶ</li>
                            <li>セキュリティグループによるファイアウォール設定を習得する</li>
                            <li>VPC(Virtual Private Cloud)でプライベートネットワークを設計できる</li>
                            <li>サブネット、ルートテーブル、インターネットゲートウェイの役割を理解する</li>
                        </ul>
                    </div>

                    <!-- 2.1 Amazon EC2の基礎 -->
                    <h3 class="section-title">2.1 Amazon EC2 (Elastic Compute Cloud)の基礎</h3>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.1.1 EC2とは - 仮想サーバーの概念</h4>
                    <p>
                        <strong>Amazon EC2 (Elastic Compute Cloud)</strong>は、AWSクラウド上で仮想サーバーを提供するサービスです。物理サーバーを購入・設置することなく、数分で仮想サーバー(<strong>インスタンス</strong>と呼びます)を起動できます。
                    </p>

                    <p><strong>EC2の主な特徴:</strong></p>
                    <ul>
                        <li><strong>柔軟性</strong>: CPU、メモリ、ストレージ、ネットワーク性能を自由に選択</li>
                        <li><strong>スケーラビリティ</strong>: 数分でインスタンスを追加・削除可能</li>
                        <li><strong>従量課金</strong>: 使用した時間分のみ課金(1秒単位の課金も可能)</li>
                        <li><strong>完全な制御</strong>: root/管理者権限でOSやソフトウェアを自由に設定</li>
                    </ul>

                    <div class="mermaid">
                        flowchart LR
                            User["ユーザー"] -->|SSH/RDP接続| EC2["EC2インスタンス<br/>(仮想サーバー)"]
                            EC2 -->|データ保存| EBS["EBSボリューム<br/>(仮想ディスク)"]
                            EC2 -->|インターネット接続| IGW["インターネット<br/>ゲートウェイ"]
                            EC2 -->|セキュリティ制御| SG["セキュリティグループ<br/>(ファイアウォール)"]
                    </div>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.1.2 インスタンスタイプの選び方</h4>
                    <p>
                        EC2インスタンスは、用途に応じて様々な<strong>インスタンスタイプ</strong>が用意されています。インスタンスタイプは、「ファミリー + 世代 + サイズ」の形式で表されます。
                    </p>

                    <p><strong>例: t3.micro</strong></p>
                    <ul>
                        <li><strong>t</strong>: 汎用バースト可能インスタンスファミリー</li>
                        <li><strong>3</strong>: 第3世代</li>
                        <li><strong>micro</strong>: サイズ(CPU、メモリの量)</li>
                    </ul>

                    <table class="table table-bordered table-custom">
                        <thead>
                            <tr>
                                <th>ファミリー</th>
                                <th>用途</th>
                                <th>主な例</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>汎用 (T, M)</strong></td>
                                <td>バランスの取れた性能。Webサーバー、小〜中規模DB</td>
                                <td>t3.micro, t3.small, m5.large</td>
                            </tr>
                            <tr>
                                <td><strong>コンピューティング最適化 (C)</strong></td>
                                <td>CPU性能重視。バッチ処理、科学計算</td>
                                <td>c5.large, c6i.xlarge</td>
                            </tr>
                            <tr>
                                <td><strong>メモリ最適化 (R, X)</strong></td>
                                <td>大容量メモリ。インメモリDB、大規模キャッシュ</td>
                                <td>r5.large, x1e.xlarge</td>
                            </tr>
                            <tr>
                                <td><strong>ストレージ最適化 (I, D)</strong></td>
                                <td>高速ローカルストレージ。NoSQL DB、データウェアハウス</td>
                                <td>i3.large, d2.xlarge</td>
                            </tr>
                            <tr>
                                <td><strong>GPU (P, G)</strong></td>
                                <td>グラフィックス・機械学習。AI訓練、動画処理</td>
                                <td>p3.2xlarge, g4dn.xlarge</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="highlight">
                        <h5>初心者へのアドバイス</h5>
                        <p>
                            学習・開発用途では、<strong>t2.micro</strong>または<strong>t3.micro</strong>から始めましょう。これらは無料利用枠に含まれており、月750時間(約31日)まで無料で使用できます。
                        </p>
                    </div>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.1.3 AMI (Amazon Machine Image)の理解</h4>
                    <p>
                        <strong>AMI (Amazon Machine Image)</strong>は、EC2インスタンスを起動するためのテンプレートです。OS、アプリケーション、設定がパッケージ化されています。
                    </p>

                    <p><strong>AMIの種類:</strong></p>
                    <ul>
                        <li><strong>AWS提供のAMI</strong>: Amazon Linux、Ubuntu、Windows Server等</li>
                        <li><strong>Marketplaceのセット済みAMI</strong>: WordPress、LAMP環境等が設定済み</li>
                        <li><strong>カスタムAMI</strong>: 自分で設定したインスタンスから作成</li>
                        <li><strong>コミュニティAMI</strong>: 他のユーザーが公開したAMI</li>
                    </ul>

                    <div class="mermaid">
                        flowchart TD
                            AMI["AMI<br/>(OSとアプリの<br/>テンプレート)"] -->|インスタンス起動| EC21["EC2インスタンス1"]
                            AMI -->|インスタンス起動| EC22["EC2インスタンス2"]
                            AMI -->|インスタンス起動| EC23["EC2インスタンス3"]

                            EC21 -.カスタマイズ.- NewAMI["新しいカスタムAMI"]
                            NewAMI -->|別インスタンス起動| EC24["EC2インスタンス4"]
                    </div>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.1.4 EC2インスタンスの起動手順</h4>
                    <p>
                        EC2インスタンスをマネジメントコンソールから起動する手順の概要です。
                    </p>

                    <ol>
                        <li><strong>AMIの選択</strong>: Amazon Linux 2やUbuntu等のOSを選択</li>
                        <li><strong>インスタンスタイプの選択</strong>: t2.micro/t3.micro等を選択</li>
                        <li><strong>ネットワーク設定</strong>: VPCとサブネットを選択</li>
                        <li><strong>ストレージの設定</strong>: ルートボリュームのサイズとタイプを指定</li>
                        <li><strong>タグの追加</strong>: Name等のタグで識別情報を追加</li>
                        <li><strong>セキュリティグループの設定</strong>: ファイアウォールルールを定義</li>
                        <li><strong>キーペアの選択</strong>: SSH接続用の鍵ペアを作成/選択</li>
                        <li><strong>起動</strong>: インスタンスが数分で起動</li>
                    </ol>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.1.5 キーペアの作成と管理</h4>
                    <p>
                        <strong>キーペア</strong>は、EC2インスタンスに安全に接続するためのSSH鍵です。パスワード認証よりも安全な方式です。
                    </p>

                    <ul>
                        <li><strong>公開鍵</strong>: EC2インスタンスに保存される</li>
                        <li><strong>秘密鍵</strong>: ユーザーがダウンロードし、ローカルで保管(.pemファイル)</li>
                        <li>秘密鍵は<strong>再ダウンロードできない</strong>ため、安全に保管すること</li>
                        <li>秘密鍵のパーミッションは<code>chmod 400 key.pem</code>で制限する</li>
                    </ul>

                    <pre class="code-block"><code class="language-bash"># Linux/macOS からのSSH接続例
# 秘密鍵のパーミッション設定
chmod 400 my-key-pair.pem

# EC2インスタンスへの接続
ssh -i my-key-pair.pem ec2-user@ec2-13-112-123-45.ap-northeast-1.compute.amazonaws.com

# Amazon Linux 2の場合: ec2-user
# Ubuntuの場合: ubuntu
# Windowsの場合: administrator
</code></pre>

                    <!-- 2.2 セキュリティグループの設定 -->
                    <h3 class="section-title">2.2 セキュリティグループの設定</h3>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.2.1 セキュリティグループとは</h4>
                    <p>
                        <strong>セキュリティグループ</strong>は、EC2インスタンスに対する<strong>仮想ファイアウォール</strong>です。インスタンスへの通信(インバウンド)と、インスタンスからの通信(アウトバウンド)を制御します。
                    </p>

                    <p><strong>重要な特性:</strong></p>
                    <ul>
                        <li><strong>ステートフル</strong>: 許可した通信の返信は自動的に許可される</li>
                        <li><strong>デフォルトで全拒否</strong>: 明示的に許可したトラフィックのみ通過</li>
                        <li><strong>許可ルールのみ</strong>: 拒否ルールは作成できない(許可しなければ拒否)</li>
                        <li><strong>複数アタッチ可能</strong>: 1つのインスタンスに複数のセキュリティグループを適用可能</li>
                    </ul>

                    <div class="mermaid">
                        flowchart LR
                            Internet["インターネット"] -->|HTTP:80| SG["セキュリティグループ"]
                            Internet -->|HTTPS:443| SG
                            Internet -.SSH:22<br/>特定IPのみ許可.- SG
                            SG -->|許可された通信のみ| EC2["EC2インスタンス"]

                            EC2 -->|アウトバウンド<br/>全て許可| Outside["外部サービス"]
                    </div>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.2.2 インバウンドルールとアウトバウンドルール</h4>
                    <p>
                        セキュリティグループには、2種類のルールがあります。
                    </p>

                    <table class="table table-bordered table-custom">
                        <thead>
                            <tr>
                                <th>ルールタイプ</th>
                                <th>説明</th>
                                <th>デフォルト</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>インバウンド</strong></td>
                                <td>インスタンスへの着信トラフィックを制御</td>
                                <td>全て拒否(ルールなし)</td>
                            </tr>
                            <tr>
                                <td><strong>アウトバウンド</strong></td>
                                <td>インスタンスからの発信トラフィックを制御</td>
                                <td>全て許可</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.2.3 よく使うポートとプロトコル</h4>
                    <p>
                        主要なサービスで使用されるポート番号を理解しましょう。
                    </p>

                    <table class="table table-bordered table-custom">
                        <thead>
                            <tr>
                                <th>サービス</th>
                                <th>プロトコル</th>
                                <th>ポート番号</th>
                                <th>用途</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>SSH</strong></td>
                                <td>TCP</td>
                                <td>22</td>
                                <td>Linux/Unixサーバーへのリモート接続</td>
                            </tr>
                            <tr>
                                <td><strong>RDP</strong></td>
                                <td>TCP</td>
                                <td>3389</td>
                                <td>Windowsサーバーへのリモート接続</td>
                            </tr>
                            <tr>
                                <td><strong>HTTP</strong></td>
                                <td>TCP</td>
                                <td>80</td>
                                <td>非暗号化Webサイトへのアクセス</td>
                            </tr>
                            <tr>
                                <td><strong>HTTPS</strong></td>
                                <td>TCP</td>
                                <td>443</td>
                                <td>暗号化Webサイトへのアクセス</td>
                            </tr>
                            <tr>
                                <td><strong>MySQL/Aurora</strong></td>
                                <td>TCP</td>
                                <td>3306</td>
                                <td>MySQLデータベースへの接続</td>
                            </tr>
                            <tr>
                                <td><strong>PostgreSQL</strong></td>
                                <td>TCP</td>
                                <td>5432</td>
                                <td>PostgreSQLデータベースへの接続</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.2.4 最小権限の原則とソースIPの制限</h4>
                    <p>
                        セキュリティグループ設定のベストプラクティスは、<strong>必要最小限のアクセスのみを許可</strong>することです。
                    </p>

                    <div class="warning">
                        <h5>セキュリティの注意点</h5>
                        <ul>
                            <li><strong>0.0.0.0/0(すべてのIP)からのSSH/RDP接続は避ける</strong>: 特定のIPアドレスのみを許可</li>
                            <li><strong>必要なポートのみ開放</strong>: 使用しないポートは開かない</li>
                            <li><strong>定期的な見直し</strong>: 不要になったルールは削除する</li>
                        </ul>
                    </div>

                    <pre class="code-block"><code class="language-bash"># 悪い例: 全世界からSSH接続可能(危険)
# タイプ: SSH, プロトコル: TCP, ポート: 22, ソース: 0.0.0.0/0

# 良い例: 自分のIPアドレスのみからSSH接続可能
# タイプ: SSH, プロトコル: TCP, ポート: 22, ソース: 203.0.113.25/32

# Webサーバーの場合: HTTP/HTTPSは全世界から接続可能でOK
# タイプ: HTTP, プロトコル: TCP, ポート: 80, ソース: 0.0.0.0/0
# タイプ: HTTPS, プロトコル: TCP, ポート: 443, ソース: 0.0.0.0/0
</code></pre>

                    <!-- 2.3 Amazon VPC -->
                    <h3 class="section-title">2.3 Amazon VPC (Virtual Private Cloud)</h3>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.3.1 VPCとは - プライベート仮想ネットワーク</h4>
                    <p>
                        <strong>Amazon VPC (Virtual Private Cloud)</strong>は、AWS クラウド内に論理的に分離されたプライベートネットワークを構築するサービスです。VPC内でEC2インスタンスやRDSデータベースなどのリソースを起動します。
                    </p>

                    <p><strong>VPCの主な特徴:</strong></p>
                    <ul>
                        <li>IPアドレス範囲を自由に定義可能</li>
                        <li>サブネットを作成し、リソースを論理的に分割</li>
                        <li>ルートテーブルでトラフィックを制御</li>
                        <li>インターネットゲートウェイで外部との接続を管理</li>
                        <li>完全に分離されたネットワーク環境を実現</li>
                    </ul>

                    <div class="mermaid">
                        flowchart TD
                            IGW["インターネット<br/>ゲートウェイ"]
                            IGW -->|インターネット接続| VPC["VPC<br/>10.0.0.0/16"]

                            VPC --> Public1["パブリックサブネット<br/>10.0.1.0/24<br/>(AZ-1a)"]
                            VPC --> Public2["パブリックサブネット<br/>10.0.2.0/24<br/>(AZ-1c)"]
                            VPC --> Private1["プライベートサブネット<br/>10.0.11.0/24<br/>(AZ-1a)"]
                            VPC --> Private2["プライベートサブネット<br/>10.0.12.0/24<br/>(AZ-1c)"]

                            Public1 --> Web1["Webサーバー<br/>(EC2)"]
                            Private1 --> DB1["データベース<br/>(RDS)"]
                    </div>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.3.2 CIDRブロックとIPアドレス範囲の設計</h4>
                    <p>
                        VPCを作成する際、<strong>CIDRブロック</strong>でIPアドレス範囲を指定します。
                    </p>

                    <p><strong>CIDR表記の理解:</strong></p>
                    <ul>
                        <li><strong>10.0.0.0/16</strong>: 10.0.0.0 〜 10.0.255.255 (65,536個のIPアドレス)</li>
                        <li><strong>10.0.1.0/24</strong>: 10.0.1.0 〜 10.0.1.255 (256個のIPアドレス)</li>
                        <li><strong>/16</strong>: 最初の16ビットが固定、残り16ビットが可変</li>
                        <li><strong>/24</strong>: 最初の24ビットが固定、残り8ビットが可変</li>
                    </ul>

                    <p><strong>プライベートIPアドレス範囲(RFC 1918):</strong></p>
                    <ul>
                        <li><strong>10.0.0.0/8</strong>: 10.0.0.0 〜 10.255.255.255 (大規模ネットワーク)</li>
                        <li><strong>172.16.0.0/12</strong>: 172.16.0.0 〜 172.31.255.255 (中規模ネットワーク)</li>
                        <li><strong>192.168.0.0/16</strong>: 192.168.0.0 〜 192.168.255.255 (小規模ネットワーク、家庭用ルーターでよく使用)</li>
                    </ul>

                    <div class="highlight">
                        <h5>VPC設計の推奨事項</h5>
                        <ul>
                            <li>VPCには<strong>/16</strong>サイズ(例: 10.0.0.0/16)を使用することが一般的</li>
                            <li>サブネットには<strong>/24</strong>サイズ(256アドレス)を使用することが多い</li>
                            <li>将来の拡張を見越して、十分な大きさのCIDRブロックを選ぶ</li>
                        </ul>
                    </div>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.3.3 パブリックサブネットとプライベートサブネット</h4>
                    <p>
                        <strong>サブネット</strong>は、VPC内のIPアドレス範囲をさらに分割したものです。サブネットは必ず1つのアベイラビリティゾーン(AZ)に属します。
                    </p>

                    <table class="table table-bordered table-custom">
                        <thead>
                            <tr>
                                <th>サブネット種類</th>
                                <th>特徴</th>
                                <th>用途例</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>パブリックサブネット</strong></td>
                                <td>インターネットゲートウェイへのルートがある。インスタンスにパブリックIPを割り当て可能</td>
                                <td>Webサーバー、ロードバランサー、踏み台サーバー</td>
                            </tr>
                            <tr>
                                <td><strong>プライベートサブネット</strong></td>
                                <td>インターネットへの直接ルートがない。外部から直接アクセス不可</td>
                                <td>アプリケーションサーバー、データベース、内部サービス</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>
                        <strong>マルチAZ構成:</strong> 高可用性を実現するため、複数のアベイラビリティゾーン(AZ)にサブネットを配置します。1つのAZに障害が発生しても、他のAZでサービスを継続できます。
                    </p>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.3.4 インターネットゲートウェイ</h4>
                    <p>
                        <strong>インターネットゲートウェイ(IGW)</strong>は、VPC内のリソースがインターネットと通信するためのゲートウェイです。
                    </p>

                    <ul>
                        <li>VPCに1つだけアタッチ可能</li>
                        <li>高可用性とスケーラビリティが自動的に提供される(管理不要)</li>
                        <li>追加料金なし(データ転送料金のみ)</li>
                        <li>パブリックサブネットからインターネットへのルートで使用</li>
                    </ul>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.3.5 ルートテーブルの設定と関連付け</h4>
                    <p>
                        <strong>ルートテーブル</strong>は、ネットワークトラフィックの経路を決定するルールのセットです。
                    </p>

                    <p><strong>パブリックサブネットのルートテーブル例:</strong></p>
                    <table class="table table-bordered table-custom">
                        <thead>
                            <tr>
                                <th>送信先</th>
                                <th>ターゲット</th>
                                <th>説明</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>10.0.0.0/16</td>
                                <td>local</td>
                                <td>VPC内の通信(自動作成)</td>
                            </tr>
                            <tr>
                                <td>0.0.0.0/0</td>
                                <td>igw-xxxxx</td>
                                <td>インターネットへの通信</td>
                            </tr>
                        </tbody>
                    </table>

                    <p><strong>プライベートサブネットのルートテーブル例:</strong></p>
                    <table class="table table-bordered table-custom">
                        <thead>
                            <tr>
                                <th>送信先</th>
                                <th>ターゲット</th>
                                <th>説明</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>10.0.0.0/16</td>
                                <td>local</td>
                                <td>VPC内の通信のみ(インターネットルートなし)</td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- 2.4 ネットワーク設定の実践 -->
                    <h3 class="section-title">2.4 ネットワーク設定の実践</h3>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.4.1 NAT ゲートウェイ</h4>
                    <p>
                        プライベートサブネット内のインスタンスがインターネットにアクセスする必要がある場合(ソフトウェアのアップデート等)、<strong>NAT ゲートウェイ</strong>を使用します。
                    </p>

                    <ul>
                        <li>プライベートサブネットからインターネットへの<strong>アウトバウンド通信のみ</strong>を許可</li>
                        <li>インターネットからプライベートサブネットへのインバウンド接続は不可</li>
                        <li>パブリックサブネットに配置する</li>
                        <li>マネージドサービスで高可用性</li>
                    </ul>

                    <div class="warning">
                        <h5>コストに関する注意</h5>
                        <p>
                            NAT ゲートウェイは<strong>無料利用枠に含まれません</strong>。時間課金とデータ転送料金が発生するため、学習用途では使用後は削除することをお勧めします。
                        </p>
                    </div>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.4.2 ネットワークACL (NACL)</h4>
                    <p>
                        <strong>ネットワークACL (Network Access Control List)</strong>は、サブネットレベルのファイアウォールです。
                    </p>

                    <table class="table table-bordered table-custom">
                        <thead>
                            <tr>
                                <th>項目</th>
                                <th>セキュリティグループ</th>
                                <th>ネットワークACL</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>動作レベル</strong></td>
                                <td>インスタンスレベル</td>
                                <td>サブネットレベル</td>
                            </tr>
                            <tr>
                                <td><strong>ステート</strong></td>
                                <td>ステートフル(戻りトラフィック自動許可)</td>
                                <td>ステートレス(戻りトラフィックも明示的に許可が必要)</td>
                            </tr>
                            <tr>
                                <td><strong>ルール</strong></td>
                                <td>許可ルールのみ</td>
                                <td>許可と拒否ルール両方</td>
                            </tr>
                            <tr>
                                <td><strong>デフォルト</strong></td>
                                <td>全て拒否</td>
                                <td>全て許可</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="highlight">
                        <h5>初心者へのアドバイス</h5>
                        <p>
                            通常は<strong>セキュリティグループで十分</strong>です。ネットワークACLはデフォルトのまま(全許可)で開始し、必要になったら設定することをお勧めします。
                        </p>
                    </div>

                    <h4 style="color: #EC7211; margin-top: 1.5rem;">2.4.3 Elastic IP アドレス</h4>
                    <p>
                        <strong>Elastic IP (EIP)</strong>は、AWS が管理する静的なパブリックIPアドレスです。
                    </p>

                    <ul>
                        <li>EC2インスタンスを再起動してもIPアドレスが変わらない</li>
                        <li>別のインスタンスに付け替え可能</li>
                        <li>インスタンスにアタッチしている間は無料</li>
                        <li><strong>未使用のEIPには課金が発生する</strong>(使わない場合はリリースする)</li>
                    </ul>

                    <div class="warning">
                        <h5>注意点</h5>
                        <p>
                            Elastic IPを確保したまま使用しない状態にすると、<strong>時間課金が発生</strong>します。学習後は必ずリリース(解放)してください。
                        </p>
                    </div>

                    <!-- 演習課題 -->
                    <div class="exercise-container">
                        <h5>演習 2-1: EC2インスタンスの起動とSSH接続</h5>
                        <p><strong>目的:</strong> 初めてのEC2インスタンスを起動し、SSH接続してWebサーバーをインストールします。</p>

                        <h6>手順</h6>
                        <ol>
                            <li>EC2コンソールにアクセスし、「インスタンスを起動」をクリック</li>
                            <li>AMI選択: <strong>Amazon Linux 2 AMI</strong>を選択</li>
                            <li>インスタンスタイプ: <strong>t2.micro</strong>(無料利用枠)を選択</li>
                            <li>キーペアの作成: 新しいキーペアを作成し、ダウンロード(例: my-first-key.pem)</li>
                            <li>ネットワーク設定: デフォルトVPC、パブリックIPの自動割り当てを有効化</li>
                            <li>セキュリティグループ設定:
                                <ul>
                                    <li>SSH (22): 自分のIPのみ許可</li>
                                    <li>HTTP (80): すべて(0.0.0.0/0)から許可</li>
                                </ul>
                            </li>
                            <li>インスタンスを起動</li>
                            <li>SSH接続:
                                <pre class="code-block"><code class="language-bash">chmod 400 my-first-key.pem
ssh -i my-first-key.pem ec2-user@[インスタンスのパブリックIP]
</code></pre>
                            </li>
                            <li>Webサーバー(Apache)をインストール:
                                <pre class="code-block"><code class="language-bash"># Apacheのインストールと起動
sudo yum update -y
sudo yum install httpd -y
sudo systemctl start httpd
sudo systemctl enable httpd

# テストページの作成
echo "&lt;h1&gt;Hello from AWS EC2!&lt;/h1&gt;" | sudo tee /var/www/html/index.html
</code></pre>
                            </li>
                            <li>ブラウザで http://[インスタンスのパブリックIP] にアクセスし、ページが表示されることを確認</li>
                        </ol>

                        <h6>確認ポイント</h6>
                        <ul>
                            <li>EC2インスタンスが正常に起動しているか</li>
                            <li>SSH接続できるか</li>
                            <li>ブラウザからWebページが表示されるか</li>
                        </ul>

                        <div class="warning">
                            <strong>演習終了後:</strong> 学習後はインスタンスを<strong>「終了」(削除)</strong>し、課金を停止してください。「停止」状態でもEBSボリュームの料金が発生します。
                        </div>
                    </div>

                    <div class="exercise-container">
                        <h5>演習 2-2: カスタムVPCの作成とネットワーク設定</h5>
                        <p><strong>目的:</strong> カスタムVPCを作成し、パブリック/プライベートサブネット構成を理解します。</p>

                        <h6>手順</h6>
                        <ol>
                            <li>VPCコンソールにアクセスし、「VPCを作成」をクリック</li>
                            <li>VPC設定:
                                <ul>
                                    <li>名前: <strong>my-custom-vpc</strong></li>
                                    <li>CIDRブロック: <strong>10.0.0.0/16</strong></li>
                                </ul>
                            </li>
                            <li>パブリックサブネットを作成:
                                <ul>
                                    <li>名前: <strong>public-subnet-1a</strong></li>
                                    <li>VPC: 作成したVPC</li>
                                    <li>AZ: ap-northeast-1a</li>
                                    <li>CIDR: <strong>10.0.1.0/24</strong></li>
                                </ul>
                            </li>
                            <li>プライベートサブネットを作成:
                                <ul>
                                    <li>名前: <strong>private-subnet-1a</strong></li>
                                    <li>VPC: 作成したVPC</li>
                                    <li>AZ: ap-northeast-1a</li>
                                    <li>CIDR: <strong>10.0.11.0/24</strong></li>
                                </ul>
                            </li>
                            <li>インターネットゲートウェイを作成し、VPCにアタッチ</li>
                            <li>パブリックサブネット用のルートテーブルを作成:
                                <ul>
                                    <li>ルート追加: 送信先 <strong>0.0.0.0/0</strong> → ターゲット <strong>インターネットゲートウェイ</strong></li>
                                    <li>パブリックサブネットに関連付け</li>
                                </ul>
                            </li>
                            <li>パブリックサブネットで「パブリックIPの自動割り当て」を有効化</li>
                            <li>このVPC内でEC2インスタンスを起動し、インターネット接続を確認</li>
                        </ol>

                        <h6>確認ポイント</h6>
                        <ul>
                            <li>カスタムVPCが正しく作成されているか</li>
                            <li>パブリックサブネットからインターネットにアクセスできるか</li>
                            <li>ルートテーブルの設定が正しいか</li>
                        </ul>
                    </div>

                    <!-- 理解度確認クイズ -->
                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li><strong>問題1:</strong> EC2インスタンスタイプの命名規則「t3.micro」の各部分(t、3、micro)が何を意味するか説明してください。</li>
                            <li><strong>問題2:</strong> AMI (Amazon Machine Image)とは何ですか?どのような情報が含まれていますか?</li>
                            <li><strong>問題3:</strong> セキュリティグループの特性について、「ステートフル」とはどういう意味ですか?具体例を挙げて説明してください。</li>
                            <li><strong>問題4:</strong> SSH(ポート22)を全世界(0.0.0.0/0)に開放することが推奨されない理由を説明してください。</li>
                            <li><strong>問題5:</strong> VPCのCIDRブロック「10.0.0.0/16」は何個のIPアドレスを含みますか?また「10.0.1.0/24」は?</li>
                            <li><strong>問題6:</strong> パブリックサブネットとプライベートサブネットの違いは何ですか?それぞれどのようなリソースを配置しますか?</li>
                            <li><strong>問題7:</strong> インターネットゲートウェイとNATゲートウェイの違いと、それぞれの使い分けを説明してください。</li>
                            <li><strong>問題8:</strong> セキュリティグループとネットワークACLの違いを3つ挙げてください。</li>
                        </ol>
                    </div>

                    <!-- まとめ -->
                    <h3 class="section-title">まとめ</h3>
                    <p>
                        この章では、AWSの基本的なコンピューティングサービスであるEC2と、ネットワークサービスであるVPCを学習しました。EC2インスタンスの起動方法、インスタンスタイプとAMIの選択、キーペアによるSSH接続、セキュリティグループによるファイアウォール設定を理解しました。
                    </p>
                    <p>
                        また、VPCの概念、CIDRブロックによるIPアドレス設計、パブリック/プライベートサブネットの違い、ルートテーブルとインターネットゲートウェイの役割、NATゲートウェイの使い方を学びました。これらはAWSインフラストラクチャの基盤となる重要な概念です。
                    </p>
                    <p>
                        <strong>次の章では、</strong>AWSのストレージサービスであるS3(オブジェクトストレージ)とEBS(ブロックストレージ)について学習します。データの保存方法、バックアップ戦略、コスト最適化の手法を理解します。
                    </p>

                    <!-- 章間ナビゲーション -->
                    <div class="d-flex justify-content-between mt-4 mb-5">
                        <a href="aws-learning-material-01.html" class="btn btn-secondary">← 前の章: 第1章 AWS入門とアカウント設定</a>
                        <a href="aws-learning-material-03.html" class="btn btn-primary">次の章: 第3章 ストレージサービス →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- フッター -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>

    <!-- Mermaid.js 初期化 -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>
