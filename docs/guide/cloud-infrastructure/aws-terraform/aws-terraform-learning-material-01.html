<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Terraform学習教材 第1章 - Terraform入門とAWS環境設定</title>

    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/hcl.min.js"></script>

    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- カスタムCSS -->
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
            background-color: #f8f9fa;
        }

        .navbar {
            background-color: #FF9900;
            box-shadow: 0 2px 4px rgba(0,0,0,.1);
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            font-weight: 700;
        }

        .navbar-brand i {
            margin-right: 10px;
        }

        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
            background-color: white;
            border-right: 1px solid #dee2e6;
        }

        .chapter-title {
            color: #FF9900;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #FF9900;
            padding-bottom: 0.5rem;
            font-weight: 600;
        }

        .section-title {
            color: #FF6600;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
            font-weight: 500;
        }

        .quiz-container {
            background-color: #FFF3E0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #FF9900;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        .info-box {
            background-color: #e3f2fd;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #2196f3;
        }

        .code-block {
            background-color: #1e1e1e;
            color: white;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
        }

        .nav-link.active {
            background-color: #FF9900 !important;
            color: white !important;
            font-weight: 500;
        }

        .nav-link {
            color: #333;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            margin: 2px 0;
            transition: all 0.3s;
        }

        .nav-link:hover {
            background-color: #FFF3E0;
            color: #FF6600;
        }

        .concept-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .concept-card h4 {
            color: #FF6600;
            border-bottom: 2px solid #FFE0B2;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }

        .term-definition {
            background-color: #FFFDE7;
            border-radius: 6px;
            padding: 12px;
            margin: 10px 0;
            border-left: 3px solid #FFB300;
        }

        .term-definition dt {
            color: #FF6F00;
            font-weight: 600;
            margin-bottom: 5px;
        }

        footer {
            margin-top: auto;
        }

        .mermaid {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand">
                <i class="fab fa-aws"></i>
                <strong>AWS Terraform学習教材</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="aws-terraform-learning-material-01.html">
                                第1章: Terraform入門とAWS環境設定
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-terraform-learning-material-02.html">
                                第2章: HCL構文とTerraformの基本操作
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-terraform-learning-material-03.html">
                                第3章: VPCとネットワークインフラの構築
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-terraform-learning-material-04.html">
                                第4章: EC2インスタンスとコンピューティングリソース
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-terraform-learning-material-05.html">
                                第5章: ストレージとデータベースサービス
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-terraform-learning-material-06.html">
                                第6章: IAMとセキュリティ管理
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-terraform-learning-material-07.html">
                                第7章: Terraformステート管理とバックエンド
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-terraform-learning-material-08.html">
                                第8章: Terraformモジュールとコードの再利用
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-terraform-learning-material-09.html">
                                第9章: CI/CDパイプラインとの統合
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aws-terraform-learning-material-10.html">
                                第10章: 実践プロジェクトとベストプラクティス
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- 章ヘッダー -->
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第1章: Terraform入門とAWS環境設定</h1>
                </div>

                <div id="chapter1">
                    <h2 class="chapter-title">Infrastructure as Codeの世界へようこそ</h2>

                    <!-- 学習目標 -->
                    <div class="highlight">
                        <h5><i class="fas fa-graduation-cap"></i> この章で学ぶこと</h5>
                        <ul>
                            <li>Infrastructure as Code（IaC）の概念とメリットを理解する</li>
                            <li>TerraformとCloudFormationの違いを説明できる</li>
                            <li>Terraform CLIのインストールと初期設定を行う</li>
                            <li>AWS認証情報を適切に設定する</li>
                        </ul>
                    </div>

                    <!-- Section 1.1 -->
                    <h3 class="section-title">1.1 Infrastructure as Codeとは</h3>

                    <div class="concept-card">
                        <h4>従来のインフラ管理の課題</h4>
                        <p>
                            従来、インフラストラクチャの構築は手動で行われることが一般的でした。AWSマネジメントコンソールにログインし、
                            必要なリソースを一つずつ作成する方法です。しかし、この手法には多くの課題があります：
                        </p>

                        <div class="mermaid">
                            flowchart TD
                                A[手動でのインフラ構築] --> B["人為的ミス<br/>（設定の間違い）"]
                                A --> C["再現性の欠如<br/>（同じ環境を作れない）"]
                                A --> D["時間がかかる<br/>（反復作業が多い）"]
                                A --> E["ドキュメント化が困難<br/>（変更履歴が残らない）"]
                                B --> F[本番環境での障害]
                                C --> F
                                D --> G[開発速度の低下]
                                E --> G
                        </div>
                    </div>

                    <div class="term-definition">
                        <dt>Infrastructure as Code（IaC）とは</dt>
                        <dd>
                            インフラストラクチャの構成をコードとして定義し、バージョン管理システムで管理する手法です。
                            サーバー、ネットワーク、データベースなどのリソースを、プログラムコードと同じように扱うことができます。
                        </dd>
                    </div>

                    <div class="concept-card">
                        <h4>IaCのメリット</h4>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="info-box">
                                    <h6><i class="fas fa-sync-alt"></i> 再現性</h6>
                                    <p>同じコードから同じインフラを何度でも構築できます。開発環境と本番環境を完全に同じ構成にすることも可能です。</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="info-box">
                                    <h6><i class="fas fa-code-branch"></i> バージョン管理</h6>
                                    <p>Gitなどのバージョン管理システムで変更履歴を追跡できます。いつ、誰が、何を変更したかが明確になります。</p>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-md-6">
                                <div class="info-box">
                                    <h6><i class="fas fa-robot"></i> 自動化</h6>
                                    <p>CI/CDパイプラインと統合して、コードのプッシュと同時にインフラの変更を自動適用できます。</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="info-box">
                                    <h6><i class="fas fa-file-alt"></i> ドキュメント化</h6>
                                    <p>コード自体がインフラの設計書となります。コメントも追加でき、理解しやすいドキュメントになります。</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="concept-card">
                        <h4>宣言的アプローチと命令的アプローチ</h4>

                        <div class="term-definition">
                            <dt>宣言的アプローチ（Declarative）</dt>
                            <dd>
                                「何を作りたいか」を記述する方法。望ましい最終状態を定義し、ツールがその状態を実現する方法を決定します。
                                Terraformはこのアプローチを採用しています。
                            </dd>
                        </div>

                        <div class="term-definition">
                            <dt>命令的アプローチ（Imperative）</dt>
                            <dd>
                                「どのように作るか」を記述する方法。具体的な手順を順番に記述していきます。
                                AnsibleやChefなどがこのアプローチを採用しています。
                            </dd>
                        </div>

                        <p>簡単な例で違いを見てみましょう：</p>

                        <div class="row">
                            <div class="col-md-6">
                                <h6>宣言的（Terraform）</h6>
                                <pre class="code-block"><code class="language-hcl"># EC2インスタンスを3つ欲しい
resource "aws_instance" "web" {
  count = 3
  instance_type = "t3.micro"
}</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>命令的（シェルスクリプト）</h6>
                                <pre class="code-block"><code class="language-bash"># EC2インスタンスを3つ作る手順
for i in {1..3}; do
  aws ec2 run-instances \
    --instance-type t3.micro
done</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Section 1.2 -->
                    <h3 class="section-title">1.2 Terraformの基本概念</h3>

                    <div class="concept-card">
                        <h4>Terraformのアーキテクチャ</h4>

                        <div class="mermaid">
                            flowchart TD
                                A["Terraform Core<br/>（実行エンジン）"] --> B["Terraform Providers<br/>（各クラウドとの接続）"]
                                B --> C["AWS Provider"]
                                B --> D["Azure Provider"]
                                B --> E["GCP Provider"]
                                C --> F["AWS API"]
                                D --> G["Azure API"]
                                E --> H["GCP API"]
                                I["HCL設定ファイル<br/>（.tf）"] --> A
                                J["Terraform State<br/>（状態管理）"] --> A
                        </div>

                        <div class="term-definition">
                            <dt>Terraform Core</dt>
                            <dd>
                                Terraformの中核となる実行エンジンです。HCLファイルを読み込み、現在の状態と望ましい状態を比較し、
                                必要な変更を計算します。
                            </dd>
                        </div>

                        <div class="term-definition">
                            <dt>Provider</dt>
                            <dd>
                                特定のクラウドやサービスと通信するためのプラグインです。AWS Provider、Azure Provider、
                                Google Cloud Providerなどがあります。各プロバイダーはそれぞれのAPIと通信します。
                            </dd>
                        </div>

                        <div class="term-definition">
                            <dt>State（ステート）</dt>
                            <dd>
                                Terraformが管理するリソースの現在の状態を記録したファイルです。
                                実際のインフラとTerraformの設定を紐づける重要な役割を持ちます。
                            </dd>
                        </div>
                    </div>

                    <div class="concept-card">
                        <h4>HCL（HashiCorp Configuration Language）の概要</h4>

                        <p>
                            HCLはTerraformで使用される設定言語です。JSONに似ていますが、より人間が読み書きしやすい構文になっています。
                            コメントも書けるため、コードの意図を明確に伝えることができます。
                        </p>

                        <pre class="code-block"><code class="language-hcl"># これはコメントです
# S3バケットを作成する設定
resource "aws_s3_bucket" "my_bucket" {
  bucket = "my-unique-bucket-name"  # バケット名は全世界で一意

  tags = {
    Environment = "Development"
    Project     = "MyProject"
  }
}</code></pre>
                    </div>

                    <div class="concept-card">
                        <h4>Terraformのワークフロー</h4>

                        <div class="mermaid">
                            flowchart LR
                                A["Write<br/>（コード作成）"] --> B["Plan<br/>（変更計画）"]
                                B --> C{"変更内容<br/>確認OK?"}
                                C -->|Yes| D["Apply<br/>（変更適用）"]
                                C -->|No| A
                                D --> E["Destroy<br/>（リソース削除）"]
                                E --> F[完了]
                        </div>

                        <dl>
                            <dt>1. Write（記述）</dt>
                            <dd>.tfファイルにインフラ構成を記述します</dd>

                            <dt>2. Plan（計画）</dt>
                            <dd>`terraform plan`コマンドで変更内容を確認します</dd>

                            <dt>3. Apply（適用）</dt>
                            <dd>`terraform apply`コマンドで変更を実際に適用します</dd>

                            <dt>4. Destroy（削除）</dt>
                            <dd>`terraform destroy`コマンドでリソースを削除します（必要に応じて）</dd>
                        </dl>
                    </div>

                    <div class="concept-card">
                        <h4>リソースとデータソースの違い</h4>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="term-definition">
                                    <dt>Resource（リソース）</dt>
                                    <dd>
                                        Terraformが作成・管理するインフラコンポーネントです。
                                        EC2インスタンス、S3バケット、VPCなどが該当します。
                                    </dd>
                                </div>
                                <pre class="code-block"><code class="language-hcl"># リソースの例：新しいS3バケットを作成
resource "aws_s3_bucket" "new_bucket" {
  bucket = "my-new-bucket"
}</code></pre>
                            </div>

                            <div class="col-md-6">
                                <div class="term-definition">
                                    <dt>Data Source（データソース）</dt>
                                    <dd>
                                        既存のリソースから情報を取得するためのものです。
                                        Terraformが管理していない既存リソースの情報を参照できます。
                                    </dd>
                                </div>
                                <pre class="code-block"><code class="language-hcl"># データソースの例：既存のAMIを参照
data "aws_ami" "ubuntu" {
  most_recent = true
  owners      = ["099720109477"]
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- Section 1.3 -->
                    <h3 class="section-title">1.3 開発環境のセットアップ</h3>

                    <div class="concept-card">
                        <h4>Terraform CLIのインストール</h4>

                        <p>Terraformを使用するには、まずTerraform CLIをインストールする必要があります。OSによってインストール方法が異なります。</p>

                        <div class="info-box">
                            <h6><i class="fas fa-lightbulb"></i> tfenvの使用を推奨</h6>
                            <p>
                                tfenvはTerraformのバージョン管理ツールです。プロジェクトごとに異なるバージョンのTerraformを使い分けることができます。
                                Node.jsのnvmやRubyのrbenvと同じような仕組みです。
                            </p>
                        </div>

                        <h6>macOSの場合（Homebrew使用）</h6>
                        <pre class="code-block"><code class="language-bash"># tfenvのインストール
brew install tfenv

# 利用可能なバージョンを確認
tfenv list-remote

# 最新の安定版をインストール
tfenv install latest

# インストールしたバージョンを使用
tfenv use latest

# バージョン確認
terraform version</code></pre>

                        <h6>Windowsの場合</h6>
                        <pre class="code-block"><code class="language-bash"># Chocolateyを使用する場合
choco install terraform

# または公式サイトから直接ダウンロード
# https://www.terraform.io/downloads</code></pre>

                        <h6>Linuxの場合</h6>
                        <pre class="code-block"><code class="language-bash"># APTリポジトリを追加（Ubuntu/Debian）
wget -O- https://apt.releases.hashicorp.com/gpg | \
    gpg --dearmor | \
    sudo tee /usr/share/keyrings/hashicorp-archive-keyring.gpg

echo "deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] \
    https://apt.releases.hashicorp.com $(lsb_release -cs) main" | \
    sudo tee /etc/apt/sources.list.d/hashicorp.list

sudo apt update && sudo apt install terraform</code></pre>
                    </div>

                    <div class="concept-card">
                        <h4>AWS CLIのインストールと設定</h4>

                        <p>TerraformからAWSリソースを操作するために、AWS CLIも設定しておく必要があります。</p>

                        <h6>AWS CLIのインストール</h6>
                        <pre class="code-block"><code class="language-bash"># macOS
brew install awscli

# Windows（MSIインストーラーを使用）
# https://aws.amazon.com/cli/ からダウンロード

# Linux
curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
unzip awscliv2.zip
sudo ./aws/install</code></pre>

                        <h6>AWS認証情報の設定</h6>
                        <pre class="code-block"><code class="language-bash"># AWS CLIの設定を開始
aws configure

# 以下の情報を入力
AWS Access Key ID [None]: YOUR_ACCESS_KEY_ID
AWS Secret Access Key [None]: YOUR_SECRET_ACCESS_KEY
Default region name [None]: ap-northeast-1
Default output format [None]: json</code></pre>

                        <div class="warning">
                            <h6><i class="fas fa-exclamation-triangle"></i> セキュリティ上の注意</h6>
                            <p>
                                アクセスキーとシークレットキーは絶対に他人と共有したり、Gitリポジトリにコミットしたりしないでください。
                                これらの情報が漏洩すると、AWSアカウントが不正利用される可能性があります。
                            </p>
                        </div>
                    </div>

                    <div class="concept-card">
                        <h4>IAMユーザーの作成と適切な権限付与</h4>

                        <p>Terraform用のIAMユーザーを作成する際の推奨事項：</p>

                        <ol>
                            <li><strong>専用のIAMユーザーを作成</strong>：ルートアカウントは使用しない</li>
                            <li><strong>最小権限の原則</strong>：必要最小限の権限のみを付与</li>
                            <li><strong>MFAの有効化</strong>：多要素認証を設定してセキュリティを強化</li>
                            <li><strong>定期的なキーローテーション</strong>：アクセスキーを定期的に更新</li>
                        </ol>

                        <h6>IAMポリシーの例（開発環境用）</h6>
                        <pre class="code-block"><code class="language-json">{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "ec2:*",
        "s3:*",
        "iam:*",
        "vpc:*"
      ],
      "Resource": "*",
      "Condition": {
        "StringEquals": {
          "aws:RequestedRegion": "ap-northeast-1"
        }
      }
    }
  ]
}</code></pre>
                    </div>

                    <div class="concept-card">
                        <h4>Visual Studio Codeの設定</h4>

                        <p>Visual Studio CodeはTerraformの開発に最適なエディタの一つです。以下の拡張機能をインストールすることをお勧めします：</p>

                        <ol>
                            <li>
                                <strong>HashiCorp Terraform</strong>
                                <ul>
                                    <li>シンタックスハイライト</li>
                                    <li>自動補完</li>
                                    <li>フォーマット機能（terraform fmt）</li>
                                    <li>バリデーション機能</li>
                                </ul>
                            </li>
                            <li>
                                <strong>AWS Toolkit</strong>
                                <ul>
                                    <li>AWS リソースの参照</li>
                                    <li>CloudFormationテンプレートのサポート</li>
                                </ul>
                            </li>
                        </ol>

                        <h6>VS Code設定の推奨事項（settings.json）</h6>
                        <pre class="code-block"><code class="language-json">{
  "[terraform]": {
    "editor.formatOnSave": true,
    "editor.formatOnSaveTimeout": 5000
  },
  "terraform.languageServer": {
    "enabled": true
  }
}</code></pre>
                    </div>

                    <!-- Section 1.4 -->
                    <h3 class="section-title">1.4 最初のTerraformプロジェクト</h3>

                    <div class="concept-card">
                        <h4>プロジェクトディレクトリの作成</h4>

                        <p>Terraformプロジェクトの標準的なディレクトリ構造を作成しましょう：</p>

                        <pre class="code-block"><code class="language-bash"># プロジェクトディレクトリを作成
mkdir my-terraform-project
cd my-terraform-project

# 基本的なディレクトリ構造を作成
mkdir -p {modules,environments/{dev,staging,prod}}

# 構造を確認
tree .
# 出力例：
# .
# ├── environments/
# │   ├── dev/
# │   ├── staging/
# │   └── prod/
# └── modules/</code></pre>
                    </div>

                    <div class="concept-card">
                        <h4>provider.tfファイルの作成</h4>

                        <p>Terraformプロジェクトの最初のファイルとして、プロバイダー設定を記述します：</p>

                        <pre class="code-block"><code class="language-hcl"># provider.tf
terraform {
  # Terraformのバージョン制約
  required_version = ">= 1.5.0"

  # 必要なプロバイダーの定義
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
}

# AWSプロバイダーの設定
provider "aws" {
  region = "ap-northeast-1"  # 東京リージョン

  # タグを全リソースに自動付与
  default_tags {
    tags = {
      Environment = "Development"
      ManagedBy   = "Terraform"
      Project     = "MyFirstProject"
    }
  }
}</code></pre>

                        <div class="info-box">
                            <h6><i class="fas fa-info-circle"></i> バージョン制約の記法</h6>
                            <ul>
                                <li><code>= 1.5.0</code>：厳密に1.5.0のみ</li>
                                <li><code>>= 1.5.0</code>：1.5.0以上</li>
                                <li><code>~> 5.0</code>：5.0以上、6.0未満（5.xの最新版）</li>
                            </ul>
                        </div>
                    </div>

                    <div class="concept-card">
                        <h4>terraform initコマンドによる初期化</h4>

                        <p>`terraform init`は、Terraformプロジェクトを初期化する重要なコマンドです：</p>

                        <pre class="code-block"><code class="language-bash"># Terraformプロジェクトを初期化
terraform init

# 出力例：
# Initializing the backend...
# Initializing provider plugins...
# - Finding hashicorp/aws versions matching "~> 5.0"...
# - Installing hashicorp/aws v5.31.0...
# - Installed hashicorp/aws v5.31.0
#
# Terraform has been successfully initialized!</code></pre>

                        <p>このコマンドが実行すること：</p>
                        <ol>
                            <li>必要なプロバイダープラグインのダウンロード</li>
                            <li>.terraformディレクトリの作成</li>
                            <li>バックエンドの初期化（設定されている場合）</li>
                            <li>モジュールのダウンロード（使用している場合）</li>
                        </ol>
                    </div>

                    <div class="concept-card">
                        <h4>.gitignoreの設定</h4>

                        <p>Terraformプロジェクトをバージョン管理する際、以下のファイルは除外する必要があります：</p>

                        <pre class="code-block"><code class="language-bash"># .gitignore
# Terraform関連
*.tfstate
*.tfstate.*
.terraform/
.terraform.lock.hcl
crash.log
crash.*.log
*.tfvars
*.tfvars.json
override.tf
override.tf.json
*_override.tf
*_override.tf.json
.terraformrc
terraform.rc

# IDE関連
.vscode/
.idea/
*.swp
*.swo
*~
.DS_Store

# 環境変数ファイル
.env
.env.*

# SSH鍵
*.pem
*.key</code></pre>

                        <div class="warning">
                            <h6><i class="fas fa-exclamation-triangle"></i> 重要：tfstateファイルの取り扱い</h6>
                            <p>
                                terraform.tfstateファイルには、インフラの機密情報（パスワード、アクセスキーなど）が含まれる可能性があります。
                                絶対にGitリポジトリにコミットしないでください。チーム開発では、S3などのリモートバックエンドを使用します。
                            </p>
                        </div>
                    </div>

                    <!-- 実習 -->
                    <div class="exercise-container">
                        <h5><i class="fas fa-laptop-code"></i> 実習 1-1: 簡単なS3バケットの作成</h5>
                        <p>実際にTerraformを使用してAWS S3バケットを作成してみましょう。</p>

                        <h6>手順</h6>
                        <ol>
                            <li>新しいファイル `main.tf` を作成</li>
                            <li>S3バケットのリソースを定義</li>
                            <li>terraform planで変更内容を確認</li>
                            <li>terraform applyで実際に作成</li>
                            <li>AWSコンソールで作成されたことを確認</li>
                            <li>terraform destroyでリソースを削除</li>
                        </ol>

                        <h6>実行例</h6>
                        <pre class="code-block"><code class="language-hcl"># main.tf
resource "aws_s3_bucket" "my_first_bucket" {
  # バケット名は全世界で一意である必要があります
  # 自分のユーザー名や日付を含めると良いでしょう
  bucket = "my-first-terraform-bucket-20240101-yourname"

  tags = {
    Name        = "My First Terraform Bucket"
    CreatedBy   = "Terraform"
    Purpose     = "Learning"
  }
}

# バケットの公開アクセスをブロック（セキュリティのため）
resource "aws_s3_bucket_public_access_block" "my_first_bucket_pab" {
  bucket = aws_s3_bucket.my_first_bucket.id

  block_public_acls       = true
  block_public_policy     = true
  ignore_public_acls      = true
  restrict_public_buckets = true
}</code></pre>

                        <pre class="code-block"><code class="language-bash"># 変更内容を確認
terraform plan

# 実際に適用（yesと入力して確認）
terraform apply

# 作成されたリソースを確認
terraform show

# リソースを削除（yesと入力して確認）
terraform destroy</code></pre>

                        <h6>期待される結果</h6>
                        <p>
                            S3バケットが作成され、AWSマネジメントコンソールで確認できます。
                            terraform destroyを実行すると、作成したバケットが削除されます。
                        </p>
                    </div>

                    <!-- 理解度確認 -->
                    <div class="quiz-container">
                        <h5><i class="fas fa-question-circle"></i> 理解度確認クイズ</h5>
                        <ol>
                            <li>
                                <strong>Infrastructure as Codeの主なメリットは何ですか？</strong>
                                <ul>
                                    <li>再現性：同じコードから同じインフラを構築できる</li>
                                    <li>バージョン管理：変更履歴を追跡できる</li>
                                    <li>自動化：CI/CDパイプラインと統合できる</li>
                                    <li>ドキュメント化：コード自体が設計書となる</li>
                                </ul>
                            </li>
                            <li>
                                <strong>TerraformとAnsibleの違いは何ですか？</strong>
                                <ul>
                                    <li>Terraformは宣言的、Ansibleは命令的アプローチ</li>
                                    <li>Terraformはインフラ構築、Ansibleは構成管理に特化</li>
                                </ul>
                            </li>
                            <li>
                                <strong>terraform initコマンドは何をしますか？</strong>
                                <ul>
                                    <li>プロバイダープラグインのダウンロード</li>
                                    <li>.terraformディレクトリの作成</li>
                                    <li>バックエンドの初期化</li>
                                </ul>
                            </li>
                            <li>
                                <strong>なぜtfstateファイルをGitにコミットしてはいけないのですか？</strong>
                                <ul>
                                    <li>機密情報が含まれる可能性があるため</li>
                                    <li>チーム開発では競合が発生しやすいため</li>
                                    <li>リモートバックエンドを使用すべきため</li>
                                </ul>
                            </li>
                        </ol>
                    </div>

                    <!-- 章のまとめ -->
                    <div class="concept-card">
                        <h4><i class="fas fa-bookmark"></i> この章のまとめ</h4>
                        <p>
                            第1章では、Infrastructure as Codeの基本概念とTerraformの基礎を学びました。
                            手動でのインフラ管理の課題を理解し、IaCがもたらす再現性、バージョン管理、自動化のメリットを学習しました。
                        </p>
                        <p>
                            Terraformの宣言的アプローチによって、「何を作りたいか」を記述するだけで、
                            複雑なインフラストラクチャを管理できることが理解できたはずです。
                        </p>
                        <p>
                            次章では、HCL構文の詳細とTerraformの基本操作について、より深く学んでいきます。
                            変数、出力、ローカル値などの言語機能を習得し、より柔軟で再利用可能なコードを書けるようになります。
                        </p>
                    </div>

                    <!-- 章間ナビゲーション -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="#" class="btn btn-secondary disabled">← 前の章</a>
                        <a href="aws-terraform-learning-material-02.html" class="btn btn-primary">次の章 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- フッター -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
                    本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>

    <!-- Mermaid.js 初期化 -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>