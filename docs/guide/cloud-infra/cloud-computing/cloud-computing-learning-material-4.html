<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>クラウドコンピューティング学習教材 第4章 - Azure基礎サービス</title>

    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>

    <style>
        /* ベースレイアウト */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
            line-height: 1.8;
        }

        /* ナビゲーション */
        .navbar {
            background: linear-gradient(135deg, #0d6efd 0%, #0dcaf0 100%);
        }

        /* サイドバー */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
            background-color: #f8f9fa;
            border-right: 1px solid #dee2e6;
        }

        .sidebar .nav-link {
            color: #495057;
            padding: 0.75rem 1rem;
            transition: all 0.3s;
        }

        .sidebar .nav-link:hover {
            background-color: #e9ecef;
            color: #0d6efd;
        }

        .sidebar .nav-link.active {
            background-color: #0d6efd !important;
            color: white !important;
        }

        /* タイトル */
        .chapter-title {
            color: #0d6efd;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 3px solid #0d6efd;
            padding-bottom: 0.5rem;
            font-weight: 700;
        }

        .section-title {
            color: #0dcaf0;
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        /* コンテンツボックス */
        .quiz-container {
            background-color: #e7f3ff;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #0d6efd;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #fff8e1;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        .info-box {
            background-color: #e8f5e9;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #4caf50;
        }

        /* コードハイライト */
        .code-block {
            background-color: #1e1e1e;
            color: white;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
        }

        /* テーブル */
        .table {
            margin: 1.5rem 0;
        }

        .table thead {
            background-color: #0d6efd;
            color: white;
        }

        /* リスト */
        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        li {
            margin: 0.5rem 0;
        }

        /* ボタン */
        .btn-primary {
            background-color: #0d6efd;
            border-color: #0d6efd;
        }

        .btn-primary:hover {
            background-color: #0b5ed7;
            border-color: #0a58ca;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <strong>クラウドコンピューティング学習教材</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="cloud-computing-learning-material-1.html">
                                第1章: クラウドコンピューティングの基礎概念
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="cloud-computing-learning-material-2.html">
                                第2章: 主要クラウドプロバイダーの比較とアカウント作成
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="cloud-computing-learning-material-3.html">
                                第3章: AWS基礎サービス
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="cloud-computing-learning-material-4.html">
                                第4章: Azure基礎サービス
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="cloud-computing-learning-material-5.html">
                                第5章: GCP基礎サービス
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="cloud-computing-learning-material-6.html">
                                第6章: クラウドネットワーキングとセキュリティ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="cloud-computing-learning-material-7.html">
                                第7章: クラウドアーキテクチャパターンと設計原則
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="cloud-computing-learning-material-8.html">
                                第8章: サーバーレスコンピューティングとコンテナサービス
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="cloud-computing-learning-material-9.html">
                                第9章: クラウドコスト管理とモニタリング
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="cloud-computing-learning-material-10.html">
                                第10章: クラウドベストプラクティスと実践プロジェクト
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- 章ヘッダー -->
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第4章: Azure基礎サービス（Virtual Machines、Blob Storage、SQL Database）</h1>
                </div>

                <div id="chapter4">
                    <!-- 章タイトル -->
                    <h2 class="chapter-title">Microsoft Azureの主要サービスを理解する</h2>

                    <!-- 学習目標 -->
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>Azureのリソース階層（サブスクリプション、リソースグループ、リソース）を理解する</li>
                            <li>Azure Virtual Machines（VM）の作成・管理・操作方法を習得する</li>
                            <li>Azure Blob Storageの種類と使い分けを理解する</li>
                            <li>Azure SQL Databaseの作成と接続方法を習得する</li>
                            <li>ネットワークセキュリティグループ（NSG）によるアクセス制御を理解する</li>
                            <li>Azureポータルの効果的な使い方を身につける</li>
                            <li>Azure Resource Manager（ARM）テンプレートの基礎を学ぶ</li>
                            <li>AzureとAWSのサービス対応関係を把握する</li>
                        </ul>
                    </div>

                    <!-- セクション4.1 -->
                    <h3 class="section-title">4.1 Azureのリソース階層とリソースグループ</h3>

                    <h4>Azureのリソース階層構造</h4>
                    <p>
                        Microsoft Azureは、<strong>階層的なリソース管理構造</strong>を採用しています。この構造を理解することは、Azureを効果的に使用するために非常に重要です。
                    </p>

                    <div class="mermaid">
                        graph TD
                            A[管理グループ<br/>Management Groups] --> B[サブスクリプション<br/>Subscription]
                            B --> C[リソースグループ<br/>Resource Group]
                            C --> D[リソース<br/>Resources]
                            D --> E1[Virtual Machine]
                            D --> E2[Storage Account]
                            D --> E3[SQL Database]
                            D --> E4[その他のサービス]
                    </div>

                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>階層レベル</th>
                                <th>説明</th>
                                <th>用途</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>管理グループ</strong><br/>(Management Groups)</td>
                                <td>複数のサブスクリプションをまとめて管理する最上位のコンテナ</td>
                                <td>大規模組織で複数のサブスクリプションを統括管理する場合に使用</td>
                            </tr>
                            <tr>
                                <td><strong>サブスクリプション</strong><br/>(Subscription)</td>
                                <td>Azureサービスの利用契約単位。課金の基本単位</td>
                                <td>環境分離（本番/開発）、部門別管理、コスト管理</td>
                            </tr>
                            <tr>
                                <td><strong>リソースグループ</strong><br/>(Resource Group)</td>
                                <td>関連するリソースをまとめて管理する論理的なコンテナ</td>
                                <td>プロジェクト単位、アプリケーション単位でリソースをグループ化</td>
                            </tr>
                            <tr>
                                <td><strong>リソース</strong><br/>(Resources)</td>
                                <td>実際のAzureサービスのインスタンス（VM、ストレージ等）</td>
                                <td>具体的なクラウドサービスの実体</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>リソースグループの重要性</h4>
                    <p>
                        <strong>リソースグループは、Azureにおける最も重要な概念の1つ</strong>です。リソースグループを使うことで、関連するリソースを一括管理できます。
                    </p>

                    <ul>
                        <li><strong>一括管理</strong>: リソースグループ全体を一度に削除、移動、タグ付けできる</li>
                        <li><strong>アクセス制御</strong>: リソースグループ単位でIAMポリシーを適用できる</li>
                        <li><strong>コスト管理</strong>: リソースグループ単位でコストを追跡できる</li>
                        <li><strong>デプロイ管理</strong>: ARMテンプレートでリソースグループ全体をデプロイできる</li>
                    </ul>

                    <div class="info-box">
                        <h6>リソースグループのベストプラクティス</h6>
                        <ul>
                            <li><strong>同じライフサイクルのリソースをグループ化</strong>: 一緒に作成・削除されるリソースを同じグループに配置</li>
                            <li><strong>命名規則の統一</strong>: 例：rg-projectname-environment-region（rg-webapp-prod-eastus）</li>
                            <li><strong>リージョンの選択</strong>: リソースグループ自体にリージョンを指定するが、グループ内のリソースは異なるリージョンに配置可能</li>
                            <li><strong>タグの活用</strong>: 環境（Environment）、プロジェクト（Project）、コストセンター（CostCenter）などのタグを付与</li>
                        </ul>
                    </div>

                    <!-- セクション4.2 -->
                    <h3 class="section-title">4.2 Azure Virtual Machines（VM）</h3>

                    <h4>Azure Virtual Machinesの概要</h4>
                    <p>
                        <strong>Azure Virtual Machines（VM）は、Azureのコンピューティングサービスで、AWSのEC2に相当</strong>します。Windows ServerやLinuxの仮想マシンをクラウド上で実行できます。
                    </p>

                    <h4>VMサイズの選択</h4>
                    <p>
                        AzureのVMは、用途に応じて様々なシリーズとサイズが用意されています。
                    </p>

                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>シリーズ</th>
                                <th>用途</th>
                                <th>特徴</th>
                                <th>具体例</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>B シリーズ</strong></td>
                                <td>バースト可能な汎用</td>
                                <td>通常は低負荷だが、時々高負荷になるワークロード</td>
                                <td>B1s, B2s, B2ms</td>
                            </tr>
                            <tr>
                                <td><strong>D シリーズ</strong></td>
                                <td>汎用</td>
                                <td>バランスの取れたCPU/メモリ比率</td>
                                <td>D2s_v3, D4s_v3</td>
                            </tr>
                            <tr>
                                <td><strong>E シリーズ</strong></td>
                                <td>メモリ最適化</td>
                                <td>高メモリ容量が必要なアプリケーション</td>
                                <td>E2s_v3, E4s_v3</td>
                            </tr>
                            <tr>
                                <td><strong>F シリーズ</strong></td>
                                <td>コンピューティング最適化</td>
                                <td>高CPUパフォーマンスが必要なワークロード</td>
                                <td>F2s_v2, F4s_v2</td>
                            </tr>
                            <tr>
                                <td><strong>N シリーズ</strong></td>
                                <td>GPU搭載</td>
                                <td>機械学習、グラフィックス処理</td>
                                <td>NC6, NV6</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>Azure VMの作成手順</h4>
                    <p>
                        Azureポータルを使用してVMを作成する基本的な手順を説明します。
                    </p>

                    <div class="exercise-container">
                        <h5>実習 4-1: Azure Virtual Machineの作成</h5>
                        <p><strong>ステップ1: Azureポータルにログイン</strong></p>
                        <ol>
                            <li>ブラウザで <code>https://portal.azure.com</code> にアクセス</li>
                            <li>Microsoftアカウントでサインイン</li>
                        </ol>

                        <p><strong>ステップ2: Virtual Machineの作成開始</strong></p>
                        <ol>
                            <li>左上の「リソースの作成」をクリック</li>
                            <li>検索ボックスに「Virtual Machine」と入力して選択</li>
                            <li>「作成」ボタンをクリック</li>
                        </ol>

                        <p><strong>ステップ3: 基本設定の入力</strong></p>
                        <pre><code class="language-plaintext">サブスクリプション: （自分のサブスクリプションを選択）
リソースグループ: rg-test-vm（新規作成）
仮想マシン名: vm-ubuntu-test
地域: Japan East
可用性オプション: インフラストラクチャ冗長は不要
イメージ: Ubuntu Server 22.04 LTS
サイズ: Standard_B1s（1 vCPU、1 GiBメモリ）- 無料枠対象

管理者アカウント:
  認証の種類: SSH公開キー
  ユーザー名: azureuser
  SSH公開キーのソース: 新しいキーペアの生成
  キーペア名: vm-ubuntu-test_key</code></pre>

                        <p><strong>ステップ4: ネットワーク設定</strong></p>
                        <pre><code class="language-plaintext">仮想ネットワーク: （自動作成されるものを使用）
サブネット: default
パブリックIP: （自動作成）
NICネットワークセキュリティグループ: 基本
パブリック受信ポート: 選択したポートを許可
受信ポートの選択: SSH (22)</code></pre>

                        <p><strong>ステップ5: 確認と作成</strong></p>
                        <ol>
                            <li>「確認および作成」タブに移動</li>
                            <li>設定内容を確認</li>
                            <li>「作成」ボタンをクリック</li>
                            <li>秘密キーのダウンロードを促されるので、ダウンロードして安全な場所に保管</li>
                        </ol>

                        <p><strong>ステップ6: VMへの接続</strong></p>
                        <pre><code class="language-bash"># ダウンロードした秘密キーのパーミッション変更（macOS/Linux）
chmod 400 ~/Downloads/vm-ubuntu-test_key.pem

# SSHで接続
ssh -i ~/Downloads/vm-ubuntu-test_key.pem azureuser@<パブリックIP>

# 接続確認
hostname
uname -a</code></pre>

                        <p><strong>ステップ7: VMの停止と削除</strong></p>
                        <pre><code class="language-bash"># Azureポータルで：
# 1. Virtual Machinesサービスを開く
# 2. 作成したVMを選択
# 3. 「停止」ボタンをクリック（課金を停止）
# 4. 削除する場合は「削除」をクリック
# 5. リソースグループごと削除する場合は、リソースグループを開いて「リソースグループの削除」を選択</code></pre>
                    </div>

                    <div class="warning">
                        <h6>重要：コスト管理</h6>
                        <p>
                            VMは<strong>実行中は課金が発生</strong>します。使用していない場合は必ず「停止（割り当て解除）」を実行してください。単に停止しただけでは一部の課金が継続するため、「割り当て解除」状態にする必要があります。Azureポータルの「停止」ボタンは自動的に割り当て解除を行います。
                        </p>
                    </div>

                    <h4>ネットワークセキュリティグループ（NSG）</h4>
                    <p>
                        <strong>NSG（Network Security Group）は、Azureの仮想ファイアウォール機能で、AWSのセキュリティグループに相当</strong>します。インバウンド・アウトバウンドのトラフィックを制御します。
                    </p>

                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>項目</th>
                                <th>説明</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>優先度</strong></td>
                                <td>100〜4096の値。数値が小さいほど優先度が高い</td>
                            </tr>
                            <tr>
                                <td><strong>ソース/宛先</strong></td>
                                <td>IPアドレス、サービスタグ、アプリケーションセキュリティグループ</td>
                            </tr>
                            <tr>
                                <td><strong>プロトコル</strong></td>
                                <td>TCP、UDP、ICMP、Any</td>
                            </tr>
                            <tr>
                                <td><strong>ポート範囲</strong></td>
                                <td>単一ポート（80）、範囲（1000-2000）、複数（80,443）</td>
                            </tr>
                            <tr>
                                <td><strong>アクション</strong></td>
                                <td>許可（Allow）または拒否（Deny）</td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- セクション4.3 -->
                    <h3 class="section-title">4.3 Azure Blob Storage</h3>

                    <h4>Azure Blob Storageの概要</h4>
                    <p>
                        <strong>Azure Blob Storageは、AWSのS3に相当するオブジェクトストレージサービス</strong>です。大量の非構造化データ（画像、動画、ログファイル、バックアップ等）を保存できます。
                    </p>

                    <h4>Blobの種類</h4>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Blob種類</th>
                                <th>説明</th>
                                <th>用途</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Block Blob</strong></td>
                                <td>テキストやバイナリデータを格納。最大4.75TBまで</td>
                                <td>画像、動画、ドキュメント、バックアップ（最も一般的）</td>
                            </tr>
                            <tr>
                                <td><strong>Page Blob</strong></td>
                                <td>ランダムアクセス用。最大8TBまで</td>
                                <td>仮想マシンのディスク（VHDファイル）</td>
                            </tr>
                            <tr>
                                <td><strong>Append Blob</strong></td>
                                <td>追記専用。最大195GB</td>
                                <td>ログファイルの連続書き込み</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>アクセス層（Access Tiers）</h4>
                    <p>
                        Azure Blob Storageには、<strong>データのアクセス頻度に応じた3つのアクセス層</strong>があり、コストを最適化できます。
                    </p>

                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>アクセス層</th>
                                <th>特徴</th>
                                <th>ストレージコスト</th>
                                <th>アクセスコスト</th>
                                <th>用途</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Hot</strong></td>
                                <td>頻繁にアクセスされるデータ</td>
                                <td>高い</td>
                                <td>低い</td>
                                <td>Webサイトの画像、動画、頻繁に使用するファイル</td>
                            </tr>
                            <tr>
                                <td><strong>Cool</strong></td>
                                <td>まれにアクセスされるデータ（30日以上保存）</td>
                                <td>中程度</td>
                                <td>中程度</td>
                                <td>短期バックアップ、災害復旧データ</td>
                            </tr>
                            <tr>
                                <td><strong>Archive</strong></td>
                                <td>ほとんどアクセスされないデータ（180日以上保存）</td>
                                <td>非常に低い</td>
                                <td>非常に高い</td>
                                <td>長期アーカイブ、コンプライアンスデータ</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="exercise-container">
                        <h5>実習 4-2: Azure Blob Storageの作成とファイルアップロード</h5>

                        <p><strong>ステップ1: ストレージアカウントの作成</strong></p>
                        <ol>
                            <li>Azureポータルで「リソースの作成」→「ストレージアカウント」</li>
                            <li>基本設定を入力：
                                <pre><code class="language-plaintext">リソースグループ: rg-storage-test（新規作成）
ストレージアカウント名: mystorageaccount12345（全世界で一意）
地域: Japan East
パフォーマンス: Standard
冗長性: ローカル冗長ストレージ（LRS）</code></pre>
                            </li>
                            <li>「確認および作成」→「作成」</li>
                        </ol>

                        <p><strong>ステップ2: Blobコンテナーの作成</strong></p>
                        <ol>
                            <li>作成したストレージアカウントを開く</li>
                            <li>左メニューから「コンテナー」を選択</li>
                            <li>「+ コンテナー」をクリック</li>
                            <li>名前: <code>images</code>、パブリックアクセスレベル: プライベート</li>
                            <li>「作成」をクリック</li>
                        </ol>

                        <p><strong>ステップ3: ファイルのアップロード</strong></p>
                        <ol>
                            <li>作成した「images」コンテナーを開く</li>
                            <li>「アップロード」ボタンをクリック</li>
                            <li>ファイルを選択してアップロード</li>
                            <li>アップロードされたファイルをクリックしてプロパティを確認</li>
                        </ol>

                        <p><strong>ステップ4: Azure CLI を使用したアップロード</strong></p>
                        <pre><code class="language-bash"># Azure CLIのインストール（未インストールの場合）
# https://learn.microsoft.com/ja-jp/cli/azure/install-azure-cli

# Azureにログイン
az login

# ファイルのアップロード
az storage blob upload \
    --account-name mystorageaccount12345 \
    --container-name images \
    --name sample.jpg \
    --file ./sample.jpg \
    --auth-mode login

# Blob一覧の表示
az storage blob list \
    --account-name mystorageaccount12345 \
    --container-name images \
    --output table \
    --auth-mode login</code></pre>

                        <p><strong>ステップ5: アクセス層の変更</strong></p>
                        <pre><code class="language-bash"># Blobのアクセス層をCoolに変更
az storage blob set-tier \
    --account-name mystorageaccount12345 \
    --container-name images \
    --name sample.jpg \
    --tier Cool \
    --auth-mode login</code></pre>
                    </div>

                    <!-- セクション4.4 -->
                    <h3 class="section-title">4.4 Azure SQL Database</h3>

                    <h4>Azure SQL Databaseの概要</h4>
                    <p>
                        <strong>Azure SQL Databaseは、フルマネージドなリレーショナルデータベースサービスで、AWSのRDSに相当</strong>します。Microsoft SQL Serverをベースとしており、高可用性、自動バックアップ、自動パッチ適用などの機能を提供します。
                    </p>

                    <h4>サービス階層</h4>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>サービス階層</th>
                                <th>特徴</th>
                                <th>用途</th>
                                <th>価格帯</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Basic</strong></td>
                                <td>小規模、低頻度のワークロード<br/>最大2GBのストレージ</td>
                                <td>開発・テスト環境、小規模アプリ</td>
                                <td>低価格</td>
                            </tr>
                            <tr>
                                <td><strong>Standard</strong></td>
                                <td>中程度のI/Oパフォーマンス<br/>最大1TBのストレージ</td>
                                <td>ほとんどのビジネスアプリケーション</td>
                                <td>中価格</td>
                            </tr>
                            <tr>
                                <td><strong>Premium</strong></td>
                                <td>高I/Oパフォーマンス<br/>最大4TBのストレージ</td>
                                <td>ミッションクリティカルなアプリケーション</td>
                                <td>高価格</td>
                            </tr>
                            <tr>
                                <td><strong>General Purpose</strong></td>
                                <td>仮想コアベース、バランスの取れたパフォーマンス</td>
                                <td>汎用的なワークロード</td>
                                <td>柔軟な価格設定</td>
                            </tr>
                            <tr>
                                <td><strong>Business Critical</strong></td>
                                <td>仮想コアベース、最高のパフォーマンスと可用性</td>
                                <td>ミッションクリティカル、高可用性が必要</td>
                                <td>高価格</td>
                            </tr>
                            <tr>
                                <td><strong>Hyperscale</strong></td>
                                <td>最大100TBまでスケール可能</td>
                                <td>大規模データベース</td>
                                <td>使用量に応じた価格</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="exercise-container">
                        <h5>実習 4-3: Azure SQL Databaseの作成と接続</h5>

                        <p><strong>ステップ1: SQL Databaseの作成</strong></p>
                        <ol>
                            <li>Azureポータルで「リソースの作成」→「SQL Database」</li>
                            <li>基本設定を入力：
                                <pre><code class="language-plaintext">リソースグループ: rg-sqldb-test（新規作成）
データベース名: sampledb
サーバー: 新規作成
  サーバー名: myazuresqlserver12345（全世界で一意）
  場所: Japan East
  認証方法: SQL認証を使用する
  サーバー管理者ログイン: sqladmin
  パスワード: （強力なパスワードを設定）

コンピューティング + ストレージ: データベースの構成
  → サービス階層: Basic（5DTU、2GB）を選択</code></pre>
                            </li>
                            <li>「確認および作成」→「作成」</li>
                        </ol>

                        <p><strong>ステップ2: ファイアウォール規則の設定</strong></p>
                        <ol>
                            <li>作成したSQL Serverを開く</li>
                            <li>左メニューから「ファイアウォールと仮想ネットワーク」を選択</li>
                            <li>「クライアントIPの追加」をクリック（自分のIPアドレスを追加）</li>
                            <li>「Azureサービスおよびリソースにこのサーバーへのアクセスを許可する」をオンにする</li>
                            <li>「保存」をクリック</li>
                        </ol>

                        <p><strong>ステップ3: Azure Data Studioで接続（推奨）</strong></p>
                        <pre><code class="language-plaintext"># Azure Data Studioのダウンロード
https://aka.ms/azuredatastudio

接続情報:
  サーバー: myazuresqlserver12345.database.windows.net
  認証の種類: SQL ログイン
  ユーザー名: sqladmin
  パスワード: （設定したパスワード）
  データベース: sampledb</code></pre>

                        <p><strong>ステップ4: サンプルテーブルの作成とデータ挿入</strong></p>
                        <pre><code class="language-sql">-- テーブル作成
CREATE TABLE Users (
    UserID INT PRIMARY KEY IDENTITY(1,1),
    Username NVARCHAR(50) NOT NULL,
    Email NVARCHAR(100) NOT NULL,
    CreatedAt DATETIME DEFAULT GETDATE()
);

-- データ挿入
INSERT INTO Users (Username, Email) VALUES
('alice', 'alice@example.com'),
('bob', 'bob@example.com'),
('charlie', 'charlie@example.com');

-- データ確認
SELECT * FROM Users;</code></pre>

                        <p><strong>ステップ5: Azure CLIからの接続</strong></p>
                        <pre><code class="language-bash"># sqlcmdのインストール（必要に応じて）
# Linux/macOS: https://learn.microsoft.com/ja-jp/sql/tools/sqlcmd/sqlcmd-utility

# 接続
sqlcmd -S myazuresqlserver12345.database.windows.net -d sampledb -U sqladmin -P 'YourPassword'

# クエリ実行
1> SELECT * FROM Users;
2> GO</code></pre>
                    </div>

                    <h4>自動チューニングとインテリジェントパフォーマンス</h4>
                    <p>
                        Azure SQL Databaseには、<strong>AIを活用した自動チューニング機能</strong>があり、パフォーマンスを自動的に最適化します。
                    </p>

                    <ul>
                        <li><strong>自動インデックス管理</strong>: クエリパフォーマンスを分析し、必要なインデックスを自動作成・削除</li>
                        <li><strong>プラン修正の強制</strong>: 実行プランの退行を検出し、自動的に修正</li>
                        <li><strong>Query Performance Insight</strong>: リソース消費の多いクエリを特定</li>
                        <li><strong>自動バックアップ</strong>: ポイントインタイムリストア（PITR）が可能（最大35日間）</li>
                    </ul>

                    <!-- セクション4.5 -->
                    <h3 class="section-title">4.5 Azure Resource Manager（ARM）テンプレート</h3>

                    <h4>ARMテンプレートとは</h4>
                    <p>
                        <strong>Azure Resource Manager（ARM）テンプレートは、AzureのInfrastructure as Code（IaC）ソリューション</strong>で、AWSのCloudFormationに相当します。JSON形式でインフラを定義します。
                    </p>

                    <h4>ARMテンプレートの基本構造</h4>
                    <pre><code class="language-json">{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "vmName": {
      "type": "string",
      "defaultValue": "myVM",
      "metadata": {
        "description": "仮想マシンの名前"
      }
    },
    "adminUsername": {
      "type": "string",
      "metadata": {
        "description": "管理者ユーザー名"
      }
    }
  },
  "variables": {
    "nicName": "[concat(parameters('vmName'), '-nic')]",
    "vnetName": "[concat(parameters('vmName'), '-vnet')]"
  },
  "resources": [
    {
      "type": "Microsoft.Network/virtualNetworks",
      "apiVersion": "2021-02-01",
      "name": "[variables('vnetName')]",
      "location": "[resourceGroup().location]",
      "properties": {
        "addressSpace": {
          "addressPrefixes": ["10.0.0.0/16"]
        }
      }
    }
  ],
  "outputs": {
    "vmId": {
      "type": "string",
      "value": "[resourceId('Microsoft.Compute/virtualMachines', parameters('vmName'))]"
    }
  }
}</code></pre>

                    <!-- セクション4.6 -->
                    <h3 class="section-title">4.6 AzureとAWSのサービス対応表</h3>

                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>カテゴリ</th>
                                <th>Azure</th>
                                <th>AWS</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>仮想マシン</strong></td>
                                <td>Virtual Machines</td>
                                <td>EC2</td>
                            </tr>
                            <tr>
                                <td><strong>オブジェクトストレージ</strong></td>
                                <td>Blob Storage</td>
                                <td>S3</td>
                            </tr>
                            <tr>
                                <td><strong>リレーショナルDB</strong></td>
                                <td>Azure SQL Database</td>
                                <td>RDS</td>
                            </tr>
                            <tr>
                                <td><strong>NoSQL DB</strong></td>
                                <td>Cosmos DB</td>
                                <td>DynamoDB</td>
                            </tr>
                            <tr>
                                <td><strong>コンテナ</strong></td>
                                <td>Container Instances / AKS</td>
                                <td>ECS / EKS</td>
                            </tr>
                            <tr>
                                <td><strong>サーバーレス</strong></td>
                                <td>Azure Functions</td>
                                <td>Lambda</td>
                            </tr>
                            <tr>
                                <td><strong>ロードバランサー</strong></td>
                                <td>Load Balancer / Application Gateway</td>
                                <td>ELB / ALB</td>
                            </tr>
                            <tr>
                                <td><strong>CDN</strong></td>
                                <td>Azure CDN</td>
                                <td>CloudFront</td>
                            </tr>
                            <tr>
                                <td><strong>DNS</strong></td>
                                <td>Azure DNS</td>
                                <td>Route 53</td>
                            </tr>
                            <tr>
                                <td><strong>IaC</strong></td>
                                <td>ARM Templates / Bicep</td>
                                <td>CloudFormation</td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- 理解度確認 -->
                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>Azureのリソース階層を上位から順番に並べてください。</li>
                            <li>リソースグループの役割と利点を3つ説明してください。</li>
                            <li>Azure VMのBシリーズとDシリーズの違いは何ですか？</li>
                            <li>Azure Blob Storageの3つのアクセス層（Hot、Cool、Archive）の使い分けを説明してください。</li>
                            <li>Block Blob、Page Blob、Append Blobの違いと用途を説明してください。</li>
                            <li>Azure SQL DatabaseのBasic、Standard、Premium階層の主な違いは何ですか？</li>
                            <li>ネットワークセキュリティグループ（NSG）とは何ですか？AWSの何に相当しますか？</li>
                            <li>ARMテンプレートを使用する利点を3つ挙げてください。</li>
                        </ol>

                        <h6>解答のポイント</h6>
                        <details>
                            <summary>クリックして解答例を表示</summary>
                            <ol>
                                <li><strong>リソース階層</strong>: 管理グループ → サブスクリプション → リソースグループ → リソース</li>
                                <li><strong>リソースグループの利点</strong>: (1)関連リソースの一括管理、(2)アクセス制御の一元化、(3)コスト追跡の簡素化</li>
                                <li><strong>BシリーズとDシリーズ</strong>: Bシリーズはバースト可能で通常は低負荷だが時々高負荷になるワークロード向け、Dシリーズはバランスの取れた汎用ワークロード向け</li>
                                <li><strong>アクセス層</strong>: Hot=頻繁アクセス・高ストレージコスト、Cool=まれなアクセス・中コスト（30日以上）、Archive=ほぼアクセスなし・低コスト（180日以上）</li>
                                <li><strong>Blobの種類</strong>: Block Blob=汎用（画像・動画）、Page Blob=ランダムアクセス（VMディスク）、Append Blob=追記専用（ログ）</li>
                            </ol>
                        </details>
                    </div>

                    <!-- まとめ -->
                    <h3 class="section-title">4.7 本章のまとめ</h3>
                    <div class="info-box">
                        <h6>重要ポイント</h6>
                        <ul>
                            <li>Azureはリソースグループを中心とした階層的なリソース管理構造を持つ</li>
                            <li>Azure Virtual Machinesは用途に応じて様々なシリーズ（B、D、E、F、N等）から選択できる</li>
                            <li>Azure Blob Storageは3つのアクセス層（Hot、Cool、Archive）でコスト最適化が可能</li>
                            <li>Azure SQL Databaseは自動チューニングやインテリジェントパフォーマンス機能を提供</li>
                            <li>NSG（ネットワークセキュリティグループ）により、きめ細かいアクセス制御が可能</li>
                            <li>ARMテンプレートでInfrastructure as Codeを実現できる</li>
                            <li>Azure、AWS、GCPには対応するサービスが存在し、概念は共通している部分が多い</li>
                        </ul>
                    </div>

                    <!-- 章間ナビゲーション -->
                    <div class="d-flex justify-content-between mt-5 mb-4">
                        <a href="cloud-computing-learning-material-3.html" class="btn btn-secondary">← 前の章へ</a>
                        <a href="cloud-computing-learning-material-5.html" class="btn btn-primary">次の章へ →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- フッター -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>

    <!-- Mermaid.js 初期化 -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>
