<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevOps学習教材 第7章 - クラウドプラットフォームとDevOps</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; padding-top: 56px; }
        .navbar { background-color: #0d6efd; }
        .sidebar { position: sticky; top: 70px; height: calc(100vh - 70px); overflow-y: auto; }
        .chapter-title { color: #0d6efd; margin-top: 1.5rem; margin-bottom: 1rem; border-bottom: 2px solid #0d6efd; padding-bottom: 0.5rem; }
        .section-title { color: #0dcaf0; margin-top: 1.2rem; margin-bottom: 0.8rem; }
        .quiz-container, .exercise-container, .highlight, .info-box { border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; }
        .quiz-container { background-color: #cfe2ff; border-left: 4px solid #0d6efd; }
        .exercise-container { background-color: #f3e5f5; border-left: 4px solid #9c27b0; }
        .highlight { background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; }
        .info-box { background-color: #e7f3ff; border-left: 4px solid #0d6efd; padding: 1rem; }
        .code-block { background-color: #1e1e1e; color: white; border-radius: 5px; padding: 1rem; margin: 1rem 0; }
        .nav-link.active { background-color: #0d6efd !important; color: white !important; }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">DevOps学習教材</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="devops-learning-material-6.html">第6章</a></li>
                    <li class="nav-item"><a class="nav-link active" href="#chapter7">第7章</a></li>
                    <li class="nav-item"><a class="nav-link" href="devops-learning-material-8.html">第8章</a></li>
                    <li class="nav-item"><a class="nav-link" href="README.html">目次</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item"><a class="nav-link active" href="#chapter7">第7章: クラウドとDevOps</a></li>
                        <li class="nav-item"><a class="nav-link" href="#section7-1">7.1 クラウドネイティブ</a></li>
                        <li class="nav-item"><a class="nav-link" href="#section7-2">7.2 AWS DevOps</a></li>
                        <li class="nav-item"><a class="nav-link" href="#section7-3">7.3 Azure/GCP DevOps</a></li>
                    </ul>
                </div>
            </nav>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第7章: クラウドプラットフォームとDevOps</h1>
                </div>

                <div id="chapter7">
                    <h2 class="chapter-title">AWS/Azure/GCPの活用</h2>

                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>クラウドネイティブの概念を理解する</li>
                            <li>AWS、Azure、GCPの主要DevOpsサービスを学ぶ</li>
                            <li>マネージドKubernetesサービスを比較する</li>
                            <li>サーバーレスアーキテクチャとDevOpsの関係を理解する</li>
                            <li>クラウドネイティブCI/CDパイプラインを構築する</li>
                        </ul>
                    </div>

                    <h3 class="section-title" id="section7-1">7.1 クラウドネイティブとは</h3>

                    <p>クラウドネイティブは、クラウド環境の特性を最大限活用するために設計されたアプリケーション開発・運用のアプローチです。</p>

                    <div class="info-box">
                        <h6>クラウドネイティブの特徴</h6>
                        <ul>
                            <li><strong>マイクロサービス</strong>: 小さな独立したサービスの集合</li>
                            <li><strong>コンテナ化</strong>: Dockerなどでアプリケーションをパッケージング</li>
                            <li><strong>動的オーケストレーション</strong>: Kubernetesなどで自動管理</li>
                            <li><strong>宣言的API</strong>: あるべき状態を宣言（Infrastructure as Code）</li>
                            <li><strong>継続的デリバリー</strong>: 自動化されたCI/CDパイプライン</li>
                        </ul>
                    </div>

                    <h4>クラウドネイティブのメリット</h4>

                    <div class="mermaid">
                        flowchart LR
                            A["クラウドネイティブ"] --> B["スケーラビリティ"]
                            A --> C["弾力性"]
                            A --> D["可用性"]
                            A --> E["コスト最適化"]

                            B --> B1["需要に応じて<br/>自動スケール"]
                            C --> C1["障害時の<br/>自動復旧"]
                            D --> D1["複数リージョンで<br/>冗長化"]
                            E --> E1["使った分だけ<br/>課金"]
                    </div>

                    <h3 class="section-title" id="section7-2">7.2 AWS DevOpsサービス</h3>

                    <p>AWSは包括的なDevOpsサービスを提供しており、CI/CDからコンテナ管理まで幅広くカバーしています。</p>

                    <h4>AWS DevOpsツールチェーン</h4>

                    <div class="mermaid">
                        flowchart LR
                            A["CodeCommit<br/>（ソース管理）"] --> B["CodeBuild<br/>（ビルド）"]
                            B --> C["CodeDeploy<br/>（デプロイ）"]
                            C --> D["CloudWatch<br/>（モニタリング）"]

                            E["CodePipeline"] -.統合.- A
                            E -.統合.- B
                            E -.統合.- C
                    </div>

                    <table class="table table-bordered">
                        <thead class="table-primary">
                            <tr><th>サービス</th><th>用途</th><th>特徴</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>CodePipeline</strong></td>
                                <td>CI/CDオーケストレーション</td>
                                <td>各ステージを自動化し、エンドツーエンドのパイプラインを構築</td>
                            </tr>
                            <tr>
                                <td><strong>CodeBuild</strong></td>
                                <td>ビルド・テスト</td>
                                <td>マネージドビルドサービス、従量課金</td>
                            </tr>
                            <tr>
                                <td><strong>CodeDeploy</strong></td>
                                <td>デプロイメント</td>
                                <td>EC2、Lambda、ECSへの自動デプロイ</td>
                            </tr>
                            <tr>
                                <td><strong>ECS/Fargate</strong></td>
                                <td>コンテナ実行</td>
                                <td>サーバーレスコンテナ実行環境</td>
                            </tr>
                            <tr>
                                <td><strong>EKS</strong></td>
                                <td>Kubernetes</td>
                                <td>マネージドKubernetesサービス</td>
                            </tr>
                            <tr>
                                <td><strong>Lambda</strong></td>
                                <td>サーバーレス</td>
                                <td>イベント駆動の関数実行</td>
                            </tr>
                            <tr>
                                <td><strong>CloudWatch</strong></td>
                                <td>モニタリング</td>
                                <td>ログ、メトリクス、アラームの統合管理</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>AWS CodePipelineの例</h4>

                    <pre class="code-block"><code class="language-yaml"># buildspec.yml（CodeBuildの設定）
version: 0.2

phases:
  pre_build:
    commands:
      - echo Logging in to Amazon ECR...
      - aws ecr get-login-password --region $AWS_DEFAULT_REGION | docker login --username AWS --password-stdin $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com
  build:
    commands:
      - echo Build started on `date`
      - echo Building the Docker image...
      - docker build -t $IMAGE_REPO_NAME:$IMAGE_TAG .
      - docker tag $IMAGE_REPO_NAME:$IMAGE_TAG $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com/$IMAGE_REPO_NAME:$IMAGE_TAG
  post_build:
    commands:
      - echo Build completed on `date`
      - echo Pushing the Docker image...
      - docker push $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com/$IMAGE_REPO_NAME:$IMAGE_TAG
artifacts:
  files:
    - '**/*'</code></pre>

                    <h3 class="section-title" id="section7-3">7.3 Azure/GCP DevOpsサービス</h3>

                    <h4>Azure DevOps</h4>

                    <div class="info-box">
                        <h6>Azure DevOpsの主要サービス</h6>
                        <ul>
                            <li><strong>Azure Repos</strong>: Gitリポジトリ</li>
                            <li><strong>Azure Pipelines</strong>: CI/CD（マルチクラウド対応）</li>
                            <li><strong>Azure Boards</strong>: アジャイルプロジェクト管理</li>
                            <li><strong>Azure Artifacts</strong>: パッケージ管理</li>
                            <li><strong>AKS</strong>: マネージドKubernetesサービス</li>
                            <li><strong>Azure Functions</strong>: サーバーレス関数</li>
                        </ul>
                    </div>

                    <h4>Google Cloud DevOps</h4>

                    <div class="info-box">
                        <h6>GCPの主要サービス</h6>
                        <ul>
                            <li><strong>Cloud Build</strong>: CI/CDビルドサービス</li>
                            <li><strong>GKE</strong>: マネージドKubernetes（Googleが開発）</li>
                            <li><strong>Cloud Run</strong>: サーバーレスコンテナ</li>
                            <li><strong>Cloud Deploy</strong>: 継続的デリバリーパイプライン</li>
                            <li><strong>Cloud Functions</strong>: サーバーレス関数</li>
                            <li><strong>Cloud Monitoring/Logging</strong>: 統合監視</li>
                        </ul>
                    </div>

                    <h4>マネージドKubernetesサービスの比較</h4>

                    <table class="table table-bordered">
                        <thead class="table-primary">
                            <tr><th>観点</th><th>AWS EKS</th><th>Azure AKS</th><th>GCP GKE</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>価格</td><td>$0.10/時間</td><td>無料</td><td>$0.10/時間</td></tr>
                            <tr><td>統合</td><td>AWSサービス</td><td>Azureサービス</td><td>GCPサービス</td></tr>
                            <tr><td>自動スケーリング</td><td>Cluster Autoscaler</td><td>Cluster Autoscaler</td><td>GKE Autopilot</td></tr>
                            <tr><td>特徴</td><td>Fargateサポート</td><td>Azure AD統合</td><td>最も成熟</td></tr>
                        </tbody>
                    </table>

                    <h4>サーバーレスとDevOps</h4>

                    <p>サーバーレスアーキテクチャでは、サーバー管理が不要でイベント駆動の関数実行が可能です。</p>

                    <div class="mermaid">
                        flowchart LR
                            A["イベント<br/>（API、S3、SNS等）"] --> B["Lambda関数<br/>自動実行"]
                            B --> C["処理結果<br/>（DB、S3等）"]
                            B --> D["自動スケール<br/>（同時実行数）"]
                    </div>

                    <pre class="code-block"><code class="language-python"># AWS Lambda関数の例（Python）
import json
import boto3

def lambda_handler(event, context):
    # S3イベントから情報を取得
    bucket = event['Records'][0]['s3']['bucket']['name']
    key = event['Records'][0]['s3']['object']['key']
    
    # 処理（例: 画像のリサイズ）
    print(f'Processing file: {bucket}/{key}')
    
    # DynamoDBに記録
    dynamodb = boto3.resource('dynamodb')
    table = dynamodb.Table('ProcessedFiles')
    table.put_item(Item={
        'file_name': key,
        'timestamp': context.timestamp
    })
    
    return {
        'statusCode': 200,
        'body': json.dumps('Processing complete')
    }</code></pre>

                    <div class="exercise-container">
                        <h5>実習 7-1: GitHub ActionsでAWSにデプロイ</h5>

                        <h6>GitHub ActionsからAWSへの自動デプロイパイプラインを構築します。</h6>

                        <pre class="code-block"><code class="language-yaml"># .github/workflows/deploy-to-aws.yml
name: Deploy to AWS

on:
  push:
    branches: [ main ]

env:
  AWS_REGION: ap-northeast-1
  ECR_REPOSITORY: myapp
  ECS_SERVICE: myapp-service
  ECS_CLUSTER: myapp-cluster
  ECS_TASK_DEFINITION: task-definition.json

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v2
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ${{ env.AWS_REGION }}

      - name: Login to Amazon ECR
        id: login-ecr
        uses: aws-actions/amazon-ecr-login@v1

      - name: Build and push Docker image
        env:
          ECR_REGISTRY: ${{ steps.login-ecr.outputs.registry }}
          IMAGE_TAG: ${{ github.sha }}
        run: |
          docker build -t $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG .
          docker push $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG

      - name: Deploy to ECS
        run: |
          aws ecs update-service \
            --cluster $ECS_CLUSTER \
            --service $ECS_SERVICE \
            --force-new-deployment</code></pre>
                    </div>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li><strong>Q: クラウドネイティブの5つの特徴を挙げてください。</strong><br>
                                A: マイクロサービス、コンテナ化、動的オーケストレーション、宣言的API、継続的デリバリー。</li>
                            <li><strong>Q: AWS CodePipelineの主な役割は何ですか？</strong><br>
                                A: CI/CDオーケストレーションで、CodeCommit、CodeBuild、CodeDeployなどの各ステージを統合し、エンドツーエンドのパイプラインを構築します。</li>
                            <li><strong>Q: マネージドKubernetesサービス（EKS、AKS、GKE）の共通のメリットは何ですか？</strong><br>
                                A: コントロールプレーンの管理が不要で、自動アップグレード、セキュリティパッチ適用、高可用性が提供され、クラウドサービスとの統合が容易です。</li>
                            <li><strong>Q: サーバーレスアーキテクチャのメリットを3つ挙げてください。</strong><br>
                                A: サーバー管理不要、自動スケーリング、使った分だけの従量課金。</li>
                            <li><strong>Q: AWSとAzureとGCPで無料のマネージドKubernetesサービスはどれですか？</strong><br>
                                A: Azure AKSは無料です（ワーカーノードの費用のみ）。EKSとGKEはコントロールプレーンに$0.10/時間の料金がかかります。</li>
                        </ol>
                    </div>

                    <h3 class="section-title">まとめ</h3>
                    <div class="highlight">
                        <h6>重要ポイント</h6>
                        <ul>
                            <li>クラウドネイティブはクラウドの特性を最大限活用する設計</li>
                            <li>AWS、Azure、GCPはそれぞれ包括的なDevOpsサービスを提供</li>
                            <li>マネージドKubernetesでコンテナオーケストレーションを簡素化</li>
                            <li>サーバーレスでインフラ管理の負担を削減</li>
                            <li>CI/CDパイプラインをクラウドサービスと統合</li>
                        </ul>
                    </div>

                    <p>次の章では、「モニタリング、ロギング、オブザーバビリティ」について学びます。Prometheus、Grafana、ELKスタックを活用したシステム監視の実践方法を習得します。</p>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="devops-learning-material-6.html" class="btn btn-secondary">← 前の章: IaC</a>
                        <a href="devops-learning-material-8.html" class="btn btn-primary">次の章: モニタリング →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script>mermaid.initialize({ startOnLoad: true, theme: 'default' });</script>
</body>
</html>
