<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSP学習教材 第1章 - 事前準備</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <!-- カスタムCSS -->
    <style>
        /* ベースレイアウト */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        /* ナビゲーション */
        .navbar {
            background-color: #f57c00;
        }

        /* サイドバー */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }

        /* タイトル */
        .chapter-title {
            color: #f57c00;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #f57c00;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #ff9800;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        /* コンテンツボックス */
        .quiz-container {
            background-color: #fff3e0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #f57c00;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        /* コードハイライト */
        .code-block {
            background-color: #1e1e1e;
            color: white;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        /* ナビゲーション */
        .nav-link.active {
            background-color: #f57c00 !important;
            color: white !important;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand">
                <strong>JSP学習教材</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="jsp-learning-material-01.html">
                                第1章: 事前準備
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-02.html">
                                第2章: JSPの基本理解
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-03.html">
                                第3章: スクリプトレットと式
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-04.html">
                                第4章: ディレクティブとインポート
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-05.html">
                                第5章: リクエストとレスポンス
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-06.html">
                                第6章: JSPとJavaBeans
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-07.html">
                                第7章: セッションとスコープ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-08.html">
                                第8章: ELとJSTL入門
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-09.html">
                                第9章: 簡易Webアプリ開発
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-10.html">
                                第10章: 次のステップへ
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- 章ヘッダー -->
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第1章: 事前準備</h1>
                </div>

                <div id="chapter1">
                    <!-- 章タイトル -->
                    <h2 class="chapter-title">JSP開発環境の構築</h2>
                    
                    <!-- 学習目標 -->
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>JSP（JavaServer Pages）とは何か、その役割と重要性を理解する</li>
                            <li>Webアプリケーション開発におけるJSPの位置づけを把握する</li>
                            <li>JDK 21のインストールと設定方法を学ぶ</li>
                            <li>Apache Tomcatの設定とWebアプリケーション実行環境を構築する</li>
                            <li>統合開発環境（IDE）の設定と効果的な使用方法を修得する</li>
                            <li>JSP Webアプリケーションの基本構造とディレクトリ構成を理解する</li>
                        </ul>
                    </div>

                    <!-- セクション1: JSPとは -->
                    <h3 class="section-title">1.1 JSP（JavaServer Pages）とは</h3>
                    <p>JSP（JavaServer Pages）は、動的なWebコンテンツを生成するためのJavaベースのサーバーサイド技術です。JSPを理解するためには、まずWebアプリケーションの基本的な仕組みから学んでいきましょう。</p>
                    
                    <h4>1.1.1 Webアプリケーションの基本概念</h4>
                    <p>従来の静的なWebサイトは、HTMLファイルをそのままブラウザに送信するだけでした。しかし、現代のWebアプリケーションでは、ユーザーの要求に応じて動的にコンテンツを生成する必要があります。</p>

                    <!-- Webアプリケーション構成図 -->
                    <div class="mermaid">
                        flowchart LR
                            A["ユーザー<br/>(ブラウザ)"] -->|"HTTPリクエスト"| B["Webサーバー<br/>(Apache Tomcat)"]
                            B -->|"JSPファイル実行"| C["JSPエンジン"]
                            C -->|"データベース<br/>アクセス"| D[("データベース")]
                            D -->|"データ取得"| C
                            C -->|"動的HTML生成"| B
                            B -->|"HTTPレスポンス<br/>(HTML)"| A
                    </div>

                    <h4>1.1.2 JSPの特徴と利点</h4>
                    <p>JSPは以下のような特徴を持つ技術です：</p>
                    <ul>
                        <li><strong>HTMLベース</strong>：従来のHTML知識を活用でき、学習コストが低い</li>
                        <li><strong>Javaの機能活用</strong>：Javaの豊富なライブラリと機能を利用可能</li>
                        <li><strong>サーバーサイド実行</strong>：処理がサーバー側で行われるため、セキュリティが高い</li>
                        <li><strong>動的コンテンツ生成</strong>：ユーザーやリクエストに応じた個別のコンテンツ表示</li>
                        <li><strong>データベース連携</strong>：JDBCを通じてデータベースと効率的に連携</li>
                    </ul>

                    <h4>1.1.3 JSPの動作原理</h4>
                    <p>JSPファイルは実行時に以下のプロセスを経て処理されます：</p>

                    <div class="mermaid">
                        flowchart TD
                            A["JSPファイル<br/>(.jsp)"] -->|"1. 変換"| B["Javaサーブレット<br/>(.java)"]
                            B -->|"2. コンパイル"| C["バイトコード<br/>(.class)"]
                            C -->|"3. 実行"| D["HTML出力"]
                            D --> E["クライアントへ送信"]
                    </div>

                    <!-- セクション2: 開発環境の必要性 -->
                    <h3 class="section-title">1.2 開発環境構築の重要性</h3>
                    <p>JSP開発を行うためには、適切な開発環境の構築が不可欠です。開発環境は、効率的な開発作業とアプリケーションの品質向上に直結します。</p>

                    <h4>1.2.1 必要なソフトウェア構成</h4>
                    <p>JSP開発に必要な主要コンポーネント：</p>

                    <div class="mermaid">
                        flowchart TB
                            subgraph IDE["統合開発環境 (IDE)"]
                                I1["Eclipse / IntelliJ IDEA"]
                                I2["コード補完・デバッグ機能"]
                            end
                            subgraph JDK["Java開発キット"]
                                J1["JDK 21 (推奨)"]
                                J2["Javaコンパイラ・実行環境"]
                            end
                            subgraph SERVER["Webアプリケーションサーバー"]
                                S1["Apache Tomcat 10.x"]
                                S2["JSP・サーブレット実行環境"]
                            end
                            IDE --> JDK
                            JDK --> SERVER
                    </div>

                    <!-- セクション3: JDK 21のインストール -->
                    <h3 class="section-title">1.3 JDK 21のインストールと設定</h3>
                    <p>JSP開発の基盤となるJava開発キット（JDK）をインストールします。JDK 21は2023年9月にリリースされた長期サポート（LTS）版で、安定した開発環境を提供します。</p>

                    <div class="exercise-container">
                        <h5>実習 1-1: JDK 21のインストール</h5>
                        <p>この実習では、Oracle JDK 21をダウンロードしてインストールし、開発に必要な環境変数を設定します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>Oracle公式サイト（oracle.com/java）からJDK 21をダウンロード</li>
                            <li>インストーラーを実行してJDK 21をインストール</li>
                            <li>環境変数JAVA_HOMEを設定（例：C:\Program Files\Java\jdk-21）</li>
                            <li>Path環境変数にJDK binディレクトリを追加</li>
                            <li>コマンドプロンプトでjava -versionコマンドを実行して確認</li>
                        </ol>
                        <h6>環境変数設定例（Windows）</h6>
                        <pre class="code-block"><code class="language-bash"># JAVA_HOME設定
JAVA_HOME = C:\Program Files\Java\jdk-21

# Path環境変数に追加
Path = %JAVA_HOME%\bin

# 確認コマンド
java -version
javac -version</code></pre>
                        <h6>期待される結果</h6>
                        <p>コマンドを実行すると、以下のような出力が表示されます：</p>
                        <pre class="code-block"><code class="language-bash">java version "21.0.x" 2023-09-19
Java(TM) SE Runtime Environment (build 21.0.x+xx-xxx)
Java HotSpot(TM) 64-Bit Server VM (build 21.0.x+xx-xxx, mixed mode, sharing)</code></pre>
                    </div>

                    <!-- セクション4: Apache Tomcatのセットアップ -->
                    <h3 class="section-title">1.4 Apache Tomcatのセットアップ</h3>
                    <p>Apache TomcatはJSPとサーブレットを実行するためのWebアプリケーションサーバーです。軽量で高性能、かつオープンソースで提供されているため、学習環境に最適です。</p>

                    <h4>1.4.1 Tomcatの役割と特徴</h4>
                    <p>Tomcatは以下の役割を担います：</p>
                    <ul>
                        <li><strong>サーブレットコンテナ</strong>：JSPファイルをJavaサーブレットに変換・実行</li>
                        <li><strong>Webサーバー</strong>：HTTPリクエスト・レスポンスの処理</li>
                        <li><strong>アプリケーション管理</strong>：Webアプリケーションのデプロイ・管理</li>
                        <li><strong>セッション管理</strong>：ユーザーセッションの維持・管理</li>
                    </ul>

                    <div class="exercise-container">
                        <h5>実習 1-2: Apache Tomcat 10.xのインストールと設定</h5>
                        <p>Tomcatをダウンロードしてインストールし、JSP実行環境を構築します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>Apache Tomcat公式サイト（tomcat.apache.org）からTomcat 10.xをダウンロード</li>
                            <li>ダウンロードしたファイルを適当な場所（例：C:\tomcat10）に展開</li>
                            <li>環境変数CATALINA_HOMEを設定</li>
                            <li>startup.bat（Windows）またはstartup.sh（Linux/Mac）を実行</li>
                            <li>ブラウザでhttp://localhost:8080にアクセスして動作確認</li>
                        </ol>
                        <h6>設定例</h6>
                        <pre class="code-block"><code class="language-bash"># 環境変数設定（Windows）
CATALINA_HOME = C:\tomcat10

# Tomcat起動（Windows）
cd C:\tomcat10\bin
startup.bat

# Tomcat停止（Windows）
shutdown.bat</code></pre>
                        <h6>期待される結果</h6>
                        <p>ブラウザでlocalhost:8080にアクセスすると、Tomcatの初期画面が表示されます。この画面が表示されれば、Tomcatが正常に動作していることを意味します。</p>
                    </div>

                    <!-- セクション5: IDE環境の設定 -->
                    <h3 class="section-title">1.5 統合開発環境（IDE）の設定</h3>
                    <p>効率的なJSP開発のためには、適切なIDEの選択と設定が重要です。ここではEclipseとIntelliJ IDEAの両方について説明します。</p>

                    <h4>1.5.1 Eclipse IDE for Enterprise Java Developersの設定</h4>
                    <p>EclipseはオープンソースのIDEで、Java開発に特化した豊富な機能を提供します。</p>

                    <div class="exercise-container">
                        <h5>実習 1-3: Eclipse環境の設定</h5>
                        <p>Eclipse IDEをインストールし、JSP開発に必要な設定を行います。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>Eclipse公式サイトからEclipse IDE for Enterprise Java Developersをダウンロード</li>
                            <li>Eclipseをインストールして起動</li>
                            <li>Window → Preferences → Java → Installed JREsでJDK 21を設定</li>
                            <li>Window → Preferences → Server → Runtime EnvironmentsでTomcat 10を追加</li>
                            <li>新規プロジェクト作成（File → New → Dynamic Web Project）</li>
                        </ol>
                        <h6>プロジェクト設定例</h6>
                        <pre class="code-block"><code class="language-bash"># プロジェクト構造
MyWebApp/
├── src/
│   └── main/
│       ├── java/          # Javaソースコード
│       └── webapp/        # Web関連リソース
│           ├── WEB-INF/
│           │   └── web.xml
│           └── index.jsp
└── pom.xml               # Maven設定（使用時）</code></pre>
                        <h6>期待される結果</h6>
                        <p>プロジェクト作成後、Package Explorerに新しいWebプロジェクトが表示され、JSPファイルの作成・編集が可能になります。</p>
                    </div>

                    <!-- セクション6: Webアプリケーションの基本構造 -->
                    <h3 class="section-title">1.6 Webアプリケーションの基本構造</h3>
                    <p>JSP Webアプリケーションは、特定のディレクトリ構造に従って構成されます。この構造を理解することで、効率的な開発が可能になります。</p>

                    <h4>1.6.1 標準的なディレクトリ構造</h4>
                    <p>Java EE仕様に準拠したWebアプリケーションの構造：</p>

                    <div class="mermaid">
                        flowchart TD
                            A["WebApp Root"] --> B["WEB-INF/"]
                            A --> C["JSPファイル<br/>(*.jsp)"]
                            A --> D["静的リソース<br/>(CSS, JS, 画像)"]
                            B --> E["web.xml<br/>(デプロイメント記述子)"]
                            B --> F["classes/<br/>(コンパイル済みクラス)"]
                            B --> G["lib/<br/>(JARライブラリ)"]
                            B --> H["tags/<br/>(カスタムタグ)"]
                    </div>

                    <div class="exercise-container">
                        <h5>実習 1-4: 最初のJSPアプリケーション作成</h5>
                        <p>基本的なディレクトリ構造を持つJSPアプリケーションを作成し、Tomcatで実行します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>Tomcatのwebappsディレクトリに新しいフォルダ「myfirstapp」を作成</li>
                            <li>myfirstapp内にWEB-INFフォルダを作成</li>
                            <li>WEB-INF内にweb.xmlファイルを作成</li>
                            <li>myfirstapp直下にindex.jspファイルを作成</li>
                            <li>Tomcatを再起動してhttp://localhost:8080/myfirstapp/にアクセス</li>
                        </ol>
                        <h6>web.xml の基本設定</h6>
                        <pre class="code-block"><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns="https://jakarta.ee/xml/ns/jakartaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee
         https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd"
         version="5.0"&gt;
    
    &lt;display-name&gt;My First JSP App&lt;/display-name&gt;
    
    &lt;welcome-file-list&gt;
        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;
&lt;/web-app&gt;</code></pre>
                        <h6>index.jsp の基本コード</h6>
                        <pre class="code-block"><code class="language-html">&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;初めてのJSPアプリケーション&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;JSP学習へようこそ！&lt;/h1&gt;
    &lt;p&gt;現在の時刻: &lt;%= new java.util.Date() %&gt;&lt;/p&gt;
    &lt;p&gt;このページはJSPによって動的に生成されています。&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                        <h6>期待される結果</h6>
                        <p>ブラウザにアクセスすると、タイトルと現在時刻が表示されたページが表示されます。ページを更新するたびに時刻が更新されることで、動的コンテンツ生成を確認できます。</p>
                    </div>

                    <!-- セクション7: 開発環境のトラブルシューティング -->
                    <h3 class="section-title">1.7 よくある問題と解決方法</h3>
                    <p>開発環境構築時によく発生する問題と、その解決方法を説明します。</p>

                    <div class="warning">
                        <h5>よくあるエラーと対処法</h5>
                        <h6>1. java コマンドが認識されない</h6>
                        <p><strong>原因</strong>：環境変数PATHにJDKのbinディレクトリが含まれていない</p>
                        <p><strong>解決方法</strong>：JAVA_HOMEとPATH変数を正しく設定する</p>
                        
                        <h6>2. Tomcatが起動しない</h6>
                        <p><strong>原因</strong>：ポート8080が他のプロセスによって使用されている</p>
                        <p><strong>解決方法</strong>：server.xmlでポート番号を変更するか、競合プロセスを停止</p>
                        
                        <h6>3. JSPファイルが表示されない</h6>
                        <p><strong>原因</strong>：ディレクトリ構造が不正、またはweb.xmlの設定ミス</p>
                        <p><strong>解決方法</strong>：正しいディレクトリ構造を確認し、web.xmlの構文をチェック</p>
                    </div>

                    <!-- 理解度確認クイズ -->
                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>JSPとは何の略称で、どのような用途に使用される技術か説明してください。</li>
                            <li>JSPファイルが実行される際の3つの処理段階を順番に説明してください。</li>
                            <li>Apache Tomcatの主な役割を3つ挙げてください。</li>
                            <li>JSP Webアプリケーションの標準ディレクトリ構造において、WEB-INFフォルダ内に配置される主要なファイルとフォルダを説明してください。</li>
                            <li>開発環境でJavaコマンドが認識されない場合の一般的な原因と解決方法を説明してください。</li>
                        </ol>
                        <details>
                            <summary>解答例</summary>
                            <ol>
                                <li>JSP（JavaServer Pages）は、動的なWebコンテンツを生成するためのJavaベースのサーバーサイド技術で、HTMLにJavaコードを埋め込んでデータベースやユーザー入力に応じたWebページを作成するために使用されます。</li>
                                <li>①JSPファイルをJavaサーブレットコードに変換、②Javaサーブレットコードをバイトコードにコンパイル、③バイトコードを実行してHTML出力を生成</li>
                                <li>①サーブレットコンテナとしてJSPの実行、②WebサーバーとしてHTTPリクエスト・レスポンスの処理、③Webアプリケーションのデプロイメント・管理</li>
                                <li>web.xml（デプロイメント記述子）、classesフォルダ（コンパイル済みクラスファイル）、libフォルダ（JARライブラリ）、tagsフォルダ（カスタムタグファイル）</li>
                                <li>環境変数PATHにJDKのbinディレクトリが含まれていないことが原因。JAVA_HOMEを正しく設定し、PATH変数に%JAVA_HOME%\binを追加することで解決できます。</li>
                            </ol>
                        </details>
                    </div>

                    <!-- 章のまとめ -->
                    <h3 class="section-title">1.8 まとめ</h3>
                    <p>この章では、JSP開発に必要な基本的な開発環境の構築方法を学習しました。</p>
                    <ul>
                        <li><strong>JSPの概念理解</strong>：サーバーサイドで動作する動的Webコンテンツ生成技術</li>
                        <li><strong>開発環境構築</strong>：JDK 21、Apache Tomcat、IDEの設定</li>
                        <li><strong>基本構造理解</strong>：Webアプリケーションの標準ディレクトリ構成</li>
                        <li><strong>動作確認</strong>：最初のJSPアプリケーションの作成と実行</li>
                    </ul>
                    <p>次章では、構築した環境を使用してJSPの基本的な構文と動作原理について詳しく学習していきます。</p>

                    <!-- 章間ナビゲーション -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="#" class="btn btn-secondary disabled">← 前の章</a>
                        <a href="jsp-learning-material-02.html" class="btn btn-primary">次の章 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- フッター -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
    
    <!-- Mermaid.js 初期化 -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>