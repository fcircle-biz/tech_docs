<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring学習教材 第6章 - 入力バリデーションとエラーハンドリング</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <!-- カスタムCSS -->
    <style>
        /* ベースレイアウト */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        /* ナビゲーション */
        .navbar {
            background-color: #4caf50;
        }

        /* サイドバー */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }

        /* タイトル */
        .chapter-title {
            color: #4caf50;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #4caf50;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #66bb6a;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        /* コンテンツボックス */
        .quiz-container {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #4caf50;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        /* コードハイライト */
        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        /* ナビゲーション */
        .nav-link.active {
            background-color: #4caf50 !important;
            color: white !important;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand">
                <strong>Spring学習教材</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="spring-learning-material-01.html">
                                第1章: JavaとWebの基礎理解
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="spring-learning-material-02.html">
                                第2章: Spring Bootの導入と開発環境構築
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="spring-learning-material-03.html">
                                第3章: Spring Bootの基本構成とDI
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="spring-learning-material-04.html">
                                第4章: Webアプリケーション開発の基礎（MVC）
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="spring-learning-material-05.html">
                                第5章: データベース連携（Spring Data JDBC）
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="spring-learning-material-06.html">
                                第6章: 入力バリデーションとエラーハンドリング
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="spring-learning-material-07.html">
                                第7章: Spring Securityによる認証・認可
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="spring-learning-material-08.html">
                                第8章: Spring MVCのテスト
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="spring-learning-material-09.html">
                                第9章: Todoアプリケーション開発
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="spring-learning-material-10.html">
                                第10章: さらに一歩進んだSpring開発へ①
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="spring-learning-material-11.html">
                                第11章: さらに一歩進んだSpring開発へ②
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="spring-learning-material-ex-01.html">
                                補足①: Spring Data JPA入門
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- 章ヘッダー -->
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第6章: 入力バリデーションとエラーハンドリング</h1>
                </div>

                <div id="chapter6">
                    <!-- 章タイトル -->
                    <h2 class="chapter-title">堅牢なWebアプリケーションの構築</h2>
                    
                    <!-- 学習目標 -->
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>入力バリデーションの重要性と基本概念</li>
                            <li>Bean Validationアノテーションの使用方法</li>
                            <li>BindingResultを使ったバリデーションエラーの処理</li>
                            <li>Thymeleafでのエラーメッセージ表示</li>
                            <li>@ControllerAdviceによる統一的エラーハンドリング</li>
                            <li>カスタムバリデーションの作成方法</li>
                        </ul>
                    </div>

                    <!-- セクション6.1 -->
                    <h3 class="section-title">6.1 入力バリデーションの重要性</h3>
                    <p>
                        <strong>入力バリデーション</strong>は、ユーザーから送信されるデータが正しい形式・範囲内であることを検証する仕組みです。これは単にユーザビリティの向上だけでなく、セキュリティの観点からも極めて重要です。
                    </p>

                    <div class="highlight">
                        <h6>バリデーションが防ぐ問題</h6>
                        <ul>
                            <li><strong>データ品質の問題</strong>: 不正なデータによるアプリケーション障害</li>
                            <li><strong>セキュリティ脆弱性</strong>: SQLインジェクション、XSS攻撃など</li>
                            <li><strong>ユーザビリティの低下</strong>: エラー後の再入力による操作性悪化</li>
                            <li><strong>データ整合性の破綻</strong>: 不正データによるデータベース制約違反</li>
                        </ul>
                    </div>

                    <div class="mermaid">
                        flowchart TD
                            A["ユーザー入力"] --> B["クライアントサイド<br/>バリデーション"]
                            B --> C["サーバーサイド<br/>バリデーション"]
                            C --> D{バリデーション<br/>結果}
                            D -->|成功| E["ビジネスロジック<br/>実行"]
                            D -->|失敗| F["エラーメッセージ<br/>表示"]
                            E --> G["データベース<br/>保存"]
                            F --> H["フォーム再表示"]
                    </div>

                    <div class="warning">
                        <h6>重要：サーバーサイドバリデーションは必須</h6>
                        <p>
                            クライアントサイド（JavaScript）のバリデーションはユーザビリティ向上には有効ですが、悪意のあるユーザーが簡単に回避できます。セキュリティを確保するためには、サーバーサイドでの検証が不可欠です。
                        </p>
                    </div>

                    <!-- セクション6.2 -->
                    <h3 class="section-title">6.2 Bean Validationアノテーション</h3>
                    <p>
                        Spring Bootでは<strong>Bean Validation</strong>（JSR-303/JSR-380）がサポートされており、アノテーションを使用してバリデーションルールを簡潔に定義できます。
                    </p>

                    <div class="highlight">
                        <h6>主要なバリデーションアノテーション</h6>
                        <ul>
                            <li><code>@NotNull</code>: null値を許可しない</li>
                            <li><code>@NotBlank</code>: null、空文字、空白のみを許可しない</li>
                            <li><code>@Size(min, max)</code>: 文字列長や配列・コレクションサイズの制限</li>
                            <li><code>@Min、@Max</code>: 数値の最小・最大値制限</li>
                            <li><code>@Email</code>: メールアドレス形式のチェック</li>
                            <li><code>@Pattern</code>: 正規表現による形式チェック</li>
                        </ul>
                    </div>

                    <pre class="code-block"><code class="language-java">package com.example.demo.model;

import jakarta.validation.constraints.*;
import java.time.LocalDate;

public class User {
    
    @NotBlank(message = "名前は必須です")
    @Size(min = 2, max = 50, message = "名前は2文字以上50文字以内で入力してください")
    private String name;
    
    @NotBlank(message = "メールアドレスは必須です")
    @Email(message = "正しいメールアドレス形式で入力してください")
    private String email;
    
    @NotNull(message = "年齢は必須です")
    @Min(value = 0, message = "年齢は0以上で入力してください")
    @Max(value = 150, message = "年齢は150以下で入力してください")
    private Integer age;
    
    @Pattern(regexp = "^\\d{3}-\\d{4}-\\d{4}$", 
             message = "電話番号は000-0000-0000の形式で入力してください")
    private String phoneNumber;
    
    @Past(message = "生年月日は過去の日付を入力してください")
    private LocalDate birthDate;
    
    // コンストラクタ、getter/setter省略
}</code></pre>

                    <!-- 実習6-1 -->
                    <div class="exercise-container">
                        <h5>実習 6-1: バリデーション付きUserフォームの作成</h5>
                        <p>Bean Validationアノテーションを使用したユーザー登録フォームを作成してみましょう。</p>
                        
                        <h6>手順</h6>
                        <ol>
                            <li>build.gradleにvalidation依存関係を追加</li>
                            <li>Userモデルクラスにバリデーションアノテーションを追加</li>
                            <li>コントローラーで@Validと@ModelAttributeを組み合わせ</li>
                            <li>Thymeleafテンプレートでエラー表示を実装</li>
                        </ol>

                        <h6>build.gradle依存関係追加</h6>
                        <pre class="code-block"><code class="language-bash">dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-validation'
    // 他の依存関係...
}</code></pre>

                        <h6>期待される結果</h6>
                        <p>フォーム送信時にバリデーションエラーが発生した場合、適切なエラーメッセージが表示され、正しい入力値は保持されることを確認できます。</p>
                    </div>

                    <!-- セクション6.3 -->
                    <h3 class="section-title">6.3 BindingResultによるエラーハンドリング</h3>
                    <p>
                        <code>BindingResult</code>は、バリデーションエラーの情報を格納するオブジェクトです。コントローラーメソッドでこれを使用することで、エラーの詳細な情報を取得し、適切な処理を行うことができます。
                    </p>

                    <pre class="code-block"><code class="language-java">@Controller
public class UserController {
    
    @PostMapping("/users")
    public String createUser(@Valid @ModelAttribute User user,
                           BindingResult bindingResult,
                           Model model) {
        
        // バリデーションエラーがある場合
        if (bindingResult.hasErrors()) {
            // エラー情報をログ出力（デバッグ用）
            bindingResult.getAllErrors().forEach(error -> {
                System.out.println("Error: " + error.getDefaultMessage());
            });
            
            // フォームを再表示（エラーメッセージ付き）
            return "users/form";
        }
        
        // バリデーション成功時の処理
        userService.save(user);
        model.addAttribute("message", "ユーザーが正常に登録されました");
        return "users/success";
    }
    
    @GetMapping("/users/new")
    public String newUserForm(Model model) {
        model.addAttribute("user", new User());
        return "users/form";
    }
}</code></pre>

                    <div class="highlight">
                        <h6>BindingResultの重要な特徴</h6>
                        <ul>
                            <li>@ModelAttributeの直後の引数として配置する必要がある</li>
                            <li>hasErrors()でエラーの有無を確認できる</li>
                            <li>getAllErrors()で全エラー情報を取得できる</li>
                            <li>getFieldErrors()でフィールド固有のエラーを取得できる</li>
                        </ul>
                    </div>

                    <!-- セクション6.4 -->
                    <h3 class="section-title">6.4 Thymeleafでのエラー表示</h3>
                    <p>
                        Thymeleafでは、<code>th:errors</code>属性を使用してバリデーションエラーメッセージを表示できます。また、<code>th:field</code>を使用することで、エラー後も入力値を保持できます。
                    </p>

                    <pre class="code-block"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ユーザー登録&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container mt-4"&gt;
        &lt;h2&gt;ユーザー登録&lt;/h2&gt;
        
        &lt;form th:action="@{/users}" th:object="${user}" method="post"&gt;
            &lt;div class="mb-3"&gt;
                &lt;label for="name" class="form-label"&gt;名前 &lt;span class="text-danger"&gt;*&lt;/span&gt;&lt;/label&gt;
                &lt;input type="text" 
                       th:field="*{name}" 
                       th:class="${#fields.hasErrors('name')} ? 'form-control is-invalid' : 'form-control'"
                       id="name"&gt;
                &lt;div class="invalid-feedback" th:if="${#fields.hasErrors('name')}"&gt;
                    &lt;span th:errors="*{name}"&gt;&lt;/span&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div class="mb-3"&gt;
                &lt;label for="email" class="form-label"&gt;メールアドレス &lt;span class="text-danger"&gt;*&lt;/span&gt;&lt;/label&gt;
                &lt;input type="email" 
                       th:field="*{email}" 
                       th:class="${#fields.hasErrors('email')} ? 'form-control is-invalid' : 'form-control'"
                       id="email"&gt;
                &lt;div class="invalid-feedback" th:if="${#fields.hasErrors('email')}"&gt;
                    &lt;span th:errors="*{email}"&gt;&lt;/span&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div class="mb-3"&gt;
                &lt;label for="age" class="form-label"&gt;年齢 &lt;span class="text-danger"&gt;*&lt;/span&gt;&lt;/label&gt;
                &lt;input type="number" 
                       th:field="*{age}" 
                       th:class="${#fields.hasErrors('age')} ? 'form-control is-invalid' : 'form-control'"
                       id="age"&gt;
                &lt;div class="invalid-feedback" th:if="${#fields.hasErrors('age')}"&gt;
                    &lt;span th:errors="*{age}"&gt;&lt;/span&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            
            &lt;button type="submit" class="btn btn-primary"&gt;登録&lt;/button&gt;
            &lt;a href="/users" class="btn btn-secondary"&gt;戻る&lt;/a&gt;
        &lt;/form&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                    <div class="highlight">
                        <h6>Thymeleafのエラー表示用ユーティリティ</h6>
                        <ul>
                            <li><code>th:field</code>: フィールドバインディングと値の保持</li>
                            <li><code>th:errors</code>: エラーメッセージの表示</li>
                            <li><code>#fields.hasErrors('fieldName')</code>: エラー有無の判定</li>
                            <li><code>th:class</code>: エラー状態に応じたCSSクラス切り替え</li>
                        </ul>
                    </div>

                    <!-- セクション6.5 -->
                    <h3 class="section-title">6.5 @ControllerAdviceによる統一エラーハンドリング</h3>
                    <p>
                        <code>@ControllerAdvice</code>を使用することで、アプリケーション全体で発生する例外を統一的に処理できます。これにより、各コントローラーで個別にエラーハンドリングコードを書く必要がなくなります。
                    </p>

                    <pre class="code-block"><code class="language-java">package com.example.demo.exception;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.servlet.NoHandlerFoundException;

@ControllerAdvice
public class GlobalExceptionHandler {
    
    private static final Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler.class);
    
    // データベース関連のエラー
    @ExceptionHandler(DataAccessException.class)
    public String handleDataAccessException(DataAccessException ex, Model model) {
        logger.error("データベースエラー: ", ex);
        model.addAttribute("errorMessage", "データベースの処理中にエラーが発生しました");
        return "error/database";
    }
    
    // バリデーションエラー（グローバル）
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public String handleValidationException(MethodArgumentNotValidException ex, Model model) {
        logger.error("バリデーションエラー: ", ex);
        model.addAttribute("errorMessage", "入力内容に問題があります");
        return "error/validation";
    }
    
    // 404エラー
    @ExceptionHandler(NoHandlerFoundException.class)
    public String handleNotFoundException(NoHandlerFoundException ex, Model model) {
        logger.error("ページが見つかりません: ", ex);
        model.addAttribute("errorMessage", "お探しのページが見つかりません");
        return "error/404";
    }
    
    // その他のエラー
    @ExceptionHandler(Exception.class)
    public String handleGeneralException(Exception ex, Model model) {
        logger.error("予期しないエラー: ", ex);
        model.addAttribute("errorMessage", "申し訳ございません。システムエラーが発生しました");
        return "error/500";
    }
}</code></pre>

                    <!-- 実習6-2 -->
                    <div class="exercise-container">
                        <h5>実習 6-2: 統一エラーハンドリングの実装</h5>
                        <p>@ControllerAdviceを使用してアプリケーション全体のエラーハンドリング機能を実装してみましょう。</p>
                        
                        <h6>手順</h6>
                        <ol>
                            <li>GlobalExceptionHandlerクラスを作成</li>
                            <li>各種エラーページのThymeleafテンプレートを作成</li>
                            <li>意図的にエラーを発生させてテスト</li>
                            <li>ログの出力を確認</li>
                        </ol>

                        <h6>templates/error/500.html</h6>
                        <pre class="code-block"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;システムエラー&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container mt-5"&gt;
        &lt;div class="row justify-content-center"&gt;
            &lt;div class="col-md-8"&gt;
                &lt;div class="alert alert-danger"&gt;
                    &lt;h4 class="alert-heading"&gt;システムエラーが発生しました&lt;/h4&gt;
                    &lt;p th:text="${errorMessage}"&gt;エラーメッセージ&lt;/p&gt;
                    &lt;hr&gt;
                    &lt;p class="mb-0"&gt;問題が続く場合は、システム管理者にお問い合わせください。&lt;/p&gt;
                &lt;/div&gt;
                &lt;a href="/" class="btn btn-primary"&gt;トップページに戻る&lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                        <h6>期待される結果</h6>
                        <p>意図的にエラーを発生させると、適切なエラーページが表示され、ログにエラー情報が記録されることを確認できます。</p>
                    </div>

                    <!-- セクション6.6 -->
                    <h3 class="section-title">6.6 カスタムバリデーションの作成</h3>
                    <p>
                        標準的なバリデーションアノテーションで対応できない場合は、独自のバリデーションアノテーションを作成できます。例として、年齢制限をチェックするカスタムバリデーションを作成してみましょう。
                    </p>

                    <pre class="code-block"><code class="language-java">// カスタムバリデーションアノテーション
package com.example.demo.validation;

import jakarta.validation.Constraint;
import jakarta.validation.Payload;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

@Target({ElementType.FIELD, ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = AdultAgeValidator.class)
public @interface AdultAge {
    String message() default "18歳以上である必要があります";
    Class&lt;?&gt;[] groups() default {};
    Class&lt;? extends Payload&gt;[] payload() default {};
}</code></pre>

                    <pre class="code-block"><code class="language-java">// バリデーター実装クラス
package com.example.demo.validation;

import jakarta.validation.ConstraintValidator;
import jakarta.validation.ConstraintValidatorContext;

public class AdultAgeValidator implements ConstraintValidator&lt;AdultAge, Integer&gt; {
    
    @Override
    public boolean isValid(Integer age, ConstraintValidatorContext context) {
        // nullの場合は@NotNullで別途チェックするため、ここではtrueを返す
        if (age == null) {
            return true;
        }
        return age >= 18;
    }
}</code></pre>

                    <pre class="code-block"><code class="language-java">// エンティティクラスでの使用
public class User {
    
    @NotNull(message = "年齢は必須です")
    @AdultAge  // カスタムバリデーションを適用
    private Integer age;
    
    // 他のフィールドとメソッド...
}</code></pre>

                    <!-- 理解度確認クイズ -->
                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>入力バリデーションがWebアプリケーションにおいて重要な理由を、セキュリティ・データ品質・ユーザビリティの観点から説明してください。</li>
                            <li>@NotBlankと@NotNullの違いを具体例を挙げて説明してください。</li>
                            <li>BindingResultを使用する際の注意点（引数の順序など）を説明してください。</li>
                            <li>Thymeleafでエラーメッセージを表示するために使用する主要な属性・ユーティリティを3つ挙げてください。</li>
                            <li>@ControllerAdviceを使用することの利点を3つ説明してください。</li>
                            <li>カスタムバリデーションを作成する際に実装する必要があるインターフェースと、その主要メソッドを説明してください。</li>
                        </ol>
                    </div>

                    <!-- 章間ナビゲーション -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="spring-learning-material-05.html" class="btn btn-secondary">← 第5章: データベース連携（Spring Data JDBC）</a>
                        <a href="spring-learning-material-07.html" class="btn btn-primary">第7章: Spring Securityによる認証・認可 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- フッター -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
    
    <!-- Mermaid.js 初期化 -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>