<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Struts 1.xå­¦ç¿’æ•™æ ç¬¬7ç«  - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <!-- ã‚«ã‚¹ã‚¿ãƒ CSS -->
    <style>
        /* ãƒ™ãƒ¼ã‚¹ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .navbar {
            background-color: #f57c00;
        }

        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }

        /* ã‚¿ã‚¤ãƒˆãƒ« */
        .chapter-title {
            color: #f57c00;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #f57c00;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #ff9800;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒœãƒƒã‚¯ã‚¹ */
        .quiz-container {
            background-color: #fff3e0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #f57c00;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        .security {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #4caf50;
        }

        /* ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ©ã‚¤ãƒˆ */
        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .nav-link.active {
            background-color: #f57c00 !important;
            color: white !important;
        }

        /* ãƒœã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ« */
        .btn-orange {
            background-color: #f57c00;
            border-color: #f57c00;
            color: white;
        }

        .btn-orange:hover {
            background-color: #e65100;
            border-color: #e65100;
            color: white;
        }

        /* ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .security-card {
            border: 2px solid #d32f2f;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .security-card .card-header {
            background-color: #ffebee;
            border-bottom: 1px solid #d32f2f;
            font-weight: bold;
            color: #d32f2f;
        }

        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .fade-in {
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand text-white fw-bold" href="#main-content">ğŸ” Struts 1.x å­¦ç¿’æ•™æ</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link text-white" href="../README.md">ğŸ“š Strutsã‚¬ã‚¤ãƒ‰</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="struts1-learning-material-06.html">â¬…ï¸ ç¬¬6ç« </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white" href="struts1-learning-material-08.html">â¡ï¸ ç¬¬8ç« </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="container-fluid">
        <div class="row">
            <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>å­¦ç¿’ç« </span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-01.html">
                                ç¬¬1ç« : Struts 1.xã®åŸºæœ¬æ¦‚å¿µã¨MVCã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-02.html">
                                ç¬¬2ç« : ç’°å¢ƒæ§‹ç¯‰ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-03.html">
                                ç¬¬3ç« : Actionã‚¯ãƒ©ã‚¹ã¨ActionForm
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-04.html">
                                ç¬¬4ç« : struts-config.xmlã®è¨­å®šã¨ç®¡ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-05.html">
                                ç¬¬5ç« : JSPã¨ã®é€£æºã¨Tagãƒ©ã‚¤ãƒ–ãƒ©ãƒª
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-06.html">
                                ç¬¬6ç« : ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="struts1-learning-material-07.html">
                                ç¬¬7ç« : ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-08.html">
                                ç¬¬8ç« : å›½éš›åŒ–ï¼ˆi18nï¼‰ã¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ•ã‚¡ã‚¤ãƒ«
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-09.html">
                                ç¬¬9ç« : ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€£æºã¨å®Ÿè·µçš„é–‹ç™º
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-10.html">
                                ç¬¬10ç« : ãƒ‡ãƒãƒƒã‚°ãƒ»ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4" id="main-content">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="chapter-title">ç¬¬7ç«  - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</h1>
                </div>

                <!-- å­¦ç¿’ç›®æ¨™ -->
                <div class="highlight">
                    <h3>ğŸ¯ ã“ã®ç« ã®å­¦ç¿’ç›®æ¨™</h3>
                    <ul>
                        <li>HTTPã‚»ãƒƒã‚·ãƒ§ãƒ³ã®æ¦‚å¿µã¨ä»•çµ„ã¿ã‚’ç†è§£ã™ã‚‹</li>
                        <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®å®Ÿè£…æ–¹æ³•ã‚’ç¿’å¾—ã™ã‚‹</li>
                        <li>Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸»è¦ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„…å¨ã¨å¯¾ç­–ã‚’å­¦ã¶</li>
                        <li>CSRFæ”»æ’ƒã¨XSSæ”»æ’ƒã®é˜²å¾¡æ–¹æ³•ã‚’å®Ÿè£…ã™ã‚‹</li>
                        <li>ã‚»ã‚­ãƒ¥ã‚¢ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’èº«ã«ã¤ã‘ã‚‹</li>
                    </ul>
                </div>

                <!-- ã¯ã˜ã‚ã« -->
                <section id="intro">
                    <h2 class="section-title">ğŸ” ã¯ã˜ã‚ã«</h2>
                    
                    <p>Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã„ã¦ã€<strong>ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†</strong>ã¨<strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–</strong>ã¯æ¥µã‚ã¦é‡è¦ãªè¦ç´ ã§ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®çŠ¶æ…‹ã‚’é©åˆ‡ã«ç®¡ç†ã—ã€æ‚ªæ„ã®ã‚ã‚‹æ”»æ’ƒã‹ã‚‰ä¿è­·ã™ã‚‹ã“ã¨ã§ã€å®‰å…¨ã§ä¿¡é ¼æ€§ã®é«˜ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚</p>

                    <div class="highlight">
                        <h4>ğŸ’¡ ãªãœã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒé‡è¦ãªã®ã‹ï¼Ÿ</h4>
                        <p>Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã§å¤šãã®ä¸ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã¾ã™ï¼š</p>
                        
                        <ul>
                            <li><strong>çŠ¶æ…‹ã®ä¿æŒ</strong>ï¼šHTTPã®ç„¡çŠ¶æ…‹æ€§ã‚’è£œå®Œã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®çŠ¶æ…‹ã‚’è¿½è·¡</li>
                            <li><strong>å€‹äººæƒ…å ±ä¿è­·</strong>ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãªæƒ…å ±ã‚’é©åˆ‡ã«ç®¡ç†</li>
                            <li><strong>ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹é˜²æ­¢</strong>ï¼šæ¨©é™ã®ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’ãƒ–ãƒ­ãƒƒã‚¯</li>
                            <li><strong>æ”»æ’ƒå¯¾ç­–</strong>ï¼šæ§˜ã€…ãªã‚µã‚¤ãƒãƒ¼æ”»æ’ƒã‹ã‚‰ ã‚·ã‚¹ãƒ†ãƒ ã‚’ä¿è­·</li>
                        </ul>
                        
                        <p><strong>ä¾‹ãˆï¼š</strong> ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã¯ã€Œå…¥å ´åˆ¸ã‚·ã‚¹ãƒ†ãƒ ã€ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚æ˜ ç”»é¤¨ã§å…¥å ´åˆ¸ã‚’ã‚‚ã‚‰ã„ã€ãã®åˆ¸ã§è‡ªåˆ†ã®å¸­ã‚’ç‰¹å®šã—ã€ä¸Šæ˜ ä¸­ã¯å¸­ã‚’ç¢ºä¿ã—ã¾ã™ã€‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¯ã€Œè­¦å‚™ã‚·ã‚¹ãƒ†ãƒ ã€ã§ã€ä¸æ­£ãªå…¥å ´è€…ã‚’é˜²ãã€å®‰å…¨ãªç’°å¢ƒã‚’ç¶­æŒã—ã¾ã™ã€‚</p>
                    </div>

                    <div class="mermaid">
                        graph LR
                            A[ãƒ¦ãƒ¼ã‚¶ãƒ¼] --> B[èªè¨¼]
                            B --> C{èªè¨¼OK?}
                            C -->|æˆåŠŸ| D[ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ]
                            C -->|å¤±æ•—| E[ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦]
                            D --> F[ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†]
                            F --> G[ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯]
                            G --> H[ãƒªã‚½ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹]
                            
                            style A fill:#e3f2fd
                            style B fill:#fff3e0
                            style D fill:#e8f5e8
                            style E fill:#ffebee
                            style F fill:#e8f5e8
                            style G fill:#e8f5e8
                            style H fill:#e8f5e8
                    </div>
                </section>

                <!-- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®åŸºç¤ -->
                <section id="session-basics">
                    <h2 class="section-title">ğŸ“ HTTPã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®åŸºç¤</h2>
                    
                    <p>HTTPãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¯<strong>ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ï¼ˆç„¡çŠ¶æ…‹ï¼‰</strong>ã§ã‚ã‚‹ãŸã‚ã€ã‚µãƒ¼ãƒãƒ¼ã¯å‰å›ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¨˜æ†¶ã—ã¦ã„ã¾ã›ã‚“ã€‚ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã«ã‚ˆã‚Šã€è¤‡æ•°ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã¾ãŸãŒã£ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®çŠ¶æ…‹ã‚’ä¿æŒã§ãã¾ã™ã€‚</p>

                    <h3>ğŸ” ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ä»•çµ„ã¿</h3>
                    
                    <div class="mermaid">
                        sequenceDiagram
                            participant C as ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
                            participant S as ã‚µãƒ¼ãƒãƒ¼
                            participant M as ãƒ¡ãƒ¢ãƒª
                            
                            C->>S: åˆå›ã‚¢ã‚¯ã‚»ã‚¹
                            S->>M: ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ
                            M-->>S: ã‚»ãƒƒã‚·ãƒ§ãƒ³IDç”Ÿæˆ
                            S->>C: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ + ã‚»ãƒƒã‚·ãƒ§ãƒ³IDï¼ˆCookieï¼‰
                            
                            C->>S: 2å›ç›®ã‚¢ã‚¯ã‚»ã‚¹ + ã‚»ãƒƒã‚·ãƒ§ãƒ³ID
                            S->>M: ã‚»ãƒƒã‚·ãƒ§ãƒ³ID ã§ãƒ‡ãƒ¼ã‚¿å–å¾—
                            M-->>S: ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿
                            S->>C: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆçŠ¶æ…‹ã‚’ä¿æŒï¼‰
                    </div>

                    <h3>ğŸ’» Strutsã§ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³æ“ä½œ</h3>
                    
                    <pre class="code-block"><code class="language-java">public class LoginAction extends Action {
    
    public ActionForward execute(ActionMapping mapping, ActionForm form,
                                HttpServletRequest request, 
                                HttpServletResponse response) throws Exception {
        
        LoginForm loginForm = (LoginForm) form;
        
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼å‡¦ç†
        UserService userService = new UserService();
        User user = userService.authenticate(
            loginForm.getUsername(), 
            loginForm.getPassword()
        );
        
        if (user != null) {
            // èªè¨¼æˆåŠŸï¼šã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ä¿å­˜
            HttpSession session = request.getSession();
            session.setAttribute("loginUser", user);
            session.setAttribute("loginTime", new Date());
            
            // ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’30åˆ†ã«è¨­å®š
            session.setMaxInactiveInterval(30 * 60);
            
            return mapping.findForward("success");
        } else {
            // èªè¨¼å¤±æ•—
            ActionMessages errors = new ActionMessages();
            errors.add(ActionMessages.GLOBAL_MESSAGE, 
                      new ActionMessage("error.login.invalid"));
            saveErrors(request, errors);
            return mapping.getInputForward();
        }
    }
}

// ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†
public class LogoutAction extends Action {
    
    public ActionForward execute(ActionMapping mapping, ActionForm form,
                                HttpServletRequest request, 
                                HttpServletResponse response) throws Exception {
        
        HttpSession session = request.getSession(false);
        if (session != null) {
            // ã‚»ãƒƒã‚·ãƒ§ãƒ³ç„¡åŠ¹åŒ–
            session.invalidate();
        }
        
        return mapping.findForward("login");
    }
}</code></pre>

                    <div class="highlight">
                        <h4>ğŸ”§ ã‚»ãƒƒã‚·ãƒ§ãƒ³æ“ä½œã®ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰</h4>
                        
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>ãƒ¡ã‚½ãƒƒãƒ‰</th>
                                    <th>èª¬æ˜</th>
                                    <th>ä½¿ç”¨å ´é¢</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>request.getSession()</code></td>
                                    <td>ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å–å¾—ï¼ˆãªã‘ã‚Œã°ä½œæˆï¼‰</td>
                                    <td>ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã€åˆå›ã‚¢ã‚¯ã‚»ã‚¹</td>
                                </tr>
                                <tr>
                                    <td><code>request.getSession(false)</code></td>
                                    <td>ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å–å¾—ï¼ˆãªã‘ã‚Œã°nullï¼‰</td>
                                    <td>ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã®ç¢ºèª</td>
                                </tr>
                                <tr>
                                    <td><code>session.setAttribute()</code></td>
                                    <td>ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«å€¤ã‚’ä¿å­˜</td>
                                    <td>ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®ä¿å­˜</td>
                                </tr>
                                <tr>
                                    <td><code>session.getAttribute()</code></td>
                                    <td>ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‹ã‚‰å€¤ã‚’å–å¾—</td>
                                    <td>ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—</td>
                                </tr>
                                <tr>
                                    <td><code>session.invalidate()</code></td>
                                    <td>ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ç„¡åŠ¹åŒ–</td>
                                    <td>ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼ã®å®Ÿè£… -->
                <section id="login-implementation">
                    <h2 class="section-title">ğŸ‘¤ ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…</h2>
                    
                    <p>ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ­ã‚°ã‚¤ãƒ³èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’å®Ÿè£…ã™ã‚‹ã«ã¯ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®é©åˆ‡ãªå‡¦ç†ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ãŒå¿…è¦ã§ã™ã€‚</p>

                    <h3>ğŸ”’ ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å‡¦ç†</h3>
                    
                    <pre class="code-block"><code class="language-java">import java.security.MessageDigest;
import java.security.SecureRandom;
import java.util.Base64;

public class PasswordUtil {
    
    /**
     * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚½ãƒ«ãƒˆä»˜ããƒãƒƒã‚·ãƒ¥åŒ–
     */
    public static String hashPassword(String password, String salt) {
        try {
            MessageDigest md = MessageDigest.getInstance("SHA-256");
            md.update(salt.getBytes());
            byte[] hashedPassword = md.digest(password.getBytes());
            return Base64.getEncoder().encodeToString(hashedPassword);
        } catch (Exception e) {
            throw new RuntimeException("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒãƒƒã‚·ãƒ¥åŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ", e);
        }
    }
    
    /**
     * ãƒ©ãƒ³ãƒ€ãƒ ã‚½ãƒ«ãƒˆç”Ÿæˆ
     */
    public static String generateSalt() {
        SecureRandom random = new SecureRandom();
        byte[] salt = new byte[16];
        random.nextBytes(salt);
        return Base64.getEncoder().encodeToString(salt);
    }
    
    /**
     * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¤œè¨¼
     */
    public static boolean verifyPassword(String inputPassword, 
                                       String storedHash, 
                                       String salt) {
        String hashedInput = hashPassword(inputPassword, salt);
        return hashedInput.equals(storedHash);
    }
}</code></pre>

                    <div class="security">
                        <h4>ğŸ›¡ï¸ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h4>
                        <ul>
                            <li><strong>ãƒãƒƒã‚·ãƒ¥åŒ–</strong>ï¼šå¹³æ–‡ã§ã®ä¿å­˜ã¯çµ¶å¯¾ã«é¿ã‘ã‚‹</li>
                            <li><strong>ã‚½ãƒ«ãƒˆä½¿ç”¨</strong>ï¼šãƒ¬ã‚¤ãƒ³ãƒœãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«æ”»æ’ƒã‚’é˜²ã</li>
                            <li><strong>å¼·åŠ›ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </strong>ï¼šSHA-256ä»¥ä¸Šã‚’ä½¿ç”¨</li>
                            <li><strong>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒªã‚·ãƒ¼</strong>ï¼šæœ€å°æ–‡å­—æ•°ã€æ–‡å­—ç¨®é¡ã®åˆ¶é™</li>
                            <li><strong>ãƒ­ã‚°ã‚¤ãƒ³è©¦è¡Œåˆ¶é™</strong>ï¼šãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹æ”»æ’ƒå¯¾ç­–</li>
                        </ul>
                    </div>

                    <h3>ğŸ” ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã®ç¢ºèª</h3>
                    
                    <pre class="code-block"><code class="language-java">// ãƒ™ãƒ¼ã‚¹Actionã‚¯ãƒ©ã‚¹
public abstract class SecureAction extends Action {
    
    protected User getLoginUser(HttpServletRequest request) {
        HttpSession session = request.getSession(false);
        if (session != null) {
            return (User) session.getAttribute("loginUser");
        }
        return null;
    }
    
    protected boolean isLoggedIn(HttpServletRequest request) {
        return getLoginUser(request) != null;
    }
    
    protected ActionForward checkLogin(ActionMapping mapping, 
                                     HttpServletRequest request) {
        if (!isLoggedIn(request)) {
            return mapping.findForward("login");
        }
        return null;
    }
}

// ç¶™æ‰¿ã—ãŸActionã‚¯ãƒ©ã‚¹
public class UserListAction extends SecureAction {
    
    public ActionForward execute(ActionMapping mapping, ActionForm form,
                                HttpServletRequest request, 
                                HttpServletResponse response) throws Exception {
        
        // ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯
        ActionForward loginCheck = checkLogin(mapping, request);
        if (loginCheck != null) {
            return loginCheck;
        }
        
        // é€šå¸¸ã®å‡¦ç†
        User loginUser = getLoginUser(request);
        // ... ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—å‡¦ç† ...
        
        return mapping.findForward("success");
    }
}</code></pre>
                </section>

                <!-- ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ -->
                <section id="access-control">
                    <h2 class="section-title">ğŸ›¡ï¸ ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã¨ãƒ­ãƒ¼ãƒ«ç®¡ç†</h2>
                    
                    <p>èªè¨¼ã ã‘ã§ãªãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™ã«å¿œã˜ãŸã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆèªå¯ï¼‰ã‚‚é‡è¦ã§ã™ã€‚</p>

                    <h3>ğŸ‘¥ ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®å®Ÿè£…</h3>
                    
                    <pre class="code-block"><code class="language-java">// Userã‚¯ãƒ©ã‚¹ã«ãƒ­ãƒ¼ãƒ«æƒ…å ±ã‚’è¿½åŠ 
public class User {
    private String username;
    private String email;
    private Set&lt;String&gt; roles; // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™
    
    public boolean hasRole(String role) {
        return roles != null && roles.contains(role);
    }
    
    public boolean hasAnyRole(String... roles) {
        if (this.roles == null) return false;
        for (String role : roles) {
            if (this.roles.contains(role)) {
                return true;
            }
        }
        return false;
    }
}

// ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ç”¨ã®Actionã‚¯ãƒ©ã‚¹
public class AdminAction extends SecureAction {
    
    public ActionForward execute(ActionMapping mapping, ActionForm form,
                                HttpServletRequest request, 
                                HttpServletResponse response) throws Exception {
        
        // ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯
        ActionForward loginCheck = checkLogin(mapping, request);
        if (loginCheck != null) {
            return loginCheck;
        }
        
        // ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯
        User loginUser = getLoginUser(request);
        if (!loginUser.hasRole("ADMIN")) {
            ActionMessages errors = new ActionMessages();
            errors.add(ActionMessages.GLOBAL_MESSAGE, 
                      new ActionMessage("error.access.denied"));
            saveErrors(request, errors);
            return mapping.findForward("accessDenied");
        }
        
        // ç®¡ç†è€…æ©Ÿèƒ½ã®å‡¦ç†
        // ...
        
        return mapping.findForward("success");
    }
}</code></pre>

                    <h3>ğŸ”§ Filterã‚’ä½¿ã£ãŸã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡</h3>
                    
                    <pre class="code-block"><code class="language-java">public class AuthenticationFilter implements Filter {
    
    private Set&lt;String&gt; publicPaths;
    
    public void init(FilterConfig config) throws ServletException {
        // èªè¨¼ä¸è¦ãªãƒ‘ã‚¹ã‚’è¨­å®š
        publicPaths = new HashSet&lt;&gt;();
        publicPaths.add("/login.do");
        publicPaths.add("/register.do");
        publicPaths.add("/index.jsp");
    }
    
    public void doFilter(ServletRequest request, ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        
        HttpServletRequest httpRequest = (HttpServletRequest) request;
        HttpServletResponse httpResponse = (HttpServletResponse) response;
        
        String path = httpRequest.getServletPath();
        
        // å…¬é–‹ãƒ‘ã‚¹ã¯ã‚¹ãƒ«ãƒ¼
        if (publicPaths.contains(path)) {
            chain.doFilter(request, response);
            return;
        }
        
        // ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯
        HttpSession session = httpRequest.getSession(false);
        User loginUser = null;
        if (session != null) {
            loginUser = (User) session.getAttribute("loginUser");
        }
        
        if (loginUser == null) {
            // æœªãƒ­ã‚°ã‚¤ãƒ³ã®å ´åˆã¯ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
            httpResponse.sendRedirect("/login.jsp");
            return;
        }
        
        chain.doFilter(request, response);
    }
}</code></pre>
                </section>

                <!-- CSRFå¯¾ç­– -->
                <section id="csrf-protection">
                    <h2 class="section-title">ğŸ”’ CSRFæ”»æ’ƒå¯¾ç­–</h2>
                    
                    <p><strong>CSRFï¼ˆCross-Site Request Forgeryï¼‰</strong>ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ã—ãªã„æ“ä½œã‚’æ‚ªæ„ã®ã‚ã‚‹ã‚µã‚¤ãƒˆã‹ã‚‰å®Ÿè¡Œã•ã›ã‚‹æ”»æ’ƒã§ã™ã€‚</p>

                    <div class="warning">
                        <h4>âš ï¸ CSRFæ”»æ’ƒã®ä»•çµ„ã¿</h4>
                        <ol>
                            <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ­£è¦ã‚µã‚¤ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ç¢ºç«‹ï¼‰</li>
                            <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‚ªæ„ã®ã‚ã‚‹ã‚µã‚¤ãƒˆã‚’è¨ªå•</li>
                            <li>æ‚ªæ„ã®ã‚ã‚‹ã‚µã‚¤ãƒˆãŒæ­£è¦ã‚µã‚¤ãƒˆã¸ã®ä¸æ­£ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡</li>
                            <li>ãƒ–ãƒ©ã‚¦ã‚¶ã¯è‡ªå‹•çš„ã«ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ã‚’é€ä¿¡</li>
                            <li>æ­£è¦ã‚µã‚¤ãƒˆã¯æ­£å½“ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨åˆ¤æ–­ã—ã¦å‡¦ç†å®Ÿè¡Œ</li>
                        </ol>
                    </div>

                    <h3>ğŸ›¡ï¸ CSRFãƒˆãƒ¼ã‚¯ãƒ³ã«ã‚ˆã‚‹å¯¾ç­–</h3>
                    
                    <pre class="code-block"><code class="language-java">// CSRFãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆãƒ»æ¤œè¨¼ã‚¯ãƒ©ã‚¹
public class CSRFTokenUtil {
    private static final String CSRF_TOKEN_KEY = "csrfToken";
    
    public static String generateToken(HttpServletRequest request) {
        // ã‚»ã‚­ãƒ¥ã‚¢ãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—ã‚’ç”Ÿæˆ
        SecureRandom random = new SecureRandom();
        byte[] tokenBytes = new byte[32];
        random.nextBytes(tokenBytes);
        String token = Base64.getEncoder().encodeToString(tokenBytes);
        
        // ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ä¿å­˜
        HttpSession session = request.getSession();
        session.setAttribute(CSRF_TOKEN_KEY, token);
        
        return token;
    }
    
    public static boolean validateToken(HttpServletRequest request, String token) {
        HttpSession session = request.getSession(false);
        if (session == null) {
            return false;
        }
        
        String storedToken = (String) session.getAttribute(CSRF_TOKEN_KEY);
        return storedToken != null && storedToken.equals(token);
    }
}</code></pre>

                    <h3>ğŸ“ ãƒ•ã‚©ãƒ¼ãƒ ã§ã®CSRFãƒˆãƒ¼ã‚¯ãƒ³å®Ÿè£…</h3>
                    
                    <pre class="code-block"><code class="language-jsp">&lt;%-- JSPãƒšãƒ¼ã‚¸ã§ã®ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆ --%&gt;
&lt;%
String csrfToken = CSRFTokenUtil.generateToken(request);
%&gt;

&lt;html:form action="/userRegister"&gt;
    &lt;!-- éš ã—ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§CSRFãƒˆãƒ¼ã‚¯ãƒ³ã‚’é€ä¿¡ --&gt;
    &lt;html:hidden property="csrfToken" value="&lt;%= csrfToken %&gt;"/&gt;
    
    &lt;table&gt;
        &lt;tr&gt;
            &lt;td&gt;ãƒ¦ãƒ¼ã‚¶ãƒ¼å:&lt;/td&gt;
            &lt;td&gt;&lt;html:text property="username"/&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;!-- ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ --&gt;
        &lt;tr&gt;
            &lt;td colspan="2"&gt;
                &lt;html:submit value="ç™»éŒ²"/&gt;
            &lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/html:form&gt;</code></pre>

                    <pre class="code-block"><code class="language-java">// Actionã‚¯ãƒ©ã‚¹ã§ã®CSRFæ¤œè¨¼
public class UserRegisterAction extends SecureAction {
    
    public ActionForward execute(ActionMapping mapping, ActionForm form,
                                HttpServletRequest request, 
                                HttpServletResponse response) throws Exception {
        
        UserForm userForm = (UserForm) form;
        
        // CSRFãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼
        if (!CSRFTokenUtil.validateToken(request, userForm.getCsrfToken())) {
            ActionMessages errors = new ActionMessages();
            errors.add(ActionMessages.GLOBAL_MESSAGE, 
                      new ActionMessage("error.csrf.invalid"));
            saveErrors(request, errors);
            return mapping.getInputForward();
        }
        
        // é€šå¸¸ã®ç™»éŒ²å‡¦ç†
        // ...
        
        return mapping.findForward("success");
    }
}</code></pre>
                </section>

                <!-- XSSå¯¾ç­– -->
                <section id="xss-protection">
                    <h2 class="section-title">âš¡ XSSæ”»æ’ƒå¯¾ç­–</h2>
                    
                    <p><strong>XSSï¼ˆCross-Site Scriptingï¼‰</strong>ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«æ‚ªæ„ã®ã‚ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ³¨å…¥ã—ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿè¡Œã•ã›ã‚‹æ”»æ’ƒã§ã™ã€‚</p>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="card security-card h-100">
                                <div class="card-header">
                                    ğŸ”´ åå°„å‹XSS
                                </div>
                                <div class="card-body">
                                    <p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ã‚’ãã®ã¾ã¾ç”»é¢ã«è¡¨ç¤º</p>
                                    <p><strong>ä¾‹:</strong> æ¤œç´¢çµæœãƒšãƒ¼ã‚¸ã§ã®æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¡¨ç¤º</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <div class="card security-card h-100">
                                <div class="card-header">
                                    ğŸ”´ æ ¼ç´å‹XSS
                                </div>
                                <div class="card-body">
                                    <p>æ‚ªæ„ã®ã‚ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜</p>
                                    <p><strong>ä¾‹:</strong> æ²ç¤ºæ¿ã®æŠ•ç¨¿å†…å®¹ã€ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h3>ğŸ›¡ï¸ XSSå¯¾ç­–ã®å®Ÿè£…</h3>
                    
                    <pre class="code-block"><code class="language-java">// HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
public class HtmlEscapeUtil {
    
    public static String escapeHtml(String input) {
        if (input == null) return null;
        
        return input.replace("&", "&amp;amp;")
                   .replace("&lt;", "&amp;lt;")
                   .replace("&gt;", "&amp;gt;")
                   .replace("\"", "&amp;quot;")
                   .replace("'", "&amp;#39;");
    }
    
    // ã‚ˆã‚Šé«˜åº¦ãªã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ï¼ˆOWASP Java Encoderã®ä½¿ç”¨ã‚’æ¨å¥¨ï¼‰
    public static String escapeHtmlAdvanced(String input) {
        // OWASP Java Encoder ã‚’ä½¿ç”¨ã—ãŸä¾‹
        // return Encode.forHtml(input);
        return escapeHtml(input); // ç°¡æ˜“ç‰ˆ
    }
}</code></pre>

                    <h3>ğŸ“ JSPã§ã®XSSå¯¾ç­–</h3>
                    
                    <pre class="code-block"><code class="language-jsp">&lt;%-- Strutsã‚¿ã‚°ã«ã‚ˆã‚‹è‡ªå‹•ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ï¼ˆæ¨å¥¨ï¼‰ --%&gt;
&lt;bean:write name="userForm" property="username"/&gt;

&lt;%-- filterå±æ€§ã§ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚’åˆ¶å¾¡ --%&gt;
&lt;bean:write name="userForm" property="username" filter="true"/&gt;

&lt;%-- HTMLã‚’è¨±å¯ã™ã‚‹å ´åˆï¼ˆæ³¨æ„ã—ã¦ä½¿ç”¨ï¼‰ --%&gt;
&lt;bean:write name="userForm" property="description" filter="false"/&gt;

&lt;%-- æ¡ä»¶ä»˜ãè¡¨ç¤ºã§ã®XSSå¯¾ç­– --%&gt;
&lt;logic:present name="searchKeyword"&gt;
    æ¤œç´¢çµæœ: &lt;bean:write name="searchKeyword"/&gt;
&lt;/logic:present&gt;</code></pre>

                    <div class="security">
                        <h4>âœ… XSSå¯¾ç­–ã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ</h4>
                        <ul>
                            <li><strong>å…¥åŠ›æ¤œè¨¼</strong>ï¼šè¨±å¯ã™ã‚‹æ–‡å­—ç¨®é¡ã‚’æ˜ç¢ºã«å®šç¾©</li>
                            <li><strong>å‡ºåŠ›ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—</strong>ï¼šHTMLã«å‡ºåŠ›ã™ã‚‹éš›ã¯å¿…ãšã‚¨ã‚¹ã‚±ãƒ¼ãƒ—</li>
                            <li><strong>Content Security Policy</strong>ï¼šHTTPãƒ˜ãƒƒãƒ€ãƒ¼ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œã‚’åˆ¶é™</li>
                            <li><strong>HTTPOnly Cookie</strong>ï¼šJavaScriptã‹ã‚‰ã®Cookieã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²æ­¢</li>
                        </ul>
                    </div>
                </section>

                <!-- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ -->
                <section id="security-best">
                    <h2 class="section-title">ğŸ’¡ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h2>

                    <div class="highlight">
                        <h4>ğŸ” èªè¨¼ãƒ»èªå¯ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h4>
                        <ul>
                            <li><strong>å¼·åŠ›ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒªã‚·ãƒ¼</strong>ï¼šæœ€å°8æ–‡å­—ã€è‹±æ•°è¨˜å·æ··åœ¨</li>
                            <li><strong>ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ</strong>ï¼šé©åˆ‡ãªã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚é–“è¨­å®š</li>
                            <li><strong>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ</strong>ï¼šãƒ­ã‚°ã‚¤ãƒ³è©¦è¡Œå›æ•°åˆ¶é™</li>
                            <li><strong>ã‚»ãƒƒã‚·ãƒ§ãƒ³å›ºå®šæ”»æ’ƒå¯¾ç­–</strong>ï¼šãƒ­ã‚°ã‚¤ãƒ³å¾Œã«ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã‚’å†ç”Ÿæˆ</li>
                        </ul>
                    </div>

                    <div class="security">
                        <h4>ğŸ›¡ï¸ ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»è¨­å®šãƒ¬ãƒ™ãƒ«ã®å¯¾ç­–</h4>
                        <ul>
                            <li><strong>HTTPSé€šä¿¡</strong>ï¼šæ©Ÿå¯†æƒ…å ±ã¯å¿…ãšæš—å·åŒ–é€šä¿¡</li>
                            <li><strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼</strong>ï¼šX-Frame-Optionsã€X-XSS-Protectionã®è¨­å®š</li>
                            <li><strong>ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸</strong>ï¼šæŠ€è¡“çš„è©³ç´°ã‚’éš ã—ãŸæ±ç”¨ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸</li>
                            <li><strong>ãƒ­ã‚°ç›£è¦–</strong>ï¼šä¸å¯©ãªã‚¢ã‚¯ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¤œå‡º</li>
                        </ul>
                    </div>

                    <h3>ğŸ“Š ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</h3>
                    
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ã‚«ãƒ†ã‚´ãƒª</th>
                                <th>ãƒã‚§ãƒƒã‚¯é …ç›®</th>
                                <th>é‡è¦åº¦</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>èªè¨¼</td>
                                <td>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒãƒƒã‚·ãƒ¥åŒ–</td>
                                <td>â­â­â­</td>
                            </tr>
                            <tr>
                                <td>ã‚»ãƒƒã‚·ãƒ§ãƒ³</td>
                                <td>é©åˆ‡ãªã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š</td>
                                <td>â­â­â­</td>
                            </tr>
                            <tr>
                                <td>å…¥åŠ›æ¤œè¨¼</td>
                                <td>ã™ã¹ã¦ã®å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼</td>
                                <td>â­â­â­</td>
                            </tr>
                            <tr>
                                <td>å‡ºåŠ›</td>
                                <td>HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†</td>
                                <td>â­â­â­</td>
                            </tr>
                            <tr>
                                <td>CSRF</td>
                                <td>ãƒˆãƒ¼ã‚¯ãƒ³ãƒ™ãƒ¼ã‚¹é˜²å¾¡</td>
                                <td>â­â­</td>
                            </tr>
                            <tr>
                                <td>é€šä¿¡</td>
                                <td>HTTPSé€šä¿¡ã®ä½¿ç”¨</td>
                                <td>â­â­â­</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <!-- å®Ÿç¿’èª²é¡Œ -->
                <section id="exercise">
                    <div class="exercise-container">
                        <h2>ğŸ’» å®Ÿç¿’èª²é¡Œ</h2>
                        
                        <h3>ğŸ“‹ èª²é¡Œ: ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ­ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…</h3>
                        <p>ä»¥ä¸‹ã®è¦ä»¶ã‚’æº€ãŸã™ãƒ­ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚</p>
                        
                        <div class="highlight">
                            <h4>ğŸ¯ å®Ÿè£…è¦ä»¶</h4>
                            <ul>
                                <li><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼</strong>ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ãƒ­ã‚°ã‚¤ãƒ³</li>
                                <li><strong>ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†</strong>ï¼šãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã®ä¿æŒã¨ç¢ºèª</li>
                                <li><strong>ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡</strong>ï¼šãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆãƒšãƒ¼ã‚¸ã®ä¿è­·</li>
                                <li><strong>CSRFå¯¾ç­–</strong>ï¼šé‡è¦ãªæ“ä½œã«ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼</li>
                                <li><strong>XSSå¯¾ç­–</strong>ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®é©åˆ‡ãªã‚¨ã‚¹ã‚±ãƒ¼ãƒ—</li>
                                <li><strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–</strong>ï¼šãƒ­ã‚°ã‚¤ãƒ³è©¦è¡Œå›æ•°åˆ¶é™</li>
                            </ul>
                        </div>

                        <h4>ğŸ’¡ å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ</h4>
                        <ul>
                            <li>SecureActionã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã¦å…±é€šå‡¦ç†ã‚’å®Ÿè£…</li>
                            <li>CSRFTokenUtilã‚¯ãƒ©ã‚¹ã§ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†</li>
                            <li>é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º</li>
                            <li>ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå¯¾å¿œ</li>
                        </ul>
                    </div>
                </section>

                <!-- ç†è§£åº¦ç¢ºèªã‚¯ã‚¤ã‚º -->
                <section id="quiz">
                    <div class="quiz-container">
                        <h2>ğŸ“ ç†è§£åº¦ç¢ºèªã‚¯ã‚¤ã‚º</h2>

                        <div class="quiz-item">
                            <h4>â“ å•é¡Œ1</h4>
                            <p><strong>CSRFæ”»æ’ƒ</strong>ã‚’é˜²ãæœ€ã‚‚åŠ¹æœçš„ãªæ–¹æ³•ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ</p>
                            
                            <div class="quiz-options">
                                <label><input type="radio" name="q1" value="a"> a) ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’çŸ­ãã™ã‚‹</label><br>
                                <label><input type="radio" name="q1" value="b"> b) CSRFãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹</label><br>
                                <label><input type="radio" name="q1" value="c"> c) HTTPSã‚’ä½¿ç”¨ã™ã‚‹</label><br>
                                <label><input type="radio" name="q1" value="d"> d) ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¼·åŠ›ã«ã™ã‚‹</label>
                            </div>
                            
                            <div class="quiz-answer" style="display: none;">
                                <strong>æ­£è§£: b) CSRFãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹</strong><br>
                                CSRFãƒˆãƒ¼ã‚¯ãƒ³ã«ã‚ˆã‚Šã€æ­£è¦ã®ã‚µã‚¤ãƒˆã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨æ‚ªæ„ã®ã‚ã‚‹ã‚µã‚¤ãƒˆã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’åŒºåˆ¥ã§ãã¾ã™ã€‚
                            </div>
                        </div>

                        <div class="quiz-item">
                            <h4>â“ å•é¡Œ2</h4>
                            <p><strong>XSSæ”»æ’ƒ</strong>ã‚’é˜²ããŸã‚ã«ã€JSPã§æ–‡å­—åˆ—ã‚’è¡¨ç¤ºã™ã‚‹éš›ã«æ¨å¥¨ã•ã‚Œã‚‹æ–¹æ³•ã¯ï¼Ÿ</p>
                            
                            <div class="quiz-options">
                                <label><input type="radio" name="q2" value="a"> a) &lt;%= variable %&gt; ã‚’ä½¿ç”¨ã™ã‚‹</label><br>
                                <label><input type="radio" name="q2" value="b"> b) &lt;bean:write name="variable" filter="false"/&gt; ã‚’ä½¿ç”¨ã™ã‚‹</label><br>
                                <label><input type="radio" name="q2" value="c"> b) &lt;bean:write name="variable"/&gt; ã‚’ä½¿ç”¨ã™ã‚‹</label><br>
                                <label><input type="radio" name="q2" value="d"> d) JavaScript ã§è¡¨ç¤ºã™ã‚‹</label>
                            </div>
                            
                            <div class="quiz-answer" style="display: none;">
                                <strong>æ­£è§£: c) &lt;bean:write name="variable"/&gt; ã‚’ä½¿ç”¨ã™ã‚‹</strong><br>
                                bean:writeã‚¿ã‚°ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚’è¡Œã†ãŸã‚ã€XSSæ”»æ’ƒã‚’è‡ªå‹•çš„ã«é˜²ã’ã¾ã™ã€‚
                            </div>
                        </div>

                        <div class="quiz-item">
                            <h4>â“ å•é¡Œ3</h4>
                            <p>ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç®¡ç†ã«ãŠã„ã¦ã€<strong>æœ€ã‚‚é‡è¦</strong>ãªè¦ç´ ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ</p>
                            
                            <div class="quiz-options">
                                <label><input type="radio" name="q3" value="a"> a) ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¹³æ–‡ã§ä¿å­˜ã™ã‚‹</label><br>
                                <label><input type="radio" name="q3" value="b"> b) ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’Base64ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦ä¿å­˜ã™ã‚‹</label><br>
                                <label><input type="radio" name="q3" value="c"> c) ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚½ãƒ«ãƒˆä»˜ããƒãƒƒã‚·ãƒ¥ã§ä¿å­˜ã™ã‚‹</label><br>
                                <label><input type="radio" name="q3" value="d"> d) ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æš—å·åŒ–ã—ã¦ä¿å­˜ã™ã‚‹</label>
                            </div>
                            
                            <div class="quiz-answer" style="display: none;">
                                <strong>æ­£è§£: c) ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚½ãƒ«ãƒˆä»˜ããƒãƒƒã‚·ãƒ¥ã§ä¿å­˜ã™ã‚‹</strong><br>
                                ã‚½ãƒ«ãƒˆä»˜ããƒãƒƒã‚·ãƒ¥åŒ–ã«ã‚ˆã‚Šã€ãƒ¬ã‚¤ãƒ³ãƒœãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«æ”»æ’ƒã‚’é˜²ãã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å®‰å…¨ã«ä¿å­˜ã§ãã¾ã™ã€‚
                            </div>
                        </div>

                        <button type="button" class="btn btn-orange mt-3" onclick="showAllAnswers()">è§£ç­”ã‚’è¡¨ç¤º</button>
                    </div>
                </section>

                <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
                <div class="d-flex justify-content-between mt-4">
                    <a href="struts1-learning-material-06.html" class="btn btn-outline-secondary">â¬…ï¸ ç¬¬6ç« ã«æˆ»ã‚‹</a>
                    <a href="struts1-learning-material-08.html" class="btn btn-orange">ç¬¬8ç« ã«é€²ã‚€ â¡ï¸</a>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap 5 JS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // Highlight.jsåˆæœŸåŒ–
            hljs.highlightAll();
            
            // Mermaid.jsåˆæœŸåŒ–
            mermaid.initialize({
                startOnLoad: true,
                theme: 'default'
            });
            
            // ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
            
            // ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒªãƒ³ã‚¯æ›´æ–°
            const observerOptions = {
                root: null,
                rootMargin: '0px 0px -80% 0px',
                threshold: 0.1
            };
            
            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        document.querySelectorAll('.nav-link').forEach(link => {
                            link.classList.remove('active');
                        });
                        const activeLink = document.querySelector(`a[href="#${id}"]`);
                        if (activeLink) {
                            activeLink.classList.add('active');
                        }
                    }
                });
            }, observerOptions);
            
            // ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¦ç´ ã‚’ç›£è¦–å¯¾è±¡ã«è¿½åŠ 
            document.querySelectorAll('section[id]').forEach(section => {
                observer.observe(section);
            });
        });
        
        // ã‚¯ã‚¤ã‚ºè§£ç­”è¡¨ç¤ºæ©Ÿèƒ½
        function showAllAnswers() {
            document.querySelectorAll('.quiz-answer').forEach(answer => {
                answer.style.display = 'block';
            });
        }
    </script>
</body>
</html>