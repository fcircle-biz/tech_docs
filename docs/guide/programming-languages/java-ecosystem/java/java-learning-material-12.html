<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" id="viewport-meta">
    <title>Java学習教材 第12章 - ラムダ式とStream API</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Java - Orange
                        primary: {
                            50: '#fff7ed',
                            100: '#ffedd5',
                            200: '#fed7aa',
                            300: '#fdba74',
                            400: '#fb923c',
                            500: '#ED8B00',
                            600: '#ea580c',
                            700: '#c2410c',
                            800: '#9a3412',
                            900: '#7c2d12',
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans JP"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts - Noto Sans JP -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- カスタムスタイル -->
    <style>
        /* スクロールバーカスタマイズ */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* コードブロックのラインナンバー */
        .hljs-ln-numbers {
            user-select: none;
            text-align: right;
            color: #6b7280;
            padding-right: 12px;
            border-right: 1px solid #374151;
        }

        /* サイドバートランジション */
        .sidebar-transition {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out, width 0.15s ease-out;
        }

        /* サイドバーリサイズ機能 */
        .sidebar-resizable {
            min-width: 240px;
            max-width: 480px;
        }
        .sidebar-resize-handle {
            position: absolute;
            top: 0;
            right: 0;
            width: 6px;
            height: 100%;
            cursor: ew-resize;
            background: transparent;
            transition: background 0.2s;
            z-index: 10;
        }
        .sidebar-resize-handle:hover,
        .sidebar-resize-handle.resizing {
            background: linear-gradient(to right, transparent, rgba(237, 139, 0, 0.3));
        }

        /* スムーズスクロール */
        html { scroll-behavior: smooth; }

        /* コードコピーボタン */
        .code-block-wrapper { position: relative; }
        .copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            opacity: 0;
            transition: opacity 0.2s;
        }
        .code-block-wrapper:hover .copy-btn { opacity: 1; }

        /* ヘッダー情報リッチデザイン */
        .header-rich {
            background: linear-gradient(135deg,
                #c2410c 0%,
                #ED8B00 50%,
                #fb923c 100%);
            position: relative;
            overflow: hidden;
        }
        .header-rich::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.05) 50%, transparent 70%),
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(255, 255, 255, 0.03) 2px, rgba(255, 255, 255, 0.03) 4px);
            animation: bgSlide 10s linear infinite;
        }
        @keyframes bgSlide {
            0% { transform: translateX(0); }
            100% { transform: translateX(50px); }
        }

        .header-rich-shadow {
            box-shadow:
                0 4px 6px -1px rgba(237, 139, 0, 0.2),
                0 10px 25px -5px rgba(237, 139, 0, 0.3),
                0 0 50px rgba(237, 139, 0, 0.15);
        }

        .icon-rotate-hover {
            transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        .icon-rotate-hover:hover {
            transform: rotate(360deg) scale(1.2);
        }

        /* サイドバー閉じた状態（PC環境用） */
        @media (min-width: 768px) {
            .sidebar-closed {
                transform: translateX(-100%);
                opacity: 0;
                pointer-events: none;
            }
        }

        /* サイドバートグルボタン */
        .sidebar-toggle-btn {
            position: fixed;
            top: 6rem;
            left: 1rem;
            z-index: 30;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        .sidebar-toggle-btn:hover {
            background: #f8fafc;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        @media (max-width: 767px) {
            .sidebar-toggle-btn {
                display: none;
            }
        }
    </style>
</head>
<body class="font-sans bg-slate-50 text-slate-800 antialiased">
    <!-- ヘッダー/ナビゲーションバー -->
    <header class="fixed top-0 left-0 right-0 z-50 text-white header-rich header-rich-shadow">
        <nav class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="flex items-center justify-between py-3">
                <!-- 左側: ロゴとタイトルセクション -->
                <div class="flex items-center gap-4">
                    <!-- アイコン -->
                    <div class="relative group">
                        <div class="absolute inset-0 bg-gradient-to-br from-yellow-400/30 to-orange-400/30 rounded-2xl blur-lg group-hover:blur-xl transition-all"></div>
                        <div class="relative w-14 h-14 bg-white/10 rounded-xl flex items-center justify-center backdrop-blur-sm border border-white/20">
                            <i class="fab fa-java text-3xl icon-rotate-hover drop-shadow-lg"></i>
                        </div>
                    </div>

                    <!-- タイトルとメタ情報 -->
                    <div class="flex flex-col gap-1">
                        <div class="flex items-center gap-2">
                            <span class="text-xl font-bold tracking-wide drop-shadow-md">Java学習教材</span>
                            <span class="hidden sm:inline-flex items-center gap-1 px-2 py-0.5 bg-white/20 rounded-md text-[10px] font-semibold uppercase tracking-wider">
                                <i class="fas fa-star text-yellow-300 text-[8px]"></i>
                                初級
                            </span>
                        </div>
                        <div class="flex items-center gap-3 text-[11px] text-white/90 font-medium">
                            <div class="flex items-center gap-1">
                                <i class="fas fa-code text-[9px]"></i>
                                <span>プログラミング言語</span>
                            </div>
                            <div class="hidden sm:flex items-center gap-1">
                                <i class="fas fa-clock text-[9px]"></i>
                                <span>推奨 60分</span>
                            </div>
                            <div class="hidden lg:flex items-center gap-1">
                                <i class="fas fa-language text-[9px]"></i>
                                <span>日本語</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 右側: モバイルメニューボタン -->
                <button id="mobile-menu-btn" class="md:hidden w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white/20 transition-all active:scale-95">
                    <i class="fas fa-bars text-lg"></i>
                </button>
            </div>
        </nav>
    </header>

    <!-- メインレイアウト -->
    <div class="flex min-h-screen pt-20">
        <!-- サイドバー -->
        <aside id="sidebar" class="fixed md:sticky top-20 left-0 z-40 w-80 h-[calc(100vh-5rem)]
                                   bg-white border-r border-slate-200 overflow-y-auto flex-shrink-0
                                   transform -translate-x-full md:translate-x-0 sidebar-transition sidebar-resizable"
               style="--sidebar-width: 320px;">
            <!-- リサイズハンドル -->
            <div id="sidebar-resize-handle" class="sidebar-resize-handle hidden md:block"></div>
            <div class="p-4">
                <!-- 進捗インジケーター -->
                <div class="mb-6 p-4 bg-primary-50 rounded-xl">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm font-medium text-primary-700">学習進捗</span>
                        <span class="text-sm text-primary-600">12/12章</span>
                    </div>
                    <div class="w-full bg-primary-100 rounded-full h-2">
                        <div class="bg-primary-500 h-2 rounded-full transition-all duration-300" style="width: 100.0%"></div>
                    </div>
                </div>

                <!-- 章リスト -->
                <nav>
                    <h2 class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-3 px-2">
                        学習章
                    </h2>
                    <ul class="space-y-1">
                        <li>
                            <a href="java-learning-material-01.html"
                               class="flex items-center gap-3 px-3 py-2.5 rounded-lg
                                      text-slate-600 hover:bg-slate-100 transition-colors">
                                <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center
                                             bg-emerald-500 text-white text-xs rounded-full">
                                    <i class="fas fa-check text-[10px]"></i>
                                </span>
                                <span class="truncate">第1章: 環境構築と最初の一歩</span>
                            </a>
                        </li>
                        <li>
                            <a href="java-learning-material-02.html"
                               class="flex items-center gap-3 px-3 py-2.5 rounded-lg
                                      text-slate-600 hover:bg-slate-100 transition-colors">
                                <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center
                                             bg-emerald-500 text-white text-xs rounded-full">
                                    <i class="fas fa-check text-[10px]"></i>
                                </span>
                                <span class="truncate">第2章: 変数とデータ型</span>
                            </a>
                        </li>
                        <li>
                            <a href="java-learning-material-03.html"
                               class="flex items-center gap-3 px-3 py-2.5 rounded-lg
                                      text-slate-600 hover:bg-slate-100 transition-colors">
                                <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center
                                             bg-emerald-500 text-white text-xs rounded-full">
                                    <i class="fas fa-check text-[10px]"></i>
                                </span>
                                <span class="truncate">第3章: 演算子と式</span>
                            </a>
                        </li>
                        <li>
                            <a href="java-learning-material-04.html"
                               class="flex items-center gap-3 px-3 py-2.5 rounded-lg
                                      text-slate-600 hover:bg-slate-100 transition-colors">
                                <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center
                                             bg-emerald-500 text-white text-xs rounded-full">
                                    <i class="fas fa-check text-[10px]"></i>
                                </span>
                                <span class="truncate">第4章: 条件分岐</span>
                            </a>
                        </li>
                        <li>
                            <a href="java-learning-material-05.html"
                               class="flex items-center gap-3 px-3 py-2.5 rounded-lg
                                      text-slate-600 hover:bg-slate-100 transition-colors">
                                <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center
                                             bg-emerald-500 text-white text-xs rounded-full">
                                    <i class="fas fa-check text-[10px]"></i>
                                </span>
                                <span class="truncate">第5章: 繰り返し処理</span>
                            </a>
                        </li>
                        <li>
                            <a href="java-learning-material-06.html"
                               class="flex items-center gap-3 px-3 py-2.5 rounded-lg
                                      text-slate-600 hover:bg-slate-100 transition-colors">
                                <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center
                                             bg-emerald-500 text-white text-xs rounded-full">
                                    <i class="fas fa-check text-[10px]"></i>
                                </span>
                                <span class="truncate">第6章: 配列</span>
                            </a>
                        </li>
                        <li>
                            <a href="java-learning-material-07.html"
                               class="flex items-center gap-3 px-3 py-2.5 rounded-lg
                                      text-slate-600 hover:bg-slate-100 transition-colors">
                                <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center
                                             bg-emerald-500 text-white text-xs rounded-full">
                                    <i class="fas fa-check text-[10px]"></i>
                                </span>
                                <span class="truncate">第7章: メソッド</span>
                            </a>
                        </li>
                        <li>
                            <a href="java-learning-material-08.html"
                               class="flex items-center gap-3 px-3 py-2.5 rounded-lg
                                      text-slate-600 hover:bg-slate-100 transition-colors">
                                <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center
                                             bg-emerald-500 text-white text-xs rounded-full">
                                    <i class="fas fa-check text-[10px]"></i>
                                </span>
                                <span class="truncate">第8章: クラスとオブジェクト</span>
                            </a>
                        </li>
                        <li>
                            <a href="java-learning-material-09.html"
                               class="flex items-center gap-3 px-3 py-2.5 rounded-lg
                                      text-slate-600 hover:bg-slate-100 transition-colors">
                                <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center
                                             bg-emerald-500 text-white text-xs rounded-full">
                                    <i class="fas fa-check text-[10px]"></i>
                                </span>
                                <span class="truncate">第9章: 継承とポリモーフィズム</span>
                            </a>
                        </li>
                        <li>
                            <a href="java-learning-material-10.html"
                               class="flex items-center gap-3 px-3 py-2.5 rounded-lg
                                      text-slate-600 hover:bg-slate-100 transition-colors">
                                <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center
                                             bg-emerald-500 text-white text-xs rounded-full">
                                    <i class="fas fa-check text-[10px]"></i>
                                </span>
                                <span class="truncate">第10章: 例外処理とJava API</span>
                            </a>
                        </li>
                        <li>
                            <a href="java-learning-material-11.html"
                               class="flex items-center gap-3 px-3 py-2.5 rounded-lg
                                      text-slate-600 hover:bg-slate-100 transition-colors">
                                <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center
                                             bg-emerald-500 text-white text-xs rounded-full">
                                    <i class="fas fa-check text-[10px]"></i>
                                </span>
                                <span class="truncate">第11章: コレクションフレームワーク</span>
                            </a>
                        </li>
                        <!-- アクティブな章 -->
                        <li>
                            <a href="java-learning-material-12.html"
                               class="flex items-center gap-3 px-3 py-2.5 rounded-lg
                                      bg-primary-100 text-primary-700 font-medium">
                                <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center
                                             bg-primary-500 text-white text-xs rounded-full">12</span>
                                <span class="truncate">第12章: ラムダ式とStream API</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- サイドバーオーバーレイ（モバイル用） -->
        <div id="sidebar-overlay" class="fixed inset-0 bg-black/50 z-30 hidden md:hidden"></div>

        <!-- サイドバートグルボタン（PC用） -->
        <button id="sidebar-toggle-btn" class="sidebar-toggle-btn hidden md:flex items-center justify-center w-10 h-10">
            <i class="fas fa-chevron-left text-slate-600"></i>
        </button>

        <!-- メインコンテンツ -->
        <main class="flex-1 min-w-0">
            <div class="max-w-5xl px-4 sm:px-6 lg:px-10 py-6">
                <!-- パンくずリスト -->
                <nav class="flex items-center gap-2 text-sm text-slate-500 mb-6">
                    <a href="https://fcircle-biz.github.io/tech_docs/" class="hover:text-primary-600 transition-colors">ホーム</a>
                    <i class="fas fa-chevron-right text-xs"></i>
                    <a href="../README.html" class="hover:text-primary-600 transition-colors">Java</a>
                    <i class="fas fa-chevron-right text-xs"></i>
                    <span class="text-slate-700">第12章</span>
                </nav>

                <!-- 章ヘッダー -->
                <header class="mb-6">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary-100 text-primary-700">
                            第12章
                        </span>
                    </div>
                    <h1 class="text-2xl sm:text-3xl font-bold text-slate-900 mb-2">ラムダ式とStream API - モダンJavaプログラミング</h1>
                    <p class="text-slate-600">Java 8で導入されたラムダ式とStream APIを学び、より簡潔で宣言的なコードを書けるようになりましょう。</p>
                </header>

                <!-- 学習目標カード -->
                <div class="bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-xl p-5 mb-6">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-amber-400 rounded-lg flex items-center justify-center">
                            <i class="fas fa-lightbulb text-white"></i>
                        </div>
                        <div>
                            <h2 class="text-lg font-semibold text-amber-800 mb-3">この章で学ぶこと</h2>
                            <ul class="space-y-2">
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>ラムダ式の構文と使い方を理解する</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>関数型インターフェースの概念を理解する</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>Stream APIを使ったデータ処理ができる</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>メソッド参照とOptionalクラスを活用できる</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- セクション1: ラムダ式とは -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        12.1 ラムダ式とは
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        ラムダ式は、Java 8で導入された「無名関数」を簡潔に記述するための構文です。従来の匿名クラスよりもコードが短く、読みやすくなります。
                    </p>

                    <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
                        <p class="text-blue-900 font-medium mb-2"><i class="fas fa-info-circle text-blue-500 mr-2"></i>ラムダ式の基本構文</p>
                        <code class="text-blue-800">(引数リスト) -> { 処理 }</code>
                    </div>

                    <!-- 従来の匿名クラスとラムダ式の比較 -->
                    <h3 class="text-lg font-semibold text-slate-700 mt-6 mb-3">従来の匿名クラスとの比較</h3>
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">OldStyleComparison.java</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-java">import java.util.*;

public class OldStyleComparison {
    public static void main(String[] args) {
        List<String> names = Arrays.asList("太郎", "花子", "次郎", "愛");

        // 【従来の匿名クラス】- 冗長で読みにくい
        Collections.sort(names, new Comparator<String>() {
            @Override
            public int compare(String s1, String s2) {
                return s1.length() - s2.length();
            }
        });

        // 【ラムダ式】- 簡潔で分かりやすい
        Collections.sort(names, (s1, s2) -> s1.length() - s2.length());

        System.out.println(names);  // [愛, 太郎, 花子, 次郎]
    }
}</code></pre>
                    </div>

                    <h3 class="text-lg font-semibold text-slate-700 mt-6 mb-3">ラムダ式の省略記法</h3>
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">LambdaSyntax.java</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-java">import java.util.function.*;

public class LambdaSyntax {
    public static void main(String[] args) {
        // 基本形: 複数の引数、複数の文
        BiFunction<Integer, Integer, Integer> add1 = (x, y) -> {
            int sum = x + y;
            return sum;
        };

        // 省略形1: 処理が1文なら波括弧とreturnを省略可能
        BiFunction<Integer, Integer, Integer> add2 = (x, y) -> x + y;

        // 省略形2: 引数が1つなら括弧を省略可能
        Function<String, Integer> length1 = s -> s.length();

        // 型推論: 引数の型は省略可能（コンパイラが推論）
        Function<String, Integer> length2 = (String s) -> s.length();

        // 引数なし
        Supplier<String> greeting = () -> "こんにちは";

        System.out.println(add2.apply(5, 3));       // 8
        System.out.println(length1.apply("Java"));  // 4
        System.out.println(greeting.get());         // こんにちは
    }
}</code></pre>
                    </div>
                </section>

                <!-- セクション2: 関数型インターフェース -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        12.2 関数型インターフェース
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        関数型インターフェースとは、抽象メソッドを1つだけ持つインターフェースのことです。ラムダ式はこの関数型インターフェースの実装として使用されます。
                    </p>

                    <div class="bg-green-50 border-l-4 border-green-400 p-4 mb-4">
                        <p class="text-green-900 font-medium mb-2"><i class="fas fa-lightbulb text-green-500 mr-2"></i>@FunctionalInterfaceアノテーション</p>
                        <p class="text-green-800 text-sm">このアノテーションを付けると、コンパイラが関数型インターフェースの規約をチェックしてくれます。</p>
                    </div>

                    <h3 class="text-lg font-semibold text-slate-700 mt-6 mb-3">主要な標準関数型インターフェース</h3>

                    <!-- Mermaid図: 関数型インターフェース -->
                    <div class="bg-white border border-slate-200 rounded-lg p-6 my-6">
                        <pre class="mermaid">
graph LR
    A[関数型インターフェース] --> B[Predicate&lt;T&gt;<br/>T → boolean]
    A --> C[Function&lt;T,R&gt;<br/>T → R]
    A --> D[Consumer&lt;T&gt;<br/>T → void]
    A --> E[Supplier&lt;T&gt;<br/>() → T]

    style A fill:#fff7ed,stroke:#ED8B00,stroke-width:3px
    style B fill:#dbeafe,stroke:#3b82f6
    style C fill:#dbeafe,stroke:#3b82f6
    style D fill:#dbeafe,stroke:#3b82f6
    style E fill:#dbeafe,stroke:#3b82f6
                        </pre>
                    </div>

                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">FunctionalInterfaces.java</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-java">import java.util.function.*;

public class FunctionalInterfaces {
    public static void main(String[] args) {
        // Predicate<T>: 条件判定 (T → boolean)
        Predicate<Integer> isEven = n -> n % 2 == 0;
        System.out.println(isEven.test(4));  // true
        System.out.println(isEven.test(5));  // false

        // Function<T, R>: 変換 (T → R)
        Function<String, Integer> strLength = s -> s.length();
        System.out.println(strLength.apply("Hello"));  // 5

        // Consumer<T>: 消費 (T → void)
        Consumer<String> printer = s -> System.out.println("出力: " + s);
        printer.accept("こんにちは");  // 出力: こんにちは

        // Supplier<T>: 供給 (() → T)
        Supplier<Double> randomValue = () -> Math.random();
        System.out.println(randomValue.get());  // 0.0～1.0のランダム値

        // BiFunction<T, U, R>: 2引数変換 (T, U → R)
        BiFunction<Integer, Integer, Integer> multiply = (a, b) -> a * b;
        System.out.println(multiply.apply(3, 4));  // 12
    }
}</code></pre>
                    </div>

                    <h3 class="text-lg font-semibold text-slate-700 mt-6 mb-3">独自の関数型インターフェース</h3>
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">CustomFunctionalInterface.java</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-java">@FunctionalInterface
interface Calculator {
    int calculate(int a, int b);  // 抽象メソッドは1つだけ
}

public class CustomFunctionalInterface {
    public static void main(String[] args) {
        // ラムダ式で実装
        Calculator add = (a, b) -> a + b;
        Calculator subtract = (a, b) -> a - b;
        Calculator multiply = (a, b) -> a * b;

        System.out.println(add.calculate(10, 5));       // 15
        System.out.println(subtract.calculate(10, 5));  // 5
        System.out.println(multiply.calculate(10, 5));  // 50
    }
}</code></pre>
                    </div>
                </section>

                <!-- セクション3: メソッド参照 -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        12.3 メソッド参照
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        メソッド参照は、既存のメソッドをラムダ式の代わりに使用するための簡潔な記法です。<code>::</code>演算子を使用します。
                    </p>

                    <div class="overflow-x-auto mb-6">
                        <table class="min-w-full border-collapse border border-slate-300">
                            <thead class="bg-primary-50">
                                <tr>
                                    <th class="border border-slate-300 px-4 py-2 text-left text-primary-700">種類</th>
                                    <th class="border border-slate-300 px-4 py-2 text-left text-primary-700">構文</th>
                                    <th class="border border-slate-300 px-4 py-2 text-left text-primary-700">ラムダ式</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="border border-slate-300 px-4 py-2">静的メソッド参照</td>
                                    <td class="border border-slate-300 px-4 py-2"><code>クラス名::メソッド名</code></td>
                                    <td class="border border-slate-300 px-4 py-2"><code>(x) -> クラス名.メソッド名(x)</code></td>
                                </tr>
                                <tr class="bg-slate-50">
                                    <td class="border border-slate-300 px-4 py-2">インスタンスメソッド参照</td>
                                    <td class="border border-slate-300 px-4 py-2"><code>オブジェクト::メソッド名</code></td>
                                    <td class="border border-slate-300 px-4 py-2"><code>(x) -> オブジェクト.メソッド名(x)</code></td>
                                </tr>
                                <tr>
                                    <td class="border border-slate-300 px-4 py-2">任意オブジェクトのメソッド参照</td>
                                    <td class="border border-slate-300 px-4 py-2"><code>クラス名::メソッド名</code></td>
                                    <td class="border border-slate-300 px-4 py-2"><code>(x, y) -> x.メソッド名(y)</code></td>
                                </tr>
                                <tr class="bg-slate-50">
                                    <td class="border border-slate-300 px-4 py-2">コンストラクタ参照</td>
                                    <td class="border border-slate-300 px-4 py-2"><code>クラス名::new</code></td>
                                    <td class="border border-slate-300 px-4 py-2"><code>(x) -> new クラス名(x)</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">MethodReference.java</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-java">import java.util.*;
import java.util.function.*;

public class MethodReference {
    public static void main(String[] args) {
        List<String> names = Arrays.asList("太郎", "花子", "次郎");

        // 1. 静的メソッド参照
        // ラムダ式: s -> Integer.parseInt(s)
        Function<String, Integer> parser = Integer::parseInt;
        System.out.println(parser.apply("123"));  // 123

        // 2. インスタンスメソッド参照
        String prefix = "名前: ";
        // ラムダ式: s -> prefix.concat(s)
        Function<String, String> addPrefix = prefix::concat;
        System.out.println(addPrefix.apply("太郎"));  // 名前: 太郎

        // 3. 任意のオブジェクトのインスタンスメソッド参照
        // ラムダ式: (s1, s2) -> s1.compareToIgnoreCase(s2)
        Comparator<String> comparator = String::compareToIgnoreCase;
        names.sort(comparator);
        System.out.println(names);

        // 4. コンストラクタ参照
        // ラムダ式: () -> new ArrayList<>()
        Supplier<List<String>> listSupplier = ArrayList::new;
        List<String> newList = listSupplier.get();

        // よく使う例: forEach + メソッド参照
        names.forEach(System.out::println);  // 各要素を出力
    }
}</code></pre>
                    </div>
                </section>

                <!-- セクション4: Stream APIの基礎 -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        12.4 Stream APIの基礎
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        Stream APIは、コレクションや配列のデータを宣言的に処理するための強力なAPIです。データ処理をパイプライン形式で記述できます。
                    </p>

                    <div class="bg-purple-50 border-l-4 border-purple-400 p-4 mb-4">
                        <p class="text-purple-900 font-medium mb-2"><i class="fas fa-star text-purple-500 mr-2"></i>Streamの3つの要素</p>
                        <ol class="text-purple-800 text-sm space-y-1 ml-4">
                            <li><strong>ソース</strong>: データの元（コレクション、配列など）</li>
                            <li><strong>中間操作</strong>: データの変換・フィルタリング（遅延評価）</li>
                            <li><strong>終端操作</strong>: 最終結果の生成（実際に処理が実行される）</li>
                        </ol>
                    </div>

                    <!-- Mermaid図: Streamのパイプライン -->
                    <div class="bg-white border border-slate-200 rounded-lg p-6 my-6">
                        <pre class="mermaid">
graph LR
    A[データソース<br/>List, Array] --> B[中間操作<br/>filter, map, sorted]
    B --> C[中間操作<br/>filter, map, sorted]
    C --> D[終端操作<br/>collect, forEach]
    D --> E[結果]

    style A fill:#dbeafe,stroke:#3b82f6
    style B fill:#fef3c7,stroke:#f59e0b
    style C fill:#fef3c7,stroke:#f59e0b
    style D fill:#dcfce7,stroke:#10b981
    style E fill:#fff7ed,stroke:#ED8B00
                        </pre>
                    </div>

                    <h3 class="text-lg font-semibold text-slate-700 mt-6 mb-3">Streamの生成</h3>
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">StreamCreation.java</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-java">import java.util.*;
import java.util.stream.*;

public class StreamCreation {
    public static void main(String[] args) {
        // 1. コレクションから生成
        List<String> list = Arrays.asList("A", "B", "C");
        Stream<String> stream1 = list.stream();

        // 2. 配列から生成
        String[] array = {"X", "Y", "Z"};
        Stream<String> stream2 = Arrays.stream(array);

        // 3. 値から直接生成
        Stream<Integer> stream3 = Stream.of(1, 2, 3, 4, 5);

        // 4. 無限Stream（limit必須）
        Stream<Integer> infiniteStream = Stream.iterate(0, n -> n + 2).limit(5);
        infiniteStream.forEach(System.out::println);  // 0, 2, 4, 6, 8
    }
}</code></pre>
                    </div>
                </section>

                <!-- セクション5: Stream APIの中間操作 -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        12.5 Stream APIの中間操作
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        中間操作は新しいStreamを返すため、メソッドチェーンで連結できます。遅延評価されるため、終端操作が呼ばれるまで実行されません。
                    </p>

                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">IntermediateOperations.java</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-java">import java.util.*;
import java.util.stream.*;

public class IntermediateOperations {
    public static void main(String[] args) {
        List<Integer> numbers = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);

        // filter: 条件に合う要素を抽出
        List<Integer> evens = numbers.stream()
            .filter(n -> n % 2 == 0)  // 偶数だけ
            .collect(Collectors.toList());
        System.out.println("偶数: " + evens);  // [2, 4, 6, 8, 10]

        // map: 要素を変換
        List<Integer> doubled = numbers.stream()
            .map(n -> n * 2)  // 2倍にする
            .collect(Collectors.toList());
        System.out.println("2倍: " + doubled);  // [2, 4, 6, 8, ..., 20]

        // sorted: ソート
        List<String> names = Arrays.asList("太郎", "花子", "次郎", "愛");
        List<String> sorted = names.stream()
            .sorted((s1, s2) -> s1.length() - s2.length())  // 長さ順
            .collect(Collectors.toList());
        System.out.println("長さ順: " + sorted);  // [愛, 太郎, 花子, 次郎]

        // distinct: 重複除去
        List<Integer> duplicates = Arrays.asList(1, 2, 2, 3, 3, 3, 4);
        List<Integer> unique = duplicates.stream()
            .distinct()
            .collect(Collectors.toList());
        System.out.println("重複除去: " + unique);  // [1, 2, 3, 4]

        // limit / skip: 要素数の制限
        List<Integer> limited = numbers.stream()
            .skip(3)    // 最初の3つをスキップ
            .limit(4)   // 4つだけ取得
            .collect(Collectors.toList());
        System.out.println("skip(3).limit(4): " + limited);  // [4, 5, 6, 7]

        // 複数の中間操作を連結（メソッドチェーン）
        List<Integer> result = numbers.stream()
            .filter(n -> n > 3)       // 3より大きい
            .map(n -> n * n)          // 2乗
            .sorted()                 // 昇順ソート
            .collect(Collectors.toList());
        System.out.println("複合処理: " + result);  // [16, 25, 36, 49, 64, 81, 100]
    }
}</code></pre>
                    </div>

                    <h3 class="text-lg font-semibold text-slate-700 mt-6 mb-3">flatMap: ネストした構造のフラット化</h3>
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">FlatMapExample.java</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-java">import java.util.*;
import java.util.stream.*;

public class FlatMapExample {
    public static void main(String[] args) {
        // ネストしたリスト
        List<List<Integer>> nestedList = Arrays.asList(
            Arrays.asList(1, 2, 3),
            Arrays.asList(4, 5),
            Arrays.asList(6, 7, 8, 9)
        );

        // map: Stream<List<Integer>> → うまくいかない
        // flatMap: Stream<Integer> → フラット化成功
        List<Integer> flattened = nestedList.stream()
            .flatMap(list -> list.stream())  // 各リストをStreamに変換してフラット化
            .collect(Collectors.toList());
        System.out.println(flattened);  // [1, 2, 3, 4, 5, 6, 7, 8, 9]

        // 文字列を文字に分解
        List<String> words = Arrays.asList("Java", "Stream", "API");
        List<String> chars = words.stream()
            .flatMap(word -> Arrays.stream(word.split("")))
            .distinct()
            .collect(Collectors.toList());
        System.out.println(chars);  // [J, a, v, S, t, r, e, m, A, P, I]
    }
}</code></pre>
                    </div>
                </section>

                <!-- セクション6: Stream APIの終端操作 -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        12.6 Stream APIの終端操作
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        終端操作は、Streamの処理を実行して最終結果を返します。終端操作を呼ぶと、それまでの中間操作が実際に実行されます。
                    </p>

                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">TerminalOperations.java</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-java">import java.util.*;
import java.util.stream.*;

public class TerminalOperations {
    public static void main(String[] args) {
        List<Integer> numbers = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);

        // forEach: 各要素に処理を適用（戻り値なし）
        numbers.stream()
            .filter(n -> n % 2 == 0)
            .forEach(n -> System.out.print(n + " "));  // 2 4 6 8 10
        System.out.println();

        // collect: 結果をコレクションに収集
        List<Integer> evens = numbers.stream()
            .filter(n -> n % 2 == 0)
            .collect(Collectors.toList());
        System.out.println("Listに収集: " + evens);

        // count: 要素数をカウント
        long count = numbers.stream()
            .filter(n -> n > 5)
            .count();
        System.out.println("5より大きい数: " + count + "個");  // 5個

        // sum / average / max / min: 統計
        int sum = numbers.stream().mapToInt(n -> n).sum();
        OptionalDouble avg = numbers.stream().mapToInt(n -> n).average();
        OptionalInt max = numbers.stream().mapToInt(n -> n).max();

        System.out.println("合計: " + sum);            // 55
        System.out.println("平均: " + avg.getAsDouble());  // 5.5
        System.out.println("最大: " + max.getAsInt());     // 10

        // anyMatch / allMatch / noneMatch: 条件判定
        boolean hasEven = numbers.stream().anyMatch(n -> n % 2 == 0);  // true
        boolean allPositive = numbers.stream().allMatch(n -> n > 0);   // true
        boolean noNegative = numbers.stream().noneMatch(n -> n < 0);   // true

        System.out.println("偶数あり: " + hasEven);
        System.out.println("全て正数: " + allPositive);

        // findFirst / findAny: 要素の検索
        Optional<Integer> first = numbers.stream()
            .filter(n -> n > 5)
            .findFirst();
        System.out.println("5より大きい最初の数: " + first.get());  // 6

        // reduce: 集約処理
        Optional<Integer> product = numbers.stream()
            .reduce((a, b) -> a * b);  // 全ての要素を掛け算
        System.out.println("全ての積: " + product.get());  // 3628800
    }
}</code></pre>
                    </div>

                    <h3 class="text-lg font-semibold text-slate-700 mt-6 mb-3">Collectorsの便利なメソッド</h3>
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">CollectorsExample.java</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-java">import java.util.*;
import java.util.stream.*;

public class CollectorsExample {
    public static void main(String[] args) {
        List<String> names = Arrays.asList("太郎", "花子", "次郎", "愛", "健太");

        // toList / toSet / toMap
        Set<String> nameSet = names.stream().collect(Collectors.toSet());

        // joining: 文字列結合
        String joined = names.stream()
            .collect(Collectors.joining(", "));
        System.out.println("結合: " + joined);  // 太郎, 花子, 次郎, 愛, 健太

        // groupingBy: グループ化
        Map<Integer, List<String>> byLength = names.stream()
            .collect(Collectors.groupingBy(String::length));
        System.out.println("長さでグループ化: " + byLength);
        // {1=[愛], 2=[太郎, 花子, 次郎, 健太]}

        // partitioningBy: 条件で2グループに分割
        Map<Boolean, List<String>> partition = names.stream()
            .collect(Collectors.partitioningBy(s -> s.length() > 2));
        System.out.println("長さ3以上で分割: " + partition);
        // {false=[太郎, 花子, 次郎, 愛], true=[健太]}

        // counting: 個数をカウント
        Map<Integer, Long> countByLength = names.stream()
            .collect(Collectors.groupingBy(String::length, Collectors.counting()));
        System.out.println("長さ別カウント: " + countByLength);
        // {1=1, 2=4}
    }
}</code></pre>
                    </div>
                </section>

                <!-- セクション7: Optionalクラス -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        12.7 Optionalクラス
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        Optionalは、nullになる可能性のある値を安全に扱うためのコンテナクラスです。NullPointerExceptionを防ぐのに役立ちます。
                    </p>

                    <div class="bg-red-50 border-l-4 border-red-400 p-4 mb-4">
                        <p class="text-red-900 font-medium mb-2"><i class="fas fa-exclamation-triangle text-red-500 mr-2"></i>nullの問題</p>
                        <p class="text-red-800 text-sm">従来のnullチェックは忘れやすく、NullPointerExceptionの原因になります。Optionalを使うことで、nullを明示的に扱えます。</p>
                    </div>

                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">OptionalExample.java</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-java">import java.util.*;

public class OptionalExample {
    public static void main(String[] args) {
        // Optionalの生成
        Optional<String> optional1 = Optional.of("Hello");        // 値あり
        Optional<String> optional2 = Optional.ofNullable(null);   // nullかもしれない
        Optional<String> optional3 = Optional.empty();            // 空のOptional

        // 値の取得
        String value1 = optional1.get();  // "Hello"（値がない場合は例外）
        String value2 = optional2.orElse("デフォルト値");  // nullなら代替値
        String value3 = optional3.orElseGet(() -> "生成された値");  // 遅延評価

        System.out.println(value1);  // Hello
        System.out.println(value2);  // デフォルト値
        System.out.println(value3);  // 生成された値

        // 値の存在確認
        if (optional1.isPresent()) {
            System.out.println("値あり: " + optional1.get());
        }

        // ifPresent: 値があれば処理を実行
        optional1.ifPresent(v -> System.out.println("値: " + v));

        // map: 値を変換
        Optional<Integer> length = optional1.map(String::length);
        System.out.println("文字数: " + length.orElse(0));  // 5

        // filter: 条件でフィルタリング
        Optional<String> filtered = optional1.filter(s -> s.startsWith("H"));
        System.out.println("Hで始まる: " + filtered.isPresent());  // true

        // 実用例: Streamとの組み合わせ
        List<String> names = Arrays.asList("太郎", "花子", null, "次郎", null);
        List<String> nonNull = names.stream()
            .flatMap(name -> Optional.ofNullable(name).stream())
            .collect(Collectors.toList());
        System.out.println("nullを除去: " + nonNull);  // [太郎, 花子, 次郎]
    }
}</code></pre>
                    </div>
                </section>

                <!-- つまずきやすいポイント -->
                <div class="bg-rose-50 border-l-4 border-rose-400 rounded-lg p-5 my-6">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-rose-400 rounded-lg flex items-center justify-center">
                            <i class="fas fa-exclamation-triangle text-white"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-rose-800 mb-3">つまずきやすいポイント</h3>
                            <ul class="space-y-3">
                                <li class="text-rose-900">
                                    <strong>Streamの再利用不可</strong>
                                    <p class="text-sm mt-1">一度終端操作を実行したStreamは再利用できません。再度処理したい場合は、新しいStreamを生成する必要があります。</p>
                                </li>
                                <li class="text-rose-900">
                                    <strong>中間操作だけでは実行されない（遅延評価）</strong>
                                    <p class="text-sm mt-1">中間操作は終端操作が呼ばれるまで実行されません。終端操作を忘れると何も起こりません。</p>
                                </li>
                                <li class="text-rose-900">
                                    <strong>並列Streamの注意点</strong>
                                    <p class="text-sm mt-1"><code>parallelStream()</code>は高速化できますが、状態を持つ操作や順序に依存する処理では問題が起きることがあります。</p>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 実習カード -->
                <div class="bg-gradient-to-r from-purple-50 to-fuchsia-50 border border-purple-200 rounded-xl p-5 my-6 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-code text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="text-lg font-semibold text-purple-800 mb-3 break-words">
                                実習 12-1: Stream APIで統計処理
                            </h3>
                            <p class="text-purple-900 mb-4 break-words">整数のリストから、偶数だけを抽出して2乗し、その合計を計算するプログラムを作成してください。</p>

                            <h4 class="font-medium text-purple-800 mb-2">手順</h4>
                            <ol class="space-y-3 mb-4">
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">1</span>
                                    <span class="flex-1 min-w-0 break-words">1から20までの整数を含むリストを作成</span>
                                </li>
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">2</span>
                                    <span class="flex-1 min-w-0 break-words">filterで偶数だけを抽出</span>
                                </li>
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">3</span>
                                    <span class="flex-1 min-w-0 break-words">mapで各要素を2乗</span>
                                </li>
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">4</span>
                                    <span class="flex-1 min-w-0 break-words">mapToIntとsumで合計を計算</span>
                                </li>
                            </ol>

                            <h4 class="font-medium text-purple-800 mb-2">実装例</h4>
                            <pre class="!bg-slate-800 !rounded-lg overflow-x-auto"><code class="language-java">import java.util.*;
import java.util.stream.*;

public class Practice12_1 {
    public static void main(String[] args) {
        List<Integer> numbers = IntStream.rangeClosed(1, 20)
            .boxed()
            .collect(Collectors.toList());

        int sum = numbers.stream()
            .filter(n -> n % 2 == 0)  // 偶数のみ
            .map(n -> n * n)          // 2乗
            .mapToInt(n -> n)         // intに変換
            .sum();                   // 合計

        System.out.println("偶数の2乗の合計: " + sum);
    }
}</code></pre>

                            <h4 class="font-medium text-purple-800 mt-4 mb-2">期待される結果</h4>
                            <div class="bg-white/50 rounded-lg p-3 text-purple-900 break-words overflow-x-auto">
                                <code>偶数の2乗の合計: 1540</code>
                                <p class="text-sm mt-2">(2² + 4² + 6² + ... + 20² = 1540)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 実習カード2 -->
                <div class="bg-gradient-to-r from-purple-50 to-fuchsia-50 border border-purple-200 rounded-xl p-5 my-6 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-code text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="text-lg font-semibold text-purple-800 mb-3 break-words">
                                実習 12-2: グループ化を使った集計
                            </h3>
                            <p class="text-purple-900 mb-4 break-words">学生のリストから、点数の範囲（A/B/C）でグループ化し、各グループの人数を表示してください。</p>

                            <h4 class="font-medium text-purple-800 mb-2">実装例</h4>
                            <pre class="!bg-slate-800 !rounded-lg overflow-x-auto"><code class="language-java">import java.util.*;
import java.util.stream.*;

class Student {
    String name;
    int score;

    Student(String name, int score) {
        this.name = name;
        this.score = score;
    }

    String getGrade() {
        if (score >= 80) return "A";
        else if (score >= 60) return "B";
        else return "C";
    }
}

public class Practice12_2 {
    public static void main(String[] args) {
        List<Student> students = Arrays.asList(
            new Student("太郎", 85),
            new Student("花子", 92),
            new Student("次郎", 58),
            new Student("愛", 75),
            new Student("健太", 45)
        );

        // 成績でグループ化してカウント
        Map<String, Long> gradeCount = students.stream()
            .collect(Collectors.groupingBy(
                Student::getGrade,
                Collectors.counting()
            ));

        System.out.println("成績別人数: " + gradeCount);
    }
}</code></pre>

                            <h4 class="font-medium text-purple-800 mt-4 mb-2">期待される結果</h4>
                            <div class="bg-white/50 rounded-lg p-3 text-purple-900 break-words overflow-x-auto">
                                <code>成績別人数: {A=2, B=1, C=2}</code>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 理解度確認クイズ -->
                <div class="bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-xl p-5 my-6 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-question text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="text-lg font-semibold text-blue-800 mb-4 break-words">理解度確認クイズ</h3>
                            <ol class="space-y-4">
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q1. ラムダ式で引数が1つの場合、引数の括弧を省略できますか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-white/50 rounded-lg p-3">
                                            はい、省略できます。<code>s -> s.length()</code>のように書けます。ただし、型を明示する場合は括弧が必要です（<code>(String s) -> s.length()</code>）。
                                        </p>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q2. Streamの中間操作と終端操作の違いは何ですか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-white/50 rounded-lg p-3">
                                            中間操作は新しいStreamを返し、メソッドチェーンで連結できます（filter、map、sortedなど）。終端操作は最終結果を返し、その時点で処理が実行されます（collect、forEach、countなど）。中間操作は遅延評価されるため、終端操作が呼ばれるまで実行されません。
                                        </p>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q3. メソッド参照<code>String::length</code>は、どのようなラムダ式と同じ意味ですか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-white/50 rounded-lg p-3">
                                            <code>s -> s.length()</code>と同じ意味です。これは任意のStringオブジェクトのインスタンスメソッドを参照する形式です。
                                        </p>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q4. Optionalを使う利点は何ですか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-white/50 rounded-lg p-3">
                                            nullになる可能性のある値を明示的に扱えるため、NullPointerExceptionを防ぐことができます。また、<code>orElse</code>、<code>ifPresent</code>、<code>map</code>などのメソッドを使って、nullチェックを簡潔に書けます。
                                        </p>
                                    </details>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>

                <!-- まとめ -->
                <div class="bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl p-5 my-6 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-emerald-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-trophy text-white"></i>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-emerald-800 mb-3">この章のまとめ</h3>
                            <ul class="space-y-2 text-emerald-900">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check-circle text-emerald-500 mt-1 flex-shrink-0"></i>
                                    <span>ラムダ式は無名関数を簡潔に記述するための構文で、コードの可読性を向上させます</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check-circle text-emerald-500 mt-1 flex-shrink-0"></i>
                                    <span>関数型インターフェース（Predicate、Function、Consumer、Supplier）を使いこなせると、モダンなJavaコードが書けます</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check-circle text-emerald-500 mt-1 flex-shrink-0"></i>
                                    <span>Stream APIは、データ処理をパイプライン形式で宣言的に記述でき、コードが直感的になります</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check-circle text-emerald-500 mt-1 flex-shrink-0"></i>
                                    <span>メソッド参照は既存メソッドを再利用でき、Optionalはnullを安全に扱えます</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check-circle text-emerald-500 mt-1 flex-shrink-0"></i>
                                    <span>これでJava基礎の学習は完了です！次は実践的なフレームワーク（Spring、JDBC）にチャレンジしましょう</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 章間ナビゲーション -->
                <nav class="flex items-center justify-between pt-6 mt-6 border-t border-slate-200">
                    <a href="java-learning-material-11.html"
                       class="group flex items-center gap-3 px-4 py-3 rounded-xl bg-slate-100 hover:bg-slate-200 transition-colors">
                        <i class="fas fa-arrow-left text-slate-400 group-hover:text-slate-600 transition-transform group-hover:-translate-x-1"></i>
                        <div>
                            <span class="text-xs text-slate-500 block">前の章</span>
                            <span class="text-slate-700 font-medium">コレクションフレームワーク</span>
                        </div>
                    </a>
                    <a href="../README.html"
                       class="group flex items-center gap-3 px-4 py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white transition-colors">
                        <div class="text-right">
                            <span class="text-xs text-primary-100 block">完了</span>
                            <span class="font-medium">カリキュラムトップへ</span>
                        </div>
                        <i class="fas fa-home transition-transform group-hover:translate-x-1"></i>
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <!-- フッター -->
    <footer class="bg-slate-800 text-slate-300">
        <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <p class="text-sm text-center md:text-left">
                    &copy; 2025 F-Circle. All rights reserved.<br>
                    本資料はAIツールを活用し、人間による編集・監修のもと作成されています。
                </p>
                <div class="flex items-center gap-4">
                    <a href="https://github.com/fcircle-biz/tech_docs" class="hover:text-white transition-colors">
                        <i class="fab fa-github text-xl"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- スクロールトップボタン -->
    <button id="scroll-top-btn"
            class="fixed bottom-6 right-6 w-12 h-12 bg-primary-500 text-white rounded-full shadow-lg hover:bg-primary-600 transition-all duration-300 opacity-0 invisible translate-y-4"
            onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- 共通JavaScript -->
    <script src="../../../../common/main.js"></script>

    <!-- 描画ツール -->
    <script src="../../../../common/drawing-tool.js"></script>
</body>
</html>
