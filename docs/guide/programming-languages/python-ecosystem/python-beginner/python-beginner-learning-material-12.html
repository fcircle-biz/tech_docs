<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" id="viewport-meta">
    <title>Python入門学習教材 第12章 - 簡単なプログラムを作ってみよう - 実践編</title>

    <!-- ダークモード早期適用（フラッシュ防止） -->
    <script>
        (function() {
            const saved = localStorage.getItem('darkMode');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (saved === 'dark' || (saved === null && prefersDark)) {
                document.documentElement.classList.add('dark');
            }
        })();
    </script>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans JP"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts - Noto Sans JP -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- カスタムスタイル -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="font-sans bg-slate-50 text-slate-800 antialiased">
    <!-- ヘッダー/ナビゲーションバー -->
    <header class="fixed top-0 left-0 right-0 z-50 text-white header-rich header-rich-shadow">
        <nav class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="flex items-center justify-between py-3">
                <!-- 左側: ロゴとタイトルセクション -->
                <div class="flex items-center gap-4">
                    <!-- アイコン -->
                    <div class="relative group">
                        <div class="absolute inset-0 bg-gradient-to-br from-yellow-400/30 to-orange-400/30 rounded-2xl blur-lg group-hover:blur-xl transition-all"></div>
                        <div class="relative w-14 h-14 bg-white/10 rounded-xl flex items-center justify-center backdrop-blur-sm border border-white/20">
                            <i class="fab fa-python text-3xl icon-rotate-hover drop-shadow-lg"></i>
                        </div>
                    </div>

                    <!-- タイトルとメタ情報 -->
                    <div class="flex flex-col gap-1">
                        <div class="flex items-center gap-2">
                            <span class="text-xl font-bold tracking-wide drop-shadow-md">Python入門学習教材</span>
                            <span class="hidden sm:inline-flex items-center gap-1 px-2 py-0.5 bg-white/20 rounded-md text-[10px] font-semibold uppercase tracking-wider">
                                <i class="fas fa-star text-yellow-300 text-[8px]"></i>
                                初級
                            </span>
                        </div>
                        <div class="flex items-center gap-3 text-[11px] text-white/90 font-medium">
                            <div class="flex items-center gap-1">
                                <i class="fas fa-code text-[9px]"></i>
                                <span>プログラミング言語</span>
                            </div>
                            <div class="hidden sm:flex items-center gap-1">
                                <i class="fas fa-clock text-[9px]"></i>
                                <span>推奨 60分</span>
                            </div>
                            <div class="hidden lg:flex items-center gap-1">
                                <i class="fas fa-language text-[9px]"></i>
                                <span>日本語</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 右側: サイドバートグルボタン -->
                <button id="sidebar-toggle-btn" class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white/20 transition-all active:scale-95" title="サイドバーの表示/非表示">
                    <i class="fas fa-bars text-lg"></i>
                </button>
            </div>
        </nav>
    </header>

    <!-- メインレイアウト -->
    <div class="flex min-h-screen pt-20">
        <!-- サイドバーはsidebar-content.jsで動的に生成されます -->

        <!-- メインコンテンツ -->
        <main class="flex-1 min-w-0">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-10 py-6">
                <!-- パンくずリスト -->
                <nav class="flex items-center gap-2 text-sm text-slate-500 mb-6">
                    <a href="https://fcircle-biz.github.io/tech_docs/" class="hover:text-primary-600 transition-colors">ホーム</a>
                    <i class="fas fa-chevron-right text-xs"></i>
                    <a href="../" class="hover:text-primary-600 transition-colors">Python</a>
                    <i class="fas fa-chevron-right text-xs"></i>
                    <span class="text-slate-700">第12章</span>
                </nav>

                <!-- 章ヘッダー -->
                <header class="mb-6">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium
                                     bg-primary-100 text-primary-700">
                            第12章
                        </span>
                    </div>
                    <h1 class="text-2xl sm:text-3xl font-bold text-slate-900 mb-2">簡単なプログラムを作ってみよう - 実践編</h1>
                    <p class="text-slate-600">これまでに学んだ知識を組み合わせて、じゃんけんゲーム、ToDoリスト、簡単な計算機などの実用的なプログラムを作成します。総合的な実践力を身につけます。</p>
                </header>

                <!-- 学習目標カード -->
                <div class="bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200
                            rounded-xl p-5 mb-6 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-amber-400 rounded-lg
                                    flex items-center justify-center">
                            <i class="fas fa-lightbulb text-white"></i>
                        </div>
                        <div>
                            <h2 class="text-lg font-semibold text-amber-800 mb-3">この章で学ぶこと</h2>
                            <ul class="space-y-2">
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>これまで学んだ知識を組み合わせた実践的なプログラム作成</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>じゃんけんゲーム、ToDoリスト、計算機などの実用プログラム開発</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>ユーザー入力を受け取って処理する対話型プログラムの作り方</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>プログラムを段階的に組み立てる設計思考の習得</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- セクション1: 実践プログラム作成の心構え -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        12.1 実践プログラム作成の心構え
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        これまでの11章で、Pythonの基礎文法（変数、条件分岐、繰り返し、リスト、辞書、関数、ファイル操作など）を学びました。
                        第12章では、これらの知識を<strong>組み合わせて</strong>実用的なプログラムを作成します。
                    </p>

                    <div class="bg-emerald-50 border-l-4 border-emerald-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-rocket text-emerald-600 mt-1"></i>
                            <div>
                                <h4 class="font-semibold text-emerald-900 mb-2">プログラム作成の3ステップ</h4>
                                <ol class="text-emerald-800 text-sm leading-relaxed space-y-2">
                                    <li><strong>1. 何をしたいか明確にする</strong> - プログラムの目的・機能を整理</li>
                                    <li><strong>2. 手順を考える</strong> - どのような処理をどの順番で行うか設計</li>
                                    <li><strong>3. 少しずつ作って確認</strong> - 小さく作って動作確認を繰り返す</li>
                                </ol>
                            </div>
                        </div>
                    </div>

                    <!-- Mermaid図: プログラム作成の流れ -->
                    <div class="my-6 bg-white p-4 rounded-lg border border-slate-200">
                        <h4 class="text-sm font-semibold text-slate-700 mb-3">実践プログラム作成の流れ</h4>
                        <div class="mermaid">
graph TD
    A[アイデア<br/>やりたいこと] --> B[機能設計<br/>必要な機能を整理]
    B --> C[処理手順の設計<br/>フローチャート作成]
    C --> D[基本機能の実装<br/>最小限の動作を作成]
    D --> E[動作確認<br/>テスト実行]
    E --> F{正しく動く?}
    F -->|YES| G[機能追加<br/>次の機能を実装]
    F -->|NO| H[デバッグ<br/>エラー修正]
    H --> E
    G --> I{完成?}
    I -->|NO| E
    I -->|YES| J[完成<br/>リファクタリング]
                        </div>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-info-circle text-blue-600 mt-1"></i>
                            <div>
                                <h4 class="font-semibold text-blue-900 mb-2">初心者が陥りがちな失敗</h4>
                                <p class="text-blue-800 text-sm leading-relaxed">
                                    ❌ 最初から完璧なプログラムを作ろうとする → 挫折しやすい<br>
                                    ⭕ まず動く最小限の機能を作り、少しずつ改良していく → 成功しやすい
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション2: じゃんけんゲーム -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        12.2 実践1: じゃんけんゲーム
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        最初のプログラムは、コンピュータと対戦する<strong>じゃんけんゲーム</strong>です。
                        ユーザーの入力、ランダム選択、条件分岐、繰り返しなど、これまでの知識を総動員します。
                    </p>

                    <!-- Mermaid図: じゃんけんゲームの流れ -->
                    <div class="my-6 bg-white p-4 rounded-lg border border-slate-200">
                        <h4 class="text-sm font-semibold text-slate-700 mb-3">じゃんけんゲームの処理フロー</h4>
                        <div class="mermaid">
graph TD
    A[ゲーム開始] --> B[プレイヤーに手を選択させる<br/>1:グー 2:チョキ 3:パー]
    B --> C[コンピュータがランダムに手を選択]
    C --> D[プレイヤーとコンピュータの手を表示]
    D --> E{勝敗判定}
    E -->|同じ手| F[あいこ]
    E -->|プレイヤー勝利条件| G[プレイヤーの勝ち]
    E -->|それ以外| H[コンピュータの勝ち]
    F --> I{もう一度遊ぶ?}
    G --> I
    H --> I
    I -->|YES| B
    I -->|NO| J[ゲーム終了]
                        </div>
                    </div>

                    <!-- 実習カード -->
                    <div class="bg-gradient-to-r from-purple-50 to-fuchsia-50 border border-purple-200
                                rounded-xl p-5 my-6 overflow-hidden">
                        <div class="flex items-start gap-4">
                            <div class="flex-shrink-0 w-10 h-10 bg-purple-500 rounded-lg
                                        flex items-center justify-center">
                                <i class="fas fa-laptop-code text-white"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <h3 class="text-lg font-semibold text-purple-800 mb-3 break-words">実習: じゃんけんゲームを作ろう</h3>
                                <p class="text-purple-900 mb-4">
                                    以下のコードを入力して、じゃんけんゲームを作成してみましょう。
                                </p>

                                <!-- コードブロック -->
                                <div class="code-block-wrapper">
                                    <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                                        <span class="text-slate-400 text-sm">janken_game.py</span>
                                        <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                                onclick="copyCode(this)">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <pre class="!mt-0 !rounded-t-none"><code class="language-python">import random

def janken_game():
    """じゃんけんゲームのメイン関数"""
    # 手の選択肢
    choices = ["グー", "チョキ", "パー"]

    print("=" * 30)
    print("  じゃんけんゲーム")
    print("=" * 30)

    while True:
        # プレイヤーの手を選択
        print("\n手を選んでください:")
        print("1: グー")
        print("2: チョキ")
        print("3: パー")

        player_input = input("番号を入力してください (1-3): ")

        # 入力チェック
        if player_input not in ["1", "2", "3"]:
            print("❌ 1〜3の数字を入力してください")
            continue

        # プレイヤーの手を決定
        player_choice = choices[int(player_input) - 1]

        # コンピュータの手をランダムに選択
        computer_choice = random.choice(choices)

        # 結果表示
        print(f"\nあなた: {player_choice}")
        print(f"コンピュータ: {computer_choice}")

        # 勝敗判定
        if player_choice == computer_choice:
            print("🤝 あいこです！")
        elif (player_choice == "グー" and computer_choice == "チョキ") or \
             (player_choice == "チョキ" and computer_choice == "パー") or \
             (player_choice == "パー" and computer_choice == "グー"):
            print("🎉 あなたの勝ちです！")
        else:
            print("😢 コンピュータの勝ちです...")

        # もう一度遊ぶか確認
        play_again = input("\nもう一度遊びますか？ (y/n): ")
        if play_again.lower() != "y":
            print("\nゲームを終了します。ありがとうございました！")
            break

# ゲーム実行
janken_game()</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-lightbulb text-blue-600 mt-1"></i>
                            <div>
                                <h4 class="font-semibold text-blue-900 mb-2">コードの解説ポイント</h4>
                                <ul class="text-blue-800 text-sm leading-relaxed space-y-1">
                                    <li><code>random.choice()</code> - リストからランダムに1つ選択</li>
                                    <li><code>while True</code> - 無限ループ（breakで抜ける）</li>
                                    <li><code>if ... not in ...</code> - 入力値の検証</li>
                                    <li>論理演算子 <code>and</code>, <code>or</code> - 複雑な条件判定</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション3: ToDoリスト管理プログラム -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        12.3 実践2: ToDoリスト管理プログラム
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        次は、<strong>ToDoリスト管理プログラム</strong>を作成します。
                        タスクの追加、表示、削除、ファイル保存など、リストと辞書、ファイル操作を組み合わせた実用的なプログラムです。
                    </p>

                    <!-- Mermaid図: ToDoリストの機能 -->
                    <div class="my-6 bg-white p-4 rounded-lg border border-slate-200">
                        <h4 class="text-sm font-semibold text-slate-700 mb-3">ToDoリストの機能設計</h4>
                        <div class="mermaid">
graph LR
    A[ToDoリスト] --> B[タスク追加]
    A --> C[タスク一覧表示]
    A --> D[タスク削除]
    A --> E[タスク完了]
    A --> F[ファイル保存]
    A --> G[ファイル読み込み]

    B --> H[リストに追加]
    C --> I[全タスク表示]
    D --> J[番号指定で削除]
    E --> K[完了フラグ設定]
    F --> L[JSON形式で保存]
    G --> M[起動時に復元]
                        </div>
                    </div>

                    <!-- 実習カード -->
                    <div class="bg-gradient-to-r from-purple-50 to-fuchsia-50 border border-purple-200
                                rounded-xl p-5 my-6 overflow-hidden">
                        <div class="flex items-start gap-4">
                            <div class="flex-shrink-0 w-10 h-10 bg-purple-500 rounded-lg
                                        flex items-center justify-center">
                                <i class="fas fa-laptop-code text-white"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <h3 class="text-lg font-semibold text-purple-800 mb-3 break-words">実習: ToDoリスト管理プログラムを作ろう</h3>
                                <p class="text-purple-900 mb-4">
                                    シンプルなToDoリスト管理プログラムを作成してみましょう。
                                </p>

                                <!-- コードブロック -->
                                <div class="code-block-wrapper">
                                    <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                                        <span class="text-slate-400 text-sm">todo_list.py</span>
                                        <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                                onclick="copyCode(this)">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <pre class="!mt-0 !rounded-t-none"><code class="language-python">import json

def load_tasks(filename="tasks.json"):
    """保存されたタスクを読み込む"""
    try:
        with open(filename, "r", encoding="utf-8") as f:
            return json.load(f)
    except FileNotFoundError:
        return []  # ファイルがなければ空リスト

def save_tasks(tasks, filename="tasks.json"):
    """タスクをファイルに保存"""
    with open(filename, "w", encoding="utf-8") as f:
        json.dump(tasks, f, ensure_ascii=False, indent=2)
    print("💾 タスクを保存しました")

def show_tasks(tasks):
    """タスク一覧を表示"""
    if not tasks:
        print("\n📝 タスクはありません")
        return

    print("\n=== ToDoリスト ===")
    for i, task in enumerate(tasks, 1):
        status = "✅" if task["done"] else "⬜"
        print(f"{i}. {status} {task['title']}")

def add_task(tasks):
    """新しいタスクを追加"""
    title = input("\n追加するタスクを入力してください: ")
    if title.strip():
        tasks.append({"title": title, "done": False})
        print(f"✅ 「{title}」を追加しました")

def delete_task(tasks):
    """タスクを削除"""
    show_tasks(tasks)
    if not tasks:
        return

    try:
        num = int(input("\n削除するタスクの番号を入力: "))
        if 1 <= num <= len(tasks):
            removed = tasks.pop(num - 1)
            print(f"🗑️ 「{removed['title']}」を削除しました")
        else:
            print("❌ 無効な番号です")
    except ValueError:
        print("❌ 数字を入力してください")

def toggle_task(tasks):
    """タスクの完了状態を切り替え"""
    show_tasks(tasks)
    if not tasks:
        return

    try:
        num = int(input("\n完了/未完了を切り替える番号: "))
        if 1 <= num <= len(tasks):
            tasks[num - 1]["done"] = not tasks[num - 1]["done"]
            status = "完了" if tasks[num - 1]["done"] else "未完了"
            print(f"✅ 「{tasks[num - 1]['title']}」を{status}にしました")
        else:
            print("❌ 無効な番号です")
    except ValueError:
        print("❌ 数字を入力してください")

def main():
    """メイン処理"""
    tasks = load_tasks()

    while True:
        print("\n" + "=" * 40)
        print("  ToDoリスト管理")
        print("=" * 40)
        print("1. タスク一覧")
        print("2. タスク追加")
        print("3. タスク削除")
        print("4. 完了/未完了切替")
        print("5. 保存して終了")

        choice = input("\n選択してください (1-5): ")

        if choice == "1":
            show_tasks(tasks)
        elif choice == "2":
            add_task(tasks)
        elif choice == "3":
            delete_task(tasks)
        elif choice == "4":
            toggle_task(tasks)
        elif choice == "5":
            save_tasks(tasks)
            print("👋 終了します")
            break
        else:
            print("❌ 1〜5の数字を入力してください")

# プログラム実行
main()</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-emerald-50 border-l-4 border-emerald-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-info-circle text-emerald-600 mt-1"></i>
                            <div>
                                <h4 class="font-semibold text-emerald-900 mb-2">コードの解説ポイント</h4>
                                <ul class="text-emerald-800 text-sm leading-relaxed space-y-1">
                                    <li><code>json.load()</code> / <code>json.dump()</code> - JSON形式でファイル読み書き</li>
                                    <li>辞書のリスト - <code>[{"title": "買い物", "done": False}, ...]</code></li>
                                    <li>関数の分割 - 機能ごとに関数を分けて管理しやすく</li>
                                    <li>例外処理 - <code>try...except</code>でエラーに備える</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション4: 簡単な計算機 -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        12.4 実践3: 簡単な計算機プログラム
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        最後に、<strong>対話型の計算機プログラム</strong>を作成します。
                        四則演算に加えて、計算履歴の保存や特殊演算（べき乗、平方根など）も実装します。
                    </p>

                    <!-- 実習カード -->
                    <div class="bg-gradient-to-r from-purple-50 to-fuchsia-50 border border-purple-200
                                rounded-xl p-5 my-6 overflow-hidden">
                        <div class="flex items-start gap-4">
                            <div class="flex-shrink-0 w-10 h-10 bg-purple-500 rounded-lg
                                        flex items-center justify-center">
                                <i class="fas fa-laptop-code text-white"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <h3 class="text-lg font-semibold text-purple-800 mb-3 break-words">実習: 対話型計算機を作ろう</h3>
                                <p class="text-purple-900 mb-4">
                                    履歴保存機能付きの計算機を作成してみましょう。
                                </p>

                                <!-- コードブロック -->
                                <div class="code-block-wrapper">
                                    <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                                        <span class="text-slate-400 text-sm">calculator.py</span>
                                        <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                                onclick="copyCode(this)">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <pre class="!mt-0 !rounded-t-none"><code class="language-python">import math

def calculate(num1, operator, num2):
    """計算を実行"""
    if operator == "+":
        return num1 + num2
    elif operator == "-":
        return num1 - num2
    elif operator == "*":
        return num1 * num2
    elif operator == "/":
        if num2 == 0:
            return "エラー: 0で割ることはできません"
        return num1 / num2
    elif operator == "**":
        return num1 ** num2
    else:
        return "エラー: 無効な演算子"

def show_history(history):
    """計算履歴を表示"""
    if not history:
        print("\n📝 履歴はありません")
        return

    print("\n=== 計算履歴 ===")
    for i, record in enumerate(history, 1):
        print(f"{i}. {record}")

def calculator():
    """計算機のメイン処理"""
    history = []

    print("=" * 40)
    print("  簡単な計算機")
    print("=" * 40)
    print("使用可能な演算子: +, -, *, /, ** (べき乗)")

    while True:
        print("\n--- メニュー ---")
        print("1. 計算する")
        print("2. 履歴を表示")
        print("3. 履歴をクリア")
        print("4. 終了")

        choice = input("\n選択してください (1-4): ")

        if choice == "1":
            try:
                # 数値と演算子の入力
                num1 = float(input("\n1つ目の数値を入力: "))
                operator = input("演算子を入力 (+, -, *, /, **): ")
                num2 = float(input("2つ目の数値を入力: "))

                # 計算実行
                result = calculate(num1, operator, num2)

                # 結果表示
                expression = f"{num1} {operator} {num2} = {result}"
                print(f"\n✅ 結果: {expression}")

                # 履歴に追加
                if not isinstance(result, str):  # エラーでなければ
                    history.append(expression)

            except ValueError:
                print("❌ 数値を正しく入力してください")

        elif choice == "2":
            show_history(history)

        elif choice == "3":
            history.clear()
            print("🗑️ 履歴をクリアしました")

        elif choice == "4":
            print("\n計算機を終了します")
            break

        else:
            print("❌ 1〜4の数字を入力してください")

# 計算機を実行
calculator()</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-lightbulb text-blue-600 mt-1"></i>
                            <div>
                                <h4 class="font-semibold text-blue-900 mb-2">拡張アイデア</h4>
                                <p class="text-blue-800 text-sm leading-relaxed">
                                    このプログラムをさらに改良するアイデア：<br>
                                    • 平方根、三角関数などの追加（<code>math.sqrt()</code>, <code>math.sin()</code>など）<br>
                                    • 履歴をファイルに保存して次回起動時に復元<br>
                                    • 複数の数値を連続計算（例: 1 + 2 + 3 + 4）<br>
                                    • 括弧を使った複雑な式の計算
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション5: 総合演習 -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        12.5 総合演習 - オリジナルプログラムを作ろう
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        ここまで学んだ知識を使って、自分だけのオリジナルプログラムを作成してみましょう。
                        以下は初心者向けのプログラムアイデアです。
                    </p>

                    <!-- プログラムアイデア集 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
                        <div class="bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-start gap-3">
                                <div class="flex-shrink-0 w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-gamepad text-white text-sm"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-blue-900 mb-2">数当てゲーム</h4>
                                    <p class="text-blue-800 text-sm leading-relaxed">
                                        1〜100のランダムな数を当てるゲーム。「もっと大きい」「もっと小さい」とヒントを出す。
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-purple-50 to-fuchsia-50 border border-purple-200 rounded-lg p-4">
                            <div class="flex items-start gap-3">
                                <div class="flex-shrink-0 w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-book text-white text-sm"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-purple-900 mb-2">単語帳アプリ</h4>
                                    <p class="text-purple-800 text-sm leading-relaxed">
                                        英単語と意味をペアで登録し、ランダムにクイズを出題する暗記支援ツール。
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg p-4">
                            <div class="flex items-start gap-3">
                                <div class="flex-shrink-0 w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-wallet text-white text-sm"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-emerald-900 mb-2">家計簿アプリ</h4>
                                    <p class="text-emerald-800 text-sm leading-relaxed">
                                        収入と支出を記録し、月ごとの集計や支出カテゴリ別の分析ができるツール。
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-orange-50 to-amber-50 border border-orange-200 rounded-lg p-4">
                            <div class="flex items-start gap-3">
                                <div class="flex-shrink-0 w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-clock text-white text-sm"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-orange-900 mb-2">タイマーアプリ</h4>
                                    <p class="text-orange-800 text-sm leading-relaxed">
                                        指定した時間をカウントダウンし、終了時に通知を出すシンプルなタイマー。
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-pink-50 to-rose-50 border border-pink-200 rounded-lg p-4">
                            <div class="flex items-start gap-3">
                                <div class="flex-shrink-0 w-8 h-8 bg-pink-500 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-comment text-white text-sm"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-pink-900 mb-2">簡易チャットボット</h4>
                                    <p class="text-pink-800 text-sm leading-relaxed">
                                        キーワードに応答するシンプルなチャットボット。辞書で質問と回答を管理。
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-indigo-50 to-violet-50 border border-indigo-200 rounded-lg p-4">
                            <div class="flex items-start gap-3">
                                <div class="flex-shrink-0 w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-list-check text-white text-sm"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-indigo-900 mb-2">パスワード管理</h4>
                                    <p class="text-indigo-800 text-sm leading-relaxed">
                                        サービス名とパスワードをファイルに暗号化して保存する管理ツール（セキュリティ注意）。
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-r from-amber-50 to-yellow-50 border-l-4 border-amber-500 p-4 my-6 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-star text-amber-600 text-xl mt-1"></i>
                            <div>
                                <h4 class="font-semibold text-amber-900 mb-2">オリジナルプログラム作成のヒント</h4>
                                <ol class="text-amber-800 text-sm leading-relaxed space-y-1">
                                    <li><strong>1. 自分が欲しい・使いたいものを作る</strong> - モチベーションが続きやすい</li>
                                    <li><strong>2. 小さく始める</strong> - 最初は最小限の機能だけ実装</li>
                                    <li><strong>3. 紙に設計図を書く</strong> - プログラムの流れを整理してからコードを書く</li>
                                    <li><strong>4. 動くものを優先</strong> - 完璧を目指さず、まず動かすことを重視</li>
                                    <li><strong>5. エラーを恐れない</strong> - エラーは学びのチャンス</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション6: 次のステップ -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        12.6 ここから先の学習 - 次のステップ
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        ここまでの12章で、Pythonの基礎をしっかり習得できました。
                        次のステップとして、専門分野に進むか、Pythonをさらに深く学ぶことをお勧めします。
                    </p>

                    <!-- Mermaid図: 学習の道筋 -->
                    <div class="my-6 bg-white p-4 rounded-lg border border-slate-200">
                        <h4 class="text-sm font-semibold text-slate-700 mb-3">Python基礎習得後の学習パス</h4>
                        <div class="mermaid">
graph TB
    A[Python基礎<br/>第1章〜第12章] --> B[Python中級]
    A --> C[Web開発]
    A --> D[データ分析]
    A --> E[AI・機械学習]
    A --> F[自動化・RPA]

    B --> B1[オブジェクト指向<br/>クラスと継承]
    B --> B2[モジュール・パッケージ<br/>pip, venv]

    C --> C1[Django/Flask<br/>Webアプリ開発]
    C --> C2[REST API開発<br/>FastAPI]

    D --> D1[pandas, NumPy<br/>データ分析]
    D --> D2[Matplotlib<br/>可視化]

    E --> E1[scikit-learn<br/>機械学習基礎]
    E --> E2[TensorFlow/PyTorch<br/>深層学習]

    F --> F1[Selenium<br/>ブラウザ自動化]
    F --> F2[openpyxl<br/>Excel自動化]
                        </div>
                    </div>

                    <!-- 推奨学習リソース -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 my-6">
                        <div class="bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-5">
                            <div class="flex items-start gap-3">
                                <div class="flex-shrink-0 w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-code text-white"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-blue-900 mb-2">Python中級へ</h4>
                                    <p class="text-blue-800 text-sm leading-relaxed mb-2">
                                        オブジェクト指向、デコレータ、ジェネレータなど、より高度なPythonの機能を学びます。
                                    </p>
                                    <a href="https://fcircle-biz.github.io/tech_docs/guide/programming-languages/python-ecosystem/python-intermediate/"
                                       class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                                        Python中級ガイドライン →
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg p-5">
                            <div class="flex items-start gap-3">
                                <div class="flex-shrink-0 w-10 h-10 bg-emerald-500 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-globe text-white"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-emerald-900 mb-2">Web開発 (Django)</h4>
                                    <p class="text-emerald-800 text-sm leading-relaxed mb-2">
                                        Pythonで本格的なWebアプリケーションを作成する方法を学びます。
                                    </p>
                                    <a href="https://fcircle-biz.github.io/tech_docs/guide/programming-languages/python-ecosystem/django/"
                                       class="text-emerald-600 hover:text-emerald-700 text-sm font-medium">
                                        Django入門ガイドライン →
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-purple-50 to-fuchsia-50 border border-purple-200 rounded-lg p-5">
                            <div class="flex items-start gap-3">
                                <div class="flex-shrink-0 w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-chart-line text-white"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-purple-900 mb-2">データ分析</h4>
                                    <p class="text-purple-800 text-sm leading-relaxed mb-2">
                                        pandas、NumPyを使ったデータ処理とMatplotlibでの可視化を習得します。
                                    </p>
                                    <a href="https://fcircle-biz.github.io/tech_docs/guide/data-ai-category/data-ai/data-analysis-python/"
                                       class="text-purple-600 hover:text-purple-700 text-sm font-medium">
                                        データ分析入門 →
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-orange-50 to-amber-50 border border-orange-200 rounded-lg p-5">
                            <div class="flex items-start gap-3">
                                <div class="flex-shrink-0 w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-brain text-white"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-orange-900 mb-2">AI・機械学習</h4>
                                    <p class="text-orange-800 text-sm leading-relaxed mb-2">
                                        scikit-learnで機械学習の基礎を学び、AI開発への道を開きます。
                                    </p>
                                    <a href="https://fcircle-biz.github.io/tech_docs/guide/data-ai-category/data-ai/machine-learning/"
                                       class="text-orange-600 hover:text-orange-700 text-sm font-medium">
                                        機械学習入門 →
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-r from-emerald-50 to-teal-50 border-l-4 border-emerald-500 p-4 my-6 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-graduation-cap text-emerald-600 text-xl mt-1"></i>
                            <div>
                                <h4 class="font-semibold text-emerald-900 mb-2">継続学習のコツ</h4>
                                <ul class="text-emerald-800 text-sm leading-relaxed space-y-1">
                                    <li>• 毎日少しずつコードを書く習慣をつける（1日15分でもOK）</li>
                                    <li>• 作りたいものを明確にして、それを目標に学習する</li>
                                    <li>• GitHubでコードを公開して、ポートフォリオを作る</li>
                                    <li>• コミュニティに参加して、他の学習者と交流する</li>
                                    <li>• エラーや失敗を記録して、成長の糧にする</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 理解度確認クイズ -->
                <div class="bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200
                            rounded-xl p-5 my-6 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-blue-500 rounded-lg
                                    flex items-center justify-center">
                            <i class="fas fa-question text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="text-lg font-semibold text-blue-800 mb-4 break-words">理解度確認クイズ</h3>
                            <ol class="space-y-4">
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q1. プログラムを作成する際の3つのステップを説明してください。</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-white/50 rounded-lg p-3 break-words">
                                            1. 何をしたいか明確にする（目的・機能の整理）<br>
                                            2. 手順を考える（処理の順番を設計）<br>
                                            3. 少しずつ作って確認する（小さく実装してテストを繰り返す）
                                        </p>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q2. じゃんけんゲームのプログラムで使用した主な機能を3つ挙げてください。</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-white/50 rounded-lg p-3 break-words">
                                            • ランダム選択（random.choice()）<br>
                                            • 繰り返し処理（while True）<br>
                                            • 条件分岐（if文による勝敗判定）<br>
                                            • ユーザー入力（input()）
                                        </p>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q3. ToDoリストのプログラムで、タスクをファイルに保存するために使ったモジュールは何ですか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-white/50 rounded-lg p-3 break-words">
                                            jsonモジュールです。json.dump()でファイルに保存し、json.load()でファイルから読み込みました。
                                            JSON形式は辞書やリストをそのままファイルに保存できる便利な形式です。
                                        </p>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q4. Python基礎習得後の学習パスとして、どのような分野がありますか？4つ挙げてください。</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-white/50 rounded-lg p-3 break-words">
                                            1. Web開発（Django、Flaskなど）<br>
                                            2. データ分析（pandas、NumPyなど）<br>
                                            3. AI・機械学習（scikit-learn、TensorFlowなど）<br>
                                            4. 自動化・RPA（Selenium、openpyxlなど）<br>
                                            5. Python中級（オブジェクト指向、モジュール管理など）
                                        </p>
                                    </details>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>

                <!-- まとめ -->
                <div class="bg-gradient-to-r from-slate-50 to-slate-100 border border-slate-200 rounded-xl p-6 my-8">
                    <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <i class="fas fa-book-open text-primary-500"></i>
                        第12章のまとめ
                    </h3>
                    <ul class="space-y-3">
                        <li class="flex items-start gap-3">
                            <i class="fas fa-check-circle text-primary-500 mt-1 flex-shrink-0"></i>
                            <span class="text-slate-700">
                                プログラム作成は<strong>「明確化→設計→実装→確認」のサイクル</strong>で進める
                            </span>
                        </li>
                        <li class="flex items-start gap-3">
                            <i class="fas fa-check-circle text-primary-500 mt-1 flex-shrink-0"></i>
                            <span class="text-slate-700">
                                <strong>じゃんけんゲーム</strong>で、ランダム選択、条件分岐、繰り返し処理を組み合わせた
                            </span>
                        </li>
                        <li class="flex items-start gap-3">
                            <i class="fas fa-check-circle text-primary-500 mt-1 flex-shrink-0"></i>
                            <span class="text-slate-700">
                                <strong>ToDoリスト</strong>で、リスト・辞書・ファイル操作を実践的に活用
                            </span>
                        </li>
                        <li class="flex items-start gap-3">
                            <i class="fas fa-check-circle text-primary-500 mt-1 flex-shrink-0"></i>
                            <span class="text-slate-700">
                                <strong>計算機プログラム</strong>で、関数の分割と履歴管理を学んだ
                            </span>
                        </li>
                        <li class="flex items-start gap-3">
                            <i class="fas fa-check-circle text-primary-500 mt-1 flex-shrink-0"></i>
                            <span class="text-slate-700">
                                次のステップとして、<strong>専門分野への進出</strong>やPython中級への学習を推奨
                            </span>
                        </li>
                    </ul>

                    <div class="mt-6 pt-6 border-t border-slate-300">
                        <p class="text-slate-600 text-sm leading-relaxed">
                            <i class="fas fa-trophy text-amber-500 mr-2"></i>
                            <strong>おめでとうございます！</strong> Python入門学習教材の全12章を完了しました。
                            ここからは自分の興味に合わせて専門分野に進み、さらなるスキルアップを目指しましょう。
                            プログラミングの旅はまだ始まったばかりです！
                        </p>
                    </div>
                </div>

                <!-- 章間ナビゲーション -->
                <nav class="flex items-center justify-between pt-6 mt-6 border-t border-slate-200">
                    <a href="python-beginner-learning-material-11.html"
                       class="group flex items-center gap-3 px-4 py-3 rounded-xl
                              bg-slate-100 hover:bg-slate-200 transition-colors">
                        <i class="fas fa-arrow-left text-slate-400 group-hover:text-slate-600
                                  transition-transform group-hover:-translate-x-1"></i>
                        <div>
                            <span class="text-xs text-slate-500 block">前の章</span>
                            <span class="text-slate-700 font-medium">第11章: エラーへの対処法</span>
                        </div>
                    </a>
                    <a href="README.md"
                       class="group flex items-center gap-3 px-4 py-3 rounded-xl
                              bg-primary-500 hover:bg-primary-600 text-white transition-colors">
                        <div class="text-right">
                            <span class="text-xs text-primary-100 block">完了</span>
                            <span class="font-medium">目次に戻る</span>
                        </div>
                        <i class="fas fa-check transition-transform group-hover:scale-110"></i>
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <!-- フッター -->
    <footer class="bg-slate-800 text-slate-300">
        <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <p class="text-sm text-center md:text-left">
                    &copy; 2025 F-Circle. All rights reserved.<br>
                    本資料はAIツールを活用し、人間による編集・監修のもと作成されています。
                </p>
                <div class="flex items-center gap-4">
                    <a href="https://github.com/fcircle-biz" class="hover:text-white transition-colors">
                        <i class="fab fa-github text-xl"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- スクロールトップボタン -->
    <button id="scroll-top-btn"
            class="fixed bottom-6 right-6 w-12 h-12 bg-primary-500 text-white rounded-full
                   shadow-lg hover:bg-primary-600 transition-all duration-300
                   opacity-0 invisible translate-y-4"
            onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- サイドバー生成 -->
    <script src="sidebar-content.js"></script>

    <!-- 共通JavaScript -->
    <script src="main.js"></script>

    <!-- 描画ツール -->
    <script src="drawing-tool.js"></script>
</body>
</html>
