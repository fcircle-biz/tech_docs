<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" id="viewport-meta">
    <title>Pythonデータ分析入門 第12章 - matplotlib入門 - グラフ作成の基礎</title>

    <!-- ダークモード早期適用（フラッシュ防止） -->
    <script>
        (function() {
            const saved = localStorage.getItem('darkMode');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (saved === 'dark' || (saved === null && prefersDark)) {
                document.documentElement.classList.add('dark');
            }
        })();
    </script>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Python - Blue
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans JP"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts - Noto Sans JP -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="styles.css">
</head>
<body class="font-sans bg-slate-50 text-slate-800 antialiased">
    <!-- ヘッダー/ナビゲーションバー -->
    <header class="fixed top-0 left-0 right-0 z-50 text-white header-rich header-rich-shadow">
        <nav class="w-full px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="flex items-center justify-between py-3">
                <!-- 左側: ロゴとタイトルセクション -->
                <div class="flex items-center gap-4">
                    <!-- アイコン -->
                    <div class="relative group">
                        <div class="absolute inset-0 bg-gradient-to-br from-yellow-400/30 to-orange-400/30 rounded-2xl blur-lg group-hover:blur-xl transition-all"></div>
                        <div class="relative w-14 h-14 bg-white/10 rounded-xl flex items-center justify-center backdrop-blur-sm border border-white/20">
                            <i class="fab fa-python text-3xl icon-rotate-hover drop-shadow-lg"></i>
                        </div>
                    </div>

                    <!-- タイトルとメタ情報 -->
                    <div class="flex flex-col gap-1">
                        <div class="flex items-center gap-2">
                            <span class="text-xl font-bold tracking-wide drop-shadow-md">Pythonデータ分析入門</span>
                            <span class="hidden sm:inline-flex items-center gap-1 px-2 py-0.5 bg-white/20 rounded-md text-[10px] font-semibold uppercase tracking-wider">
                                <i class="fas fa-star text-yellow-300 text-[8px]"></i>
                                初級
                            </span>
                        </div>
                        <div class="flex items-center gap-3 text-[11px] text-white/90 font-medium">
                            <div class="flex items-center gap-1">
                                <i class="fas fa-chart-bar text-[9px]"></i>
                                <span>データ分析</span>
                            </div>
                            <div class="hidden sm:flex items-center gap-1">
                                <i class="fas fa-clock text-[9px]"></i>
                                <span>所要時間 約23時間</span>
                            </div>
                            <div class="hidden lg:flex items-center gap-1">
                                <i class="fas fa-language text-[9px]"></i>
                                <span>日本語</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 右側: サイドバートグルボタン -->
                <button id="sidebar-toggle-btn" class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white/20 transition-all active:scale-95" title="サイドバーの表示/非表示">
                    <i class="fas fa-bars text-lg"></i>
                </button>
            </div>
        </nav>
    </header>

    <!-- メインレイアウト -->
    <div class="flex min-h-screen pt-20">
        <!-- サイドバーはsidebar-content.jsで動的に生成されます -->

        <!-- メインコンテンツ -->
        <main class="flex-1 min-w-0">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-10 py-6">
                <!-- パンくずリスト -->
                <nav class="flex items-center gap-2 text-sm text-slate-500 mb-6">
                    <a href="https://fcircle-biz.github.io/tech_docs/" class="hover:text-primary-600 transition-colors">ホーム</a>
                    <i class="fas fa-chevron-right text-xs"></i>
                    <a href="https://fcircle-biz.github.io/tech_docs/guide/programming-languages/python-ecosystem/python-data-analysis/" class="hover:text-primary-600 transition-colors">Pythonデータ分析入門</a>
                    <i class="fas fa-chevron-right text-xs"></i>
                    <span class="text-slate-700">第12章</span>
                </nav>

                <!-- 章ヘッダー -->
                <header class="mb-6">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary-100 text-primary-700">
                            第12章
                        </span>
                        <span class="text-sm text-slate-500">
                            <i class="fas fa-clock mr-1"></i>所要時間: 約1.5時間
                        </span>
                    </div>
                    <h1 class="text-2xl sm:text-3xl font-bold text-slate-900 mb-2">
                        matplotlib入門 - グラフ作成の基礎
                    </h1>
                    <p class="text-slate-600">
                        matplotlibはPythonのデータ可視化の標準ライブラリです。折れ線グラフ・棒グラフ・散布図など基本的なグラフの作成方法を学び、タイトル・軸ラベル・凡例の設定まで、グラフ作成の土台となるスキルを習得します。
                    </p>
                </header>

                <!-- 学習目標カード -->
                <div class="bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-xl p-5 mb-8 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-amber-400 rounded-lg flex items-center justify-center">
                            <i class="fas fa-lightbulb text-white"></i>
                        </div>
                        <div>
                            <h2 class="text-lg font-semibold text-amber-800 mb-3">この章で学ぶこと</h2>
                            <ul class="space-y-2">
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>matplotlibの基本構造（Figure と Axes）の概念と役割</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>折れ線グラフ（plot）で時系列データを可視化する方法</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>棒グラフ（bar）でカテゴリ比較を表現する方法</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>散布図（scatter）で2変数の関係を探る方法</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>タイトル・軸ラベル・凡例・グリッドの設定方法</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- セクション 12.1 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        12.1 matplotlibとは
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        <strong>matplotlib</strong>は、Pythonでグラフを描画するための定番ライブラリです。「マットプロットリブ」と読みます。折れ線グラフ、棒グラフ、散布図、ヒストグラムなど、さまざまな種類のグラフを数行のコードで作成できます。
                    </p>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        データ分析では、数字を眺めるだけでは気づけないパターンや傾向があります。グラフにすることで「売上が毎月増加している」「2つの変数に相関がある」といった洞察を一目で得ることができます。
                    </p>

                    <!-- データ可視化の目的図 -->
                    <div class="bg-white border border-slate-200 rounded-xl p-6 mb-6">
                        <h3 class="text-base font-semibold text-slate-700 mb-4 flex items-center gap-2">
                            <i class="fas fa-sitemap text-primary-500"></i>
                            グラフの種類と用途
                        </h3>
                        <div class="mermaid">
flowchart TB
    root["データ可視化の目的"] --> trend["時系列・推移を見る"]
    root --> compare["カテゴリを比較する"]
    root --> relation["変数の関係を探る"]
    root --> dist["分布・ばらつきを確認する"]

    trend --> plot["折れ線グラフ\n（plot）"]
    compare --> bar["棒グラフ\n（bar）"]
    relation --> scatter["散布図\n（scatter）"]
    dist --> hist["ヒストグラム\n（hist）"]

    style root fill:#dbeafe,stroke:#3b82f6,color:#1e40af
    style trend fill:#fef3c7,stroke:#f59e0b,color:#92400e
    style compare fill:#d1fae5,stroke:#10b981,color:#064e3b
    style relation fill:#ede9fe,stroke:#8b5cf6,color:#4c1d95
    style dist fill:#fee2e2,stroke:#ef4444,color:#7f1d1d
                        </div>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-6 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-info-circle text-blue-600 mt-1"></i>
                            <div>
                                <p class="text-blue-900 font-medium">matplotlibとSeaborn・pandasの関係</p>
                                <p class="text-blue-800 text-sm mt-1">
                                    matplotlibは最も基礎的な可視化ライブラリです。pandasの <code class="bg-blue-100 px-1 rounded font-mono">df.plot()</code> メソッドや、より高機能なSeabornライブラリも、内部ではmatplotlibを使っています。matplotlibの基礎を理解することで、これらのライブラリも使いこなせるようになります。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 12.2 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        12.2 基本構造：Figure と Axes
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        matplotlibを理解する上で最も重要な概念が <strong>Figure</strong> と <strong>Axes</strong> です。最初は少しわかりにくいですが、この2つの関係を理解すれば、複雑なグラフ作成も怖くなくなります。
                    </p>

                    <!-- Figure と Axes の説明カード -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-5">
                            <div class="flex items-center gap-3 mb-3">
                                <div class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-window-maximize text-white"></i>
                                </div>
                                <h3 class="font-bold text-blue-900">Figure（フィギュア）</h3>
                            </div>
                            <p class="text-blue-800 text-sm leading-relaxed mb-3">
                                グラフ全体を囲む「額縁」や「キャンバス」に相当します。グラフの大きさや解像度を指定する入れ物です。
                            </p>
                            <div class="bg-blue-100 rounded-lg p-3">
                                <p class="text-blue-900 text-xs font-medium mb-1">例えるなら</p>
                                <p class="text-blue-800 text-xs">A4用紙 や PowerPointのスライド1枚</p>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200 rounded-xl p-5">
                            <div class="flex items-center gap-3 mb-3">
                                <div class="w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-chart-area text-white"></i>
                                </div>
                                <h3 class="font-bold text-purple-900">Axes（アクシーズ）</h3>
                            </div>
                            <p class="text-purple-800 text-sm leading-relaxed mb-3">
                                実際にグラフが描かれる「描画エリア」です。X軸・Y軸・グラフ本体がここに含まれます。1つのFigureに複数のAxesを置けます。
                            </p>
                            <div class="bg-purple-100 rounded-lg p-3">
                                <p class="text-purple-900 text-xs font-medium mb-1">例えるなら</p>
                                <p class="text-purple-800 text-xs">用紙の中に貼り付けた「グラフ用紙」</p>
                            </div>
                        </div>
                    </div>

                    <!-- Figure と Axes の構造図 -->
                    <div class="bg-white border border-slate-200 rounded-xl p-6 mb-6">
                        <h3 class="text-base font-semibold text-slate-700 mb-4 flex items-center gap-2">
                            <i class="fas fa-layer-group text-primary-500"></i>
                            Figure と Axes の階層構造
                        </h3>
                        <div class="mermaid">
flowchart TB
    subgraph Figure["Figure（キャンバス全体）"]
        subgraph Axes["Axes（描画エリア）"]
            title_node["タイトル（ax.set_title）"]
            xlabel_node["X軸ラベル（ax.set_xlabel）"]
            ylabel_node["Y軸ラベル（ax.set_ylabel）"]
            graph_node["グラフ本体（ax.plot / ax.bar など）"]
            legend_node["凡例（ax.legend）"]
        end
    end

    style Figure fill:#dbeafe,stroke:#3b82f6,color:#1e40af
    style Axes fill:#ede9fe,stroke:#8b5cf6,color:#4c1d95
                        </div>
                    </div>

                    <h3 class="text-base font-semibold text-slate-700 mb-3">2つのグラフ作成スタイル</h3>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        matplotlibには主に2つの書き方があります。どちらも同じグラフを作れますが、複数のグラフを扱う場合はオブジェクト指向スタイルが推奨されます。
                    </p>

                    <!-- コードブロック: 2スタイル -->
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">pyplot スタイル vs オブジェクト指向スタイル</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import matplotlib.pyplot as plt

# --- スタイル1: pyplot スタイル（シンプルで手軽）---
plt.plot([1, 2, 3], [4, 5, 6])
plt.title('pyplot スタイル')
plt.show()

# --- スタイル2: オブジェクト指向スタイル（推奨）---
fig, ax = plt.subplots(figsize=(8, 4))  # Figure と Axes を同時作成
ax.plot([1, 2, 3], [4, 5, 6])           # Axes に描画
ax.set_title('オブジェクト指向スタイル')  # Axes にタイトル設定
plt.show()</code></pre>
                    </div>

                    <div class="bg-emerald-50 border-l-4 border-emerald-500 p-4 my-6 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-star text-emerald-600 mt-1"></i>
                            <div>
                                <p class="text-emerald-900 font-medium">plt.subplots() を使いこなそう</p>
                                <p class="text-emerald-800 text-sm mt-1">
                                    <code class="bg-emerald-100 px-1 rounded font-mono">fig, ax = plt.subplots()</code> は最もよく使うパターンです。<code class="bg-emerald-100 px-1 rounded font-mono">figsize=(幅, 高さ)</code> でグラフのサイズをインチ単位で指定できます。このガイドでは以降、オブジェクト指向スタイルで統一します。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 12.3 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        12.3 折れ線グラフ（plot）
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        折れ線グラフは、時系列データや連続的な変化を表すのに最適です。「売上の推移」「気温の変化」など、横軸が時間を表す場合によく使われます。
                    </p>

                    <!-- コードブロック: 折れ線グラフ -->
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">line_chart.py</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import matplotlib.pyplot as plt

# データ準備（月別売上）
months = ['1月', '2月', '3月', '4月', '5月', '6月']
sales_A = [120, 135, 160, 150, 175, 200]   # 商品A
sales_B = [80,  95, 110, 130, 120, 145]    # 商品B

fig, ax = plt.subplots(figsize=(9, 5))

# 2本の折れ線グラフを描画
ax.plot(months, sales_A, marker='o', label='商品A', color='steelblue')
ax.plot(months, sales_B, marker='s', label='商品B', color='coral')

# ラベル・タイトル・凡例の設定
ax.set_title('月別売上推移', fontsize=14)
ax.set_xlabel('月')
ax.set_ylabel('売上（万円）')
ax.legend()          # 凡例を表示
ax.grid(True, alpha=0.3)  # グリッド線（薄め）

plt.tight_layout()   # レイアウト自動調整
plt.show()</code></pre>
                    </div>

                    <!-- plot の主要引数テーブル -->
                    <h3 class="text-base font-semibold text-slate-700 mb-3">plot() の主要な引数</h3>
                    <div class="overflow-x-auto mb-6">
                        <table class="w-full text-sm border-collapse">
                            <thead>
                                <tr class="bg-primary-50">
                                    <th class="border border-slate-200 px-4 py-2 text-left text-primary-800 font-semibold">引数</th>
                                    <th class="border border-slate-200 px-4 py-2 text-left text-primary-800 font-semibold">説明</th>
                                    <th class="border border-slate-200 px-4 py-2 text-left text-primary-800 font-semibold">例</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">color</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">線の色</td>
                                    <td class="border border-slate-200 px-4 py-2"><code class="bg-slate-100 px-1 rounded font-mono">'blue', '#3b82f6', 'steelblue'</code></td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">marker</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">データ点のマーカー形状</td>
                                    <td class="border border-slate-200 px-4 py-2"><code class="bg-slate-100 px-1 rounded font-mono">'o'（円）, 's'（四角）, '^'（三角）</code></td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">linestyle</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">線の種類</td>
                                    <td class="border border-slate-200 px-4 py-2"><code class="bg-slate-100 px-1 rounded font-mono">'-'（実線）, '--'（破線）, ':'（点線）</code></td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">linewidth</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">線の太さ</td>
                                    <td class="border border-slate-200 px-4 py-2"><code class="bg-slate-100 px-1 rounded font-mono">2, 1.5, 0.8</code></td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">label</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">凡例に表示するラベル</td>
                                    <td class="border border-slate-200 px-4 py-2"><code class="bg-slate-100 px-1 rounded font-mono">'商品A', '2024年'</code></td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">alpha</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">透明度（0.0〜1.0）</td>
                                    <td class="border border-slate-200 px-4 py-2"><code class="bg-slate-100 px-1 rounded font-mono">0.7, 0.5</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-lightbulb text-blue-600 mt-1"></i>
                            <div>
                                <p class="text-blue-900 font-medium">marker='o' を必ず付けよう</p>
                                <p class="text-blue-800 text-sm mt-1">
                                    折れ線グラフでは <code class="bg-blue-100 px-1 rounded font-mono">marker='o'</code> を指定すると、各データ点が丸印で表示されます。データが何点あるかが一目でわかり、読みやすいグラフになります。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 12.4 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        12.4 棒グラフ（bar）
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        棒グラフは、カテゴリ間の数値を比較するのに最適です。「商品別売上」「部門別人数」「地域別スコア」など、個別の値を並べて大小を比べる場合に使います。
                    </p>

                    <!-- コードブロック: 棒グラフ -->
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">bar_chart.py</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import matplotlib.pyplot as plt

# データ準備（商品カテゴリ別売上）
categories = ['食品', '日用品', '衣料', '家電', '書籍']
revenue    = [320, 210, 185, 450, 90]  # 単位: 万円

fig, ax = plt.subplots(figsize=(9, 5))

# 棒グラフを描画（色のリストで個別に色付け）
colors = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6']
bars = ax.bar(categories, revenue, color=colors, edgecolor='white', width=0.6)

# 棒の上に数値を表示
for bar, val in zip(bars, revenue):
    ax.text(bar.get_x() + bar.get_width() / 2, bar.get_height() + 5,
            f'{val}万円', ha='center', va='bottom', fontsize=10)

ax.set_title('商品カテゴリ別売上', fontsize=14)
ax.set_xlabel('カテゴリ')
ax.set_ylabel('売上（万円）')
ax.set_ylim(0, 520)    # Y軸の範囲を指定（数値ラベルが隠れないよう余白）
ax.grid(axis='y', alpha=0.3)  # Y軸方向のみグリッド

plt.tight_layout()
plt.show()</code></pre>
                    </div>

                    <!-- 横棒グラフ -->
                    <h3 class="text-base font-semibold text-slate-700 mb-3">横棒グラフ（barh）</h3>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        カテゴリ名が長い場合や、ランキングを表現する場合は横棒グラフが便利です。<code class="bg-slate-100 px-1.5 py-0.5 rounded text-sm font-mono">ax.bar()</code> の代わりに <code class="bg-slate-100 px-1.5 py-0.5 rounded text-sm font-mono">ax.barh()</code> を使います。
                    </p>

                    <!-- コードブロック: 横棒グラフ -->
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">barh_chart.py</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import matplotlib.pyplot as plt

products = ['ノートPC', 'スマートウォッチ', 'タブレット', '外付けSSD', 'イヤホン']
sales    = [85, 62, 74, 48, 90]

fig, ax = plt.subplots(figsize=(9, 5))

# 横棒グラフ（barh）: x と y の引数が逆になることに注意
ax.barh(products, sales, color='steelblue', height=0.6)
ax.set_title('商品別販売数ランキング', fontsize=14)
ax.set_xlabel('販売数（台）')
ax.grid(axis='x', alpha=0.3)

plt.tight_layout()
plt.show()</code></pre>
                    </div>

                    <div class="bg-orange-50 border-l-4 border-orange-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-exclamation-circle text-orange-600 mt-1"></i>
                            <div>
                                <p class="text-orange-900 font-medium">棒グラフと折れ線グラフの使い分け</p>
                                <p class="text-orange-800 text-sm mt-1">
                                    棒グラフはカテゴリを「比較」するときに使います。月別売上でも、毎月の「傾向・推移」を見たいなら折れ線グラフ、各月の「絶対値の大きさ」を比べたいなら棒グラフを選びましょう。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 12.5 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        12.5 散布図（scatter）
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        散布図は、2つの変数の関係（相関）を視覚的に確認するグラフです。「広告費と売上の関係」「身長と体重の関係」など、2つの数値がどのように連動しているかを探るときに使います。
                    </p>

                    <!-- コードブロック: 散布図 -->
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">scatter_chart.py</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

# ダミーデータ: 広告費 と 売上
np.random.seed(42)
ad_cost = np.random.uniform(10, 100, 50)           # 広告費（万円）
sales   = ad_cost * 3.5 + np.random.normal(0, 20, 50)  # 売上（万円）

fig, ax = plt.subplots(figsize=(8, 6))

# 散布図を描画（s: マーカーサイズ、alpha: 透明度）
ax.scatter(ad_cost, sales, color='steelblue', s=60, alpha=0.7, edgecolors='white')

ax.set_title('広告費と売上の関係', fontsize=14)
ax.set_xlabel('広告費（万円）')
ax.set_ylabel('売上（万円）')
ax.grid(True, alpha=0.3)

plt.tight_layout()
plt.show()</code></pre>
                    </div>

                    <!-- 相関の種類 -->
                    <div class="bg-white border border-slate-200 rounded-xl p-6 mb-6">
                        <h3 class="text-base font-semibold text-slate-700 mb-4 flex items-center gap-2">
                            <i class="fas fa-project-diagram text-primary-500"></i>
                            散布図で分かる相関の種類
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-emerald-50 border border-emerald-200 rounded-lg p-4 text-center">
                                <div class="text-2xl mb-2">↗</div>
                                <h4 class="font-semibold text-emerald-800 mb-1">正の相関</h4>
                                <p class="text-emerald-700 text-xs">一方が増えると他方も増える<br>例：広告費↑ → 売上↑</p>
                            </div>
                            <div class="bg-red-50 border border-red-200 rounded-lg p-4 text-center">
                                <div class="text-2xl mb-2">↘</div>
                                <h4 class="font-semibold text-red-800 mb-1">負の相関</h4>
                                <p class="text-red-700 text-xs">一方が増えると他方は減る<br>例：価格↑ → 販売数↓</p>
                            </div>
                            <div class="bg-slate-50 border border-slate-200 rounded-lg p-4 text-center">
                                <div class="text-2xl mb-2">✦</div>
                                <h4 class="font-semibold text-slate-700 mb-1">無相関</h4>
                                <p class="text-slate-600 text-xs">2つの変数に関係がない<br>例：靴のサイズと成績</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-lightbulb text-blue-600 mt-1"></i>
                            <div>
                                <p class="text-blue-900 font-medium">alpha（透明度）でデータの密度を確認</p>
                                <p class="text-blue-800 text-sm mt-1">
                                    データ数が多い場合、点が重なって見えにくくなります。<code class="bg-blue-100 px-1 rounded font-mono">alpha=0.5</code> のように透明度を設定すると、重なり部分が濃く表示され、データが集中している箇所が一目でわかります。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 12.6 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        12.6 タイトル・軸ラベル・凡例の設定
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        グラフはデータを「伝える」ための道具です。タイトルや軸ラベルが不明瞭だと、見た人が何のグラフかを理解できません。ここでは、グラフを読みやすくするための設定方法をまとめます。
                    </p>

                    <!-- グラフ要素の設定一覧 -->
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">graph_settings.py</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import matplotlib.pyplot as plt

fig, ax = plt.subplots(figsize=(9, 5))

ax.plot([1, 2, 3, 4, 5], [10, 15, 12, 18, 16], marker='o', label='2024年')
ax.plot([1, 2, 3, 4, 5], [8,  12,  9, 14, 13], marker='s', label='2023年')

# --- タイトルの設定 ---
ax.set_title('月別売上推移（2023年 vs 2024年）', fontsize=14, fontweight='bold')

# --- 軸ラベルの設定 ---
ax.set_xlabel('月', fontsize=12)
ax.set_ylabel('売上（万円）', fontsize=12)

# --- 軸の目盛りを設定 ---
ax.set_xticks([1, 2, 3, 4, 5])
ax.set_xticklabels(['1月', '2月', '3月', '4月', '5月'])

# --- 凡例の設定 ---
ax.legend(loc='upper left', fontsize=10)  # 位置を左上に指定

# --- グリッドの設定 ---
ax.grid(True, linestyle='--', alpha=0.4)

# --- 軸の範囲を指定 ---
ax.set_ylim(0, 25)

plt.tight_layout()
plt.show()</code></pre>
                    </div>

                    <!-- 設定まとめテーブル -->
                    <h3 class="text-base font-semibold text-slate-700 mb-3">よく使う設定メソッド一覧</h3>
                    <div class="overflow-x-auto mb-6">
                        <table class="w-full text-sm border-collapse">
                            <thead>
                                <tr class="bg-primary-50">
                                    <th class="border border-slate-200 px-4 py-2 text-left text-primary-800 font-semibold">メソッド</th>
                                    <th class="border border-slate-200 px-4 py-2 text-left text-primary-800 font-semibold">設定内容</th>
                                    <th class="border border-slate-200 px-4 py-2 text-left text-primary-800 font-semibold">よく使う引数</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">ax.set_title()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">グラフのタイトル</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-500">fontsize, fontweight</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">ax.set_xlabel()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">X軸のラベル</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-500">fontsize</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">ax.set_ylabel()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">Y軸のラベル</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-500">fontsize</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">ax.legend()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">凡例を表示</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-500">loc, fontsize, title</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">ax.grid()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">グリッド線を表示</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-500">True/False, axis, alpha, linestyle</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">ax.set_xlim()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">X軸の表示範囲</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-500">（最小値, 最大値）</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">ax.set_ylim()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">Y軸の表示範囲</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-500">（最小値, 最大値）</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">plt.tight_layout()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">余白を自動調整</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-500">（引数なしで使う）</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 凡例の位置指定 -->
                    <h3 class="text-base font-semibold text-slate-700 mb-3">凡例の位置指定（loc）</h3>
                    <div class="bg-slate-50 border border-slate-200 rounded-xl p-5 mb-4">
                        <div class="grid grid-cols-3 gap-2 text-xs text-center">
                            <div class="bg-white border border-slate-200 rounded p-2">
                                <code class="font-mono text-primary-700">'upper left'</code>
                                <p class="text-slate-500 mt-1">左上</p>
                            </div>
                            <div class="bg-white border border-slate-200 rounded p-2">
                                <code class="font-mono text-primary-700">'upper center'</code>
                                <p class="text-slate-500 mt-1">上中央</p>
                            </div>
                            <div class="bg-white border border-slate-200 rounded p-2">
                                <code class="font-mono text-primary-700">'upper right'</code>
                                <p class="text-slate-500 mt-1">右上（デフォルト）</p>
                            </div>
                            <div class="bg-white border border-slate-200 rounded p-2">
                                <code class="font-mono text-primary-700">'center left'</code>
                                <p class="text-slate-500 mt-1">左中央</p>
                            </div>
                            <div class="bg-primary-50 border border-primary-200 rounded p-2">
                                <code class="font-mono text-primary-700">'best'</code>
                                <p class="text-slate-500 mt-1">自動で最適な位置</p>
                            </div>
                            <div class="bg-white border border-slate-200 rounded p-2">
                                <code class="font-mono text-primary-700">'center right'</code>
                                <p class="text-slate-500 mt-1">右中央</p>
                            </div>
                            <div class="bg-white border border-slate-200 rounded p-2">
                                <code class="font-mono text-primary-700">'lower left'</code>
                                <p class="text-slate-500 mt-1">左下</p>
                            </div>
                            <div class="bg-white border border-slate-200 rounded p-2">
                                <code class="font-mono text-primary-700">'lower center'</code>
                                <p class="text-slate-500 mt-1">下中央</p>
                            </div>
                            <div class="bg-white border border-slate-200 rounded p-2">
                                <code class="font-mono text-primary-700">'lower right'</code>
                                <p class="text-slate-500 mt-1">右下</p>
                            </div>
                        </div>
                        <p class="text-slate-500 text-xs mt-3 text-center">
                            <i class="fas fa-info-circle mr-1"></i>迷ったら <code class="font-mono">'best'</code> を指定すると、グラフと重ならない場所に自動配置されます
                        </p>
                    </div>
                </section>

                <!-- セクション 12.7 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        12.7 pandas の DataFrame から直接グラフを作成する
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        pandasのDataFrameには <code class="bg-slate-100 px-1.5 py-0.5 rounded text-sm font-mono">.plot()</code> メソッドが用意されており、matplotlibを直接使わなくても手軽にグラフを作成できます。内部ではmatplotlibが動いているので、作成後にAxesオブジェクトで細かい設定も可能です。
                    </p>

                    <!-- コードブロック: pandas plot -->
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">pandas_plot.py</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import pandas as pd
import matplotlib.pyplot as plt

# DataFrame を作成
df = pd.DataFrame({
    '月':    ['1月', '2月', '3月', '4月', '5月', '6月'],
    '商品A': [120, 135, 160, 150, 175, 200],
    '商品B': [80,   95, 110, 130, 120, 145],
})
df = df.set_index('月')  # 月を行インデックスに設定

# DataFrame から直接グラフを描画
ax = df.plot(kind='line', marker='o', figsize=(9, 5))

ax.set_title('月別売上推移', fontsize=14)
ax.set_ylabel('売上（万円）')
ax.grid(True, alpha=0.3)
plt.tight_layout()
plt.show()

# 棒グラフ（kind='bar'）も簡単に作れる
ax2 = df.plot(kind='bar', figsize=(9, 5))
ax2.set_title('月別売上比較（棒グラフ）', fontsize=14)
plt.tight_layout()
plt.show()</code></pre>
                    </div>

                    <!-- pandas plot の kind 一覧 -->
                    <div class="overflow-x-auto mb-6">
                        <table class="w-full text-sm border-collapse">
                            <thead>
                                <tr class="bg-primary-50">
                                    <th class="border border-slate-200 px-4 py-2 text-left text-primary-800 font-semibold">kind の値</th>
                                    <th class="border border-slate-200 px-4 py-2 text-left text-primary-800 font-semibold">グラフの種類</th>
                                    <th class="border border-slate-200 px-4 py-2 text-left text-primary-800 font-semibold">用途</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">'line'</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">折れ線グラフ</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-500">時系列・推移（デフォルト）</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">'bar'</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">棒グラフ（縦）</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-500">カテゴリ比較</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">'barh'</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">横棒グラフ</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-500">ランキング表示</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">'hist'</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">ヒストグラム</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-500">分布の確認</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">'scatter'</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">散布図</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-500">2変数の相関</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">'box'</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">箱ひげ図</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-500">分布とばらつき</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="bg-emerald-50 border-l-4 border-emerald-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-star text-emerald-600 mt-1"></i>
                            <div>
                                <p class="text-emerald-900 font-medium">DataFrame.plot() の使いどころ</p>
                                <p class="text-emerald-800 text-sm mt-1">
                                    <code class="bg-emerald-100 px-1 rounded font-mono">df.plot()</code> は手軽にグラフを確認したいとき（データ探索の段階）に便利です。プレゼン資料やレポート向けに細かくカスタマイズしたい場合は、matplotlibを直接使うほうが自由度が高いです。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 12.8 まとめ -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        12.8 この章のまとめ
                    </h2>

                    <div class="bg-gradient-to-r from-slate-50 to-blue-50 border border-slate-200 rounded-xl p-6">
                        <h3 class="text-base font-semibold text-slate-700 mb-4 flex items-center gap-2">
                            <i class="fas fa-flag-checkered text-primary-500"></i>
                            学んだこと
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <div class="flex items-start gap-2">
                                <i class="fas fa-check text-primary-500 mt-1 flex-shrink-0"></i>
                                <span class="text-slate-700 text-sm">Figure（キャンバス全体）と Axes（描画エリア）の役割の違い</span>
                            </div>
                            <div class="flex items-start gap-2">
                                <i class="fas fa-check text-primary-500 mt-1 flex-shrink-0"></i>
                                <span class="text-slate-700 text-sm"><code class="bg-slate-100 px-1 rounded font-mono">fig, ax = plt.subplots()</code> でオブジェクト指向スタイルで書く</span>
                            </div>
                            <div class="flex items-start gap-2">
                                <i class="fas fa-check text-primary-500 mt-1 flex-shrink-0"></i>
                                <span class="text-slate-700 text-sm">折れ線グラフ（plot）は時系列・推移、棒グラフ（bar）はカテゴリ比較に使う</span>
                            </div>
                            <div class="flex items-start gap-2">
                                <i class="fas fa-check text-primary-500 mt-1 flex-shrink-0"></i>
                                <span class="text-slate-700 text-sm">散布図（scatter）で2変数の相関関係を視覚的に確認できる</span>
                            </div>
                            <div class="flex items-start gap-2">
                                <i class="fas fa-check text-primary-500 mt-1 flex-shrink-0"></i>
                                <span class="text-slate-700 text-sm">set_title / set_xlabel / set_ylabel / legend でグラフに情報を付加する</span>
                            </div>
                            <div class="flex items-start gap-2">
                                <i class="fas fa-check text-primary-500 mt-1 flex-shrink-0"></i>
                                <span class="text-slate-700 text-sm">DataFrameの <code class="bg-slate-100 px-1 rounded font-mono">.plot(kind=...)</code> で手軽にグラフを作成できる</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 実習カード -->
                <div class="bg-gradient-to-r from-purple-50 to-fuchsia-50 border border-purple-200 rounded-xl p-5 my-8 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-code text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="text-lg font-semibold text-purple-800 mb-3 break-words">
                                実習 12-1: 3種類のグラフを一度に作成する
                            </h3>
                            <p class="text-purple-900 mb-4 break-words">
                                以下のデータを使って、折れ線グラフ・棒グラフ・散布図を各自で作成してみましょう。グラフには必ずタイトルと軸ラベルを付けてください。
                            </p>

                            <h4 class="font-medium text-purple-800 mb-2">使用データ</h4>
                            <div class="code-block-wrapper mb-4">
                                <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                                    <span class="text-slate-400 text-sm">practice_data.py</span>
                                    <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                                <pre class="!mt-0 !rounded-t-none"><code class="language-python">import numpy as np

# データセット
months    = ['4月', '5月', '6月', '7月', '8月', '9月']
visitors  = [1200, 1350, 1500, 1800, 2100, 1900]  # 月間来客数
purchase  = [320,   370,  410,  490,  580,  510]  # 月間購買数
avg_spend = [2500, 2700, 2730, 2720, 2760, 2690]  # 平均購買単価（円）</code></pre>
                            </div>

                            <h4 class="font-medium text-purple-800 mb-2">課題</h4>
                            <ol class="space-y-3 mb-4">
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">1</span>
                                    <span class="flex-1 min-w-0 break-words"><strong>折れ線グラフ</strong>: visitors と purchase を同じグラフに重ねて描画する（凡例付き）</span>
                                </li>
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">2</span>
                                    <span class="flex-1 min-w-0 break-words"><strong>棒グラフ</strong>: 月ごとの visitors を棒グラフで表示する（棒の色を自由に設定）</span>
                                </li>
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">3</span>
                                    <span class="flex-1 min-w-0 break-words"><strong>散布図</strong>: visitors（X軸）と purchase（Y軸）の関係を散布図で確認する</span>
                                </li>
                            </ol>

                            <div class="bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg p-3 mt-2">
                                <div class="flex items-start gap-2">
                                    <i class="fas fa-check-circle text-emerald-600 mt-0.5"></i>
                                    <div>
                                        <p class="text-emerald-800 font-medium text-sm">確認ポイント</p>
                                        <p class="text-emerald-700 text-sm mt-1">散布図で visitors と purchase に正の相関（右肩上がり）が見られれば正解です。来客数が増えると購買数も増える傾向を視覚的に確認しましょう。</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 理解度確認クイズ -->
                <div class="bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-xl p-5 my-8 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-question text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="text-lg font-semibold text-blue-800 mb-4 break-words">理解度確認クイズ</h3>
                            <ol class="space-y-5">
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q1. Figure と Axes の違いを説明してください。</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <div class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3 break-words">
                                            <p class="text-sm"><strong>Figure</strong> はグラフ全体の「額縁」「キャンバス」にあたるオブジェクトで、グラフのサイズ（figsize）や解像度を管理します。<strong>Axes</strong> はFigureの中にある「描画エリア」で、実際のグラフ本体（折れ線・棒など）、X軸・Y軸、タイトル、凡例がすべてAxesに属します。1つのFigureの中に複数のAxesを配置して複数グラフを並べることも可能です。</p>
                                        </div>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q2. 折れ線グラフ・棒グラフ・散布図のそれぞれに適したデータの例を1つずつ挙げてください。</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <div class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3 break-words">
                                            <ul class="space-y-1 text-sm">
                                                <li><strong>折れ線グラフ</strong>: 月別売上推移、株価の変動、気温の変化など、時系列データの傾向を見る</li>
                                                <li><strong>棒グラフ</strong>: 商品カテゴリ別売上、都道府県別人口、アンケート結果など、カテゴリ間の値を比較する</li>
                                                <li><strong>散布図</strong>: 広告費と売上の関係、勉強時間と試験点数の関係など、2変数の相関を探る</li>
                                            </ul>
                                        </div>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q3. グラフに凡例を表示するには何をする必要がありますか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3 break-words text-sm">
                                            2つの手順が必要です。（1）グラフを描画するときに <code class="bg-blue-200 px-1 rounded font-mono">label='...'</code> 引数でラベルを設定する。（2）<code class="bg-blue-200 px-1 rounded font-mono">ax.legend()</code> を呼び出して凡例を表示する。labelを設定しても legend() を呼ばないと凡例は表示されません。
                                        </p>
                                    </details>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>

                <!-- トラブルシューティング -->
                <div class="bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-xl overflow-hidden mb-8">
                    <div class="bg-orange-100 px-6 py-3 border-b border-orange-200">
                        <h3 class="font-semibold text-orange-800 flex items-center gap-2">
                            <i class="fas fa-tools"></i>
                            よくあるトラブルと解決方法
                        </h3>
                    </div>
                    <div class="p-6 space-y-4">
                        <details class="group">
                            <summary class="flex items-center gap-3 cursor-pointer list-none p-3 rounded-lg bg-white border border-orange-200 hover:bg-orange-50 transition-colors">
                                <i class="fas fa-exclamation-triangle text-orange-500"></i>
                                <span class="font-medium text-orange-800">グラフが表示されない（何も出力されない）</span>
                                <i class="fas fa-chevron-down ml-auto text-orange-400 transition-transform group-open:rotate-180"></i>
                            </summary>
                            <div class="mt-3 pl-10 text-orange-900 text-sm">
                                <p class="mb-2"><strong>原因:</strong> <code class="bg-orange-100 px-1 rounded font-mono">plt.show()</code> が呼ばれていない、またはJupyterの設定の問題。</p>
                                <p><strong>解決方法:</strong> コードの最後に <code class="bg-orange-100 px-1 rounded font-mono">plt.show()</code> を追加する。Jupyter Notebookでは <code class="bg-orange-100 px-1 rounded font-mono">%matplotlib inline</code> をコードの先頭に書くと自動表示される。</p>
                            </div>
                        </details>
                        <details class="group">
                            <summary class="flex items-center gap-3 cursor-pointer list-none p-3 rounded-lg bg-white border border-orange-200 hover:bg-orange-50 transition-colors">
                                <i class="fas fa-exclamation-triangle text-orange-500"></i>
                                <span class="font-medium text-orange-800">タイトルや軸ラベルに日本語が文字化けする（□が表示される）</span>
                                <i class="fas fa-chevron-down ml-auto text-orange-400 transition-transform group-open:rotate-180"></i>
                            </summary>
                            <div class="mt-3 pl-10 text-orange-900 text-sm">
                                <p class="mb-2"><strong>原因:</strong> matplotlibのデフォルトフォントが日本語に対応していない。</p>
                                <p><strong>解決方法:</strong> コードの冒頭で日本語フォントを設定する。詳しい設定方法は第14章「グラフのカスタマイズと見栄えの向上」で解説します。</p>
                            </div>
                        </details>
                        <details class="group">
                            <summary class="flex items-center gap-3 cursor-pointer list-none p-3 rounded-lg bg-white border border-orange-200 hover:bg-orange-50 transition-colors">
                                <i class="fas fa-exclamation-triangle text-orange-500"></i>
                                <span class="font-medium text-orange-800">凡例（legend）が表示されない</span>
                                <i class="fas fa-chevron-down ml-auto text-orange-400 transition-transform group-open:rotate-180"></i>
                            </summary>
                            <div class="mt-3 pl-10 text-orange-900 text-sm">
                                <p class="mb-2"><strong>原因:</strong> グラフを描画する際に <code class="bg-orange-100 px-1 rounded font-mono">label=''</code> が指定されていない、または <code class="bg-orange-100 px-1 rounded font-mono">ax.legend()</code> が呼ばれていない。</p>
                                <p><strong>解決方法:</strong> <code class="bg-orange-100 px-1 rounded font-mono">ax.plot(..., label='商品A')</code> のように label を設定し、その後 <code class="bg-orange-100 px-1 rounded font-mono">ax.legend()</code> を呼ぶ。</p>
                            </div>
                        </details>
                        <details class="group">
                            <summary class="flex items-center gap-3 cursor-pointer list-none p-3 rounded-lg bg-white border border-orange-200 hover:bg-orange-50 transition-colors">
                                <i class="fas fa-exclamation-triangle text-orange-500"></i>
                                <span class="font-medium text-orange-800">グラフのタイトルや軸ラベルが切れて表示される</span>
                                <i class="fas fa-chevron-down ml-auto text-orange-400 transition-transform group-open:rotate-180"></i>
                            </summary>
                            <div class="mt-3 pl-10 text-orange-900 text-sm">
                                <p class="mb-2"><strong>原因:</strong> グラフの余白が不足している。</p>
                                <p><strong>解決方法:</strong> <code class="bg-orange-100 px-1 rounded font-mono">plt.show()</code> の直前に <code class="bg-orange-100 px-1 rounded font-mono">plt.tight_layout()</code> を追加すると、余白が自動調整されて切れにくくなる。</p>
                            </div>
                        </details>
                    </div>
                </div>

                <!-- 章間ナビゲーション -->
                <nav class="flex items-center justify-between pt-6 mt-6 border-t border-slate-200">
                    <a href="python-data-analysis-learning-material-11.html"
                       class="group flex items-center gap-3 px-4 py-3 rounded-xl bg-slate-100 hover:bg-slate-200 transition-colors">
                        <i class="fas fa-arrow-left text-slate-400 group-hover:text-slate-600 transition-transform group-hover:-translate-x-1"></i>
                        <div>
                            <span class="text-xs text-slate-500 block">前の章</span>
                            <span class="text-slate-700 font-medium">データの結合とマージ - 複数データの統合</span>
                        </div>
                    </a>
                    <a href="python-data-analysis-learning-material-13.html"
                       class="group flex items-center gap-3 px-4 py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white transition-colors">
                        <div class="text-right">
                            <span class="text-xs text-primary-100 block">次の章</span>
                            <span class="font-medium">実践的なデータ可視化 - 目的に合ったグラフ選び</span>
                        </div>
                        <i class="fas fa-arrow-right transition-transform group-hover:translate-x-1"></i>
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <!-- フッター -->
    <footer class="bg-slate-800 text-slate-300">
        <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <p class="text-sm text-center md:text-left">
                    &copy; 2026 F-Circle. All rights reserved.<br>
                    本資料はAIツールを活用し、人間による編集・監修のもと作成されています。
                </p>
                <div class="flex items-center gap-4">
                    <a href="https://github.com/fcircle-biz/tech_docs" class="hover:text-white transition-colors">
                        <i class="fab fa-github text-xl"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- スクロールトップボタン -->
    <button id="scroll-top-btn"
            class="fixed bottom-6 right-6 w-12 h-12 bg-primary-500 text-white rounded-full
                   shadow-lg hover:bg-primary-600 transition-all duration-300
                   opacity-0 invisible translate-y-4"
            onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- サイドバー生成 -->
    <script src="sidebar-content.js"></script>

    <!-- 共通JavaScript -->
    <script src="main.js"></script>

    <!-- 描画ツール -->
    <script src="drawing-tool.js"></script>
</body>
</html>
