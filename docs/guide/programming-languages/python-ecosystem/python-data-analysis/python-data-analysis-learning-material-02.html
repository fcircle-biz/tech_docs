<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" id="viewport-meta">
    <title>Pythonデータ分析入門 第2章 - NumPy入門 高速な数値計算の基礎</title>

    <!-- ダークモード早期適用（フラッシュ防止） -->
    <script>
        (function() {
            const saved = localStorage.getItem('darkMode');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (saved === 'dark' || (saved === null && prefersDark)) {
                document.documentElement.classList.add('dark');
            }
        })();
    </script>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Python - Blue
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans JP"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts - Noto Sans JP -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="styles.css">
</head>
<body class="font-sans bg-slate-50 text-slate-800 antialiased">
    <!-- ヘッダー/ナビゲーションバー -->
    <header class="fixed top-0 left-0 right-0 z-50 text-white header-rich header-rich-shadow">
        <nav class="w-full px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="flex items-center justify-between py-3">
                <!-- 左側: ロゴとタイトルセクション -->
                <div class="flex items-center gap-4">
                    <!-- アイコン -->
                    <div class="relative group">
                        <div class="absolute inset-0 bg-gradient-to-br from-yellow-400/30 to-orange-400/30 rounded-2xl blur-lg group-hover:blur-xl transition-all"></div>
                        <div class="relative w-14 h-14 bg-white/10 rounded-xl flex items-center justify-center backdrop-blur-sm border border-white/20">
                            <i class="fab fa-python text-3xl icon-rotate-hover drop-shadow-lg"></i>
                        </div>
                    </div>

                    <!-- タイトルとメタ情報 -->
                    <div class="flex flex-col gap-1">
                        <div class="flex items-center gap-2">
                            <span class="text-xl font-bold tracking-wide drop-shadow-md">Pythonデータ分析入門</span>
                            <span class="hidden sm:inline-flex items-center gap-1 px-2 py-0.5 bg-white/20 rounded-md text-[10px] font-semibold uppercase tracking-wider">
                                <i class="fas fa-star text-yellow-300 text-[8px]"></i>
                                初級
                            </span>
                        </div>
                        <div class="flex items-center gap-3 text-[11px] text-white/90 font-medium">
                            <div class="flex items-center gap-1">
                                <i class="fas fa-chart-bar text-[9px]"></i>
                                <span>データ分析</span>
                            </div>
                            <div class="hidden sm:flex items-center gap-1">
                                <i class="fas fa-clock text-[9px]"></i>
                                <span>所要時間 約23時間</span>
                            </div>
                            <div class="hidden lg:flex items-center gap-1">
                                <i class="fas fa-language text-[9px]"></i>
                                <span>日本語</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 右側: サイドバートグルボタン -->
                <button id="sidebar-toggle-btn" class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white/20 transition-all active:scale-95" title="サイドバーの表示/非表示">
                    <i class="fas fa-bars text-lg"></i>
                </button>
            </div>
        </nav>
    </header>

    <!-- メインレイアウト -->
    <div class="flex min-h-screen pt-20">
        <!-- サイドバーはsidebar-content.jsで動的に生成されます -->

        <!-- メインコンテンツ -->
        <main class="flex-1 min-w-0">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-10 py-6">
                <!-- パンくずリスト -->
                <nav class="flex items-center gap-2 text-sm text-slate-500 mb-6">
                    <a href="https://fcircle-biz.github.io/tech_docs/" class="hover:text-primary-600 transition-colors">ホーム</a>
                    <i class="fas fa-chevron-right text-xs"></i>
                    <a href="https://fcircle-biz.github.io/tech_docs/guide/programming-languages/python-ecosystem/python-data-analysis/" class="hover:text-primary-600 transition-colors">Pythonデータ分析入門</a>
                    <i class="fas fa-chevron-right text-xs"></i>
                    <span class="text-slate-700">第2章</span>
                </nav>

                <!-- 章ヘッダー -->
                <header class="mb-6">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary-100 text-primary-700">
                            第2章
                        </span>
                        <span class="text-sm text-slate-500">
                            <i class="fas fa-clock mr-1"></i>所要時間: 約1.5時間
                        </span>
                    </div>
                    <h1 class="text-2xl sm:text-3xl font-bold text-slate-900 mb-2">
                        NumPy入門 - 高速な数値計算の基礎
                    </h1>
                    <p class="text-slate-600">
                        pandasの内部エンジンとして使われているNumPyの基礎を学びます。配列（ndarray）の作成から基本演算、インデックス操作、統計関数まで、効率的な数値計算の考え方を身につけましょう。
                    </p>
                </header>

                <!-- 学習目標カード -->
                <div class="bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-xl p-5 mb-8 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-amber-400 rounded-lg flex items-center justify-center">
                            <i class="fas fa-lightbulb text-white"></i>
                        </div>
                        <div>
                            <h2 class="text-lg font-semibold text-amber-800 mb-3">この章で学ぶこと</h2>
                            <ul class="space-y-2">
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>NumPyの配列（ndarray）の作成と基本的な操作方法</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>配列の演算（ブロードキャスト）の仕組みと活用方法</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>インデックスとスライスによるデータの取り出し方</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>基本的な統計関数（mean, sum, std など）の使い方</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- セクション 2.1 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        2.1 NumPyとは何か
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        <strong>NumPy（Numerical Python）</strong>は、Pythonで高速な数値計算を行うための基盤ライブラリです。「数値計算の基盤」と言っても難しく考える必要はありません。NumPyを使うと、大量の数字をまとめて扱い、一気に計算できるようになります。
                    </p>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        たとえば、100人の試験点数の平均を求めるとき、Pythonのリストでは繰り返し処理が必要です。しかしNumPyを使えば、たった1行のコードで瞬時に計算できます。しかもその速度は、Pythonの標準処理より数十〜数百倍も速いのです。
                    </p>

                    <!-- Pythonリスト vs NumPy比較図 -->
                    <div class="bg-white border border-slate-200 rounded-xl p-6 mb-6">
                        <h3 class="text-base font-semibold text-slate-700 mb-4 flex items-center gap-2">
                            <i class="fas fa-balance-scale text-primary-500"></i>
                            Pythonリストと NumPy配列の違い
                        </h3>
                        <div class="mermaid">
flowchart LR
    subgraph PyList["Pythonリスト（通常）"]
        L1["要素1\n（整数）"]
        L2["要素2\n（文字列）"]
        L3["要素3\n（浮動小数点）"]
    end

    subgraph NpArr["NumPy配列（ndarray）"]
        N1["要素1\n（同じ型）"]
        N2["要素2\n（同じ型）"]
        N3["要素3\n（同じ型）"]
    end

    PyList -->|"変換: np.array()"| NpArr

    style PyList fill:#fef3c7,stroke:#f59e0b
    style NpArr fill:#dbeafe,stroke:#3b82f6
                        </div>
                        <p class="text-slate-500 text-sm mt-3">
                            <i class="fas fa-info-circle mr-1"></i>Pythonのリストはさまざまな型を混在できますが、NumPy配列はすべての要素が同じ型に統一されます。これが高速計算の秘訣です。
                        </p>
                    </div>

                    <!-- NumPyの特徴カード -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div class="bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i class="fas fa-tachometer-alt text-blue-500"></i>
                                <h4 class="font-semibold text-blue-800">高速処理</h4>
                            </div>
                            <p class="text-blue-900 text-sm">内部でC言語実装のコードが動くため、純粋なPythonより圧倒的に速い</p>
                        </div>
                        <div class="bg-gradient-to-br from-emerald-50 to-emerald-100 border border-emerald-200 rounded-xl p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i class="fas fa-layer-group text-emerald-500"></i>
                                <h4 class="font-semibold text-emerald-800">多次元配列</h4>
                            </div>
                            <p class="text-emerald-900 text-sm">1次元（ベクトル）から多次元（行列）まで統一的に扱える</p>
                        </div>
                        <div class="bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200 rounded-xl p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i class="fas fa-calculator text-purple-500"></i>
                                <h4 class="font-semibold text-purple-800">豊富な数学関数</h4>
                            </div>
                            <p class="text-purple-900 text-sm">統計・線形代数・乱数など、データ分析に必要な関数が標準装備</p>
                        </div>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-6 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-info-circle text-blue-600 mt-1"></i>
                            <div>
                                <p class="text-blue-900 font-medium">なぜNumPyを先に学ぶのか</p>
                                <p class="text-blue-800 text-sm mt-1">
                                    pandasはNumPyを内部で使っています。NumPyの概念（配列・インデックス・ブロードキャスト）を理解しておくと、pandasの動作がよりスムーズに理解できます。NumPyはpandasの「土台」です。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 2.2 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        2.2 配列（ndarray）の作成
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        NumPyの核心は <code class="bg-slate-100 px-1.5 py-0.5 rounded text-sm font-mono">ndarray</code>（n-dimensional array：n次元配列）です。まずは最も基本的な1次元配列を作ってみましょう。
                    </p>

                    <h3 class="text-base font-semibold text-slate-700 mb-3">リストから配列を作る</h3>

                    <!-- コードブロック: 基本的な配列作成 -->
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">numpy_basics.ipynb</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import numpy as np

# Pythonのリストから1次元配列を作成
scores = [85, 92, 78, 95, 88]
arr = np.array(scores)

print(arr)          # [85 92 78 95 88]
print(type(arr))    # &lt;class 'numpy.ndarray'&gt;
print(arr.dtype)    # int64（64ビット整数）
print(arr.shape)    # (5,) ← 5要素の1次元配列</code></pre>
                    </div>

                    <div class="bg-slate-100 border border-slate-200 rounded-lg p-4 mb-6">
                        <p class="text-slate-700 text-sm font-medium mb-1">出力</p>
                        <pre class="text-slate-600 text-sm">[85 92 78 95 88]
&lt;class 'numpy.ndarray'&gt;
int64
(5,)</pre>
                    </div>

                    <h3 class="text-base font-semibold text-slate-700 mt-6 mb-3">よく使う配列作成関数</h3>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        NumPyには、特定のパターンで配列を作る便利な関数があります。初期化やテストデータの作成に重宝します。
                    </p>

                    <!-- コードブロック: 配列作成関数 -->
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">配列作成関数の例</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import numpy as np

# 0〜9の整数配列（Pythonのrangeに相当）
a = np.arange(10)
print(a)        # [0 1 2 3 4 5 6 7 8 9]

# 0だけで埋めた配列（初期値として使う）
b = np.zeros(5)
print(b)        # [0. 0. 0. 0. 0.]

# 1だけで埋めた配列
c = np.ones(4)
print(c)        # [1. 1. 1. 1.]

# 0〜1を均等に5分割
d = np.linspace(0, 1, 5)
print(d)        # [0.   0.25 0.5  0.75 1.  ]</code></pre>
                    </div>

                    <!-- 配列作成関数一覧テーブル -->
                    <div class="overflow-x-auto mb-6">
                        <table class="w-full text-sm border-collapse">
                            <thead>
                                <tr class="bg-primary-50">
                                    <th class="border border-slate-200 px-4 py-2 text-left text-primary-800 font-semibold">関数</th>
                                    <th class="border border-slate-200 px-4 py-2 text-left text-primary-800 font-semibold">用途</th>
                                    <th class="border border-slate-200 px-4 py-2 text-left text-primary-800 font-semibold">例</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">np.array()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">リストや値から配列作成</td>
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-600 text-xs">np.array([1, 2, 3])</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">np.arange()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">連番の整数配列作成</td>
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-600 text-xs">np.arange(0, 10, 2)</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">np.zeros()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">0で初期化された配列</td>
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-600 text-xs">np.zeros(5)</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">np.ones()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">1で初期化された配列</td>
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-600 text-xs">np.ones(3)</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">np.linspace()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">等間隔の数列</td>
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-600 text-xs">np.linspace(0, 1, 5)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- セクション 2.3 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        2.3 配列の演算とブロードキャスト
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        NumPyの強力な機能のひとつが<strong>ブロードキャスト</strong>です。配列同士の演算や、配列とスカラー（1つの数値）の演算を、直感的に記述できます。
                    </p>

                    <!-- ブロードキャスト概念図 -->
                    <div class="bg-white border border-slate-200 rounded-xl p-6 mb-6">
                        <h3 class="text-base font-semibold text-slate-700 mb-4 flex items-center gap-2">
                            <i class="fas fa-broadcast-tower text-primary-500"></i>
                            ブロードキャストとは
                        </h3>
                        <div class="mermaid">
flowchart LR
    subgraph Before["演算前"]
        A["配列: [10, 20, 30, 40, 50]"]
        B["スカラー: 1.1"]
    end

    subgraph After["演算後（×1.1）"]
        C["結果: [11, 22, 33, 44, 55]"]
    end

    Before -->|"arr * 1.1"| After

    style Before fill:#fef3c7,stroke:#f59e0b
    style After fill:#d1fae5,stroke:#10b981
                        </div>
                        <p class="text-slate-500 text-sm mt-3">
                            <i class="fas fa-info-circle mr-1"></i>ブロードキャストにより、スカラー値が自動的に配列の全要素に適用されます。ループを書かずに一括処理できます。
                        </p>
                    </div>

                    <!-- コードブロック: 演算の基本 -->
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">演算の例</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import numpy as np

# 売上データ（単位: 万円）
sales = np.array([100, 120, 90, 150, 130])

# スカラーとの演算（ブロードキャスト）
sales_tax = sales * 1.1      # 全要素に1.1を掛ける
bonus     = sales + 10       # 全要素に10を足す

print("税込み売上:", sales_tax)
print("ボーナス込み:", bonus)

# 配列同士の演算（同じ長さ同士）
cost    = np.array([60, 70, 55, 80, 75])
profit  = sales - cost       # 要素ごとに引き算
print("利益:", profit)</code></pre>
                    </div>

                    <div class="bg-slate-100 border border-slate-200 rounded-lg p-4 mb-6">
                        <p class="text-slate-700 text-sm font-medium mb-1">出力</p>
                        <pre class="text-slate-600 text-sm">税込み売上: [110. 132.  99. 165. 143.]
ボーナス込み: [110 130 100 160 140]
利益: [40 50 35 70 55]</pre>
                    </div>

                    <div class="bg-emerald-50 border-l-4 border-emerald-500 p-4 my-6 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-star text-emerald-600 mt-1"></i>
                            <div>
                                <p class="text-emerald-900 font-medium">Pythonリストとの決定的な違い</p>
                                <p class="text-emerald-800 text-sm mt-1">
                                    Pythonのリストで <code class="bg-emerald-100 px-1 rounded font-mono">[1, 2, 3] * 2</code> と書くと、リストが2倍に複製されます（<code class="bg-emerald-100 px-1 rounded font-mono">[1, 2, 3, 1, 2, 3]</code>）。NumPy配列では各要素に2を掛け算します（<code class="bg-emerald-100 px-1 rounded font-mono">[2, 4, 6]</code>）。この違いをしっかり覚えておきましょう。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 2.4 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        2.4 インデックスとスライス
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        配列から特定の要素や範囲を取り出す操作を「インデックス」「スライス」と呼びます。Pythonのリストと同じ感覚で使えますが、NumPy独自の記法も覚えておくと便利です。
                    </p>

                    <!-- インデックスのイメージ図 -->
                    <div class="bg-white border border-slate-200 rounded-xl p-6 mb-6">
                        <h3 class="text-base font-semibold text-slate-700 mb-4 flex items-center gap-2">
                            <i class="fas fa-map-marker-alt text-primary-500"></i>
                            インデックスの仕組み
                        </h3>
                        <div class="overflow-x-auto">
                            <div class="flex gap-1 items-center justify-center min-w-max mb-2">
                                <div class="text-center">
                                    <div class="bg-slate-200 text-slate-600 text-xs px-3 py-1 rounded-t">インデックス</div>
                                    <div class="bg-primary-100 border border-primary-300 text-primary-800 font-mono text-sm px-4 py-2 w-16 text-center">0</div>
                                    <div class="bg-slate-100 border border-slate-200 text-slate-500 font-mono text-xs px-4 py-1 w-16 text-center">-5</div>
                                </div>
                                <div class="text-center">
                                    <div class="bg-slate-200 text-slate-600 text-xs px-3 py-1 rounded-t">インデックス</div>
                                    <div class="bg-primary-100 border border-primary-300 text-primary-800 font-mono text-sm px-4 py-2 w-16 text-center">1</div>
                                    <div class="bg-slate-100 border border-slate-200 text-slate-500 font-mono text-xs px-4 py-1 w-16 text-center">-4</div>
                                </div>
                                <div class="text-center">
                                    <div class="bg-slate-200 text-slate-600 text-xs px-3 py-1 rounded-t">インデックス</div>
                                    <div class="bg-primary-100 border border-primary-300 text-primary-800 font-mono text-sm px-4 py-2 w-16 text-center">2</div>
                                    <div class="bg-slate-100 border border-slate-200 text-slate-500 font-mono text-xs px-4 py-1 w-16 text-center">-3</div>
                                </div>
                                <div class="text-center">
                                    <div class="bg-slate-200 text-slate-600 text-xs px-3 py-1 rounded-t">インデックス</div>
                                    <div class="bg-primary-100 border border-primary-300 text-primary-800 font-mono text-sm px-4 py-2 w-16 text-center">3</div>
                                    <div class="bg-slate-100 border border-slate-200 text-slate-500 font-mono text-xs px-4 py-1 w-16 text-center">-2</div>
                                </div>
                                <div class="text-center">
                                    <div class="bg-slate-200 text-slate-600 text-xs px-3 py-1 rounded-t">インデックス</div>
                                    <div class="bg-primary-100 border border-primary-300 text-primary-800 font-mono text-sm px-4 py-2 w-16 text-center">4</div>
                                    <div class="bg-slate-100 border border-slate-200 text-slate-500 font-mono text-xs px-4 py-1 w-16 text-center">-1</div>
                                </div>
                            </div>
                            <div class="flex gap-1 items-center justify-center min-w-max">
                                <div class="bg-blue-50 border-2 border-blue-300 text-blue-900 font-bold font-mono text-lg px-4 py-3 w-16 text-center rounded">85</div>
                                <div class="bg-blue-50 border-2 border-blue-300 text-blue-900 font-bold font-mono text-lg px-4 py-3 w-16 text-center rounded">92</div>
                                <div class="bg-blue-50 border-2 border-blue-300 text-blue-900 font-bold font-mono text-lg px-4 py-3 w-16 text-center rounded">78</div>
                                <div class="bg-blue-50 border-2 border-blue-300 text-blue-900 font-bold font-mono text-lg px-4 py-3 w-16 text-center rounded">95</div>
                                <div class="bg-blue-50 border-2 border-blue-300 text-blue-900 font-bold font-mono text-lg px-4 py-3 w-16 text-center rounded">88</div>
                            </div>
                        </div>
                        <p class="text-slate-500 text-sm mt-3 text-center">
                            配列 <code class="bg-slate-100 px-1 rounded font-mono">[85, 92, 78, 95, 88]</code> の場合
                        </p>
                    </div>

                    <!-- コードブロック: インデックスとスライス -->
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">インデックスとスライス</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import numpy as np

scores = np.array([85, 92, 78, 95, 88])

# 1つの要素を取得（インデックス）
print(scores[0])    # 85（先頭）
print(scores[-1])   # 88（末尾）

# 範囲を取得（スライス）
print(scores[1:4])  # [92 78 95]（1〜3番目）
print(scores[:3])   # [85 92 78]（先頭から3個）
print(scores[2:])   # [78 95 88]（2番目以降）

# 要素の更新
scores[2] = 80      # 3番目を80に変更
print(scores)       # [85 92 80 95 88]</code></pre>
                    </div>

                    <div class="bg-orange-50 border-l-4 border-orange-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-exclamation-circle text-orange-600 mt-1"></i>
                            <div>
                                <p class="text-orange-900 font-medium">スライスはコピーではなくビュー</p>
                                <p class="text-orange-800 text-sm mt-1">
                                    NumPyのスライスは元の配列と<strong>メモリを共有</strong>しています（ビュー）。スライスした配列を変更すると、元の配列も変わります。コピーを作りたい場合は <code class="bg-orange-100 px-1 rounded font-mono">scores[1:4].copy()</code> と明示してください。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 2.5 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        2.5 基本的な統計関数
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        NumPyにはデータの特徴を素早く把握するための統計関数が豊富に揃っています。これらはデータ分析の第一歩として頻繁に使います。
                    </p>

                    <!-- コードブロック: 統計関数 -->
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">統計関数の例</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import numpy as np

# テストの点数データ
scores = np.array([75, 88, 92, 65, 78, 95, 82, 70, 88, 84])

# 基本統計量を一気に計算
print(f"合計: {np.sum(scores)}")          # 合計: 817
print(f"平均: {np.mean(scores):.1f}")     # 平均: 81.7
print(f"最大: {np.max(scores)}")          # 最大: 95
print(f"最小: {np.min(scores)}")          # 最小: 65
print(f"標準偏差: {np.std(scores):.2f}") # 標準偏差: 8.89
print(f"中央値: {np.median(scores)}")     # 中央値: 83.0</code></pre>
                    </div>

                    <div class="bg-slate-100 border border-slate-200 rounded-lg p-4 mb-6">
                        <p class="text-slate-700 text-sm font-medium mb-1">出力</p>
                        <pre class="text-slate-600 text-sm">合計: 817
平均: 81.7
最大: 95
最小: 65
標準偏差: 8.89
中央値: 83.0</pre>
                    </div>

                    <!-- 統計関数テーブル -->
                    <div class="overflow-x-auto mb-6">
                        <table class="w-full text-sm border-collapse">
                            <thead>
                                <tr class="bg-primary-50">
                                    <th class="border border-slate-200 px-4 py-2 text-left text-primary-800 font-semibold">関数</th>
                                    <th class="border border-slate-200 px-4 py-2 text-left text-primary-800 font-semibold">意味</th>
                                    <th class="border border-slate-200 px-4 py-2 text-left text-primary-800 font-semibold">用途</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">np.sum()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">合計値</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">総売上・総件数の計算</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">np.mean()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">平均値</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">平均点・平均単価の計算</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">np.max() / np.min()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">最大値 / 最小値</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">最高・最低の値を探す</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">np.std()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">標準偏差</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">データのばらつきを測る</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">np.median()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">中央値</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">外れ値に強い代表値</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="border border-slate-200 px-4 py-2 font-mono text-slate-700">np.argmax() / np.argmin()</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">最大・最小値のインデックス</td>
                                    <td class="border border-slate-200 px-4 py-2 text-slate-600">何番目の要素が最大・最小か</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-6 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-lightbulb text-blue-600 mt-1"></i>
                            <div>
                                <p class="text-blue-900 font-medium">平均値と中央値の使い分け</p>
                                <p class="text-blue-800 text-sm mt-1">
                                    平均値は外れ値（極端に大きい・小さい値）に引っ張られます。たとえば年収データに億万長者が1人いると、平均値が大きく歪みます。このような場合は<strong>中央値（np.median）</strong>を使うと、より実態を反映した代表値になります。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 2.6 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        2.6 データ型（dtype）の理解
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        NumPy配列では、すべての要素が同じデータ型（dtype）を持ちます。dtypeを理解することで、メモリの使用量や計算精度をコントロールできます。
                    </p>

                    <!-- コードブロック: dtype -->
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">データ型の確認と変換</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import numpy as np

# 整数配列（デフォルト: int64）
a = np.array([1, 2, 3])
print(a.dtype)   # int64

# 浮動小数点配列（デフォルト: float64）
b = np.array([1.0, 2.5, 3.7])
print(b.dtype)   # float64

# 型を明示的に指定する
c = np.array([1, 2, 3], dtype=float)
print(c)         # [1. 2. 3.]

# 型を後から変換（astype）
d = a.astype(float)
print(d)         # [1. 2. 3.]</code></pre>
                    </div>

                    <!-- dtypeの種類 -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div class="bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-xl p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i class="fas fa-hashtag text-blue-500"></i>
                                <h4 class="font-semibold text-blue-800">整数型</h4>
                            </div>
                            <div class="bg-blue-100 rounded-lg p-2 mt-2">
                                <p class="text-blue-900 text-xs font-mono">int8, int16, int32, int64</p>
                            </div>
                            <p class="text-blue-900 text-xs mt-2">整数値のみ。数値が小さければint8などで省メモリ化可能</p>
                        </div>
                        <div class="bg-gradient-to-br from-emerald-50 to-emerald-100 border border-emerald-200 rounded-xl p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i class="fas fa-divide text-emerald-500"></i>
                                <h4 class="font-semibold text-emerald-800">浮動小数点型</h4>
                            </div>
                            <div class="bg-emerald-100 rounded-lg p-2 mt-2">
                                <p class="text-emerald-900 text-xs font-mono">float32, float64</p>
                            </div>
                            <p class="text-emerald-900 text-xs mt-2">小数点を含む数値。データ分析では主にfloat64を使用</p>
                        </div>
                        <div class="bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200 rounded-xl p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i class="fas fa-font text-purple-500"></i>
                                <h4 class="font-semibold text-purple-800">論理型・文字列型</h4>
                            </div>
                            <div class="bg-purple-100 rounded-lg p-2 mt-2">
                                <p class="text-purple-900 text-xs font-mono">bool, str_ (object)</p>
                            </div>
                            <p class="text-purple-900 text-xs mt-2">True/FalseやテキストデータはPythonオブジェクトとして扱われる</p>
                        </div>
                    </div>
                </section>

                <!-- セクション 2.7 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        2.7 配列の比較とブール演算
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        配列に条件を適用すると、真偽値（True/False）の配列が返ります。これを使って「条件を満たす要素だけを取り出す」操作が直感的に書けます。
                    </p>

                    <!-- コードブロック: ブール演算 -->
                    <div class="code-block-wrapper my-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">条件による要素の取り出し</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors" onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import numpy as np

scores = np.array([75, 88, 92, 65, 78, 95, 82])

# 条件を適用するとブール配列が返る
passed = scores >= 80
print(passed)
# [False  True  True False False  True  True]

# ブール配列でフィルタリング（条件を満たす要素だけ取り出す）
high_scores = scores[passed]
print(high_scores)   # [88 92 95 82]

# 1行で書くこともできる
print(scores[scores >= 80])   # [88 92 95 82]

# 条件を満たす要素の数を数える
print(np.sum(scores >= 80))   # 4（True は 1 として計算される）</code></pre>
                    </div>

                    <div class="bg-emerald-50 border-l-4 border-emerald-500 p-4 my-6 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-star text-emerald-600 mt-1"></i>
                            <div>
                                <p class="text-emerald-900 font-medium">ブールインデックスはpandasでも同じ概念</p>
                                <p class="text-emerald-800 text-sm mt-1">
                                    NumPyで学んだ「条件でフィルタリング」の考え方は、pandasのDataFrameでもそのまま使えます。<code class="bg-emerald-100 px-1 rounded font-mono">df[df['列名'] >= 80]</code> のような書き方につながります。ここでしっかり身につけておきましょう。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 実習カード -->
                <div class="bg-gradient-to-r from-purple-50 to-fuchsia-50 border border-purple-200 rounded-xl p-5 my-8 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-code text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="text-lg font-semibold text-purple-800 mb-3 break-words">
                                実習 2-1: 学生の成績分析
                            </h3>
                            <p class="text-purple-900 mb-4 break-words">
                                NumPyを使って10人の学生の成績データを分析してみましょう。配列の作成・演算・統計関数・ブール演算を組み合わせます。
                            </p>

                            <h4 class="font-medium text-purple-800 mb-2">手順</h4>
                            <ol class="space-y-3 mb-4">
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">1</span>
                                    <span class="flex-1 min-w-0 break-words">Jupyter Notebookを開き、<code class="bg-purple-100 px-1 rounded font-mono">import numpy as np</code> でNumPyをインポートする</span>
                                </li>
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">2</span>
                                    <span class="flex-1 min-w-0 break-words">成績データ <code class="bg-purple-100 px-1 rounded font-mono">[72, 85, 91, 68, 79, 95, 83, 76, 88, 82]</code> でndarrayを作成する</span>
                                </li>
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">3</span>
                                    <span class="flex-1 min-w-0 break-words">平均・最大・最小・標準偏差を計算してprint出力する</span>
                                </li>
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">4</span>
                                    <span class="flex-1 min-w-0 break-words">80点以上の成績を取り出し、何人が80点以上かを出力する</span>
                                </li>
                            </ol>

                            <div class="bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg p-3 mt-2">
                                <div class="flex items-start gap-2">
                                    <i class="fas fa-check-circle text-emerald-600 mt-0.5"></i>
                                    <div>
                                        <p class="text-emerald-800 font-medium text-sm">期待される出力例</p>
                                        <pre class="text-emerald-700 text-sm mt-1">平均: 81.9
最大: 95 / 最小: 68
標準偏差: 7.97
80点以上: [85 91 95 83 88 82]（6人）</pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- セクション 2.8 まとめ -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800 border-l-4 border-primary-500 pl-4 mb-4">
                        2.8 この章のまとめ
                    </h2>

                    <div class="bg-gradient-to-r from-slate-50 to-blue-50 border border-slate-200 rounded-xl p-6">
                        <h3 class="text-base font-semibold text-slate-700 mb-4 flex items-center gap-2">
                            <i class="fas fa-flag-checkered text-primary-500"></i>
                            学んだこと
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <div class="flex items-start gap-2">
                                <i class="fas fa-check text-primary-500 mt-1 flex-shrink-0"></i>
                                <span class="text-slate-700 text-sm">NumPyはC言語実装の高速数値計算ライブラリで、pandasの内部エンジンでもある</span>
                            </div>
                            <div class="flex items-start gap-2">
                                <i class="fas fa-check text-primary-500 mt-1 flex-shrink-0"></i>
                                <span class="text-slate-700 text-sm">np.array() でリストからndarray（N次元配列）を作成できる</span>
                            </div>
                            <div class="flex items-start gap-2">
                                <i class="fas fa-check text-primary-500 mt-1 flex-shrink-0"></i>
                                <span class="text-slate-700 text-sm">ブロードキャストにより、スカラーや同形配列との演算をループなしで記述できる</span>
                            </div>
                            <div class="flex items-start gap-2">
                                <i class="fas fa-check text-primary-500 mt-1 flex-shrink-0"></i>
                                <span class="text-slate-700 text-sm">インデックス（0始まり）とスライス（[start:end]）で要素を取り出せる</span>
                            </div>
                            <div class="flex items-start gap-2">
                                <i class="fas fa-check text-primary-500 mt-1 flex-shrink-0"></i>
                                <span class="text-slate-700 text-sm">np.sum, np.mean, np.max, np.min, np.std, np.median など統計関数が充実している</span>
                            </div>
                            <div class="flex items-start gap-2">
                                <i class="fas fa-check text-primary-500 mt-1 flex-shrink-0"></i>
                                <span class="text-slate-700 text-sm">条件式でブール配列を作り、フィルタリングができる（ブールインデックス）</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 理解度確認クイズ -->
                <div class="bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-xl p-5 my-8 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                            <i class="fas fa-question text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="text-lg font-semibold text-blue-800 mb-4 break-words">理解度確認クイズ</h3>
                            <ol class="space-y-5">
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q1. Pythonリストの <code class="bg-blue-100 px-1 rounded font-mono">[1, 2, 3] * 2</code> と NumPy配列の <code class="bg-blue-100 px-1 rounded font-mono">np.array([1, 2, 3]) * 2</code> の結果はどう違いますか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <div class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3 break-words">
                                            <ul class="space-y-1 text-sm">
                                                <li><strong>Pythonリスト</strong>: <code class="bg-blue-200 px-1 rounded font-mono">[1, 2, 3, 1, 2, 3]</code> ← リストが2つ繋がる（複製）</li>
                                                <li><strong>NumPy配列</strong>: <code class="bg-blue-200 px-1 rounded font-mono">[2, 4, 6]</code> ← 各要素に2を掛け算する（ブロードキャスト）</li>
                                            </ul>
                                        </div>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q2. <code class="bg-blue-100 px-1 rounded font-mono">arr = np.array([10, 20, 30, 40, 50])</code> のとき、<code class="bg-blue-100 px-1 rounded font-mono">arr[1:4]</code> の結果は何ですか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3 break-words text-sm">
                                            <code class="bg-blue-200 px-1 rounded font-mono">[20, 30, 40]</code> です。インデックス1（20）からインデックス3（40）まで（インデックス4の50は含まない）取り出されます。スライスは <code class="bg-blue-200 px-1 rounded font-mono">[start:end]</code> で、endは<strong>含まない</strong>ことに注意してください。
                                        </p>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q3. 平均値ではなく中央値を使うべき場合はどのような時ですか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3 break-words text-sm">
                                            データに<strong>外れ値（極端に大きい・小さい値）</strong>が含まれる場合です。たとえば年収データに超高収入の人が1人いると平均値が大きく引っ張られますが、中央値は影響を受けにくいです。外れ値がある場合は <code class="bg-blue-200 px-1 rounded font-mono">np.median()</code> を使うと、より実態に近い代表値を得られます。
                                        </p>
                                    </details>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>

                <!-- トラブルシューティング -->
                <div class="bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-xl overflow-hidden mb-8">
                    <div class="bg-orange-100 px-6 py-3 border-b border-orange-200">
                        <h3 class="font-semibold text-orange-800 flex items-center gap-2">
                            <i class="fas fa-tools"></i>
                            よくあるトラブルと解決方法
                        </h3>
                    </div>
                    <div class="p-6 space-y-4">
                        <details class="group">
                            <summary class="flex items-center gap-3 cursor-pointer list-none p-3 rounded-lg bg-white border border-orange-200 hover:bg-orange-50 transition-colors">
                                <i class="fas fa-exclamation-triangle text-orange-500"></i>
                                <span class="font-medium text-orange-800">整数配列で割り算すると小数が切り捨てられる</span>
                                <i class="fas fa-chevron-down ml-auto text-orange-400 transition-transform group-open:rotate-180"></i>
                            </summary>
                            <div class="mt-3 pl-10 text-orange-900 text-sm">
                                <p class="mb-2"><strong>原因:</strong> 整数型（int64）同士の演算は結果も整数になるため、小数点以下が切り捨てられます。</p>
                                <p><strong>解決方法:</strong> 配列を <code class="bg-orange-100 px-1 rounded font-mono">arr.astype(float)</code> で浮動小数点型に変換してから計算するか、除数に <code class="bg-orange-100 px-1 rounded font-mono">1.0</code> など小数を使います。</p>
                            </div>
                        </details>
                        <details class="group">
                            <summary class="flex items-center gap-3 cursor-pointer list-none p-3 rounded-lg bg-white border border-orange-200 hover:bg-orange-50 transition-colors">
                                <i class="fas fa-exclamation-triangle text-orange-500"></i>
                                <span class="font-medium text-orange-800">スライスで取り出した配列を変更したら元の配列も変わった</span>
                                <i class="fas fa-chevron-down ml-auto text-orange-400 transition-transform group-open:rotate-180"></i>
                            </summary>
                            <div class="mt-3 pl-10 text-orange-900 text-sm">
                                <p class="mb-2"><strong>原因:</strong> NumPyのスライスはコピーではなく「ビュー」です。元の配列とメモリを共有しているため、どちらを変更しても影響し合います。</p>
                                <p><strong>解決方法:</strong> <code class="bg-orange-100 px-1 rounded font-mono">arr[1:4].copy()</code> のように <code class="bg-orange-100 px-1 rounded font-mono">.copy()</code> を明示的につけて独立したコピーを作成します。</p>
                            </div>
                        </details>
                        <details class="group">
                            <summary class="flex items-center gap-3 cursor-pointer list-none p-3 rounded-lg bg-white border border-orange-200 hover:bg-orange-50 transition-colors">
                                <i class="fas fa-exclamation-triangle text-orange-500"></i>
                                <span class="font-medium text-orange-800">ValueError: operands could not be broadcast together</span>
                                <i class="fas fa-chevron-down ml-auto text-orange-400 transition-transform group-open:rotate-180"></i>
                            </summary>
                            <div class="mt-3 pl-10 text-orange-900 text-sm">
                                <p class="mb-2"><strong>原因:</strong> 異なる形状の配列同士を演算しようとするとエラーになります。たとえば要素数5の配列と要素数3の配列を足し算しようとする場合です。</p>
                                <p><strong>解決方法:</strong> 演算する配列の <code class="bg-orange-100 px-1 rounded font-mono">.shape</code> を確認し、形状を揃えてから演算してください。</p>
                            </div>
                        </details>
                    </div>
                </div>

                <!-- 章間ナビゲーション -->
                <nav class="flex items-center justify-between pt-6 mt-6 border-t border-slate-200">
                    <a href="python-data-analysis-learning-material-01.html"
                       class="group flex items-center gap-3 px-4 py-3 rounded-xl bg-slate-100 hover:bg-slate-200 transition-colors">
                        <i class="fas fa-arrow-left text-slate-400 group-hover:text-slate-600 transition-transform group-hover:-translate-x-1"></i>
                        <div>
                            <span class="text-xs text-slate-500 block">前の章</span>
                            <span class="text-slate-700 font-medium">データ分析の世界へようこそ</span>
                        </div>
                    </a>
                    <a href="python-data-analysis-learning-material-03.html"
                       class="group flex items-center gap-3 px-4 py-3 rounded-xl bg-primary-500 hover:bg-primary-600 text-white transition-colors">
                        <div class="text-right">
                            <span class="text-xs text-primary-100 block">次の章</span>
                            <span class="font-medium">NumPy実践 - データ分析に必要な配列操作</span>
                        </div>
                        <i class="fas fa-arrow-right transition-transform group-hover:translate-x-1"></i>
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <!-- フッター -->
    <footer class="bg-slate-800 text-slate-300">
        <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <p class="text-sm text-center md:text-left">
                    &copy; 2026 F-Circle. All rights reserved.<br>
                    本資料はAIツールを活用し、人間による編集・監修のもと作成されています。
                </p>
                <div class="flex items-center gap-4">
                    <a href="https://github.com/fcircle-biz/tech_docs" class="hover:text-white transition-colors">
                        <i class="fab fa-github text-xl"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- スクロールトップボタン -->
    <button id="scroll-top-btn"
            class="fixed bottom-6 right-6 w-12 h-12 bg-primary-500 text-white rounded-full
                   shadow-lg hover:bg-primary-600 transition-all duration-300
                   opacity-0 invisible translate-y-4"
            onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- サイドバー生成 -->
    <script src="sidebar-content.js"></script>

    <!-- 共通JavaScript -->
    <script src="main.js"></script>

    <!-- 描画ツール -->
    <script src="drawing-tool.js"></script>
</body>
</html>
