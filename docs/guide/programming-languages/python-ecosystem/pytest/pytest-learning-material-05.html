<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" id="viewport-meta">
    <title>pytest入門 第5章 - テストの構造化</title>

    <!-- ダークモード早期適用（フラッシュ防止） -->
    <script>
        (function() {
            const saved = localStorage.getItem('darkMode');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (saved === 'dark' || (saved === null && prefersDark)) {
                document.documentElement.classList.add('dark');
            }
        })();
    </script>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Python - Blue
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans JP"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts - Noto Sans JP -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- カスタムスタイル -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="font-sans bg-slate-50 text-slate-800 antialiased">
    <!-- ヘッダー/ナビゲーションバー -->
    <header class="fixed top-0 left-0 right-0 z-50 text-white header-rich header-rich-shadow">
        <nav class="w-full px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="flex items-center justify-between py-3">
                <!-- 左側: ロゴとタイトルセクション -->
                <div class="flex items-center gap-4">
                    <!-- アイコン -->
                    <div class="relative group">
                        <div class="absolute inset-0 bg-gradient-to-br from-yellow-400/30 to-orange-400/30 rounded-2xl blur-lg group-hover:blur-xl transition-all"></div>
                        <div class="relative w-14 h-14 bg-white/10 rounded-xl flex items-center justify-center backdrop-blur-sm border border-white/20">
                            <i class="fab fa-python text-3xl icon-rotate-hover drop-shadow-lg"></i>
                        </div>
                    </div>

                    <!-- タイトルとメタ情報 -->
                    <div class="flex flex-col gap-1">
                        <div class="flex items-center gap-2">
                            <span class="text-xl font-bold tracking-wide drop-shadow-md">pytest入門学習教材</span>
                            <span class="hidden sm:inline-flex items-center gap-1 px-2 py-0.5 bg-white/20 rounded-md text-[10px] font-semibold uppercase tracking-wider">
                                <i class="fas fa-star text-yellow-300 text-[8px]"></i>
                                初級
                            </span>
                        </div>
                        <div class="flex items-center gap-3 text-[11px] text-white/90 font-medium">
                            <div class="flex items-center gap-1">
                                <i class="fas fa-vial text-[9px]"></i>
                                <span>プログラミング言語 / テスト</span>
                            </div>
                            <div class="hidden sm:flex items-center gap-1">
                                <i class="fas fa-clock text-[9px]"></i>
                                <span>所要時間 約20時間</span>
                            </div>
                            <div class="hidden lg:flex items-center gap-1">
                                <i class="fas fa-language text-[9px]"></i>
                                <span>日本語</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 右側: サイドバートグルボタン -->
                <button id="sidebar-toggle-btn" class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white/20 transition-all active:scale-95" title="サイドバーの表示/非表示">
                    <i class="fas fa-bars text-lg"></i>
                </button>
            </div>
        </nav>
    </header>

    <!-- メインレイアウト -->
    <div class="flex min-h-screen pt-20">
        <!-- サイドバーはsidebar-content.jsで動的に生成されます -->

        <!-- メインコンテンツ -->
        <main class="flex-1 min-w-0">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-10 py-6">
                <!-- パンくずリスト -->
                <nav class="flex items-center gap-2 text-sm text-slate-500 mb-6">
                    <a href="https://fcircle-biz.github.io/tech_docs/" class="hover:text-primary-600 transition-colors">ホーム</a>
                    <i class="fas fa-chevron-right text-xs"></i>
                    <a href="./README.md" class="hover:text-primary-600 transition-colors">pytest入門</a>
                    <i class="fas fa-chevron-right text-xs"></i>
                    <span class="text-slate-700">第5章</span>
                </nav>

                <!-- 章ヘッダー -->
                <header class="mb-6">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium
                                     bg-primary-100 text-primary-700">
                            第5章
                        </span>
                        <span class="text-sm text-slate-500">
                            <i class="fas fa-clock mr-1"></i>所要時間: 約1時間
                        </span>
                    </div>
                    <h1 class="text-2xl sm:text-3xl font-bold text-slate-900 mb-2">テストの構造化 - ファイル・クラス・関数の整理術</h1>
                    <p class="text-slate-600">テストファイルの命名規則、テストディレクトリの構成、テストクラスによるグループ化、conftest.pyの役割を学びます。プロジェクトが大きくなっても管理しやすいテスト構造の設計方法を身につけます。</p>
                </header>

                <!-- 学習目標カード -->
                <div class="bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200
                            rounded-xl p-5 mb-8 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-amber-400 rounded-lg
                                    flex items-center justify-center">
                            <i class="fas fa-lightbulb text-white"></i>
                        </div>
                        <div>
                            <h2 class="text-lg font-semibold text-amber-800 mb-3">この章で学ぶこと</h2>
                            <ul class="space-y-2">
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>pytestがテストを自動検出する命名規則（ファイル名・関数名・クラス名）を説明できる</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>プロジェクト規模に応じたテストディレクトリの構成パターンを理解する</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>テストクラスを使って関連するテストをグループ化できる</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>conftest.pyの役割と基本的な使い方を説明できる</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- セクション 5.1 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        5.1 なぜテストを構造化するのか
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        テストコードも本体のコードと同様に、プロジェクトが成長するにつれて管理が難しくなります。最初は1つのファイルに数個のテストで済んでいても、機能が増えると数十・数百のテストが生まれます。
                    </p>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        きちんと構造化されたテストは、以下の問題を解決します：
                    </p>

                    <!-- 課題と解決の対比 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-red-50 border border-red-200 rounded-xl p-5">
                            <div class="flex items-center gap-3 mb-3">
                                <div class="w-9 h-9 bg-red-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-times text-red-600"></i>
                                </div>
                                <h3 class="font-semibold text-slate-800">構造化されていないテスト</h3>
                            </div>
                            <ul class="text-sm text-slate-600 space-y-2">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-circle text-red-400 text-[6px] mt-2 flex-shrink-0"></i>
                                    <span>どこに何のテストがあるか分からない</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-circle text-red-400 text-[6px] mt-2 flex-shrink-0"></i>
                                    <span>テスト名が重複・衝突する</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-circle text-red-400 text-[6px] mt-2 flex-shrink-0"></i>
                                    <span>セットアップコードが各テストにバラバラに書かれる</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-circle text-red-400 text-[6px] mt-2 flex-shrink-0"></i>
                                    <span>特定の機能のテストだけ実行できない</span>
                                </li>
                            </ul>
                        </div>
                        <div class="bg-emerald-50 border border-emerald-200 rounded-xl p-5">
                            <div class="flex items-center gap-3 mb-3">
                                <div class="w-9 h-9 bg-emerald-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-check text-emerald-600"></i>
                                </div>
                                <h3 class="font-semibold text-slate-800">構造化されたテスト</h3>
                            </div>
                            <ul class="text-sm text-slate-600 space-y-2">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-circle text-emerald-400 text-[6px] mt-2 flex-shrink-0"></i>
                                    <span>機能ごとにテストファイルが整理されている</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-circle text-emerald-400 text-[6px] mt-2 flex-shrink-0"></i>
                                    <span>テスト名が明確で重複しない</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-circle text-emerald-400 text-[6px] mt-2 flex-shrink-0"></i>
                                    <span>共通のセットアップが一か所にまとまっている</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-circle text-emerald-400 text-[6px] mt-2 flex-shrink-0"></i>
                                    <span>特定の範囲を指定してテストを実行できる</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- セクション 5.2 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        5.2 pytestの自動検出ルール
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        pytestは<strong class="text-slate-800">決まった命名規則</strong>に従ったファイル・関数・クラスを自動的に「テスト」として認識します。この規則を理解することが、テスト構造化の第一歩です。
                    </p>

                    <!-- 自動検出ルール -->
                    <div class="bg-white border border-slate-200 rounded-xl overflow-hidden mb-6">
                        <div class="bg-slate-50 px-5 py-3 border-b border-slate-200">
                            <h3 class="font-semibold text-slate-700 flex items-center gap-2">
                                <i class="fas fa-search text-primary-500"></i>
                                pytestがテストを見つける3つのルール
                            </h3>
                        </div>
                        <div class="p-5 space-y-4">
                            <!-- ルール1: ファイル -->
                            <div class="flex items-start gap-4">
                                <div class="flex-shrink-0 w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center">
                                    <span class="text-primary-700 font-bold text-sm">1</span>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-semibold text-slate-800 mb-1">テストファイル</h4>
                                    <p class="text-sm text-slate-600 mb-2">
                                        ファイル名が <code class="bg-slate-100 px-1.5 py-0.5 rounded text-primary-700">test_*.py</code> または <code class="bg-slate-100 px-1.5 py-0.5 rounded text-primary-700">*_test.py</code> であること
                                    </p>
                                    <div class="flex flex-wrap gap-2 text-xs">
                                        <span class="bg-emerald-100 text-emerald-800 px-2 py-1 rounded font-mono">test_calculator.py ✓</span>
                                        <span class="bg-emerald-100 text-emerald-800 px-2 py-1 rounded font-mono">calculator_test.py ✓</span>
                                        <span class="bg-red-100 text-red-800 px-2 py-1 rounded font-mono">calculator.py ✗</span>
                                        <span class="bg-red-100 text-red-800 px-2 py-1 rounded font-mono">test.py ✗</span>
                                    </div>
                                </div>
                            </div>
                            <!-- ルール2: 関数 -->
                            <div class="flex items-start gap-4 pt-4 border-t border-slate-100">
                                <div class="flex-shrink-0 w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center">
                                    <span class="text-primary-700 font-bold text-sm">2</span>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-semibold text-slate-800 mb-1">テスト関数</h4>
                                    <p class="text-sm text-slate-600 mb-2">
                                        関数名が <code class="bg-slate-100 px-1.5 py-0.5 rounded text-primary-700">test_</code> で始まること
                                    </p>
                                    <div class="flex flex-wrap gap-2 text-xs">
                                        <span class="bg-emerald-100 text-emerald-800 px-2 py-1 rounded font-mono">def test_add(): ✓</span>
                                        <span class="bg-emerald-100 text-emerald-800 px-2 py-1 rounded font-mono">def test_ゼロ除算(): ✓</span>
                                        <span class="bg-red-100 text-red-800 px-2 py-1 rounded font-mono">def add_test(): ✗</span>
                                        <span class="bg-red-100 text-red-800 px-2 py-1 rounded font-mono">def check_add(): ✗</span>
                                    </div>
                                </div>
                            </div>
                            <!-- ルール3: クラス -->
                            <div class="flex items-start gap-4 pt-4 border-t border-slate-100">
                                <div class="flex-shrink-0 w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center">
                                    <span class="text-primary-700 font-bold text-sm">3</span>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-semibold text-slate-800 mb-1">テストクラス</h4>
                                    <p class="text-sm text-slate-600 mb-2">
                                        クラス名が <code class="bg-slate-100 px-1.5 py-0.5 rounded text-primary-700">Test</code> で始まること（<strong>継承不要</strong>・クラス内のメソッドも<code class="bg-slate-100 px-1.5 py-0.5 rounded text-primary-700">test_</code>で始まる必要がある）
                                    </p>
                                    <div class="flex flex-wrap gap-2 text-xs">
                                        <span class="bg-emerald-100 text-emerald-800 px-2 py-1 rounded font-mono">class TestCalculator: ✓</span>
                                        <span class="bg-emerald-100 text-emerald-800 px-2 py-1 rounded font-mono">class TestAuth: ✓</span>
                                        <span class="bg-red-100 text-red-800 px-2 py-1 rounded font-mono">class Calculator: ✗</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-lightbulb text-blue-600 mt-1"></i>
                            <div>
                                <p class="text-blue-900 font-medium">慣習として「test_」プレフィックスを統一する</p>
                                <p class="text-blue-800 text-sm mt-1">
                                    <code>test_*.py</code> と <code>*_test.py</code> の両方が認識されますが、チーム内では<strong>どちらかに統一</strong>することを推奨します。多くのプロジェクトでは <code>test_*.py</code> が使われています。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 5.3 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        5.3 テストディレクトリの構成パターン
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        テストファイルをどこに置くかには、主に2つのパターンがあります。プロジェクトの規模や目的に応じて選択しましょう。
                    </p>

                    <!-- パターン1 -->
                    <div class="bg-white border border-slate-200 rounded-xl p-5 mb-4">
                        <div class="flex items-start gap-4">
                            <div class="flex-shrink-0 w-10 h-10 bg-primary-100 rounded-xl flex items-center justify-center">
                                <span class="text-primary-700 font-bold">A</span>
                            </div>
                            <div class="flex-1">
                                <h3 class="font-semibold text-slate-800 mb-1 text-lg">パターンA: ソースと同じ場所に配置（小〜中規模）</h3>
                                <p class="text-slate-600 text-sm leading-relaxed mb-3">
                                    ソースコードと同じディレクトリにテストファイルを置くシンプルな構成です。小規模なプロジェクトや、素早くテストを追加したいときに適しています。
                                </p>
                                <div class="bg-slate-100 border border-slate-200 rounded-xl p-4">
                                    <h4 class="font-semibold text-slate-800 mb-3 flex items-center gap-2 text-sm">
                                        <i class="fas fa-folder-tree text-slate-500"></i>
                                        ディレクトリ構成
                                    </h4>
                                    <pre class="bg-slate-800 text-slate-100 rounded-lg p-4 text-sm overflow-x-auto"><code>my_project/
├── calculator.py        ← ソースコード
├── test_calculator.py   ← テストファイル（同じ場所）
├── auth.py
└── test_auth.py</code></pre>
                                </div>
                                <div class="flex items-center gap-4 mt-3 text-xs">
                                    <span class="text-emerald-700 font-medium"><i class="fas fa-plus mr-1"></i>シンプルで分かりやすい</span>
                                    <span class="text-red-600 font-medium"><i class="fas fa-minus mr-1"></i>ファイルが増えると混雑する</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- パターン2 -->
                    <div class="bg-white border border-slate-200 rounded-xl p-5 mb-4">
                        <div class="flex items-start gap-4">
                            <div class="flex-shrink-0 w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center">
                                <span class="text-emerald-700 font-bold">B</span>
                            </div>
                            <div class="flex-1">
                                <h3 class="font-semibold text-slate-800 mb-1 text-lg">パターンB: testsディレクトリに集約（中〜大規模）</h3>
                                <p class="text-slate-600 text-sm leading-relaxed mb-3">
                                    プロジェクトルートに <code class="bg-slate-100 px-1 rounded">tests/</code> ディレクトリを作り、すべてのテストをまとめる構成です。多くのOSSプロジェクトや実務プロジェクトで採用されています。
                                </p>
                                <div class="bg-slate-100 border border-slate-200 rounded-xl p-4">
                                    <h4 class="font-semibold text-slate-800 mb-3 flex items-center gap-2 text-sm">
                                        <i class="fas fa-folder-tree text-slate-500"></i>
                                        ディレクトリ構成
                                    </h4>
                                    <pre class="bg-slate-800 text-slate-100 rounded-lg p-4 text-sm overflow-x-auto"><code>my_project/
├── src/
│   ├── calculator.py   ← ソースコード
│   └── auth.py
├── tests/              ← テストをここに集約
│   ├── __init__.py
│   ├── conftest.py     ← 共通設定（後述）
│   ├── test_calculator.py
│   └── test_auth.py
└── pytest.ini          ← pytest設定ファイル</code></pre>
                                </div>
                                <div class="flex items-center gap-4 mt-3 text-xs">
                                    <span class="text-emerald-700 font-medium"><i class="fas fa-plus mr-1"></i>ソースとテストが明確に分離</span>
                                    <span class="text-emerald-700 font-medium"><i class="fas fa-plus mr-1"></i>本番環境へのテストコード混入を防げる</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 概念図 -->
                    <div class="my-6 p-4 bg-white border border-slate-200 rounded-xl">
                        <h3 class="text-sm font-semibold text-slate-600 mb-3 flex items-center gap-2">
                            <i class="fas fa-diagram-project text-primary-500"></i>
                            大規模プロジェクトのテスト構成例
                        </h3>
                        <div class="mermaid">
flowchart TB
    subgraph project["プロジェクト全体"]
        subgraph src["src/ ソースコード"]
            s1["calculator.py"]
            s2["auth.py"]
            s3["user.py"]
        end
        subgraph tests["tests/ テスト"]
            t0["conftest.py（共通設定）"]
            subgraph unit["unit/ 単体テスト"]
                u1["test_calculator.py"]
                u2["test_auth.py"]
            end
            subgraph integration["integration/ 結合テスト"]
                i1["test_user_flow.py"]
            end
        end
    end

    s1 -. テスト対象 .- u1
    s2 -. テスト対象 .- u2

    style t0 fill:#fef3c7,stroke:#f59e0b
    style tests fill:#eff6ff,stroke:#3b82f6
    style src fill:#f0fdf4,stroke:#10b981
                        </div>
                    </div>
                </section>

                <!-- セクション 5.4 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        5.4 テストクラスによるグループ化
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        関連するテストをクラスにまとめることで、テストの意図がより明確になります。pytestでは<strong class="text-slate-800">クラスを継承する必要がなく</strong>、<code class="bg-slate-100 px-1.5 py-0.5 rounded text-slate-700">Test</code> で始まるクラス名にするだけで機能します。
                    </p>

                    <!-- テストクラスの基本 -->
                    <div class="code-block-wrapper mb-6">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">test_calculator.py（クラスによるグループ化）</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                    onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python"># 加算機能に関するテストをクラスでまとめる
class TestAdd:
    def test_正の数同士の加算(self):
        assert 2 + 3 == 5

    def test_負の数を含む加算(self):
        assert -1 + 3 == 2

    def test_ゼロとの加算(self):
        assert 0 + 5 == 5


# 除算機能に関するテストを別のクラスでまとめる
class TestDivide:
    def test_通常の除算(self):
        assert 10 / 2 == 5

    def test_ゼロ除算は例外(self):
        import pytest
        with pytest.raises(ZeroDivisionError):
            10 / 0</code></pre>
                    </div>

                    <!-- クラスのメリット -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-blue-100 border border-blue-300 rounded-xl p-4">
                            <h4 class="font-semibold text-blue-900 mb-2 flex items-center gap-2">
                                <i class="fas fa-layer-group text-blue-600"></i>
                                クラス化のメリット
                            </h4>
                            <ul class="text-sm text-blue-900 space-y-2">
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-blue-600 mt-0.5 flex-shrink-0"></i>
                                    <span>機能ごとにテストが整理される</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-blue-600 mt-0.5 flex-shrink-0"></i>
                                    <span>テスト名の階層構造が生まれる（例: <code class="bg-blue-200 text-blue-900 px-1 rounded">TestAdd::test_正の数同士の加算</code>）</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-blue-600 mt-0.5 flex-shrink-0"></i>
                                    <span>クラス単位でまとめて実行できる</span>
                                </li>
                                <li class="flex items-start gap-2">
                                    <i class="fas fa-check text-blue-600 mt-0.5 flex-shrink-0"></i>
                                    <span>クラス内でsetup_method/teardown_methodが使える</span>
                                </li>
                            </ul>
                        </div>
                        <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
                            <h4 class="font-semibold text-slate-800 mb-2 flex items-center gap-2">
                                <i class="fas fa-terminal text-slate-600"></i>
                                クラス単位での実行例
                            </h4>
                            <div class="code-block-wrapper">
                                <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                                    <span class="text-slate-400 text-sm">ターミナル</span>
                                    <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                            onclick="copyCode(this)">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                                <pre class="!mt-0 !rounded-t-none"><code class="language-bash"># TestAddクラスだけ実行
pytest test_calculator.py::TestAdd

# TestDivideクラスだけ実行
pytest test_calculator.py::TestDivide

# 特定のメソッドだけ実行
pytest test_calculator.py::TestAdd::test_正の数同士の加算</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- setup_method/teardown_method -->
                    <h3 class="text-lg font-semibold text-slate-800 mb-3">クラス内での前処理・後処理</h3>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        テストクラスでは <code class="bg-slate-100 px-1.5 py-0.5 rounded">setup_method</code> と <code class="bg-slate-100 px-1.5 py-0.5 rounded">teardown_method</code> を使って、各テストメソッドの前後に処理を挟めます。
                    </p>
                    <div class="code-block-wrapper mb-4">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">test_shopping_cart.py（前処理・後処理の例）</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                    onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">class TestShoppingCart:
    def setup_method(self):
        # 各テストの前に実行される
        # 空のショッピングカートを準備
        self.cart = []

    def teardown_method(self):
        # 各テストの後に実行される（クリーンアップ）
        self.cart = None

    def test_商品を追加できる(self):
        self.cart.append("apple")
        assert "apple" in self.cart

    def test_商品を削除できる(self):
        self.cart.append("apple")
        self.cart.remove("apple")
        assert "apple" not in self.cart</code></pre>
                    </div>

                    <div class="bg-orange-50 border-l-4 border-orange-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-exclamation-circle text-orange-600 mt-1"></i>
                            <div>
                                <p class="text-orange-900 font-medium">注意: setup_methodよりフィクスチャが推奨</p>
                                <p class="text-orange-800 text-sm mt-1">
                                    <code>setup_method</code> はクラスベースのテストで動作しますが、pytestではより柔軟な<strong>フィクスチャ（@pytest.fixture）</strong>が推奨されます。フィクスチャについては第6章で詳しく学びます。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 5.5 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        5.5 conftest.py - テストの共通設定ファイル
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        <strong class="text-slate-800">conftest.py</strong> はpytestの特別なファイルで、テストの共通設定やフィクスチャを定義する場所です。ファイル名は固定で、pytestが自動的に読み込みます。
                    </p>

                    <!-- conftest.py の役割 -->
                    <div class="my-6 p-4 bg-white border border-slate-200 rounded-xl">
                        <h3 class="text-sm font-semibold text-slate-600 mb-3 flex items-center gap-2">
                            <i class="fas fa-diagram-project text-primary-500"></i>
                            conftest.pyの適用範囲
                        </h3>
                        <div class="mermaid">
flowchart TB
    subgraph root["プロジェクトルート"]
        c0["conftest.py<br/>（全テストに適用）"]
        subgraph tests["tests/"]
            c1["conftest.py<br/>（testsフォルダ以下に適用）"]
            f1["test_auth.py"]
            subgraph unit["unit/"]
                c2["conftest.py<br/>（unitフォルダ以下に適用）"]
                f2["test_calc.py"]
            end
        end
    end

    c0 -->|適用| c1
    c0 -->|適用| f1
    c0 -->|適用| f2
    c1 -->|適用| f1
    c1 -->|適用| f2
    c2 -->|適用| f2

    style c0 fill:#fef3c7,stroke:#f59e0b
    style c1 fill:#dbeafe,stroke:#3b82f6
    style c2 fill:#d1fae5,stroke:#10b981
                        </div>
                        <p class="text-xs text-slate-500 mt-3">
                            <i class="fas fa-info-circle mr-1"></i>
                            conftest.pyは「そのフォルダとその下にあるすべてのテスト」に適用されます。階層が深いほど適用範囲は狭くなります。
                        </p>
                    </div>

                    <!-- conftest.pyの基本的な使い方 -->
                    <h3 class="text-lg font-semibold text-slate-800 mb-3">conftest.pyの基本的な使い方</h3>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        conftest.pyに書いたフィクスチャ（テスト用のデータや準備処理）は、同じフォルダのテストファイルから<strong class="text-slate-800">インポートなしで自動的に利用できます</strong>。
                    </p>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div>
                            <p class="text-xs text-slate-500 mb-2 font-medium">conftest.py（共通の準備処理を定義）</p>
                            <div class="code-block-wrapper">
                                <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                                    <span class="text-slate-400 text-sm">tests/conftest.py</span>
                                    <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                            onclick="copyCode(this)">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                                <pre class="!mt-0 !rounded-t-none"><code class="language-python">import pytest

# フィクスチャを定義
# （フィクスチャの詳細は第6章）
@pytest.fixture
def sample_user():
    # テスト用ユーザーデータを返す
    return {
        "name": "テストユーザー",
        "email": "test@example.com",
        "age": 25
    }</code></pre>
                            </div>
                        </div>
                        <div>
                            <p class="text-xs text-slate-500 mb-2 font-medium">テストファイル（インポートなしで使える）</p>
                            <div class="code-block-wrapper">
                                <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                                    <span class="text-slate-400 text-sm">tests/test_user.py</span>
                                    <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                            onclick="copyCode(this)">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                                <pre class="!mt-0 !rounded-t-none"><code class="language-python"># conftest.pyからのインポートは不要！
# 引数名と同名のフィクスチャが自動的に渡される

def test_ユーザー名が設定されている(sample_user):
    assert sample_user["name"] == "テストユーザー"

def test_メールアドレスが有効(sample_user):
    assert "@" in sample_user["email"]</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="bg-emerald-50 border-l-4 border-emerald-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-star text-emerald-600 mt-1"></i>
                            <div>
                                <p class="text-emerald-900 font-medium">重要ポイント: conftest.pyの自動読み込み</p>
                                <p class="text-emerald-800 text-sm mt-1">
                                    conftest.pyに定義したフィクスチャは、<strong>インポート文を書かなくても</strong>自動的にテストから利用できます。これがconftest.pyの最大の特徴です。importを書くと逆にエラーになる場合があるので注意してください。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 5.6 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        5.6 テストの実行範囲を指定する
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        pytestでは、実行するテストの範囲をコマンドライン引数で細かく指定できます。大量のテストがあっても、特定の部分だけを素早く実行できます。
                    </p>

                    <!-- 実行範囲の指定方法 -->
                    <div class="overflow-x-auto mb-6">
                        <table class="w-full text-sm border-collapse">
                            <thead>
                                <tr class="bg-primary-50">
                                    <th class="text-left p-3 border border-primary-200 text-primary-800 font-semibold">コマンド例</th>
                                    <th class="text-left p-3 border border-primary-200 text-primary-800 font-semibold">実行対象</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="bg-white">
                                    <td class="p-3 border border-slate-200 font-mono text-slate-700">pytest</td>
                                    <td class="p-3 border border-slate-200 text-slate-600">カレントディレクトリ以下のすべてのテスト</td>
                                </tr>
                                <tr class="bg-slate-50">
                                    <td class="p-3 border border-slate-200 font-mono text-slate-700">pytest tests/</td>
                                    <td class="p-3 border border-slate-200 text-slate-600">testsディレクトリ以下のすべてのテスト</td>
                                </tr>
                                <tr class="bg-white">
                                    <td class="p-3 border border-slate-200 font-mono text-slate-700">pytest tests/test_auth.py</td>
                                    <td class="p-3 border border-slate-200 text-slate-600">特定ファイルのテスト</td>
                                </tr>
                                <tr class="bg-slate-50">
                                    <td class="p-3 border border-slate-200 font-mono text-slate-700">pytest tests/test_auth.py::TestLogin</td>
                                    <td class="p-3 border border-slate-200 text-slate-600">特定クラスのテスト</td>
                                </tr>
                                <tr class="bg-white">
                                    <td class="p-3 border border-slate-200 font-mono text-slate-700">pytest tests/test_auth.py::TestLogin::test_正常ログイン</td>
                                    <td class="p-3 border border-slate-200 text-slate-600">特定テスト関数のみ</td>
                                </tr>
                                <tr class="bg-slate-50">
                                    <td class="p-3 border border-slate-200 font-mono text-slate-700">pytest -k "login"</td>
                                    <td class="p-3 border border-slate-200 text-slate-600">名前に "login" を含むテスト（キーワード検索）</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="code-block-wrapper mb-4">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">ターミナル（実行例）</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                    onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-bash"># 詳細な出力で実行（-v オプション）
pytest -v tests/

# 実行結果の例
tests/test_auth.py::TestLogin::test_正常ログイン PASSED
tests/test_auth.py::TestLogin::test_パスワード誤り PASSED
tests/test_auth.py::TestLogout::test_ログアウト後リダイレクト PASSED

# 特定のクラスだけ実行
pytest -v tests/test_auth.py::TestLogin</code></pre>
                    </div>
                </section>

                <!-- セクション 5.7 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        5.7 テスト名のベストプラクティス
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        良いテスト名は「何をテストしているか」を一目で理解できます。テストが失敗したとき、テスト名だけで問題の場所と内容が分かるのが理想です。
                    </p>

                    <!-- 良い例・悪い例 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-red-50 border border-red-200 rounded-xl p-5">
                            <h4 class="font-semibold text-red-800 mb-3 flex items-center gap-2">
                                <i class="fas fa-times-circle text-red-600"></i>
                                避けるべき命名
                            </h4>
                            <div class="code-block-wrapper">
                                <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                                    <span class="text-slate-400 text-sm">悪い例</span>
                                    <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                            onclick="copyCode(this)">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                                <pre class="!mt-0 !rounded-t-none"><code class="language-python">def test_1():
    assert add(2, 3) == 5

def test_add():
    assert add(2, 3) == 5

def test_check():
    assert validate("user")

# 失敗時: test_1 FAILED
# → 何が失敗したか全く分からない</code></pre>
                            </div>
                        </div>
                        <div class="bg-emerald-50 border border-emerald-200 rounded-xl p-5">
                            <h4 class="font-semibold text-emerald-800 mb-3 flex items-center gap-2">
                                <i class="fas fa-check-circle text-emerald-600"></i>
                                推奨される命名
                            </h4>
                            <div class="code-block-wrapper">
                                <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                                    <span class="text-slate-400 text-sm">良い例</span>
                                    <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                            onclick="copyCode(this)">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                                <pre class="!mt-0 !rounded-t-none"><code class="language-python">def test_正の整数同士の加算が正しい():
    assert add(2, 3) == 5

def test_ユーザー名が空の場合は無効():
    assert validate("") == False

# 失敗時:
# test_正の整数同士の加算が正しい FAILED
# → 何が問題か一目で分かる</code></pre>
                            </div>
                        </div>
                    </div>

                    <!-- 命名パターン -->
                    <div class="bg-white border border-slate-200 rounded-xl p-5">
                        <h4 class="font-semibold text-slate-800 mb-3">テスト名の命名パターン</h4>
                        <div class="space-y-3">
                            <div class="flex items-start gap-3 p-3 bg-slate-50 rounded-lg">
                                <span class="flex-shrink-0 text-xs font-bold text-primary-600 bg-primary-100 px-2 py-1 rounded mt-0.5">パターン1</span>
                                <div>
                                    <p class="text-sm font-medium text-slate-700">日本語で記述する</p>
                                    <p class="text-xs text-slate-500 font-mono">def test_正の数を渡したとき加算結果が返る():</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-3 p-3 bg-slate-50 rounded-lg">
                                <span class="flex-shrink-0 text-xs font-bold text-primary-600 bg-primary-100 px-2 py-1 rounded mt-0.5">パターン2</span>
                                <div>
                                    <p class="text-sm font-medium text-slate-700">given_when_then 形式（英語）</p>
                                    <p class="text-xs text-slate-500 font-mono">def test_given_positive_numbers_when_add_then_returns_sum():</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-3 p-3 bg-slate-50 rounded-lg">
                                <span class="flex-shrink-0 text-xs font-bold text-primary-600 bg-primary-100 px-2 py-1 rounded mt-0.5">パターン3</span>
                                <div>
                                    <p class="text-sm font-medium text-slate-700">should 形式（英語）</p>
                                    <p class="text-xs text-slate-500 font-mono">def test_should_return_sum_when_given_two_numbers():</p>
                                </div>
                            </div>
                        </div>
                        <p class="text-xs text-slate-500 mt-3">
                            <i class="fas fa-info-circle mr-1"></i>
                            日本語テスト名はpytestで完全サポートされており、読みやすいためチームによく採用されています。チームで命名規則を統一することが最も重要です。
                        </p>
                    </div>
                </section>

                <!-- 実習カード -->
                <div class="bg-gradient-to-r from-purple-50 to-fuchsia-50 border border-purple-200
                            rounded-xl p-5 my-8 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-purple-500 rounded-lg
                                    flex items-center justify-center">
                            <i class="fas fa-pen text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="text-lg font-semibold text-purple-800 mb-3 break-words">
                                実習 5-1: テストディレクトリを整理してみよう
                            </h3>
                            <p class="text-purple-900 mb-4 break-words">
                                実際にテストディレクトリを作成し、複数のファイルにテストを分割して構造化します。conftest.pyを作成して共通データを定義する練習も行います。
                            </p>

                            <h4 class="font-medium text-purple-800 mb-2">手順</h4>
                            <ol class="space-y-3 mb-4">
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full
                                                 flex items-center justify-center text-sm font-medium">1</span>
                                    <span class="flex-1 min-w-0 break-words"><code class="bg-purple-100 px-1 rounded">my_shop/</code> フォルダを作成し、その中に <code class="bg-purple-100 px-1 rounded">tests/</code> フォルダを作成してください</span>
                                </li>
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full
                                                 flex items-center justify-center text-sm font-medium">2</span>
                                    <span class="flex-1 min-w-0 break-words"><code class="bg-purple-100 px-1 rounded">tests/conftest.py</code> を作成し、商品データのフィクスチャを定義してください（例: 商品名・価格・在庫数の辞書）</span>
                                </li>
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full
                                                 flex items-center justify-center text-sm font-medium">3</span>
                                    <span class="flex-1 min-w-0 break-words"><code class="bg-purple-100 px-1 rounded">tests/test_product.py</code> を作成し、<code class="bg-purple-100 px-1 rounded">TestProduct</code> クラスを定義して商品に関する3つのテストを書いてください</span>
                                </li>
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full
                                                 flex items-center justify-center text-sm font-medium">4</span>
                                    <span class="flex-1 min-w-0 break-words"><code class="bg-purple-100 px-1 rounded">pytest -v tests/</code> を実行して、テストが階層構造で表示されることを確認してください</span>
                                </li>
                            </ol>

                            <div class="bg-purple-100 rounded-lg p-4 mt-4">
                                <p class="text-sm text-purple-900 font-medium mb-2">
                                    <i class="fas fa-lightbulb text-purple-600 mr-2"></i>期待される出力例
                                </p>
                                <pre class="text-xs text-purple-900 font-mono">tests/test_product.py::TestProduct::test_商品名が設定されている PASSED
tests/test_product.py::TestProduct::test_価格が正の数 PASSED
tests/test_product.py::TestProduct::test_在庫が0以上 PASSED</pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 章まとめ -->
                <div class="bg-gradient-to-r from-slate-50 to-primary-50 border border-slate-200 rounded-xl p-6 my-8">
                    <h2 class="text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2">
                        <i class="fas fa-flag-checkered text-primary-500"></i>
                        第5章のまとめ
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <h3 class="text-sm font-semibold text-slate-700 mb-2">学んだこと</h3>
                            <ul class="space-y-2">
                                <li class="flex items-start gap-2 text-sm text-slate-600">
                                    <i class="fas fa-check-circle text-emerald-500 mt-0.5 flex-shrink-0"></i>
                                    <span>pytestは <code>test_*.py</code> / <code>def test_</code> / <code>class Test</code> の命名規則でテストを自動検出する</span>
                                </li>
                                <li class="flex items-start gap-2 text-sm text-slate-600">
                                    <i class="fas fa-check-circle text-emerald-500 mt-0.5 flex-shrink-0"></i>
                                    <span>テストディレクトリは「ソースと同じ場所」か「testsフォルダに集約」の2パターンが一般的</span>
                                </li>
                                <li class="flex items-start gap-2 text-sm text-slate-600">
                                    <i class="fas fa-check-circle text-emerald-500 mt-0.5 flex-shrink-0"></i>
                                    <span>テストクラス（Test始まり）で関連するテストをグループ化できる</span>
                                </li>
                                <li class="flex items-start gap-2 text-sm text-slate-600">
                                    <i class="fas fa-check-circle text-emerald-500 mt-0.5 flex-shrink-0"></i>
                                    <span>conftest.pyは共通フィクスチャをインポートなしで提供できる特別なファイル</span>
                                </li>
                                <li class="flex items-start gap-2 text-sm text-slate-600">
                                    <i class="fas fa-check-circle text-emerald-500 mt-0.5 flex-shrink-0"></i>
                                    <span>テスト名は「何をテストしているか」が一目で分かるように書く</span>
                                </li>
                            </ul>
                        </div>
                        <div>
                            <h3 class="text-sm font-semibold text-slate-700 mb-2">次章の予告</h3>
                            <div class="bg-white border border-primary-200 rounded-lg p-4">
                                <p class="text-sm text-slate-600 leading-relaxed">
                                    第6章では、本章で少し触れた<strong>フィクスチャ（@pytest.fixture）</strong>を深く掘り下げます。テストデータの準備・後処理（teardown）・フィクスチャのスコープなど、pytestの核心的な機能を学びます。
                                </p>
                                <p class="text-xs text-primary-600 mt-2">
                                    <i class="fas fa-arrow-right mr-1"></i>第6章: フィクスチャ基礎 - テストの前準備と後片付け
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 理解度確認クイズ -->
                <div class="bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200
                            rounded-xl p-5 my-8 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-blue-500 rounded-lg
                                    flex items-center justify-center">
                            <i class="fas fa-question text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="text-lg font-semibold text-blue-800 mb-4 break-words">理解度確認クイズ</h3>
                            <ol class="space-y-6">
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q1. pytestが自動検出するテストファイルの命名パターンを2つ答えてください。</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3 break-words">
                                            <strong>test_*.py</strong>（test_で始まるファイル）と <strong>*_test.py</strong>（_testで終わるファイル）の2パターンです。実務では <code>test_*.py</code> が広く使われています。
                                        </p>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q2. pytestのテストクラスはどのクラスを継承する必要がありますか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3 break-words">
                                            <strong>継承は不要</strong>です。pytestでは <code>Test</code> で始まるクラス名にするだけでテストクラスとして認識されます。unittest.TestCaseを継承する必要はありません。
                                        </p>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q3. conftest.pyに定義したフィクスチャをテストファイルで使うとき、import文は必要ですか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3 break-words">
                                            <strong>不要です。</strong>conftest.pyはpytestが自動的に読み込むため、同じフォルダ（およびその上位）のconftest.pyに定義されたフィクスチャはimportなしで使えます。
                                        </p>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q4. テストを <code>TestLogin</code> クラスの <code>test_正常ログイン</code> 関数だけ実行するコマンドは？（ファイル名: test_auth.py）</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3 break-words">
                                            <code class="bg-blue-200 px-2 py-0.5 rounded">pytest test_auth.py::TestLogin::test_正常ログイン</code> です。<code>::</code>（ダブルコロン）でファイル・クラス・関数名を区切って指定します。
                                        </p>
                                    </details>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>

                <!-- 章間ナビゲーション -->
                <nav class="flex items-center justify-between pt-6 mt-6 border-t border-slate-200">
                    <a href="pytest-learning-material-04.html"
                       class="group flex items-center gap-3 px-4 py-3 rounded-xl
                              bg-slate-100 hover:bg-slate-200 transition-colors">
                        <i class="fas fa-arrow-left text-slate-400 group-hover:text-slate-600 transition-transform group-hover:-translate-x-1"></i>
                        <div>
                            <span class="text-xs text-slate-500 block">前の章</span>
                            <span class="text-slate-700 font-medium">アサーションの詳細</span>
                        </div>
                    </a>
                    <a href="pytest-learning-material-06.html"
                       class="group flex items-center gap-3 px-4 py-3 rounded-xl
                              bg-primary-500 hover:bg-primary-600 text-white transition-colors">
                        <div class="text-right">
                            <span class="text-xs text-primary-100 block">次の章</span>
                            <span class="font-medium">フィクスチャ基礎</span>
                        </div>
                        <i class="fas fa-arrow-right transition-transform group-hover:translate-x-1"></i>
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <!-- フッター -->
    <footer class="bg-slate-800 text-slate-300">
        <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <p class="text-sm text-center md:text-left">
                    &copy; 2026 F-Circle. All rights reserved.<br>
                    本資料はAIツールを活用し、人間による編集・監修のもと作成されています。
                </p>
                <div class="flex items-center gap-4">
                    <a href="https://github.com/fcircle-biz/tech_docs" class="hover:text-white transition-colors">
                        <i class="fab fa-github text-xl"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- スクロールトップボタン -->
    <button id="scroll-top-btn"
            class="fixed bottom-6 right-6 w-12 h-12 bg-primary-500 text-white rounded-full
                   shadow-lg hover:bg-primary-600 transition-all duration-300
                   opacity-0 invisible translate-y-4"
            onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- サイドバー生成 -->
    <script src="sidebar-content.js"></script>

    <!-- 共通JavaScript -->
    <script src="main.js"></script>

    <!-- 描画ツール -->
    <script src="drawing-tool.js"></script>
</body>
</html>
