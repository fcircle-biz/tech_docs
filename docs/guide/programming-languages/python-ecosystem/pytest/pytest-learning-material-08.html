<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" id="viewport-meta">
    <title>pytest入門 第8章 - パラメータ化テスト</title>

    <!-- ダークモード早期適用（フラッシュ防止） -->
    <script>
        (function() {
            const saved = localStorage.getItem('darkMode');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (saved === 'dark' || (saved === null && prefersDark)) {
                document.documentElement.classList.add('dark');
            }
        })();
    </script>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Python - Blue
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans JP"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts - Noto Sans JP -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- カスタムスタイル -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="font-sans bg-slate-50 text-slate-800 antialiased">
    <!-- ヘッダー/ナビゲーションバー -->
    <header class="fixed top-0 left-0 right-0 z-50 text-white header-rich header-rich-shadow">
        <nav class="w-full px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="flex items-center justify-between py-3">
                <!-- 左側: ロゴとタイトルセクション -->
                <div class="flex items-center gap-4">
                    <!-- アイコン -->
                    <div class="relative group">
                        <div class="absolute inset-0 bg-gradient-to-br from-yellow-400/30 to-orange-400/30 rounded-2xl blur-lg group-hover:blur-xl transition-all"></div>
                        <div class="relative w-14 h-14 bg-white/10 rounded-xl flex items-center justify-center backdrop-blur-sm border border-white/20">
                            <i class="fab fa-python text-3xl icon-rotate-hover drop-shadow-lg"></i>
                        </div>
                    </div>

                    <!-- タイトルとメタ情報 -->
                    <div class="flex flex-col gap-1">
                        <div class="flex items-center gap-2">
                            <span class="text-xl font-bold tracking-wide drop-shadow-md">pytest入門学習教材</span>
                            <span class="hidden sm:inline-flex items-center gap-1 px-2 py-0.5 bg-white/20 rounded-md text-[10px] font-semibold uppercase tracking-wider">
                                <i class="fas fa-star text-yellow-300 text-[8px]"></i>
                                初級
                            </span>
                        </div>
                        <div class="flex items-center gap-3 text-[11px] text-white/90 font-medium">
                            <div class="flex items-center gap-1">
                                <i class="fas fa-vial text-[9px]"></i>
                                <span>プログラミング言語 / テスト</span>
                            </div>
                            <div class="hidden sm:flex items-center gap-1">
                                <i class="fas fa-clock text-[9px]"></i>
                                <span>所要時間 約20時間</span>
                            </div>
                            <div class="hidden lg:flex items-center gap-1">
                                <i class="fas fa-language text-[9px]"></i>
                                <span>日本語</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 右側: サイドバートグルボタン -->
                <button id="sidebar-toggle-btn" class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white/20 transition-all active:scale-95" title="サイドバーの表示/非表示">
                    <i class="fas fa-bars text-lg"></i>
                </button>
            </div>
        </nav>
    </header>

    <!-- メインレイアウト -->
    <div class="flex min-h-screen pt-20">
        <!-- サイドバーはsidebar-content.jsで動的に生成されます -->

        <!-- メインコンテンツ -->
        <main class="flex-1 min-w-0">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-10 py-6">
                <!-- パンくずリスト -->
                <nav class="flex items-center gap-2 text-sm text-slate-500 mb-6">
                    <a href="https://fcircle-biz.github.io/tech_docs/" class="hover:text-primary-600 transition-colors">ホーム</a>
                    <i class="fas fa-chevron-right text-xs"></i>
                    <a href="./README.md" class="hover:text-primary-600 transition-colors">pytest入門</a>
                    <i class="fas fa-chevron-right text-xs"></i>
                    <span class="text-slate-700">第8章</span>
                </nav>

                <!-- 章ヘッダー -->
                <header class="mb-6">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium
                                     bg-primary-100 text-primary-700">
                            第8章
                        </span>
                        <span class="text-sm text-slate-500">
                            <i class="fas fa-clock mr-1"></i>所要時間: 約1時間
                        </span>
                    </div>
                    <h1 class="text-2xl sm:text-3xl font-bold text-slate-900 mb-2">パラメータ化テスト - 同じテストを複数データで実行する</h1>
                    <p class="text-slate-600"><code class="bg-slate-100 px-1.5 py-0.5 rounded text-sm">@pytest.mark.parametrize</code>デコレータを使って、1つのテスト関数に複数の入力データと期待値を指定する方法を学びます。境界値テスト、正常系・異常系の網羅的なテスト、複数パラメータの組み合わせテストを効率的に記述する技術を身につけます。</p>
                </header>

                <!-- 学習目標カード -->
                <div class="bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200
                            rounded-xl p-5 mb-8 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-amber-400 rounded-lg
                                    flex items-center justify-center">
                            <i class="fas fa-lightbulb text-white"></i>
                        </div>
                        <div>
                            <h2 class="text-lg font-semibold text-amber-800 mb-3">この章で学ぶこと</h2>
                            <ul class="space-y-2">
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span><code class="bg-amber-100 px-1 rounded text-sm">@pytest.mark.parametrize</code>デコレータの基本的な書き方と仕組みを理解する</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>境界値（ゼロ、負の数、最大値・最小値）を含む網羅的なテストケースを効率よく記述できる</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>複数パラメータの組み合わせテストや、<code class="bg-amber-100 px-1 rounded text-sm">pytest.param</code>を使ったIDとマーカーの付与ができる</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>パラメータ化テストをいつ使うべきか、使いすぎの落とし穴を理解する</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- セクション 8.1 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.1 パラメータ化テストが解決する問題
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        同じロジックを検証するために、入力値だけが異なるテストを何度も書いていませんか？例えば、足し算関数をテストするとき、次のようなコードになりがちです。
                    </p>

                    <!-- 問題のあるコード例 -->
                    <div class="code-block-wrapper mb-4">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">test_add_bad.py（重複が多い書き方）</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                    onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python"># 同じパターンの繰り返し - メンテナンスが大変
def test_add_positive():
    assert add(2, 3) == 5

def test_add_zero():
    assert add(0, 0) == 0

def test_add_negative():
    assert add(-1, -2) == -3

def test_add_mixed():
    assert add(-1, 1) == 0</code></pre>
                    </div>

                    <p class="text-slate-600 leading-relaxed mb-4">
                        このコードには問題があります。ロジックはまったく同じなのに、データが違うだけで4つの関数を書かなければなりません。テストケースを追加するたびに関数が増え、修正が必要になったときは全箇所を変更しなければなりません。
                    </p>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-lightbulb text-blue-600 mt-1"></i>
                            <div>
                                <p class="text-blue-900 font-medium">パラメータ化テストの考え方</p>
                                <p class="text-blue-800 text-sm mt-1">
                                    「テストのロジック（検証の方法）」と「テストデータ（入力と期待値）」を分離することで、1つの関数で複数のケースをテストできます。これが<strong>パラメータ化テスト</strong>の基本的な考え方です。
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- 概念図 -->
                    <div class="my-6 p-4 bg-white border border-slate-200 rounded-xl">
                        <h3 class="text-sm font-semibold text-slate-600 mb-3 flex items-center gap-2">
                            <i class="fas fa-diagram-project text-primary-500"></i>
                            パラメータ化テストの仕組み
                        </h3>
                        <div class="mermaid">
flowchart LR
    subgraph params["テストデータ（パラメータ）"]
        P1["(2, 3) → 5"]
        P2["(0, 0) → 0"]
        P3["(-1, -2) → -3"]
        P4["(-1, 1) → 0"]
    end
    subgraph func["1つのテスト関数"]
        T["test_add(a, b, expected)<br/>assert add(a, b) == expected"]
    end
    P1 --> T
    P2 --> T
    P3 --> T
    P4 --> T
    T --> R["4つのテストケースが<br/>自動的に実行される"]

    style R fill:#d1fae5,stroke:#10b981,color:#065f46
                        </div>
                    </div>
                </section>

                <!-- セクション 8.2 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.2 @pytest.mark.parametrize の基本構文
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        pytestのパラメータ化テストは、<code class="bg-slate-100 px-1.5 py-0.5 rounded text-sm">@pytest.mark.parametrize</code>デコレータを使います。書き方はシンプルです。
                    </p>

                    <!-- 基本構文の説明 -->
                    <div class="bg-white border border-slate-200 rounded-xl p-5 mb-5">
                        <h3 class="font-semibold text-slate-800 mb-3">デコレータの構文</h3>
                        <div class="code-block-wrapper">
                            <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                                <span class="text-slate-400 text-sm">構文の説明</span>
                                <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                        onclick="copyCode(this)">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                            <pre class="!mt-0 !rounded-t-none"><code class="language-python">@pytest.mark.parametrize("引数名", [値1, 値2, 値3])
def test_関数名(引数名):
    ...

# 複数の引数を渡す場合
@pytest.mark.parametrize("引数名1, 引数名2", [(値1a, 値1b), (値2a, 値2b)])
def test_関数名(引数名1, 引数名2):
    ...</code></pre>
                        </div>
                        <div class="mt-4 space-y-2">
                            <div class="flex items-start gap-3">
                                <span class="flex-shrink-0 bg-primary-100 text-primary-700 text-xs px-2 py-0.5 rounded font-mono mt-0.5">第1引数</span>
                                <p class="text-sm text-slate-600">パラメータ名を文字列で指定します。複数の場合はカンマ区切り（<code class="bg-slate-100 px-1 rounded">"a, b, expected"</code>）で書きます。</p>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="flex-shrink-0 bg-primary-100 text-primary-700 text-xs px-2 py-0.5 rounded font-mono mt-0.5">第2引数</span>
                                <p class="text-sm text-slate-600">テストデータのリストを指定します。複数の引数がある場合は、各ケースをタプルで包んだリストにします。</p>
                            </div>
                        </div>
                    </div>

                    <!-- 実際の例 -->
                    <div class="code-block-wrapper mb-4">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">test_add.py（パラメータ化した書き方）</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                    onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import pytest

def add(a, b):
    # テスト対象の関数
    return a + b

# 1つの関数で4ケースをカバー！
@pytest.mark.parametrize("a, b, expected", [
    (2, 3, 5),      # 正の数同士
    (0, 0, 0),      # ゼロ同士
    (-1, -2, -3),   # 負の数同士
    (-1, 1, 0),     # 正負の組み合わせ
])
def test_add(a, b, expected):
    assert add(a, b) == expected</code></pre>
                    </div>

                    <!-- 実行結果 -->
                    <div class="bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200
                                rounded-xl p-5 my-6 overflow-hidden">
                        <div class="flex items-start gap-4">
                            <div class="flex-shrink-0 w-10 h-10 bg-emerald-500 rounded-lg
                                        flex items-center justify-center">
                                <i class="fas fa-play text-white"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <h3 class="text-lg font-semibold text-emerald-800 mb-3">実行結果の確認</h3>
                                <p class="text-emerald-900 mb-3">
                                    <code class="bg-emerald-100 px-1.5 py-0.5 rounded text-sm">pytest test_add.py -v</code>を実行すると、各パラメータセットが独立したテストケースとして表示されます。
                                </p>
                                <div class="bg-emerald-100 rounded-lg p-4 border border-emerald-200">
                                    <pre class="text-emerald-900 text-sm whitespace-pre-wrap">test_add.py::test_add[2-3-5] PASSED
test_add.py::test_add[0-0-0] PASSED
test_add.py::test_add[-1--2--3] PASSED
test_add.py::test_add[-1-1-0] PASSED

4 passed in 0.01s</pre>
                                </div>
                                <p class="text-emerald-800 text-sm mt-3">
                                    <i class="fas fa-info-circle mr-1"></i>
                                    テストIDは自動的に「引数値をハイフンで連結」した形式になります。後でIDを見やすくカスタマイズする方法も紹介します。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 8.3 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.3 境界値テストへの応用
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        パラメータ化テストが特に威力を発揮するのが、<strong class="text-slate-800">境界値テスト</strong>です。境界値テストとは、プログラムが「ちょうど変わり目」の値で正しく動作するかを確認するテスト技法です。
                    </p>

                    <!-- 境界値テストの説明 -->
                    <div class="bg-white border border-slate-200 rounded-xl p-5 mb-5">
                        <h3 class="font-semibold text-slate-800 mb-3 flex items-center gap-2">
                            <i class="fas fa-ruler text-primary-500"></i>
                            境界値テストとは
                        </h3>
                        <p class="text-sm text-slate-600 mb-4">
                            例として「0以上100以下の点数を受け取り、評価を返す関数」を考えましょう。バグが最も起きやすいのは境界の値です。
                        </p>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                            <div class="bg-red-50 rounded-lg p-3 border border-red-200">
                                <p class="text-xs font-semibold text-red-700 mb-1">無効な値（境界外）</p>
                                <p class="text-sm text-red-600">-1, 101, -999 など</p>
                            </div>
                            <div class="bg-yellow-50 rounded-lg p-3 border border-yellow-200">
                                <p class="text-xs font-semibold text-yellow-700 mb-1">境界値（最重要）</p>
                                <p class="text-sm text-yellow-600">0, 1, 59, 60, 99, 100 など</p>
                            </div>
                            <div class="bg-emerald-50 rounded-lg p-3 border border-emerald-200">
                                <p class="text-xs font-semibold text-emerald-700 mb-1">一般的な有効値</p>
                                <p class="text-sm text-emerald-600">50, 75 など中間の値</p>
                            </div>
                        </div>
                    </div>

                    <!-- 境界値テストの実装例 -->
                    <div class="code-block-wrapper mb-4">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">test_grade.py（境界値を網羅したパラメータ化テスト）</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                    onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import pytest

def get_grade(score):
    """点数から評価を返す関数"""
    if score < 0 or score > 100:
        raise ValueError(f"無効な点数: {score}")
    if score >= 90:
        return "A"
    elif score >= 60:
        return "B"
    else:
        return "C"

# 正常系: 境界値を含む網羅テスト
@pytest.mark.parametrize("score, expected_grade", [
    (100, "A"),  # 最大値
    (90, "A"),   # A評価の下限
    (89, "B"),   # B評価の上限
    (60, "B"),   # B評価の下限
    (59, "C"),   # C評価の上限
    (0, "C"),    # 最小値
    (50, "C"),   # 一般的な値
])
def test_get_grade_valid(score, expected_grade):
    assert get_grade(score) == expected_grade

# 異常系: 範囲外の値で例外が発生することを確認
@pytest.mark.parametrize("invalid_score", [-1, 101, -100, 200])
def test_get_grade_invalid(invalid_score):
    with pytest.raises(ValueError):
        get_grade(invalid_score)</code></pre>
                    </div>

                    <div class="bg-emerald-50 border-l-4 border-emerald-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-star text-emerald-600 mt-1"></i>
                            <div>
                                <p class="text-emerald-900 font-medium">重要ポイント：正常系と異常系を分けて書く</p>
                                <p class="text-emerald-800 text-sm mt-1">
                                    パラメータ化テストでは、<strong>正常系（期待どおり動くケース）</strong>と<strong>異常系（例外が発生するケース）</strong>を別の関数に分けて書くのがよい習慣です。テストの目的が明確になり、失敗したときに原因を素早く特定できます。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 8.4 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.4 pytest.param を使ったIDとマーカーの付与
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        自動生成されるテストIDが読みにくい場合や、一部のテストケースだけにマーカーを付けたい場合は、<code class="bg-slate-100 px-1.5 py-0.5 rounded text-sm">pytest.param()</code>を使います。
                    </p>

                    <!-- pytest.param の説明 -->
                    <div class="code-block-wrapper mb-4">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">test_param_id.py（IDのカスタマイズ）</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                    onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import pytest

def add(a, b):
    return a + b

@pytest.mark.parametrize("a, b, expected", [
    pytest.param(2, 3, 5, id="正の数同士"),
    pytest.param(0, 0, 0, id="ゼロ同士"),
    pytest.param(-1, -2, -3, id="負の数同士"),
    pytest.param(
        -1, 1, 0,
        id="正負の組み合わせ",
        marks=pytest.mark.skip(reason="バグ調査中")  # 一時的にスキップ
    ),
])
def test_add_with_ids(a, b, expected):
    assert add(a, b) == expected</code></pre>
                    </div>

                    <!-- 実行結果の見え方 -->
                    <div class="bg-white border border-slate-200 rounded-xl p-5 mb-5">
                        <h3 class="font-semibold text-slate-800 mb-3">IDをカスタマイズした場合の実行結果</h3>
                        <div class="bg-slate-800 rounded-lg p-4">
                            <pre class="text-slate-100 text-sm whitespace-pre-wrap">test_param_id.py::test_add_with_ids[正の数同士] PASSED
test_param_id.py::test_add_with_ids[ゼロ同士] PASSED
test_param_id.py::test_add_with_ids[負の数同士] PASSED
test_param_id.py::test_add_with_ids[正負の組み合わせ] SKIPPED</pre>
                        </div>
                        <p class="text-sm text-slate-500 mt-3">
                            <i class="fas fa-info-circle mr-1"></i>
                            IDを日本語で書くことで、どのテストケースが失敗しているか一目でわかるようになります。
                        </p>
                    </div>
                </section>

                <!-- セクション 8.5 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.5 複数パラメータの組み合わせテスト
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        <code class="bg-slate-100 px-1.5 py-0.5 rounded text-sm">@pytest.mark.parametrize</code>を複数スタックすることで、引数の<strong class="text-slate-800">直積（すべての組み合わせ）</strong>でテストを実行できます。
                    </p>

                    <!-- 複数デコレータのスタック -->
                    <div class="code-block-wrapper mb-4">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">test_multiply.py（デコレータをスタックした組み合わせテスト）</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                    onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import pytest

def multiply(a, b):
    return a * b

# a の値 × b の値 = 6ケースのテストが自動生成される
@pytest.mark.parametrize("a", [1, 2, 3])
@pytest.mark.parametrize("b", [10, 20])
def test_multiply_combinations(a, b):
    # 1×10, 1×20, 2×10, 2×20, 3×10, 3×20 が実行される
    assert multiply(a, b) == a * b</code></pre>
                    </div>

                    <!-- 組み合わせ爆発の注意 -->
                    <div class="bg-orange-50 border-l-4 border-orange-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-exclamation-circle text-orange-600 mt-1"></i>
                            <div>
                                <p class="text-orange-900 font-medium">注意：組み合わせ爆発に気をつけよう</p>
                                <p class="text-orange-800 text-sm mt-1">
                                    デコレータのスタックは便利ですが、パラメータが多くなると組み合わせ数が急増します。例えば5種類 × 5種類 = 25ケースになります。本当に意味のある組み合わせだけを選ぶよう心がけましょう。意味のない組み合わせが多い場合は、明示的にタプルリストで書く方が適切です。
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- 明示的なタプルリストとの比較 -->
                    <div class="my-6 p-4 bg-white border border-slate-200 rounded-xl">
                        <h3 class="text-sm font-semibold text-slate-600 mb-3">デコレータスタック vs 明示的なタプルリスト</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <p class="text-xs text-slate-500 mb-2 font-medium">デコレータスタック（全組み合わせ）</p>
                                <div class="code-block-wrapper">
                                    <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                                        <span class="text-slate-400 text-sm">すべての組み合わせを実行</span>
                                        <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                                onclick="copyCode(this)">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <pre class="!mt-0 !rounded-t-none"><code class="language-python">@pytest.mark.parametrize("op", ["+", "-"])
@pytest.mark.parametrize("a", [1, 2])
def test_op(a, op):
    # 4ケース実行される
    # a=1, op="+"
    # a=1, op="-"
    # a=2, op="+"
    # a=2, op="-"
    pass</code></pre>
                                </div>
                            </div>
                            <div>
                                <p class="text-xs text-slate-500 mb-2 font-medium">明示的なタプルリスト（意図した組み合わせのみ）</p>
                                <div class="code-block-wrapper">
                                    <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                                        <span class="text-slate-400 text-sm">必要なケースだけを指定</span>
                                        <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                                onclick="copyCode(this)">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <pre class="!mt-0 !rounded-t-none"><code class="language-python">@pytest.mark.parametrize("a, op, expected", [
    (1, "+", 1),    # 明示的なケースのみ
    (2, "-", -2),   # 意図した組み合わせ
])
def test_op_explicit(a, op, expected):
    # 2ケースだけ実行される
    pass</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 8.6 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.6 間接パラメータ化（indirect）
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        パラメータ化の値を直接テスト関数に渡すのではなく、フィクスチャを経由して加工してから渡したい場合は、<code class="bg-slate-100 px-1.5 py-0.5 rounded text-sm">indirect=True</code>を使います。
                    </p>

                    <div class="code-block-wrapper mb-4">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">test_indirect.py（indirectの例）</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                    onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import pytest

@pytest.fixture
def user_data(request):
    """パラメータを受け取り、ユーザー辞書を返すフィクスチャ"""
    role = request.param  # parametrize で渡された値
    return {
        "admin": {"name": "管理者", "level": 99},
        "guest": {"name": "ゲスト", "level": 1},
    }[role]

# indirect=True でフィクスチャ経由でパラメータを渡す
@pytest.mark.parametrize("user_data", ["admin", "guest"], indirect=True)
def test_user_level(user_data):
    assert user_data["level"] >= 1  # すべてのユーザーがlevel 1以上</code></pre>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-lightbulb text-blue-600 mt-1"></i>
                            <div>
                                <p class="text-blue-900 font-medium">間接パラメータ化の使いどころ</p>
                                <p class="text-blue-800 text-sm mt-1">
                                    データベース接続やファイル読み込みなど、パラメータを「セットアップしてから」使いたい場合に役立ちます。ただし、シンプルなケースでは直接渡す方がコードが読みやすいため、必要なときだけ使いましょう。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 8.7 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.7 パラメータ化テストのベストプラクティス
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        パラメータ化テストは強力ですが、適切に使わないとかえってテストが読みにくくなります。以下のベストプラクティスを意識しましょう。
                    </p>

                    <!-- ベストプラクティス一覧 -->
                    <div class="space-y-4 mb-6">
                        <!-- BP1 -->
                        <div class="bg-white border border-slate-200 rounded-xl p-5">
                            <div class="flex items-start gap-4">
                                <div class="flex-shrink-0 w-9 h-9 bg-emerald-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-check text-emerald-600"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-slate-800 mb-1">テストデータに意味のあるIDをつける</h3>
                                    <p class="text-sm text-slate-600 leading-relaxed">
                                        <code class="bg-slate-100 px-1 rounded">pytest.param(..., id="ゼロ除算")</code>のようにIDを付けると、失敗したときに「どのケースが落ちたか」がすぐわかります。特に数値だけのパラメータリストでは必須です。
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- BP2 -->
                        <div class="bg-white border border-slate-200 rounded-xl p-5">
                            <div class="flex items-start gap-4">
                                <div class="flex-shrink-0 w-9 h-9 bg-emerald-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-check text-emerald-600"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-slate-800 mb-1">正常系と異常系は別の関数にする</h3>
                                    <p class="text-sm text-slate-600 leading-relaxed">
                                        異なる検証方法（値の比較 vs 例外の確認）を1つのパラメータ化テストに混在させないようにします。別々の関数に分けることで、各テストの目的が明確になります。
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- BP3 -->
                        <div class="bg-white border border-slate-200 rounded-xl p-5">
                            <div class="flex items-start gap-4">
                                <div class="flex-shrink-0 w-9 h-9 bg-emerald-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-check text-emerald-600"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-slate-800 mb-1">テストデータをリストとして別途定義する</h3>
                                    <p class="text-sm text-slate-600 leading-relaxed mb-2">
                                        テストケースが多い場合は、データをデコレータの中に直接書かず、変数として外に出すと読みやすくなります。
                                    </p>
                                    <div class="code-block-wrapper">
                                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                                            <span class="text-slate-400 text-sm">テストデータを変数として分離</span>
                                            <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                                    onclick="copyCode(this)">
                                                <i class="fas fa-copy"></i>
                                            </button>
                                        </div>
                                        <pre class="!mt-0 !rounded-t-none"><code class="language-python"># テストデータを変数として定義（可読性向上）
GRADE_TEST_CASES = [
    pytest.param(100, "A", id="満点"),
    pytest.param(90, "A", id="A下限"),
    pytest.param(60, "B", id="B下限"),
    pytest.param(0, "C", id="最低点"),
]

@pytest.mark.parametrize("score, grade", GRADE_TEST_CASES)
def test_get_grade(score, grade):
    assert get_grade(score) == grade</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- BP4: アンチパターン -->
                        <div class="bg-red-50 border border-red-200 rounded-xl p-5">
                            <div class="flex items-start gap-4">
                                <div class="flex-shrink-0 w-9 h-9 bg-red-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-times text-red-600"></i>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-red-800 mb-1">アンチパターン：パラメータで複雑なロジックを実行しない</h3>
                                    <p class="text-sm text-red-700 leading-relaxed">
                                        パラメータ化テストはデータのバリエーションに使うものです。テスト関数の中で複雑な分岐ロジックが必要になってきたら、別々のテスト関数に分割することを検討してください。「パラメータ化テストがあるから1つにまとめる」という思考は逆効果になることがあります。
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 8.8 -->
                <section class="mb-10">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.8 フィクスチャとの組み合わせ
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        パラメータ化テストは、フィクスチャと組み合わせて使うことができます。フィクスチャは通常どおり引数として受け取れます。
                    </p>

                    <div class="code-block-wrapper mb-4">
                        <div class="flex items-center justify-between bg-slate-800 px-4 py-2 rounded-t-lg">
                            <span class="text-slate-400 text-sm">test_with_fixture.py（フィクスチャとの組み合わせ）</span>
                            <button class="copy-btn text-slate-400 hover:text-white transition-colors"
                                    onclick="copyCode(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <pre class="!mt-0 !rounded-t-none"><code class="language-python">import pytest

class Stack:
    """テスト対象のスタッククラス"""
    def __init__(self):
        self._items = []

    def push(self, item):
        self._items.append(item)

    def pop(self):
        if not self._items:
            raise IndexError("スタックが空です")
        return self._items.pop()

    def size(self):
        return len(self._items)

@pytest.fixture
def stack():
    """空のスタックを返すフィクスチャ"""
    return Stack()

# フィクスチャ(stack)とパラメータ化を同時に使用
@pytest.mark.parametrize("items, expected_size", [
    ([1], 1),
    ([1, 2, 3], 3),
    ([], 0),
])
def test_stack_size(stack, items, expected_size):
    for item in items:
        stack.push(item)
    assert stack.size() == expected_size</code></pre>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-4 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-lightbulb text-blue-600 mt-1"></i>
                            <div>
                                <p class="text-blue-900 font-medium">フィクスチャのスコープとパラメータ化</p>
                                <p class="text-blue-800 text-sm mt-1">
                                    フィクスチャのスコープが<code class="bg-blue-100 px-1 rounded">function</code>（デフォルト）の場合、パラメータ化された各テストケースごとにフィクスチャが新しく生成されます。これにより、テストケース間の状態が混入しません。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 実習カード -->
                <div class="bg-gradient-to-r from-purple-50 to-fuchsia-50 border border-purple-200
                            rounded-xl p-5 my-8 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-purple-500 rounded-lg
                                    flex items-center justify-center">
                            <i class="fas fa-pen text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="text-lg font-semibold text-purple-800 mb-3 break-words">
                                実習 8-1: 文字列バリデーション関数のパラメータ化テスト
                            </h3>
                            <p class="text-purple-900 mb-4 break-words">
                                以下の仕様を持つ文字列バリデーション関数に対して、パラメータ化テストを作成します。境界値と異常系を意識してテストケースを設計してください。
                            </p>

                            <h4 class="font-medium text-purple-800 mb-2">対象関数の仕様</h4>
                            <div class="bg-purple-100 rounded-lg p-4 mb-4">
                                <ul class="text-sm text-purple-900 space-y-1">
                                    <li>• 関数名: <code class="bg-purple-200 px-1 rounded">validate_username(name)</code></li>
                                    <li>• 3文字以上20文字以下の場合: <code class="bg-purple-200 px-1 rounded">True</code>を返す</li>
                                    <li>• 2文字以下または21文字以上の場合: <code class="bg-purple-200 px-1 rounded">False</code>を返す</li>
                                    <li>• 空文字列の場合: <code class="bg-purple-200 px-1 rounded">False</code>を返す</li>
                                </ul>
                            </div>

                            <h4 class="font-medium text-purple-800 mb-2">手順</h4>
                            <ol class="space-y-3 mb-4">
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full
                                                 flex items-center justify-center text-sm font-medium">1</span>
                                    <span class="flex-1 min-w-0 break-words"><code class="bg-purple-100 px-1 rounded">validate_username</code>関数を実装してください。</span>
                                </li>
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full
                                                 flex items-center justify-center text-sm font-medium">2</span>
                                    <span class="flex-1 min-w-0 break-words">境界値（文字数が2、3、20、21）を含む正常系テストを<code class="bg-purple-100 px-1 rounded">@pytest.mark.parametrize</code>で書いてください。</span>
                                </li>
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full
                                                 flex items-center justify-center text-sm font-medium">3</span>
                                    <span class="flex-1 min-w-0 break-words">各テストケースに<code class="bg-purple-100 px-1 rounded">pytest.param</code>で意味のあるIDをつけてください。</span>
                                </li>
                                <li class="flex items-start gap-3 text-purple-900">
                                    <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full
                                                 flex items-center justify-center text-sm font-medium">4</span>
                                    <span class="flex-1 min-w-0 break-words"><code class="bg-purple-100 px-1 rounded">pytest -v</code>を実行して、すべてのケースが通ることを確認してください。</span>
                                </li>
                            </ol>

                            <div class="bg-purple-100 rounded-lg p-4 mt-4">
                                <p class="text-sm text-purple-900 font-medium mb-2">
                                    <i class="fas fa-lightbulb text-purple-600 mr-2"></i>ヒント
                                </p>
                                <ul class="text-sm text-purple-800 space-y-1">
                                    <li>• 境界値: 2文字（NG）、3文字（OK）、20文字（OK）、21文字（NG）</li>
                                    <li>• 空文字列（0文字）も忘れずにテストしましょう</li>
                                    <li>• <code class="bg-purple-200 px-1 rounded">"a" * 20</code>のように繰り返し記法を使うと長い文字列を作れます</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 章まとめ -->
                <div class="bg-gradient-to-r from-slate-50 to-primary-50 border border-slate-200 rounded-xl p-6 my-8">
                    <h2 class="text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2">
                        <i class="fas fa-flag-checkered text-primary-500"></i>
                        第8章のまとめ
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <h3 class="text-sm font-semibold text-slate-700 mb-2">学んだこと</h3>
                            <ul class="space-y-2">
                                <li class="flex items-start gap-2 text-sm text-slate-600">
                                    <i class="fas fa-check-circle text-emerald-500 mt-0.5 flex-shrink-0"></i>
                                    <span><code class="bg-slate-100 px-1 rounded">@pytest.mark.parametrize</code>でテストロジックとデータを分離できる</span>
                                </li>
                                <li class="flex items-start gap-2 text-sm text-slate-600">
                                    <i class="fas fa-check-circle text-emerald-500 mt-0.5 flex-shrink-0"></i>
                                    <span>境界値テストをパラメータ化で網羅的かつ簡潔に書ける</span>
                                </li>
                                <li class="flex items-start gap-2 text-sm text-slate-600">
                                    <i class="fas fa-check-circle text-emerald-500 mt-0.5 flex-shrink-0"></i>
                                    <span><code class="bg-slate-100 px-1 rounded">pytest.param</code>でIDやマーカーを個別のケースに付与できる</span>
                                </li>
                                <li class="flex items-start gap-2 text-sm text-slate-600">
                                    <i class="fas fa-check-circle text-emerald-500 mt-0.5 flex-shrink-0"></i>
                                    <span>デコレータをスタックすると全組み合わせのテストが生成される</span>
                                </li>
                                <li class="flex items-start gap-2 text-sm text-slate-600">
                                    <i class="fas fa-check-circle text-emerald-500 mt-0.5 flex-shrink-0"></i>
                                    <span>正常系と異常系は別の関数に分けるのがベストプラクティス</span>
                                </li>
                            </ul>
                        </div>
                        <div>
                            <h3 class="text-sm font-semibold text-slate-700 mb-2">次章の予告</h3>
                            <div class="bg-white border border-primary-200 rounded-lg p-4">
                                <p class="text-sm text-slate-600 leading-relaxed">
                                    第9章では、<code class="bg-primary-100 text-primary-700 px-1 rounded">@pytest.mark</code>を使ったテストの分類と選択実行を学びます。大量のテストの中から特定のグループだけを実行する方法や、<code class="bg-primary-100 text-primary-700 px-1 rounded">skip</code>/<code class="bg-primary-100 text-primary-700 px-1 rounded">xfail</code>による条件付き実行をマスターします。
                                </p>
                                <p class="text-xs text-primary-600 mt-2">
                                    <i class="fas fa-arrow-right mr-1"></i>第9章: マーカーとテストの選択実行
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 理解度確認クイズ -->
                <div class="bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200
                            rounded-xl p-5 my-8 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-blue-500 rounded-lg
                                    flex items-center justify-center">
                            <i class="fas fa-question text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="text-lg font-semibold text-blue-800 mb-4 break-words">理解度確認クイズ</h3>
                            <ol class="space-y-6">
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q1. <code class="bg-blue-100 px-1 rounded">@pytest.mark.parametrize("x, y", [(1, 2), (3, 4)])</code>を書いた場合、何個のテストケースが実行されますか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3 break-words">
                                            <strong>2個</strong>のテストケースが実行されます。リストの要素数（タプルの数）がテストケースの数になります。<code class="bg-blue-200 px-1 rounded">(1, 2)</code>で1回、<code class="bg-blue-200 px-1 rounded">(3, 4)</code>で1回実行されます。
                                        </p>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q2. <code class="bg-blue-100 px-1 rounded">@pytest.mark.parametrize("a", [1, 2])</code>と<code class="bg-blue-100 px-1 rounded">@pytest.mark.parametrize("b", [10, 20, 30])</code>の2つをスタックした場合、何個のテストケースが実行されますか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3 break-words">
                                            <strong>6個</strong>（2 × 3 = 6）のテストケースが実行されます。デコレータをスタックすると、すべての組み合わせ（直積）でテストが実行されます。
                                        </p>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q3. <code class="bg-blue-100 px-1 rounded">pytest.param(1, 2, id="テストID")</code>の<code class="bg-blue-100 px-1 rounded">id</code>引数は何のために使いますか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3 break-words">
                                            テスト実行時の<strong>テストケース名（ID）をカスタマイズ</strong>するために使います。デフォルトでは引数の値がハイフンで連結されたIDが自動生成されますが、<code class="bg-blue-200 px-1 rounded">id</code>を指定することで意味のある名前をつけられ、テスト失敗時にどのケースが落ちたかをすぐ把握できます。
                                        </p>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2 break-words">Q4. 正常系（期待値と一致することの確認）と異常系（例外が発生することの確認）を1つのパラメータ化テスト関数に混在させることは推奨されますか？その理由も答えてください。</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700 break-words">
                                            回答を表示
                                        </summary>
                                        <p class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3 break-words">
                                            <strong>推奨されません。</strong>正常系と異常系では検証方法が異なります（値の比較 vs <code class="bg-blue-200 px-1 rounded">pytest.raises</code>）。混在させると関数内で条件分岐が必要になりコードが複雑になります。また、テストの目的が不明確になり、失敗した際に原因の特定が難しくなります。別々の関数に分けることで、それぞれのテストの意図が明確になります。
                                        </p>
                                    </details>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>

                <!-- 章間ナビゲーション -->
                <nav class="flex items-center justify-between pt-6 mt-6 border-t border-slate-200">
                    <a href="pytest-learning-material-07.html"
                       class="group flex items-center gap-3 px-4 py-3 rounded-xl
                              bg-slate-100 hover:bg-slate-200 transition-colors">
                        <i class="fas fa-arrow-left text-slate-400 group-hover:text-slate-600 transition-transform group-hover:-translate-x-1"></i>
                        <div>
                            <span class="text-xs text-slate-500 block">前の章</span>
                            <span class="text-slate-700 font-medium">フィクスチャ応用 - 再利用とパラメータ化</span>
                        </div>
                    </a>
                    <a href="pytest-learning-material-09.html"
                       class="group flex items-center gap-3 px-4 py-3 rounded-xl
                              bg-primary-500 hover:bg-primary-600 text-white transition-colors">
                        <div class="text-right">
                            <span class="text-xs text-primary-100 block">次の章</span>
                            <span class="font-medium">マーカーとテストの選択実行</span>
                        </div>
                        <i class="fas fa-arrow-right transition-transform group-hover:translate-x-1"></i>
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <!-- フッター -->
    <footer class="bg-slate-800 text-slate-300">
        <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <p class="text-sm text-center md:text-left">
                    &copy; 2026 F-Circle. All rights reserved.<br>
                    本資料はAIツールを活用し、人間による編集・監修のもと作成されています。
                </p>
                <div class="flex items-center gap-4">
                    <a href="https://github.com/fcircle-biz/tech_docs" class="hover:text-white transition-colors">
                        <i class="fab fa-github text-xl"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- スクロールトップボタン -->
    <button id="scroll-top-btn"
            class="fixed bottom-6 right-6 w-12 h-12 bg-primary-500 text-white rounded-full
                   shadow-lg hover:bg-primary-600 transition-all duration-300
                   opacity-0 invisible translate-y-4"
            onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- サイドバー生成 -->
    <script src="sidebar-content.js"></script>

    <!-- 共通JavaScript -->
    <script src="main.js"></script>

    <!-- 描画ツール -->
    <script src="drawing-tool.js"></script>
</body>
</html>
