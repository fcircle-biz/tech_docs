<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java学習教材 第4章 - オブジェクト指向プログラミング応用</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <style>
        /* ベースレイアウト */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        /* ナビゲーション */
        .navbar {
            background-color: #f57c00;
        }

        /* サイドバー */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }

        /* タイトル */
        .chapter-title {
            color: #f57c00;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #f57c00;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #ff9800;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        /* コンテンツボックス */
        .quiz-container {
            background-color: #fff3e0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #f57c00;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        /* コードハイライト */
        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        /* ナビゲーション */
        .nav-link.active {
            background-color: #f57c00 !important;
            color: white !important;
        }

        .info-box {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Java学習教材</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../README.md">学習ガイド</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-1.html">第1章: Java基礎</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-2.html">第2章: Java言語の基本</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-3.html">第3章: オブジェクト指向入門</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="java-learning-material-4.html">第4章: オブジェクト指向応用</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-5.html">第5章: Java API基礎</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-6.html">第6章: 例外処理</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-7.html">第7章: 入出力操作</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-8.html">第8章: コレクション応用</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- 章ヘッダー -->
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第4章: オブジェクト指向プログラミング応用</h1>
                </div>

                <div id="chapter4">
                    <!-- 章タイトル -->
                    <h2 class="chapter-title">継承、ポリモーフィズム、抽象化の理解</h2>
                    
                    <!-- 学習目標（必須） -->
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>継承の概念と実装方法</li>
                            <li>メソッドのオーバーライドとsuper キーワード</li>
                            <li>ポリモーフィズムの活用方法</li>
                            <li>抽象クラスと抽象メソッド</li>
                            <li>インターフェースの定義と実装</li>
                            <li>パッケージによるクラス整理</li>
                        </ul>
                    </div>

                    <!-- セクション1: 継承 -->
                    <h3 class="section-title">4.1 継承（Inheritance）</h3>
                    <p>継承は既存のクラス（親クラス）の機能を引き継いで新しいクラス（子クラス）を作成する仕組みです。コードの再利用性が向上し、階層的なクラス設計が可能になります。</p>

                    <div class="mermaid">
                        classDiagram
                            class Animal {
                                +String name
                                +int age
                                +eat()
                                +sleep()
                            }
                            
                            class Dog {
                                +String breed
                                +bark()
                                +wagTail()
                            }
                            
                            class Cat {
                                +String furColor
                                +meow()
                                +purr()
                            }
                            
                            Animal <|-- Dog
                            Animal <|-- Cat
                    </div>

                    <div class="exercise-container">
                        <h5>実習 4-1: 継承の実装</h5>
                        <p>動物の階層構造を継承を使って実装してみましょう。</p>
                        <h6>Animal.java（親クラス）</h6>
                        <pre class="code-block"><code class="language-java">public class Animal {
    protected String name;
    protected int age;
    protected String species;
    
    public Animal(String name, int age, String species) {
        this.name = name;
        this.age = age;
        this.species = species;
    }
    
    public void eat() {
        System.out.println(name + "が食事をしています");
    }
    
    public void sleep() {
        System.out.println(name + "が眠っています");
    }
    
    public void showInfo() {
        System.out.println("名前: " + name + ", 年齢: " + age + ", 種類: " + species);
    }
}</code></pre>
                        <h6>Dog.java（子クラス）</h6>
                        <pre class="code-block"><code class="language-java">public class Dog extends Animal {
    private String breed;
    
    public Dog(String name, int age, String breed) {
        super(name, age, "犬");  // 親クラスのコンストラクタ呼び出し
        this.breed = breed;
    }
    
    public void bark() {
        System.out.println(name + "が「ワンワン！」と吠えています");
    }
    
    public void wagTail() {
        System.out.println(name + "が尻尾を振っています");
    }
    
    // メソッドオーバーライド
    @Override
    public void showInfo() {
        super.showInfo();  // 親クラスのメソッド呼び出し
        System.out.println("犬種: " + breed);
    }
}</code></pre>
                        <h6>InheritanceTest.java（テストクラス）</h6>
                        <pre class="code-block"><code class="language-java">public class InheritanceTest {
    public static void main(String[] args) {
        // 親クラスのインスタンス
        Animal animal = new Animal("動物A", 3, "不明");
        animal.showInfo();
        animal.eat();
        animal.sleep();
        
        System.out.println();
        
        // 子クラスのインスタンス
        Dog dog = new Dog("ポチ", 2, "柴犬");
        dog.showInfo();  // オーバーライドされたメソッド
        dog.eat();       // 継承されたメソッド
        dog.bark();      // 子クラス独自のメソッド
        dog.wagTail();
    }
}</code></pre>
                    </div>

                    <!-- セクション2: ポリモーフィズム -->
                    <h3 class="section-title">4.2 ポリモーフィズム（多態性）</h3>
                    <p>ポリモーフィズムにより、同じメソッド呼び出しでも、オブジェクトの実際の型に応じて異なる処理を実行できます。</p>

                    <div class="exercise-container">
                        <h5>実習 4-2: ポリモーフィズムの活用</h5>
                        <p>図形クラスでポリモーフィズムを実装してみましょう。</p>
                        <h6>Shape.java（抽象親クラス）</h6>
                        <pre class="code-block"><code class="language-java">public abstract class Shape {
    protected String color;
    
    public Shape(String color) {
        this.color = color;
    }
    
    // 抽象メソッド（子クラスで必ず実装）
    public abstract double calculateArea();
    public abstract void draw();
    
    // 具象メソッド
    public void displayInfo() {
        System.out.println("色: " + color + ", 面積: " + calculateArea());
    }
}</code></pre>
                        <h6>Circle.java</h6>
                        <pre class="code-block"><code class="language-java">public class Circle extends Shape {
    private double radius;
    
    public Circle(String color, double radius) {
        super(color);
        this.radius = radius;
    }
    
    @Override
    public double calculateArea() {
        return Math.PI * radius * radius;
    }
    
    @Override
    public void draw() {
        System.out.println("半径" + radius + "の" + color + "い円を描いています");
    }
}</code></pre>
                        <h6>Rectangle.java</h6>
                        <pre class="code-block"><code class="language-java">public class Rectangle extends Shape {
    private double width;
    private double height;
    
    public Rectangle(String color, double width, double height) {
        super(color);
        this.width = width;
        this.height = height;
    }
    
    @Override
    public double calculateArea() {
        return width * height;
    }
    
    @Override
    public void draw() {
        System.out.println(width + "×" + height + "の" + color + "い長方形を描いています");
    }
}</code></pre>
                        <h6>PolymorphismTest.java</h6>
                        <pre class="code-block"><code class="language-java">public class PolymorphismTest {
    public static void main(String[] args) {
        // ポリモーフィズムの配列
        Shape[] shapes = {
            new Circle("赤", 5.0),
            new Rectangle("青", 4.0, 6.0),
            new Circle("緑", 3.0)
        };
        
        System.out.println("=== 全図形の情報表示 ===");
        for (Shape shape : shapes) {
            shape.draw();        // 実際の型に応じたメソッドが実行される
            shape.displayInfo();
            System.out.println();
        }
        
        // 面積の合計計算
        double totalArea = 0;
        for (Shape shape : shapes) {
            totalArea += shape.calculateArea();
        }
        System.out.println("全図形の面積合計: " + String.format("%.2f", totalArea));
    }
}</code></pre>
                    </div>

                    <!-- セクション3: インターフェース -->
                    <h3 class="section-title">4.3 インターフェース</h3>
                    <p>インターフェースは、クラスが実装すべきメソッドの「契約」を定義します。複数のインターフェースを実装でき、多重継承のような効果を得られます。</p>

                    <div class="exercise-container">
                        <h5>実習 4-3: インターフェースの実装</h5>
                        <p>電子機器のインターフェースを実装してみましょう。</p>
                        <h6>Chargeable.java（インターフェース）</h6>
                        <pre class="code-block"><code class="language-java">public interface Chargeable {
    void charge();
    int getBatteryLevel();
    boolean isFullyCharged();
}</code></pre>
                        <h6>Connectable.java（インターフェース）</h6>
                        <pre class="code-block"><code class="language-java">public interface Connectable {
    void connect(String network);
    void disconnect();
    boolean isConnected();
}</code></pre>
                        <h6>Smartphone.java（実装クラス）</h6>
                        <pre class="code-block"><code class="language-java">public class Smartphone implements Chargeable, Connectable {
    private String model;
    private int batteryLevel;
    private boolean connected;
    private String currentNetwork;
    
    public Smartphone(String model) {
        this.model = model;
        this.batteryLevel = 50;
        this.connected = false;
    }
    
    // Chargeableインターフェースの実装
    @Override
    public void charge() {
        if (batteryLevel < 100) {
            batteryLevel = Math.min(100, batteryLevel + 20);
            System.out.println(model + "を充電中... バッテリー: " + batteryLevel + "%");
        } else {
            System.out.println(model + "は既にフル充電です");
        }
    }
    
    @Override
    public int getBatteryLevel() {
        return batteryLevel;
    }
    
    @Override
    public boolean isFullyCharged() {
        return batteryLevel >= 100;
    }
    
    // Connectableインターフェースの実装
    @Override
    public void connect(String network) {
        if (!connected) {
            this.currentNetwork = network;
            this.connected = true;
            System.out.println(model + "が" + network + "に接続しました");
        } else {
            System.out.println(model + "は既に" + currentNetwork + "に接続済みです");
        }
    }
    
    @Override
    public void disconnect() {
        if (connected) {
            System.out.println(model + "が" + currentNetwork + "から切断しました");
            this.connected = false;
            this.currentNetwork = null;
        } else {
            System.out.println(model + "はどのネットワークにも接続していません");
        }
    }
    
    @Override
    public boolean isConnected() {
        return connected;
    }
    
    public void displayStatus() {
        System.out.println("=== " + model + " ステータス ===");
        System.out.println("バッテリー: " + batteryLevel + "%");
        System.out.println("ネットワーク: " + (connected ? currentNetwork : "未接続"));
    }
}</code></pre>
                        <h6>InterfaceTest.java</h6>
                        <pre class="code-block"><code class="language-java">public class InterfaceTest {
    public static void main(String[] args) {
        Smartphone phone = new Smartphone("iPhone 14");
        phone.displayStatus();
        
        System.out.println();
        
        // 充電テスト
        phone.charge();
        phone.charge();
        phone.charge();
        
        // ネットワーク接続テスト
        phone.connect("Wi-Fi Home");
        phone.connect("5G Network"); // 既に接続済み
        
        phone.displayStatus();
        
        // インターフェース型での参照
        Chargeable chargeableDevice = phone;
        System.out.println("充電レベル: " + chargeableDevice.getBatteryLevel() + "%");
        
        Connectable connectableDevice = phone;
        connectableDevice.disconnect();
    }
}</code></pre>
                    </div>

                    <!-- セクション4: パッケージ -->
                    <h3 class="section-title">4.4 パッケージによるクラス整理</h3>
                    <p>パッケージは関連するクラスをグループ化し、名前空間を提供する仕組みです。</p>

                    <div class="info-box">
                        <h6>パッケージの利点</h6>
                        <ul>
                            <li><strong>名前空間の提供：</strong>同名クラスの衝突を防ぐ</li>
                            <li><strong>アクセス制御：</strong>パッケージレベルでの可視性制御</li>
                            <li><strong>論理的整理：</strong>関連クラスのグループ化</li>
                            <li><strong>配布の便宜：</strong>JAR ファイル作成時の整理</li>
                        </ul>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 4-4: パッケージの作成</h5>
                        <p>図書館管理システムのパッケージ構造を作成してみましょう。</p>
                        <h6>ディレクトリ構造</h6>
                        <pre class="code-block"><code class="language-bash">library/
├── model/
│   ├── Book.java
│   └── Member.java
├── service/
│   └── LibraryService.java
└── Main.java</code></pre>
                        <h6>library/model/Book.java</h6>
                        <pre class="code-block"><code class="language-java">package library.model;

public class Book {
    private String title;
    private String author;
    private String isbn;
    private boolean isAvailable;
    
    public Book(String title, String author, String isbn) {
        this.title = title;
        this.author = author;
        this.isbn = isbn;
        this.isAvailable = true;
    }
    
    // ゲッター・セッター
    public String getTitle() { return title; }
    public String getAuthor() { return author; }
    public String getIsbn() { return isbn; }
    public boolean isAvailable() { return isAvailable; }
    public void setAvailable(boolean available) { this.isAvailable = available; }
    
    @Override
    public String toString() {
        return "「" + title + "」 著者: " + author + " (" + isbn + ")";
    }
}</code></pre>
                    </div>

                    <!-- 理解度確認（必須） -->
                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>継承を使う主なメリットを3つ挙げてください。</li>
                            <li>メソッドオーバーライドと@Overrideアノテーションの役割を説明してください。</li>
                            <li>抽象クラスと具象クラスの違いを説明してください。</li>
                            <li>インターフェースと抽象クラスの違いを3点挙げてください。</li>
                            <li>ポリモーフィズムが有効に活用される場面を2つ説明してください。</li>
                            <li>パッケージを使用するメリットを4つ答えてください。</li>
                        </ol>
                    </div>

                    <!-- 章間ナビゲーション（必須） -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="java-learning-material-3.html" class="btn btn-secondary">← 前の章 オブジェクト指向入門</a>
                        <a href="java-learning-material-5.html" class="btn btn-primary">次の章 → Java API基礎</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
    
    <!-- Mermaid.js 初期化 -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>