<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java学習教材 第3章 - オブジェクト指向プログラミング入門</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <style>
        /* ベースレイアウト */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        /* ナビゲーション */
        .navbar {
            background-color: #f57c00;
        }

        /* サイドバー */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }

        /* タイトル */
        .chapter-title {
            color: #f57c00;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #f57c00;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #ff9800;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        /* コンテンツボックス */
        .quiz-container {
            background-color: #fff3e0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #f57c00;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        /* コードハイライト */
        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        /* ナビゲーション */
        .nav-link.active {
            background-color: #f57c00 !important;
            color: white !important;
        }

        .info-box {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Java学習教材</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../README.md">学習ガイド</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-1.html">第1章: Java基礎</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-2.html">第2章: Java言語の基本</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="java-learning-material-3.html">第3章: オブジェクト指向入門</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-4.html">第4章: オブジェクト指向応用</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-5.html">第5章: Java API基礎</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-6.html">第6章: 例外処理</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-7.html">第7章: 入出力操作</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-8.html">第8章: コレクション応用</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- 章ヘッダー -->
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第3章: オブジェクト指向プログラミング入門</h1>
                </div>

                <div id="chapter3">
                    <!-- 章タイトル -->
                    <h2 class="chapter-title">クラスとオブジェクトの世界へ</h2>
                    
                    <!-- 学習目標（必須） -->
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>オブジェクト指向プログラミングの基本概念</li>
                            <li>クラスの定義方法とオブジェクトの生成</li>
                            <li>フィールド（属性）とメソッド（動作）の定義</li>
                            <li>コンストラクタの役割と使用方法</li>
                            <li>アクセス修飾子による情報隠蔽</li>
                            <li>カプセル化の重要性と実装</li>
                        </ul>
                    </div>

                    <!-- セクション1: オブジェクト指向の概念 -->
                    <h3 class="section-title">3.1 オブジェクト指向プログラミングとは</h3>
                    <p>オブジェクト指向プログラミング（OOP）は、現実世界の「物」をプログラム上で表現する考え方です。データ（属性）と処理（動作）を一つにまとめて管理することで、保守性と再利用性の高いプログラムを作成できます。</p>

                    <div class="info-box">
                        <h6>オブジェクト指向の4つの特徴</h6>
                        <ul>
                            <li><strong>カプセル化：</strong>データと処理をまとめ、外部からの不正なアクセスを防ぐ</li>
                            <li><strong>継承：</strong>既存のクラスの性質を引き継いで新しいクラスを作成</li>
                            <li><strong>ポリモーフィズム：</strong>同じメソッド名で異なる処理を実行</li>
                            <li><strong>抽象化：</strong>複雑な処理を単純なインターフェースで提供</li>
                        </ul>
                    </div>

                    <div class="mermaid">
                        classDiagram
                            class 車 {
                                -色: String
                                -速度: int
                                -エンジン: boolean
                                +加速()
                                +減速()
                                +エンジン開始()
                                +エンジン停止()
                            }
                            
                            class 実際の車1 {
                                色: "赤"
                                速度: 60
                                エンジン: true
                            }
                            
                            class 実際の車2 {
                                色: "青"
                                速度: 0
                                エンジン: false
                            }
                            
                            車 --|> 実際の車1
                            車 --|> 実際の車2
                    </div>

                    <!-- セクション2: クラスの定義 -->
                    <h3 class="section-title">3.2 クラスの定義とオブジェクトの生成</h3>
                    <p>クラスは「設計図」であり、オブジェクトはその設計図から作られた「実体」です。</p>

                    <div class="exercise-container">
                        <h5>実習 3-1: 最初のクラス作成</h5>
                        <p>学生を表すStudentクラスを作成してみましょう。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>Student.java ファイルを作成</li>
                            <li>以下のコードを入力</li>
                            <li>StudentTest.java ファイルを作成してテスト</li>
                        </ol>
                        <h6>Student.javaのコード</h6>
                        <pre class="code-block"><code class="language-java">public class Student {
    // フィールド（属性）の定義
    String name;        // 名前
    int age;           // 年齢
    String major;      // 専攻
    double gpa;        // 成績平均点
    
    // メソッド（動作）の定義
    public void introduce() {
        System.out.println("名前: " + name);
        System.out.println("年齢: " + age + "歳");
        System.out.println("専攻: " + major);
        System.out.println("GPA: " + gpa);
    }
    
    public void study(String subject) {
        System.out.println(name + "さんは" + subject + "を勉強しています。");
    }
    
    public boolean isGoodGrade() {
        return gpa >= 3.0;
    }
}</code></pre>
                        <h6>StudentTest.javaのコード</h6>
                        <pre class="code-block"><code class="language-java">public class StudentTest {
    public static void main(String[] args) {
        // オブジェクトの生成
        Student student1 = new Student();
        
        // フィールドに値を設定
        student1.name = "田中太郎";
        student1.age = 20;
        student1.major = "情報工学";
        student1.gpa = 3.5;
        
        // メソッドの呼び出し
        student1.introduce();
        student1.study("Java");
        
        if (student1.isGoodGrade()) {
            System.out.println("優秀な学生です！");
        }
        
        System.out.println();
        
        // 2つ目のオブジェクト
        Student student2 = new Student();
        student2.name = "佐藤花子";
        student2.age = 19;
        student2.major = "経済学";
        student2.gpa = 2.8;
        
        student2.introduce();
        System.out.println("成績判定: " + (student2.isGoodGrade() ? "良好" : "要努力"));
    }
}</code></pre>
                    </div>

                    <!-- セクション3: コンストラクタ -->
                    <h3 class="section-title">3.3 コンストラクタ</h3>
                    <p>コンストラクタは、オブジェクトが生成されるときに自動的に呼び出される特別なメソッドです。オブジェクトの初期化に使用されます。</p>

                    <div class="exercise-container">
                        <h5>実習 3-2: コンストラクタの実装</h5>
                        <p>Carクラスにコンストラクタを追加してみましょう。</p>
                        <h6>Car.javaのコード</h6>
                        <pre class="code-block"><code class="language-java">public class Car {
    // フィールド
    String brand;      // ブランド
    String model;      // 型式
    String color;      // 色
    int year;          // 年式
    boolean isRunning; // エンジンの状態
    
    // デフォルトコンストラクタ
    public Car() {
        brand = "不明";
        model = "不明";
        color = "白";
        year = 2023;
        isRunning = false;
        System.out.println("車オブジェクトが作成されました（デフォルト値）");
    }
    
    // パラメータ付きコンストラクタ
    public Car(String brand, String model, String color, int year) {
        this.brand = brand;
        this.model = model;
        this.color = color;
        this.year = year;
        this.isRunning = false;
        System.out.println(brand + " " + model + "が作成されました");
    }
    
    // メソッド
    public void startEngine() {
        if (!isRunning) {
            isRunning = true;
            System.out.println(brand + " " + model + "のエンジンを始動しました");
        } else {
            System.out.println("エンジンはすでに動いています");
        }
    }
    
    public void stopEngine() {
        if (isRunning) {
            isRunning = false;
            System.out.println(brand + " " + model + "のエンジンを停止しました");
        } else {
            System.out.println("エンジンはすでに停止しています");
        }
    }
    
    public void displayInfo() {
        System.out.println("=== 車両情報 ===");
        System.out.println("ブランド: " + brand);
        System.out.println("型式: " + model);
        System.out.println("色: " + color);
        System.out.println("年式: " + year);
        System.out.println("エンジン状態: " + (isRunning ? "稼働中" : "停止中"));
    }
}</code></pre>
                        <h6>CarTest.javaのコード</h6>
                        <pre class="code-block"><code class="language-java">public class CarTest {
    public static void main(String[] args) {
        // デフォルトコンストラクタでオブジェクト生成
        Car car1 = new Car();
        car1.displayInfo();
        
        System.out.println();
        
        // パラメータ付きコンストラクタでオブジェクト生成
        Car car2 = new Car("Toyota", "Prius", "青", 2022);
        car2.displayInfo();
        
        // メソッドの呼び出し
        car2.startEngine();
        car2.startEngine(); // 2回目の呼び出し
        car2.stopEngine();
    }
}</code></pre>
                    </div>

                    <!-- セクション4: アクセス修飾子 -->
                    <h3 class="section-title">3.4 アクセス修飾子</h3>
                    <p>アクセス修飾子は、クラスのメンバー（フィールドやメソッド）に対するアクセス範囲を制御します。</p>

                    <div class="info-box">
                        <h6>アクセス修飾子の種類</h6>
                        <ul>
                            <li><strong>public：</strong>どこからでもアクセス可能</li>
                            <li><strong>protected：</strong>同じパッケージまたは継承関係のクラスからアクセス可能</li>
                            <li><strong>（修飾子なし）：</strong>同じパッケージ内からのみアクセス可能</li>
                            <li><strong>private：</strong>同じクラス内からのみアクセス可能</li>
                        </ul>
                    </div>

                    <!-- セクション5: カプセル化 -->
                    <h3 class="section-title">3.5 カプセル化の実装</h3>
                    <p>カプセル化により、フィールドを外部から直接アクセスできないようにし、ゲッターとセッターメソッドを通じて制御されたアクセスを提供します。</p>

                    <div class="exercise-container">
                        <h5>実習 3-3: カプセル化の実装</h5>
                        <p>銀行口座を表すBankAccountクラスを作成し、カプセル化を実装してみましょう。</p>
                        <h6>BankAccount.javaのコード</h6>
                        <pre class="code-block"><code class="language-java">public class BankAccount {
    // privateフィールド（外部から直接アクセス不可）
    private String accountNumber;
    private String accountHolder;
    private double balance;
    private static int accountCounter = 1000; // アカウント番号生成用
    
    // コンストラクタ
    public BankAccount(String accountHolder, double initialDeposit) {
        this.accountNumber = "ACC" + accountCounter++;
        this.accountHolder = accountHolder;
        this.balance = initialDeposit >= 0 ? initialDeposit : 0;
    }
    
    // ゲッターメソッド（フィールドの値を取得）
    public String getAccountNumber() {
        return accountNumber;
    }
    
    public String getAccountHolder() {
        return accountHolder;
    }
    
    public double getBalance() {
        return balance;
    }
    
    // セッターメソッド（フィールドの値を設定）
    public void setAccountHolder(String accountHolder) {
        if (accountHolder != null && !accountHolder.trim().isEmpty()) {
            this.accountHolder = accountHolder;
        }
    }
    
    // 預金メソッド
    public boolean deposit(double amount) {
        if (amount > 0) {
            balance += amount;
            System.out.println(amount + "円を預金しました。残高: " + balance + "円");
            return true;
        } else {
            System.out.println("預金額は0より大きい値を指定してください。");
            return false;
        }
    }
    
    // 引き出しメソッド
    public boolean withdraw(double amount) {
        if (amount > 0 && amount <= balance) {
            balance -= amount;
            System.out.println(amount + "円を引き出しました。残高: " + balance + "円");
            return true;
        } else if (amount > balance) {
            System.out.println("残高不足です。現在の残高: " + balance + "円");
            return false;
        } else {
            System.out.println("引き出し額は0より大きい値を指定してください。");
            return false;
        }
    }
    
    // 口座情報表示
    public void displayAccountInfo() {
        System.out.println("=== 口座情報 ===");
        System.out.println("口座番号: " + accountNumber);
        System.out.println("口座名義: " + accountHolder);
        System.out.println("残高: " + balance + "円");
    }
}</code></pre>
                        <h6>BankAccountTest.javaのコード</h6>
                        <pre class="code-block"><code class="language-java">public class BankAccountTest {
    public static void main(String[] args) {
        // 銀行口座を作成
        BankAccount account1 = new BankAccount("田中太郎", 10000);
        account1.displayAccountInfo();
        
        System.out.println();
        
        // 取引のテスト
        account1.deposit(5000);    // 預金
        account1.withdraw(3000);   // 引き出し
        account1.withdraw(15000);  // 残高不足のテスト
        account1.withdraw(-1000);  // 不正な金額のテスト
        
        System.out.println();
        
        // ゲッターメソッドの使用
        System.out.println("口座番号: " + account1.getAccountNumber());
        System.out.println("現在残高: " + account1.getBalance() + "円");
        
        // セッターメソッドの使用
        account1.setAccountHolder("田中次郎");
        account1.displayAccountInfo();
        
        // 別の口座を作成
        System.out.println();
        BankAccount account2 = new BankAccount("佐藤花子", 20000);
        account2.displayAccountInfo();
    }
}</code></pre>
                    </div>

                    <div class="warning">
                        <h6>重要：カプセル化のメリット</h6>
                        <p>フィールドをprivateにすることで：</p>
                        <ul>
                            <li>不正な値の設定を防ぐ（例：残高にマイナス値を直接設定）</li>
                            <li>データの整合性を保つ</li>
                            <li>将来的な仕様変更に対応しやすくする</li>
                            <li>デバッグやメンテナンスが容易になる</li>
                        </ul>
                    </div>

                    <!-- セクション6: thisキーワード -->
                    <h3 class="section-title">3.6 thisキーワード</h3>
                    <p>thisキーワードは、現在のオブジェクト自身を参照するために使用されます。</p>

                    <div class="exercise-container">
                        <h5>実習 3-4: thisキーワードの活用</h5>
                        <p>thisキーワードの様々な用法を学びましょう。</p>
                        <h6>Person.javaのコード</h6>
                        <pre class="code-block"><code class="language-java">public class Person {
    private String name;
    private int age;
    private String email;
    
    // コンストラクタでthisを使用してフィールドを初期化
    public Person(String name, int age, String email) {
        this.name = name;    // this.nameはフィールド、nameはパラメータ
        this.age = age;
        this.email = email;
    }
    
    // thisを使って別のコンストラクタを呼び出し
    public Person(String name, int age) {
        this(name, age, "未設定");  // 3つ目のパラメータに初期値を設定
    }
    
    // thisを使って現在のオブジェクトを返す
    public Person setName(String name) {
        this.name = name;
        return this;  // メソッドチェーンを可能にする
    }
    
    public Person setAge(int age) {
        this.age = age;
        return this;
    }
    
    public Person setEmail(String email) {
        this.email = email;
        return this;
    }
    
    // 自分自身を引数として渡す
    public void compareAge(Person other) {
        if (this.age > other.age) {
            System.out.println(this.name + "の方が" + other.name + "より年上です");
        } else if (this.age < other.age) {
            System.out.println(other.name + "の方が" + this.name + "より年上です");
        } else {
            System.out.println(this.name + "と" + other.name + "は同い年です");
        }
    }
    
    public void displayInfo() {
        System.out.println("名前: " + name + ", 年齢: " + age + ", メール: " + email);
    }
}</code></pre>
                        <h6>PersonTest.javaのコード</h6>
                        <pre class="code-block"><code class="language-java">public class PersonTest {
    public static void main(String[] args) {
        // 異なるコンストラクタの使用
        Person person1 = new Person("田中太郎", 25, "tanaka@example.com");
        Person person2 = new Person("佐藤花子", 30); // emailは"未設定"になる
        
        person1.displayInfo();
        person2.displayInfo();
        
        System.out.println();
        
        // メソッドチェーンの使用
        Person person3 = new Person("山田次郎", 20)
                            .setEmail("yamada@example.com")
                            .setAge(22);
        person3.displayInfo();
        
        System.out.println();
        
        // 年齢比較
        person1.compareAge(person2);
        person2.compareAge(person3);
    }
}</code></pre>
                    </div>

                    <!-- 理解度確認（必須） -->
                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>オブジェクト指向プログラミングの4つの特徴を挙げてください。</li>
                            <li>クラスとオブジェクトの違いを説明してください。</li>
                            <li>コンストラクタの役割と特徴を3つ答えてください。</li>
                            <li>4つのアクセス修飾子とそれぞれのアクセス範囲を説明してください。</li>
                            <li>カプセル化を実装するメリットを3つ挙げてください。</li>
                            <li>thisキーワードの用途を3つ説明してください。</li>
                        </ol>
                    </div>

                    <!-- 章間ナビゲーション（必須） -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="java-learning-material-2.html" class="btn btn-secondary">← 前の章 Java言語の基本</a>
                        <a href="java-learning-material-4.html" class="btn btn-primary">次の章 → オブジェクト指向応用</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
    
    <!-- Mermaid.js 初期化 -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>