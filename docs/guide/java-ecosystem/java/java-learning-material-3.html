<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Java学習教材 第3章 - オブジェクト指向プログラミング入門</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        .navbar {
            background-color: #f57c00;
        }

        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }

        .chapter-title {
            color: #f57c00;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #f57c00;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #ff9800;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        .quiz-container {
            background-color: #fff3e0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #f57c00;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .nav-link.active {
            background-color: #f57c00 !important;
            color: white !important;
        }

        .concept-card {
            background-color: #f8f9fa;
            border-left: 4px solid #6c757d;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand">
                <strong>Java学習教材</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-1.html">第1章: Java基礎</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-2.html">第2章: Java言語の基本</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="java-learning-material-3.html">第3章: オブジェクト指向プログラミング入門</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-4.html">第4章: オブジェクト指向プログラミング応用</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-5.html">第5章: Java API基礎</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-6.html">第6章: 例外処理</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-7.html">第7章: 入出力操作</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="java-learning-material-8.html">第8章: コレクションフレームワーク応用</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第3章: オブジェクト指向プログラミング入門</h1>
                </div>

                <div id="chapter3">
                    <h2 class="chapter-title">現実世界をプログラムで表現する</h2>

                    <!-- 学習目標 -->
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>オブジェクト指向プログラミングの基本概念を理解する</li>
                            <li>クラスとオブジェクトの関係を把握する</li>
                            <li>フィールド（属性）とメソッド（操作）の定義方法を学ぶ</li>
                            <li>コンストラクタの役割と使用法をマスターする</li>
                            <li>アクセス修飾子によるカプセル化を実践する</li>
                            <li>実際のクラス設計とオブジェクト生成を体験する</li>
                        </ul>
                    </div>

                    <!-- 3.1 オブジェクト指向とは -->
                    <h3 class="section-title">3.1 オブジェクト指向とは何か</h3>
                    <p><strong>オブジェクト指向プログラミング（OOP: Object-Oriented Programming）</strong>は、現実世界の物事や概念をプログラムで表現する方法論です。これまで学習してきた手続き型プログラミングとは根本的に異なる考え方を持ちます。</p>

                    <h4>従来のプログラミングとの違い</h4>
                    <p>従来の手続き型プログラミングでは、プログラムは「データ」と「処理（関数・メソッド）」を分けて考えていました。しかし、現実世界では物事の「属性（特徴）」と「行動（操作）」は密接に関連しています。</p>

                    <div class="concept-card">
                        <h6>例：自動車を考えてみましょう</h6>
                        <p><strong>属性（データ）：</strong>色、メーカー、速度、燃料残量、ナンバープレート</p>
                        <p><strong>行動（操作）：</strong>加速する、減速する、曲がる、エンジンをかける、給油する</p>
                        <p>現実では、これらは一つの「自動車」という存在にまとまっています。オブジェクト指向では、この関係をプログラムでも自然に表現できます。</p>
                    </div>

                    <div class="mermaid">
                        graph TD
                            A["手続き型プログラミング"] --> B["データ"]
                            A --> C["処理"]
                            B --> D["変数: 色、速度、燃料"]
                            C --> E["関数: 加速、減速、給油"]
                            
                            F["オブジェクト指向プログラミング"] --> G["オブジェクト: 自動車"]
                            G --> H["属性: 色、速度、燃料"]
                            G --> I["メソッド: 加速、減速、給油"]
                    </div>

                    <h4>オブジェクト指向の3つの基本概念</h4>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h6 class="card-title">カプセル化</h6>
                                    <p class="card-text">データとそれを操作するメソッドをひとまとめにし、外部から直接アクセスできないように隠蔽する。</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h6 class="card-title">継承</h6>
                                    <p class="card-text">既存のクラスの特徴を受け継いで、新しいクラスを作成する仕組み。コードの再利用と拡張が可能。</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h6 class="card-title">ポリモーフィズム</h6>
                                    <p class="card-text">同じ名前のメソッドでも、オブジェクトの種類に応じて異なる動作を実現する仕組み。</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 3.2 クラスとオブジェクト -->
                    <h3 class="section-title">3.2 クラスとオブジェクト</h3>
                    <p><strong>クラス（Class）</strong>は「設計図」や「型」のような存在で、<strong>オブジェクト（Object）</strong>はその設計図から作られた「実体」や「インスタンス」です。</p>

                    <div class="concept-card">
                        <h6>身近な例で理解しよう</h6>
                        <p><strong>クラス（設計図）：</strong>家の設計図</p>
                        <p><strong>オブジェクト（実体）：</strong>その設計図で建てられた実際の家</p>
                        <br>
                        <p>一つの設計図から、同じ構造の家を何軒でも建てることができます。しかし、それぞれの家は独立した存在で、住所、住人、内装などは異なります。プログラミングでも同様に、一つのクラスから複数のオブジェクトを作成できます。</p>
                    </div>

                    <div class="mermaid">
                        graph TD
                            A["クラス: Car 設計図"] --> B["オブジェクト1: 私の車<br>色:赤, 速度:0km/h"]
                            A --> C["オブジェクト2: 友人の車<br>色:青, 速度:60km/h"]
                            A --> D["オブジェクト3: 会社の車<br>色:白, 速度:40km/h"]
                    </div>

                    <h4>Javaにおけるクラスの定義</h4>
                    <p>Javaでは、以下の構文でクラスを定義します：</p>

                    <pre class="code-block"><code class="language-java">public class クラス名 {
    // フィールド（属性）の定義
    データ型 フィールド名;
    
    // コンストラクタの定義
    public クラス名(引数) {
        // 初期化処理
    }
    
    // メソッド（操作）の定義
    public 戻り値の型 メソッド名(引数) {
        // 処理内容
        return 戻り値;  // 戻り値がある場合
    }
}</code></pre>

                    <!-- 実習 -->
                    <div class="exercise-container">
                        <h5>実習 3-1: 最初のクラス定義</h5>
                        <p>学生を表現するStudentクラスを作成し、オブジェクト指向の基本を理解しましょう。</p>

                        <h6>手順</h6>
                        <ol>
                            <li>Student.javaファイルを作成</li>
                            <li>StudentTestクラスで動作確認</li>
                        </ol>

                        <h6>Student.java（クラス定義）</h6>
                        <pre class="code-block"><code class="language-java">public class Student {
    // フィールド（属性）
    String name;        // 名前
    int age;           // 年齢
    int studentId;     // 学生番号
    String major;      // 専攻
    
    // デフォルトコンストラクタ
    public Student() {
        // 何も処理しない（デフォルト値が設定される）
    }
    
    // 引数ありコンストラクタ
    public Student(String name, int age, int studentId, String major) {
        this.name = name;
        this.age = age;
        this.studentId = studentId;
        this.major = major;
    }
    
    // メソッド（操作）
    public void introduce() {
        System.out.println("はじめまして、" + name + "です。");
        System.out.println("年齢は" + age + "歳で、学生番号は" + studentId + "です。");
        System.out.println("専攻は" + major + "です。");
    }
    
    public void study(String subject) {
        System.out.println(name + "は" + subject + "を勉強しています。");
    }
    
    public void celebrateBirthday() {
        age++;
        System.out.println(name + "の誕生日です！" + age + "歳になりました。");
    }
}</code></pre>

                        <h6>StudentTest.java（テストクラス）</h6>
                        <pre class="code-block"><code class="language-java">public class StudentTest {
    public static void main(String[] args) {
        // オブジェクトの生成
        Student student1 = new Student("田中太郎", 20, 12345, "情報科学");
        Student student2 = new Student("佐藤花子", 19, 12346, "経済学");
        
        // メソッドの呼び出し
        System.out.println("=== 学生1の情報 ===");
        student1.introduce();
        student1.study("Java プログラミング");
        
        System.out.println("\n=== 学生2の情報 ===");
        student2.introduce();
        student2.study("ミクロ経済学");
        
        System.out.println("\n=== 誕生日のお祝い ===");
        student1.celebrateBirthday();
        
        // デフォルトコンストラクタの使用例
        Student student3 = new Student();
        student3.name = "山田次郎";
        student3.age = 21;
        student3.studentId = 12347;
        student3.major = "物理学";
        
        System.out.println("\n=== 学生3の情報 ===");
        student3.introduce();
    }
}</code></pre>

                        <h6>期待される結果</h6>
                        <pre class="code-block"><code class="language-bash">=== 学生1の情報 ===
はじめまして、田中太郎です。
年齢は20歳で、学生番号は12345です。
専攻は情報科学です。
田中太郎はJava プログラミングを勉強しています。

=== 学生2の情報 ===
はじめまして、佐藤花子です。
年齢は19歳で、学生番号は12346です。
専攻は経済学です。
佐藤花子はミクロ経済学を勉強しています。

=== 誕生日のお祝い ===
田中太郎の誕生日です！21歳になりました。

=== 学生3の情報 ===
はじめまして、山田次郎です。
年齢は21歳で、学生番号は12347です。
専攻は物理学です。</code></pre>
                    </div>

                    <!-- 3.3 フィールドとメソッド -->
                    <h3 class="section-title">3.3 フィールドとメソッド</h3>
                    <p>クラスは<strong>フィールド（属性・特徴）</strong>と<strong>メソッド（操作・行動）</strong>によって構成されます。</p>

                    <h4>フィールド（Field）</h4>
                    <p>フィールドは、オブジェクトの状態や特徴を表すデータです。例えば、人間クラスなら「名前」「年齢」「身長」などがフィールドになります。</p>

                    <div class="concept-card">
                        <h6>フィールドの特徴</h6>
                        <ul>
                            <li><strong>インスタンス変数</strong>：各オブジェクト固有の値を持つ</li>
                            <li><strong>クラス変数（static変数）</strong>：すべてのオブジェクトで共有される値</li>
                            <li><strong>初期化</strong>：コンストラクタで初期値を設定することが多い</li>
                            <li><strong>アクセス制御</strong>：通常はprivateにして外部からの直接アクセスを制限</li>
                        </ul>
                    </div>

                    <h4>メソッド（Method）</h4>
                    <p>メソッドは、オブジェクトが実行できる操作や行動を定義します。フィールドの値を変更したり、計算を行ったり、外部とのやり取りを行ったりします。</p>

                    <pre class="code-block"><code class="language-java">public 戻り値の型 メソッド名(引数リスト) {
    // メソッドの処理内容
    return 戻り値;  // 戻り値がvoid以外の場合
}</code></pre>


                    <!-- 実習 -->
                    <div class="exercise-container">
                        <h5>実習 3-2: 銀行口座クラスの作成</h5>
                        <p>より実践的な例として、銀行口座を管理するクラスを作成しましょう。</p>

                        <pre class="code-block"><code class="language-java">public class BankAccount {
    // フィールド（属性）
    private String accountNumber;  // 口座番号
    private String ownerName;      // 口座名義人
    private double balance;        // 残高
    private int transactionCount;  // 取引回数
    
    // コンストラクタ
    public BankAccount(String accountNumber, String ownerName, double initialBalance) {
        this.accountNumber = accountNumber;
        this.ownerName = ownerName;
        this.balance = initialBalance;
        this.transactionCount = 0;
        
        System.out.println("口座が開設されました: " + ownerName + "様");
    }
    
    // 入金メソッド
    public void deposit(double amount) {
        if (amount > 0) {
            balance += amount;
            transactionCount++;
            System.out.println(amount + "円を入金しました。残高: " + balance + "円");
        } else {
            System.out.println("入金額は正の値である必要があります。");
        }
    }
    
    // 出金メソッド
    public boolean withdraw(double amount) {
        if (amount > 0 && amount <= balance) {
            balance -= amount;
            transactionCount++;
            System.out.println(amount + "円を出金しました。残高: " + balance + "円");
            return true;
        } else if (amount > balance) {
            System.out.println("残高不足です。現在の残高: " + balance + "円");
            return false;
        } else {
            System.out.println("出金額は正の値である必要があります。");
            return false;
        }
    }
    
    // 残高照会メソッド
    public double getBalance() {
        return balance;
    }
    
    // 口座情報表示メソッド
    public void displayAccountInfo() {
        System.out.println("=== 口座情報 ===");
        System.out.println("口座番号: " + accountNumber);
        System.out.println("名義人: " + ownerName);
        System.out.println("残高: " + balance + "円");
        System.out.println("取引回数: " + transactionCount + "回");
    }
    
    // 利息計算メソッド（年利1%）
    public void calculateInterest() {
        double interest = balance * 0.01;
        balance += interest;
        System.out.println("利息 " + interest + "円が加算されました。新残高: " + balance + "円");
    }
}</code></pre>

                        <h6>テストクラス（BankAccountTest.java）</h6>
                        <pre class="code-block"><code class="language-java">public class BankAccountTest {
    public static void main(String[] args) {
        // 口座開設
        BankAccount account1 = new BankAccount("123-456-789", "田中太郎", 10000);
        BankAccount account2 = new BankAccount("987-654-321", "佐藤花子", 5000);
        
        System.out.println();
        
        // 口座1の操作
        System.out.println("=== 田中太郎さんの口座操作 ===");
        account1.displayAccountInfo();
        account1.deposit(5000);   // 入金
        account1.withdraw(3000);  // 出金
        account1.withdraw(20000); // 残高不足の出金試行
        account1.calculateInterest(); // 利息計算
        
        System.out.println();
        
        // 口座2の操作
        System.out.println("=== 佐藤花子さんの口座操作 ===");
        account2.displayAccountInfo();
        account2.deposit(2000);
        account2.withdraw(1000);
        
        System.out.println();
        
        // 最終残高確認
        System.out.println("=== 最終残高 ===");
        System.out.println("田中太郎さんの残高: " + account1.getBalance() + "円");
        System.out.println("佐藤花子さんの残高: " + account2.getBalance() + "円");
    }
}</code></pre>
                    </div>

                    <!-- 3.4 コンストラクタ -->
                    <h3 class="section-title">3.4 コンストラクタ</h3>
                    <p><strong>コンストラクタ（Constructor）</strong>は、オブジェクトが生成される際に自動的に呼び出される特殊なメソッドです。主な役割はオブジェクトの初期化です。</p>

                    <h4>コンストラクタの特徴</h4>
                    <ul>
                        <li><strong>名前</strong>：クラス名と完全に同じ名前</li>
                        <li><strong>戻り値</strong>：戻り値の型を指定しない（void も書かない）</li>
                        <li><strong>呼び出し</strong>：new演算子使用時に自動実行</li>
                        <li><strong>オーバーロード</strong>：引数の異なる複数のコンストラクタを定義可能</li>
                    </ul>

                    <div class="concept-card">
                        <h6>コンストラクタの種類</h6>
                        <p><strong>デフォルトコンストラクタ：</strong>引数なしのコンストラクタ。定義していない場合は自動生成される</p>
                        <p><strong>引数ありコンストラクタ：</strong>初期値を受け取って設定するコンストラクタ</p>
                        <p><strong>コピーコンストラクタ：</strong>他のオブジェクトをコピーして新しいオブジェクトを作成</p>
                    </div>

                    <!-- 実習 -->
                    <div class="exercise-container">
                        <h5>実習 3-3: 複数のコンストラクタを持つクラス</h5>
                        <p>書籍を管理するBookクラスで、複数のコンストラクタの使い方を学びましょう。</p>

                        <pre class="code-block"><code class="language-java">public class Book {
    private String title;      // タイトル
    private String author;     // 著者
    private int pages;         // ページ数
    private double price;      // 価格
    private boolean isAvailable; // 利用可能フラグ
    
    // デフォルトコンストラクタ
    public Book() {
        this.title = "未設定";
        this.author = "未設定";
        this.pages = 0;
        this.price = 0.0;
        this.isAvailable = true;
        System.out.println("デフォルトコンストラクタで書籍を作成しました");
    }
    
    // タイトルと著者のみ指定するコンストラクタ
    public Book(String title, String author) {
        this.title = title;
        this.author = author;
        this.pages = 0;
        this.price = 0.0;
        this.isAvailable = true;
        System.out.println("書籍「" + title + "」を作成しました");
    }
    
    // すべての情報を指定するコンストラクタ
    public Book(String title, String author, int pages, double price) {
        this.title = title;
        this.author = author;
        this.pages = pages;
        this.price = price;
        this.isAvailable = true;
        System.out.println("書籍「" + title + "」の詳細情報で作成しました");
    }
    
    // コピーコンストラクタ
    public Book(Book other) {
        this.title = other.title + "（コピー）";
        this.author = other.author;
        this.pages = other.pages;
        this.price = other.price;
        this.isAvailable = other.isAvailable;
        System.out.println("書籍「" + other.title + "」のコピーを作成しました");
    }
    
    // 書籍情報表示メソッド
    public void displayInfo() {
        System.out.println("=== 書籍情報 ===");
        System.out.println("タイトル: " + title);
        System.out.println("著者: " + author);
        System.out.println("ページ数: " + pages + "ページ");
        System.out.println("価格: " + price + "円");
        System.out.println("利用可能: " + (isAvailable ? "はい" : "いいえ"));
    }
    
    // 貸出メソッド
    public boolean borrow() {
        if (isAvailable) {
            isAvailable = false;
            System.out.println("「" + title + "」を貸し出しました");
            return true;
        } else {
            System.out.println("「" + title + "」は貸出中です");
            return false;
        }
    }
    
    // 返却メソッド
    public void returnBook() {
        isAvailable = true;
        System.out.println("「" + title + "」が返却されました");
    }
}</code></pre>

                        <h6>テストクラス（BookTest.java）</h6>
                        <pre class="code-block"><code class="language-java">public class BookTest {
    public static void main(String[] args) {
        // 各種コンストラクタの使用例
        System.out.println("=== コンストラクタのテスト ===");
        
        // デフォルトコンストラクタ
        Book book1 = new Book();
        
        // タイトルと著者のみ
        Book book2 = new Book("Java入門", "プログラミング太郎");
        
        // 全情報指定
        Book book3 = new Book("データ構造とアルゴリズム", "アルゴ花子", 450, 3200);
        
        // コピーコンストラクタ
        Book book4 = new Book(book3);
        
        System.out.println();
        
        // 各書籍の情報表示
        System.out.println("=== 書籍一覧 ===");
        book1.displayInfo();
        System.out.println();
        
        book2.displayInfo();
        System.out.println();
        
        book3.displayInfo();
        System.out.println();
        
        book4.displayInfo();
        System.out.println();
        
        // 貸出・返却テスト
        System.out.println("=== 貸出・返却テスト ===");
        book3.borrow();    // 貸出
        book3.borrow();    // 既に貸出中
        book3.returnBook(); // 返却
        book3.borrow();    // 再度貸出
    }
}</code></pre>
                    </div>

                    <!-- 3.5 アクセス修飾子とカプセル化 -->
                    <h3 class="section-title">3.5 アクセス修飾子とカプセル化</h3>
                    <p><strong>カプセル化</strong>は、オブジェクトの内部構造を隠蔽し、決められた方法でのみアクセスできるようにする仕組みです。これにより、データの整合性を保ち、予期しない変更を防げます。</p>

                    <h4>アクセス修飾子の種類</h4>
                    <div class="data-type-table">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>修飾子</th>
                                    <th>同一クラス</th>
                                    <th>同一パッケージ</th>
                                    <th>サブクラス</th>
                                    <th>異なるパッケージ</th>
                                    <th>用途</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>public</strong></td>
                                    <td>○</td>
                                    <td>○</td>
                                    <td>○</td>
                                    <td>○</td>
                                    <td>どこからでもアクセス可能</td>
                                </tr>
                                <tr>
                                    <td><strong>protected</strong></td>
                                    <td>○</td>
                                    <td>○</td>
                                    <td>○</td>
                                    <td>×</td>
                                    <td>継承関係でのアクセス</td>
                                </tr>
                                <tr>
                                    <td><strong>（デフォルト）</strong></td>
                                    <td>○</td>
                                    <td>○</td>
                                    <td>×</td>
                                    <td>×</td>
                                    <td>同一パッケージ内のみ</td>
                                </tr>
                                <tr>
                                    <td><strong>private</strong></td>
                                    <td>○</td>
                                    <td>×</td>
                                    <td>×</td>
                                    <td>×</td>
                                    <td>同一クラス内のみ</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="highlight">
                        <h6>カプセル化のベストプラクティス</h6>
                        <ul>
                            <li><strong>フィールドはprivate</strong>：直接アクセスを防ぎ、データの整合性を保つ</li>
                            <li><strong>getterメソッド</strong>：フィールドの値を取得するためのメソッド</li>
                            <li><strong>setterメソッド</strong>：フィールドの値を設定するためのメソッド（検証付き）</li>
                            <li><strong>メソッドは適切なアクセスレベル</strong>：必要最小限の公開範囲</li>
                        </ul>
                    </div>

                    <!-- 実習 -->
                    <div class="exercise-container">
                        <h5>実習 3-4: カプセル化を適用したPersonクラス</h5>
                        <p>適切なカプセル化を施したPersonクラスを作成し、getter/setterメソッドの使い方を学びましょう。</p>

                        <pre class="code-block"><code class="language-java">public class Person {
    // privateフィールド（外部から直接アクセス不可）
    private String name;
    private int age;
    private double height;
    private String email;
    
    // コンストラクタ
    public Person(String name, int age, double height, String email) {
        setName(name);      // setterメソッドを使用して検証付きで設定
        setAge(age);
        setHeight(height);
        setEmail(email);
    }
    
    // name のgetter/setter
    public String getName() {
        return name;
    }
    
    public void setName(String name) {
        if (name != null && !name.trim().isEmpty()) {
            this.name = name.trim();
        } else {
            System.out.println("エラー: 名前は空白にできません");
        }
    }
    
    // age のgetter/setter
    public int getAge() {
        return age;
    }
    
    public void setAge(int age) {
        if (age >= 0 && age <= 150) {
            this.age = age;
        } else {
            System.out.println("エラー: 年齢は0～150の範囲で入力してください");
        }
    }
    
    // height のgetter/setter
    public double getHeight() {
        return height;
    }
    
    public void setHeight(double height) {
        if (height > 0 && height < 300) {
            this.height = height;
        } else {
            System.out.println("エラー: 身長は0～300cmの範囲で入力してください");
        }
    }
    
    // email のgetter/setter
    public String getEmail() {
        return email;
    }
    
    public void setEmail(String email) {
        if (email != null && email.contains("@")) {
            this.email = email;
        } else {
            System.out.println("エラー: 有効なメールアドレスを入力してください");
        }
    }
    
    // BMI計算メソッド
    public double calculateBMI() {
        double heightInMeters = height / 100.0;  // cmをmに変換
        return weight / (heightInMeters * heightInMeters);
    }
    
    // 自己紹介メソッド
    public void introduce() {
        System.out.println("名前: " + name);
        System.out.println("年齢: " + age + "歳");
        System.out.println("身長: " + height + "cm");
        System.out.println("メール: " + email);
    }
    
    // 年齢カテゴリ判定メソッド
    public String getAgeCategory() {
        if (age < 13) {
            return "子供";
        } else if (age < 20) {
            return "十代";
        } else if (age < 60) {
            return "大人";
        } else {
            return "シニア";
        }
    }
    
    // weightフィールドとメソッドを追加
    private double weight;
    
    public double getWeight() {
        return weight;
    }
    
    public void setWeight(double weight) {
        if (weight > 0 && weight < 500) {
            this.weight = weight;
        } else {
            System.out.println("エラー: 体重は0～500kgの範囲で入力してください");
        }
    }
    
    // コンストラクタにweightを追加
    public Person(String name, int age, double height, double weight, String email) {
        setName(name);
        setAge(age);
        setHeight(height);
        setWeight(weight);
        setEmail(email);
    }
}</code></pre>

                        <h6>テストクラス（PersonTest.java）</h6>
                        <pre class="code-block"><code class="language-java">public class PersonTest {
    public static void main(String[] args) {
        // 正常なPersonオブジェクト作成
        Person person1 = new Person("田中太郎", 25, 170.5, 65.0, "tanaka@example.com");
        
        System.out.println("=== person1の情報 ===");
        person1.introduce();
        System.out.println("年齢カテゴリ: " + person1.getAgeCategory());
        System.out.println("BMI: " + String.format("%.1f", person1.calculateBMI()));
        
        System.out.println();
        
        // getterメソッドでフィールド値を取得
        System.out.println("=== getterメソッドのテスト ===");
        System.out.println("名前: " + person1.getName());
        System.out.println("年齢: " + person1.getAge());
        System.out.println("身長: " + person1.getHeight());
        System.out.println("体重: " + person1.getWeight());
        
        System.out.println();
        
        // setterメソッドで値を変更
        System.out.println("=== setterメソッドのテスト ===");
        person1.setAge(30);
        person1.setWeight(70.0);
        System.out.println("年齢を30歳、体重を70kgに変更しました");
        person1.introduce();
        
        System.out.println();
        
        // 不正な値でのテスト
        System.out.println("=== バリデーションテスト ===");
        Person person2 = new Person("", -5, -10, 1000, "invalid-email");
        
        // さらに不正な値を設定試行
        person1.setAge(200);     // 範囲外
        person1.setHeight(-50);  // 負の値
        person1.setWeight(600);  // 範囲外
        person1.setEmail("no-at-mark"); // @マークなし
    }
}</code></pre>

                        <div class="warning">
                            <h6>注意：直接フィールドアクセスの問題</h6>
                            <p>フィールドをprivateにしていない場合、以下のような問題が発生する可能性があります：</p>
                            <pre class="code-block"><code class="language-java">// フィールドがpublicの場合の問題例
person.age = -50;        // 不正な値が設定される
person.email = "xyz";    // 無効なメール形式
person.height = -100;    // 負の身長</code></pre>
                            <p>privateフィールド + getter/setterの組み合わせにより、このような問題を防げます。</p>
                        </div>
                    </div>

                    <!-- 理解度確認クイズ -->
                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>
                                <strong>オブジェクト指向プログラミングの3つの基本概念として正しいものはどれですか？</strong>
                                <ul style="list-style-type: none;">
                                    <li>a) 変数、メソッド、クラス</li>
                                    <li>b) カプセル化、継承、ポリモーフィズム</li>
                                    <li>c) public、private、protected</li>
                                    <li>d) コンストラクタ、デストラクタ、アクセサ</li>
                                </ul>
                            </li>
                            <li>
                                <strong>コンストラクタに関する説明として正しいものはどれですか？</strong>
                                <ul style="list-style-type: none;">
                                    <li>a) 戻り値の型を指定する必要がある</li>
                                    <li>b) メソッド名は自由に決められる</li>
                                    <li>c) new演算子使用時に自動的に呼び出される</li>
                                    <li>d) 一つのクラスには必ず一つだけ定義する</li>
                                </ul>
                            </li>
                            <li>
                                <strong>アクセス修飾子「private」の特徴はどれですか？</strong>
                                <ul style="list-style-type: none;">
                                    <li>a) どのクラスからでもアクセス可能</li>
                                    <li>b) 同一パッケージ内からアクセス可能</li>
                                    <li>c) サブクラスからアクセス可能</li>
                                    <li>d) 同一クラス内からのみアクセス可能</li>
                                </ul>
                            </li>
                            <li>
                                <strong>カプセル化の主な目的はどれですか？</strong>
                                <ul style="list-style-type: none;">
                                    <li>a) プログラムの実行速度を向上させる</li>
                                    <li>b) データの整合性を保ち、予期しない変更を防ぐ</li>
                                    <li>c) メモリ使用量を削減する</li>
                                    <li>d) コンパイル時間を短縮する</li>
                                </ul>
                            </li>
                            <li>
                                <strong>以下のコードで「new Student()」を実行した時に呼び出されるのはどれですか？</strong>
                                <pre class="code-block"><code class="language-java">public class Student {
    public Student() { ... }
    public Student(String name) { ... }
    public void study() { ... }
}</code></pre>
                                <ul style="list-style-type: none;">
                                    <li>a) Student(String name)</li>
                                    <li>b) Student()</li>
                                    <li>c) study()</li>
                                    <li>d) コンパイルエラーが発生</li>
                                </ul>
                            </li>
                        </ol>

                        <details style="margin-top: 1rem;">
                            <summary>解答を表示</summary>
                            <div style="margin-top: 0.5rem;">
                                <p><strong>解答:</strong></p>
                                <ol>
                                    <li>b) カプセル化、継承、ポリモーフィズム - オブジェクト指向の三大原則</li>
                                    <li>c) new演算子使用時に自動的に呼び出される - コンストラクタの基本的な動作</li>
                                    <li>d) 同一クラス内からのみアクセス可能 - privateの最も制限的なアクセス制御</li>
                                    <li>b) データの整合性を保ち、予期しない変更を防ぐ - カプセル化の主目的</li>
                                    <li>b) Student() - 引数なしのコンストラクタが呼び出される</li>
                                </ol>
                            </div>
                        </details>
                    </div>

                    <!-- 章のまとめ -->
                    <h3 class="section-title">章のまとめ</h3>
                    <p>この章では、オブジェクト指向プログラミングの基本概念について学習しました：</p>

                    <ul>
                        <li><strong>オブジェクト指向の概念</strong>：現実世界の物事をプログラムで自然に表現する方法論</li>
                        <li><strong>クラスとオブジェクト</strong>：設計図（クラス）から実体（オブジェクト）を生成する関係</li>
                        <li><strong>フィールドとメソッド</strong>：オブジェクトの属性（フィールド）と操作（メソッド）</li>
                        <li><strong>コンストラクタ</strong>：オブジェクト生成時の初期化を担う特殊なメソッド</li>
                        <li><strong>カプセル化</strong>：アクセス修飾子を使ったデータ隠蔽と保護</li>
                        <li><strong>getter/setter</strong>：カプセル化されたフィールドへの安全なアクセス方法</li>
                    </ul>

                    <div class="highlight">
                        <h6>次章への準備</h6>
                        <p>次章では、オブジェクト指向プログラミングのより高度な概念（継承、ポリモーフィズム、抽象クラス、インターフェース）について学習します。今回学習したクラスとオブジェクトの基本概念は、これらの発展的な内容を理解するための重要な土台となります。</p>
                    </div>

                    <!-- 章間ナビゲーション -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="java-learning-material-2.html" class="btn btn-secondary">← 前の章: Java言語の基本</a>
                        <a href="java-learning-material-4.html" class="btn btn-primary">次の章: オブジェクト指向応用 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- フッター -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>

    <!-- Mermaid.js 初期化 -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>