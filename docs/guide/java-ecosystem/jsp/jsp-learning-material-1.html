<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSP/Servlet初心者向け学習教材 - 第1章: 事前準備</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        .navbar {
            background-color: #1565c0;
        }
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        .chapter-title {
            color: #1565c0;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #1565c0;
            padding-bottom: 0.5rem;
        }
        .section-title {
            color: #1976d2;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        code {
            display: block;
            background-color: #f5f5f5;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            white-space: pre;
            overflow-x: auto;
        }
        .quiz-container {
            background-color: #e3f2fd;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .quiz-question {
            font-weight: 500;
            margin-bottom: 1rem;
        }
        .diagram {
            max-width: 100%;
            height: auto;
            margin: 1.5rem 0;
            text-align: center;
        }
        .exercise {
            background-color: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1.5rem 0;
        }
        .note {
            background-color: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 1rem;
            margin: 1.5rem 0;
        }
        #table-of-contents .list-group-item {
            border: none;
            padding: 0.5rem 1rem;
        }
        #table-of-contents .list-group-item-action {
            color: #1976d2;
        }
        /* 選択された目次項目のスタイル */
        #table-of-contents .list-group-item-action.active,
        .list-group-item.active {
            color: white !important; /* テキストを白色にして青い背景に対してコントラストをつける */
            background-color: #1976d2;
            border-color: #1976d2;
        }
        .section-nav {
            padding-left: 1rem;
        }
        .inline-code {
            background-color: #f5f5f5;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            display: inline;
        }
        footer {
            background-color: #1565c0;
            color: white;
            padding: 1rem 0;
            margin-top: 3rem;
        }
        .table-example {
            width: 100%;
            margin-bottom: 1rem;
            border-collapse: collapse;
        }
        .table-example th {
            background-color: #e3f2fd;
            border: 1px solid #b3e5fc;
            padding: 0.5rem;
            text-align: center;
        }
        .table-example td {
            border: 1px solid #b3e5fc;
            padding: 0.5rem;
            text-align: center;
        }
        .example-result {
            background-color: #f1f8e9;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
        }
        .warning {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
            padding: 1rem;
            margin: 1.5rem 0;
        }
    </style>
</head>
<body data-bs-spy="scroll" data-bs-target="#tableOfContents">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">JSP/Servlet初心者向け学習教材</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#introduction">はじめに</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#chapter1">第1章: 事前準備</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container my-4">
        <div class="row">
            <!-- Sidebar - Table of Contents -->
            <div class="col-lg-3">
                <div class="sidebar">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">目次</h5>
                        </div>
                        <div id="table-of-contents" class="list-group list-group-flush">
                            <a href="#introduction" class="list-group-item list-group-item-action">はじめに</a>
                            <a href="#chapter1" class="list-group-item list-group-item-action">第1章: 事前準備</a>
                            <div class="section-nav">
                                <a href="#web-app-intro" class="list-group-item list-group-item-action">1.1 Webアプリケーション開発概要</a>
                                <a href="#jdk-install" class="list-group-item list-group-item-action">1.2 JDK 21のインストール</a>
                                <a href="#tomcat-install" class="list-group-item list-group-item-action">1.3 Apache Tomcatのインストール</a>
                                <a href="#ide-setup" class="list-group-item list-group-item-action">1.4 IDE環境のセットアップ</a>
                                <a href="#web-app-structure" class="list-group-item list-group-item-action">1.5 Webアプリケーションの基本構造</a>
                                <a href="#chapter1-quiz" class="list-group-item list-group-item-action">1.6 理解度確認テスト</a>
                            </div>
                            <a href="#next-steps" class="list-group-item list-group-item-action">次のステップ</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="col-lg-9">
                <section id="introduction">
                    <h1 class="display-5 mb-4">JSP/Servlet初心者向け学習教材</h1>
                    <p class="lead">この第1章では、JSP/Servletを使ったWebアプリケーション開発を始めるための環境構築と基本的な知識を学習します。必要なツールのインストール方法とWebアプリケーションの基本構造について理解しましょう。</p>

                    <div class="note">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>Webアプリケーション開発の基本概念</li>
                            <li>JDK 21のインストール方法</li>
                            <li>Apache Tomcatのセットアップ</li>
                            <li>開発環境（IDE）の設定</li>
                            <li>Webアプリケーションのフォルダ構成と設定ファイル</li>
                        </ul>
                    </div>
                </section>

                <section id="chapter1">
                    <h2 class="chapter-title">第1章：事前準備</h2>
                    <p>JSP/Servletを使ったWebアプリケーション開発を行うには、適切な開発環境が必要です。この章では、必要なツールのインストールと設定を行い、基本的なWebアプリケーションの構造を理解します。</p>

                    <section id="web-app-intro">
                        <h3 class="section-title">1.1 Webアプリケーション開発概要</h3>
                        <p>JSP（JavaServer Pages）とServletは、Javaを使用したサーバーサイドWebアプリケーション開発のための重要な技術です。これらの技術を使うことで、動的なWebページを作成し、ユーザーのリクエストを処理するWebアプリケーションを開発することができます。</p>

                        <h4>JSPとServletとは</h4>
                        <p>JSP/Servletは、Java EE（Enterprise Edition）の一部として提供されるWeb開発技術です。</p>
                        <ul>
                            <li><strong>Servlet</strong>：JavaでHTTPリクエストを処理するためのクラス。URLマッピングによりクライアントからのリクエストを受け取り、処理を実行した後、レスポンスを返します。</li>
                            <li><strong>JSP</strong>：HTMLページの中にJavaコードを埋め込むことができるテンプレート言語。実行時にServletに変換されます。主にビュー（表示）の部分を担当します。</li>
                        </ul>

                        <div class="diagram">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 280" width="600" height="280">
                                <!-- クライアント -->
                                <rect x="50" y="50" width="120" height="60" fill="#bbdefb" stroke="#1976d2" stroke-width="2" rx="5" />
                                <text x="110" y="85" text-anchor="middle" font-size="16">ブラウザ</text>
                                
                                <!-- Webサーバー（Tomcat） -->
                                <rect x="250" y="20" width="250" height="120" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5" />
                                <text x="375" y="45" text-anchor="middle" font-size="16">Webサーバー (Tomcat)</text>
                                
                                <!-- Servlet -->
                                <rect x="270" y="60" width="100" height="60" fill="#c8e6c9" stroke="#388e3c" stroke-width="2" rx="5" />
                                <text x="320" y="95" text-anchor="middle" font-size="16">Servlet</text>
                                
                                <!-- JSP -->
                                <rect x="380" y="60" width="100" height="60" fill="#ffecb3" stroke="#ffa000" stroke-width="2" rx="5" />
                                <text x="430" y="95" text-anchor="middle" font-size="16">JSP</text>
                                
                                <!-- データベース -->
                                <rect x="250" y="180" width="250" height="60" fill="#f5f5f5" stroke="#9e9e9e" stroke-width="2" rx="5" />
                                <text x="375" y="215" text-anchor="middle" font-size="16">データベース</text>
                                
                                <!-- リクエスト矢印 -->
                                <line x1="170" y1="70" x2="250" y2="70" stroke="#1976d2" stroke-width="2" marker-end="url(#arrow)" />
                                <text x="210" y="60" text-anchor="middle" font-size="12">HTTPリクエスト</text>
                                
                                <!-- レスポンス矢印 -->
                                <line x1="250" y1="90" x2="170" y2="90" stroke="#1976d2" stroke-width="2" marker-end="url(#arrow)" />
                                <text x="210" y="110" text-anchor="middle" font-size="12">HTTPレスポンス</text>
                                
                                <!-- DB接続矢印 -->
                                <line x1="375" y1="140" x2="375" y2="180" stroke="#9e9e9e" stroke-width="2" marker-end="url(#arrow)" />
                                <text x="400" y="160" text-anchor="middle" font-size="12">データアクセス</text>
                                
                                <defs>
                                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                        <path d="M0,0 L0,6 L9,3 z" fill="#000" />
                                    </marker>
                                </defs>
                            </svg>
                            <p class="text-center">図1.1: JSP/Servletを使ったWebアプリケーションの基本構造</p>
                        </div>

                        <h4>必要なものと環境</h4>
                        <p>JSP/Servletによる開発を始めるには、以下のものが必要です：</p>
                        <ul>
                            <li><strong>JDK (Java Development Kit)</strong>：Javaアプリケーションの開発・実行に必要</li>
                            <li><strong>サーブレットコンテナ/Webサーバー</strong>：ServletやJSPを実行するための環境（Apache Tomcatなど）</li>
                            <li><strong>IDE (統合開発環境)</strong>：効率的に開発するためのツール（EclipseやIntelliJ IDEAなど）</li>
                        </ul>

                        <div class="note">
                            <h5>Java EEとJakarta EE</h5>
                            <p>Java EEは2018年にEclipse Foundationに移管され、現在はJakarta EEとして開発が続けられています。Tomcat 10以降では、パッケージ名が<span class="inline-code">javax.*</span>から<span class="inline-code">jakarta.*</span>に変更されています。この教材では、最新のJakarta EE仕様に基づくTomcat 10.xを使用します。</p>
                        </div>
                    </section>

                    <section id="jdk-install">
                        <h3 class="section-title">1.2 JDK 21のインストール</h3>
                        <p>JDK (Java Development Kit)は、Javaアプリケーションの開発と実行に必要なツールとライブラリのセットです。ここではJDK 21のインストール方法を説明します。</p>

                        <h4>JDKのダウンロードとインストール</h4>
                        <ol>
                            <li><strong>Oracle JDKのダウンロード</strong>:
                                <ul>
                                    <li><a href="https://www.oracle.com/java/technologies/downloads/" target="_blank">Oracle JDKダウンロードページ</a>にアクセスします。</li>
                                    <li>「Java 21」セクションから、お使いのオペレーティングシステムに合ったインストーラをダウンロードします。</li>
                                </ul>
                            </li>
                            <li><strong>OpenJDKの代替オプション</strong>:
                                <ul>
                                    <li>Oracle JDKの代わりに、<a href="https://adoptium.net/" target="_blank">Eclipse Temurin (AdoptOpenJDK)</a>などのオープンソース実装も使用できます。</li>
                                </ul>
                            </li>
                            <li><strong>インストール手順</strong>:
                                <ul>
                                    <li>ダウンロードしたインストーラを実行し、画面の指示に従います。</li>
                                    <li>基本的にはデフォルト設定でインストールして問題ありません。</li>
                                </ul>
                            </li>
                        </ol>

                        <h4>環境変数の設定</h4>
                        <p>JDKをインストールしたら、環境変数を設定してシステムがJavaコマンドを認識できるようにします。</p>

                        <div class="table-responsive">
                            <table class="table-example">
                                <tr>
                                    <th>OS</th>
                                    <th>環境変数の設定方法</th>
                                </tr>
                                <tr>
                                    <td>Windows</td>
                                    <td>
                                        <ol>
                                            <li>「コントロールパネル」→「システム」→「システムの詳細設定」→「環境変数」を開く</li>
                                            <li>システム環境変数で「JAVA_HOME」を新規作成し、JDKのインストールパス（例：C:\Program Files\Java\jdk-21）を設定</li>
                                            <li>「Path」変数を編集し、「%JAVA_HOME%\bin」を追加</li>
                                        </ol>
                                    </td>
                                </tr>
                                <tr>
                                    <td>macOS / Linux</td>
                                    <td>
                                        <p>ターミナルで以下のコマンドを実行（bashの場合）：</p>
                                        <code>echo 'export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-21.jdk/Contents/Home' >> ~/.bash_profile
echo 'export PATH=$JAVA_HOME/bin:$PATH' >> ~/.bash_profile
source ~/.bash_profile</code>
                                        <p>zshを使用している場合は、<code>~/.bash_profile</code>の代わりに<code>~/.zshrc</code>を使用します。</p>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <h4>インストールの確認</h4>
                        <p>JDKが正しくインストールされたことを確認するには、コマンドプロンプト（Windows）またはターミナル（macOS/Linux）で以下のコマンドを実行します：</p>
                        <code>java -version</code>
                        <p>以下のような出力が表示されれば成功です（バージョン番号は異なる場合があります）：</p>
                        <div class="example-result">
                            <pre>java version "21.0.1" 2023-10-17
Java(TM) SE Runtime Environment (build 21.0.1+12-LTS-29)
Java HotSpot(TM) 64-Bit Server VM (build 21.0.1+12-LTS-29, mixed mode, sharing)</pre>
                        </div>

                        <div class="exercise">
                            <h5>演習 1.2.1: JDKのインストールと確認</h5>
                            <ol>
                                <li>JDK 21をダウンロードしてインストールしてください。</li>
                                <li>適切に環境変数を設定してください。</li>
                                <li>コマンドプロンプトまたはターミナルで<code>java -version</code>と<code>javac -version</code>コマンドを実行して、インストールが成功したことを確認してください。</li>
                            </ol>
                        </div>
                    </section>

                    <section id="tomcat-install">
                        <h3 class="section-title">1.3 Apache Tomcatのインストール</h3>
                        <p>Apache Tomcatは、JSPとServletを実行するためのオープンソースのWebサーバー（サーブレットコンテナ）です。この教材ではTomcat 10.xを使用します。</p>

                        <h4>Tomcatのダウンロードとインストール</h4>
                        <ol>
                            <li><strong>Tomcatのダウンロード</strong>:
                                <ul>
                                    <li><a href="https://tomcat.apache.org/download-10.cgi" target="_blank">Apache Tomcat 10ダウンロードページ</a>にアクセスします。</li>
                                    <li>「Core」セクションから、お使いのオペレーティングシステムに合ったパッケージをダウンロードします。
                                        <ul>
                                            <li>Windows: zip形式またはWindows Service Installer (.exe)</li>
                                            <li>macOS/Linux: tar.gz形式</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li><strong>インストール手順</strong>:
                                <ul>
                                    <li>Windows Service Installerの場合: インストーラを実行し、指示に従います。</li>
                                    <li>zip/tar.gzファイルの場合: ファイルを任意の場所に展開します（例: C:\tomcat または /opt/tomcat）。</li>
                                </ul>
                            </li>
                        </ol>

                        <h4>環境変数の設定</h4>
                        <p>Tomcatをコマンドラインから簡単に操作できるように、環境変数を設定しておくと便利です。</p>

                        <div class="table-responsive">
                            <table class="table-example">
                                <tr>
                                    <th>OS</th>
                                    <th>環境変数の設定方法</th>
                                </tr>
                                <tr>
                                    <td>Windows</td>
                                    <td>
                                        <ol>
                                            <li>「コントロールパネル」→「システム」→「システムの詳細設定」→「環境変数」を開く</li>
                                            <li>システム環境変数で「CATALINA_HOME」を新規作成し、Tomcatのインストールパス（例：C:\tomcat）を設定</li>
                                            <li>「Path」変数を編集し、「%CATALINA_HOME%\bin」を追加</li>
                                        </ol>
                                    </td>
                                </tr>
                                <tr>
                                    <td>macOS / Linux</td>
                                    <td>
                                        <p>ターミナルで以下のコマンドを実行（bashの場合）：</p>
                                        <code>echo 'export CATALINA_HOME=/opt/tomcat' >> ~/.bash_profile
echo 'export PATH=$CATALINA_HOME/bin:$PATH' >> ~/.bash_profile
source ~/.bash_profile</code>
                                        <p>zshを使用している場合は、<code>~/.bash_profile</code>の代わりに<code>~/.zshrc</code>を使用します。</p>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <h4>Tomcatの起動と動作確認</h4>
                        <p>Tomcatをインストールした後、以下の手順で起動と動作確認を行います：</p>

                        <div class="table-responsive">
                            <table class="table-example">
                                <tr>
                                    <th>OS</th>
                                    <th>起動方法</th>
                                </tr>
                                <tr>
                                    <td>Windows</td>
                                    <td>
                                        <p>Windows Service Installerでインストールした場合：</p>
                                        <ul>
                                            <li>Windowsサービスから「Apache Tomcat 10.x」を開始</li>
                                        </ul>
                                        <p>zipで展開した場合：</p>
                                        <ul>
                                            <li>コマンドプロンプトでTomcatのbinディレクトリに移動し、<code>startup.bat</code>を実行</li>
                                        </ul>
                                    </td>
                                </tr>
                                <tr>
                                    <td>macOS / Linux</td>
                                    <td>
                                        <p>ターミナルで以下のコマンドを実行：</p>
                                        <code>cd $CATALINA_HOME/bin
chmod +x *.sh    # 実行権限を付与
./startup.sh</code>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <p>Tomcatが正常に起動したら、Webブラウザで <a href="http://localhost:8080" target="_blank">http://localhost:8080</a> にアクセスします。Tomcatのウェルカムページが表示されれば成功です。</p>

                        <div class="diagram">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 200" width="600" height="200">
                                <!-- Tomcatウェルカムページのモックアップ -->
                                <rect x="50" y="20" width="500" height="160" fill="#f8f9fa" stroke="#ced4da" stroke-width="2" rx="5" />
                                
                                <!-- ブラウザのアドレスバー -->
                                <rect x="50" y="20" width="500" height="30" fill="#e9ecef" stroke="#ced4da" stroke-width="2" rx="3" />
                                <text x="300" y="40" text-anchor="middle" font-size="14">http://localhost:8080</text>
                                
                                <!-- Tomcatのロゴ（簡略化） -->
                                <rect x="100" y="70" width="100" height="60" fill="#f8f9fa" stroke="none" />
                                <circle cx="150" cy="100" r="25" fill="#f4a582" stroke="#b2182b" stroke-width="2" />
                                
                                <!-- ページコンテンツ（簡略化） -->
                                <text x="250" y="85" text-anchor="start" font-size="18" font-weight="bold">Apache Tomcat</text>
                                <text x="250" y="115" text-anchor="start" font-size="14">Tomcat 10.x.x</text>
                                
                                <rect x="100" y="140" width="400" height="20" fill="#e9ecef" stroke="#ced4da" stroke-width="1" rx="3" />
                                <text x="300" y="155" text-anchor="middle" font-size="12">If you're seeing this, you've successfully installed Tomcat. Congratulations!</text>
                            </svg>
                            <p class="text-center">図1.2: Tomcatウェルカムページ</p>
                        </div>

                        <h4>Tomcatの停止</h4>
                        <p>Tomcatを停止するには、以下のコマンドを実行します：</p>
                        <ul>
                            <li>Windows: <code>%CATALINA_HOME%\bin\shutdown.bat</code></li>
                            <li>macOS/Linux: <code>$CATALINA_HOME/bin/shutdown.sh</code></li>
                        </ul>

                        <div class="note">
                            <h5>Tomcatの管理者設定</h5>
                            <p>開発中にTomcatの管理画面を使用するには、管理者ユーザーを設定する必要があります。以下の手順で設定できます：</p>
                            <ol>
                                <li>Tomcatのconf/tomcat-users.xmlファイルを編集します。</li>
                                <li>以下のような設定を&lt;tomcat-users&gt;タグ内に追加します（ユーザー名とパスワードは任意のものに変更してください）：</li>
                            </ol>
                            <code>&lt;role rolename="manager-gui"/&gt;
&lt;role rolename="admin-gui"/&gt;
&lt;user username="admin" password="password" roles="manager-gui,admin-gui"/&gt;</code>
                            <p>これにより、<a href="http://localhost:8080/manager/html" target="_blank">http://localhost:8080/manager/html</a> からTomcatの管理画面にアクセスできるようになります。</p>
                        </div>

                        <div class="exercise">
                            <h5>演習 1.3.1: Tomcatのインストールと動作確認</h5>
                            <ol>
                                <li>Apache Tomcat 10.xをダウンロードしてインストールしてください。</li>
                                <li>環境変数を適切に設定してください。</li>
                                <li>Tomcatを起動し、ウェルカムページが表示されることを確認してください。</li>
                                <li>管理者ユーザーを設定し、管理画面にアクセスできることを確認してください。</li>
                            </ol>
                        </div>
                    </section>

                    <section id="ide-setup">
                        <h3 class="section-title">1.4 IDE環境のセットアップ</h3>
                        <p>効率的にJSP/Servletアプリケーションを開発するためには、統合開発環境（IDE）の利用が欠かせません。ここでは主要なIDEである「Eclipse」と「IntelliJ IDEA」のセットアップ方法を説明します。</p>

                        <h4>Eclipseのセットアップ</h4>
                        <p>EclipseはオープンソースのIDEで、Java EE開発に広く使われています。</p>
                        <ol>
                            <li><strong>Eclipseのダウンロード</strong>:
                                <ul>
                                    <li><a href="https://www.eclipse.org/downloads/" target="_blank">Eclipse公式サイト</a>から「Eclipse IDE for Enterprise Java and Web Developers」をダウンロードします。</li>
                                </ul>
                            </li>
                            <li><strong>インストール</strong>:
                                <ul>
                                    <li>ダウンロードしたインストーラを実行し、指示に従ってインストールします。</li>
                                    <li>「Eclipse IDE for Enterprise Java and Web Developers」を選択してください。</li>
                                </ul>
                            </li>
                            <li><strong>Tomcatサーバーの設定</strong>:
                                <ul>
                                    <li>Eclipseを起動し、下部の「Servers」タブを開きます（表示されていない場合は、「Window」→「Show View」→「Servers」を選択）。</li>
                                    <li>「No servers are available. Click this link to create a new server...」というリンクをクリックします。</li>
                                    <li>「Apache」→「Tomcat v10.x Server」を選択し、「Next」をクリックします。</li>
                                    <li>「Tomcat installation directory」にTomcatをインストールしたディレクトリを指定し、「Finish」をクリックします。</li>
                                </ul>
                            </li>
                        </ol>

                        <h4>IntelliJ IDEAのセットアップ</h4>
                        <p>IntelliJ IDEAはJetBrains社が開発した高機能なIDEです。Community Edition（無料）とUltimate Edition（有料）がありますが、Web開発機能を十分に活用するにはUltimate Editionが推奨されます。</p>
                        <ol>
                            <li><strong>IntelliJ IDEAのダウンロード</strong>:
                                <ul>
                                    <li><a href="https://www.jetbrains.com/idea/download/" target="_blank">IntelliJ IDEA公式サイト</a>からダウンロードします。</li>
                                    <li>Web開発のためにはUltimate Editionを選択することをお勧めします（30日間の無料トライアル可能）。</li>
                                </ul>
                            </li>
                            <li><strong>インストール</strong>:
                                <ul>
                                    <li>ダウンロードしたインストーラを実行し、指示に従ってインストールします。</li>
                                </ul>
                            </li>
                            <li><strong>Tomcatサーバーの設定</strong>:
                                <ul>
                                    <li>IntelliJ IDEAを起動し、プロジェクトを開きます（または新規作成します）。</li>
                                    <li>「File」→「Settings」（Windowsの場合）または「IntelliJ IDEA」→「Preferences」（macOSの場合）を選択します。</li>
                                    <li>「Build, Execution, Deployment」→「Application Servers」を選択します。</li>
                                    <li>「+」ボタンをクリックし、「Tomcat Server」を選択します。</li>
                                    <li>「Tomcat Home」にTomcatをインストールしたディレクトリを指定し、「OK」をクリックします。</li>
                                </ul>
                            </li>
                        </ol>

                        <div class="note">
                            <h5>Visual Studio Codeを使用する場合</h5>
                            <p>Visual Studio Codeでも拡張機能を使用することでJSP/Servlet開発が可能です。必要な拡張機能：</p>
                            <ul>
                                <li>Extension Pack for Java</li>
                                <li>Tomcat for Java</li>
                                <li>Community Server Connectors</li>
                            </ul>
                            <p>これらの拡張機能をインストールし、Tomcat for Java拡張機能のビューからTomcatサーバーを追加します。ただし、本格的なJSP/Servlet開発にはEclipseやIntelliJ IDEAの方が適しています。</p>
                        </div>

                        <div class="exercise">
                            <h5>演習 1.4.1: IDE環境のセットアップ</h5>
                            <ol>
                                <li>EclipseまたはIntelliJ IDEAをダウンロードしてインストールしてください。</li>
                                <li>IDEにTomcatサーバーを設定してください。</li>
                                <li>新しいJavaプロジェクトを作成し、JDK 21が正しく認識されていることを確認してください。</li>
                            </ol>
                        </div>
                    </section>

                    <section id="web-app-structure">
                        <h3 class="section-title">1.5 Webアプリケーションの基本構造</h3>
                        <p>JSP/Servletを使用したWebアプリケーションには、標準的なディレクトリ構造があります。この構造を理解することは、効率的な開発のために重要です。</p>

                        <h4>Webアプリケーションのディレクトリ構造</h4>
                        <p>Java Webアプリケーションのディレクトリ構造は以下のようになります：</p>

                        <div class="diagram">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 400" width="600" height="400">
                                <!-- ディレクトリツリー図 -->
                                <g font-family="monospace" font-size="14">
                                    <text x="50" y="30">MyWebApp/</text>
                                    <line x1="70" y1="40" x2="70" y2="380" stroke="#ccc" stroke-width="1" />
                                    
                                    <text x="80" y="60">├── src/</text>
                                    <line x1="100" y1="70" x2="100" y2="120" stroke="#ccc" stroke-width="1" />
                                    <text x="110" y="90">├── main/</text>
                                    <line x1="130" y1="100" x2="130" y2="120" stroke="#ccc" stroke-width="1" />
                                    <text x="140" y="120">└── java/ (Javaソースコード)</text>
                                    
                                    <text x="80" y="150">├── WebContent/ (または webapp/)</text>
                                    <line x1="100" y1="160" x2="100" y2="300" stroke="#ccc" stroke-width="1" />
                                    
                                    <text x="110" y="180">├── META-INF/</text>
                                    <line x1="130" y1="190" x2="130" y2="210" stroke="#ccc" stroke-width="1" />
                                    <text x="140" y="210">└── MANIFEST.MF</text>
                                    
                                    <text x="110" y="240">├── WEB-INF/</text>
                                    <line x1="130" y1="250" x2="130" y2="330" stroke="#ccc" stroke-width="1" />
                                    <text x="140" y="270">├── web.xml (Webアプリケーション設定)</text>
                                    <text x="140" y="300">├── classes/ (コンパイルされたJavaクラス)</text>
                                    <text x="140" y="330">└── lib/ (外部ライブラリJAR)</text>
                                    
                                    <text x="110" y="360">└── （JSPファイル、HTML、CSS、JavaScript等）</text>
                                    
                                    <text x="80" y="390">└── pom.xml (MavenプロジェクトファイルまたはGradleファイル)</text>
                                </g>
                                <rect x="30" y="10" width="540" height="390" fill="none" stroke="#e0e0e0" stroke-width="1" rx="5" />
                            </svg>
                            <p class="text-center">図1.3: Webアプリケーションの基本ディレクトリ構造</p>
                        </div>

                        <p>各ディレクトリと主要ファイルの役割は以下の通りです：</p>

                        <div class="table-responsive">
                            <table class="table-example">
                                <tr>
                                    <th>ディレクトリ/ファイル</th>
                                    <th>説明</th>
                                </tr>
                                <tr>
                                    <td>src/main/java/</td>
                                    <td>Javaソースコード（Servletクラスなど）を格納するディレクトリ</td>
                                </tr>
                                <tr>
                                    <td>WebContent/ (または webapp/)</td>
                                    <td>Webコンテンツのルートディレクトリ</td>
                                </tr>
                                <tr>
                                    <td>META-INF/</td>
                                    <td>アプリケーションのメタデータを格納するディレクトリ</td>
                                </tr>
                                <tr>
                                    <td>WEB-INF/</td>
                                    <td>Webアプリケーションの設定ファイルやクラスを格納する非公開ディレクトリ（ブラウザから直接アクセスできない）</td>
                                </tr>
                                <tr>
                                    <td>WEB-INF/web.xml</td>
                                    <td>Webアプリケーションの設定ファイル（サーブレット宣言、URL マッピング、セキュリティ設定など）</td>
                                </tr>
                                <tr>
                                    <td>WEB-INF/classes/</td>
                                    <td>コンパイルされたJavaクラスファイルを格納するディレクトリ</td>
                                </tr>
                                <tr>
                                    <td>WEB-INF/lib/</td>
                                    <td>アプリケーションで使用する外部ライブラリ（JARファイル）を格納するディレクトリ</td>
                                </tr>
                                <tr>
                                    <td>JSP、HTML、CSS、JavaScript</td>
                                    <td>WebContentディレクトリの直下またはサブディレクトリに配置（ブラウザから直接アクセス可能）</td>
                                </tr>
                                <tr>
                                    <td>pom.xml (または build.gradle)</td>
                                    <td>Maven（またはGradle）プロジェクトの設定ファイル（依存関係管理など）</td>
                                </tr>
                            </table>
                        </div>

                        <h4>web.xmlファイルの基本構造</h4>
                        <p>web.xmlファイルはWebアプリケーションの設定ファイルで、サーブレットの登録やURLマッピングなどを定義します。以下は基本的なweb.xmlの例です：</p>

                        <code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns="https://jakarta.ee/xml/ns/jakartaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd"
         version="5.0"&gt;

    &lt;display-name&gt;My First Web Application&lt;/display-name&gt;
    
    &lt;!-- サーブレットの宣言 --&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;HelloServlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.example.HelloServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    
    &lt;!-- サーブレットとURLパスのマッピング --&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;HelloServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
    
    &lt;!-- セッションのタイムアウト設定（分単位） --&gt;
    &lt;session-config&gt;
        &lt;session-timeout&gt;30&lt;/session-timeout&gt;
    &lt;/session-config&gt;
    
    &lt;!-- ウェルカムファイル設定 --&gt;
    &lt;welcome-file-list&gt;
        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;
    
&lt;/web-app&gt;</code>

                        <div class="note">
                            <h5>注意: Jakarta EE 9以降のnamespace</h5>
                            <p>Tomcat 10以降（Jakarta EE 9以降）では、XMLのnamespaceが<code>javax.servlet</code>から<code>jakarta.ee</code>に変更されています。古いnamespaceを使用するとエラーが発生しますので注意してください。</p>
                        </div>

                        <h4>アノテーションベースの設定</h4>
                        <p>最近のJSP/Servletでは、web.xmlでの設定に加えて（または代わりに）Javaアノテーションを使用して設定することも一般的です。例えば：</p>

                        <code>package com.example;

import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;

@WebServlet("/hello")  // URLパターンをアノテーションで指定
public class HelloServlet extends HttpServlet {
    
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        out.println("&lt;!DOCTYPE html&gt;");
        out.println("&lt;html&gt;&lt;head&gt;&lt;title&gt;Hello Servlet&lt;/title&gt;&lt;/head&gt;");
        out.println("&lt;body&gt;");
        out.println("&lt;h1&gt;Hello from Servlet!&lt;/h1&gt;");
        out.println("&lt;/body&gt;&lt;/html&gt;");
    }
}</code>

                        <div class="exercise">
                            <h5>演習 1.5.1: シンプルなWebアプリケーションの作成</h5>
                            <ol>
                                <li>IDEで新しいWebアプリケーションプロジェクトを作成してください。</li>
                                <li>src/main/javaディレクトリにHelloServletクラスを作成してください（上記のコード例を参考に）。</li>
                                <li>WebContentディレクトリにindex.htmlファイルを作成し、HelloServletへのリンクを追加してください。</li>
                                <li>Tomcatサーバーでアプリケーションを実行し、ブラウザでアクセスできることを確認してください。</li>
                            </ol>
                        </div>
                    </section>

                    <section id="chapter1-quiz">
                        <h3 class="section-title">1.6 理解度確認テスト</h3>
                        <div class="quiz-container">
                            <h4>第1章の理解度チェック</h4>
                            <p>以下の問題に答えて、第1章の内容の理解度を確認しましょう。</p>
                            
                            <div class="quiz-question">
                                <p><strong>問題1:</strong> JSPとServletの関係について正しいものはどれですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1a" value="a">
                                    <label class="form-check-label" for="q1a">
                                        JSPとServletは全く異なる技術で、互いに関連性はない
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1b" value="b">
                                    <label class="form-check-label" for="q1b">
                                        JSPはHTMLの中にJavaコードを埋め込むテンプレート言語であり、実行時にServletに変換される
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1c" value="c">
                                        <label class="form-check-label" for="q1c">
                                        ServletはJSPをコンパイルするためのツールである
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1d" value="d">
                                        <label class="form-check-label" for="q1d">
                                        JSPはServletを簡略化したもので、複雑な処理はできない
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題2:</strong> Tomcat 10以降で正しいServletインポート文はどれですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2a" value="a">
                                    <label class="form-check-label" for="q2a">
                                        import javax.servlet.http.HttpServlet;
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2b" value="b">
                                    <label class="form-check-label" for="q2b">
                                        import jakarta.servlet.http.HttpServlet;
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2c" value="c">
                                        <label class="form-check-label" for="q2c">
                                        import apache.tomcat.servlet.HttpServlet;
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2d" value="d">
                                        <label class="form-check-label" for="q2d">
                                        import java.servlet.http.HttpServlet;
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題3:</strong> Webアプリケーションのディレクトリ構造で、ブラウザから直接アクセスできないディレクトリはどれですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3a" value="a">
                                    <label class="form-check-label" for="q3a">
                                        WebContent/images/
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3b" value="b">
                                    <label class="form-check-label" for="q3b">
                                        WebContent/css/
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3c" value="c">
                                        <label class="form-check-label" for="q3c">
                                        WebContent/WEB-INF/
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3d" value="d">
                                        <label class="form-check-label" for="q3d">
                                        WebContent/META-INF/
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題4:</strong> Servletクラスに@WebServletアノテーションを使用する理由は何ですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4a" value="a">
                                    <label class="form-check-label" for="q4a">
                                        データベース接続情報を指定するため
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4b" value="b">
                                    <label class="form-check-label" for="q4b">
                                        URLパターンとサーブレットのマッピングをweb.xmlなしで設定するため
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4c" value="c">
                                        <label class="form-check-label" for="q4c">
                                        Javaのバージョンを指定するため
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4d" value="d">
                                        <label class="form-check-label" for="q4d">
                                        コンパイル時の最適化を指示するため
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題5:</strong> JSP/Servletアプリケーション開発に必要なコンポーネントの組み合わせとして正しいものはどれですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5a" value="a">
                                    <label class="form-check-label" for="q5a">
                                        JDK, Node.js, MongoDB
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5b" value="b">
                                    <label class="form-check-label" for="q5b">
                                        JDK, Apache Tomcat, IDE（Eclipse/IntelliJ）
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5c" value="c">
                                        <label class="form-check-label" for="q5c">
                                        JDK, Apache HTTP Server, MySQL
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5d" value="d">
                                        <label class="form-check-label" for="q5d">
                                        Python, Apache Tomcat, Eclipse
                                    </label>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary mt-3" id="checkAnswers">回答を確認</button>
                            <div id="quizResults" class="mt-3 d-none">
                                <div class="alert alert-success">
                                    <h5>正解:</h5>
                                    <ol>
                                        <li>b（JSPはHTMLの中にJavaコードを埋め込むテンプレート言語であり、実行時にServletに変換される）</li>
                                        <li>b（import jakarta.servlet.http.HttpServlet;）</li>
                                        <li>c（WebContent/WEB-INF/）</li>
                                        <li>b（URLパターンとサーブレットのマッピングをweb.xmlなしで設定するため）</li>
                                        <li>b（JDK, Apache Tomcat, IDE（Eclipse/IntelliJ））</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section id="next-steps">
                        <h3 class="section-title">次のステップ</h3>
                        <p>この章では、JSP/Servlet開発に必要な環境構築と基本的なWebアプリケーション構造について学びました。次の章では、Servletの基本とHTTPリクエスト/レスポンスの処理方法について詳しく学んでいきます。</p>
                        <p>実際に開発環境を設定し、シンプルなWebアプリケーションを作成・実行することで、この章の内容をしっかりと身につけましょう。</p>
                        <div class="note">
                            <h5>推奨される追加学習</h5>
                            <ul>
                                <li><strong>Jakarta EEのドキュメント</strong>：<a href="https://jakarta.ee/specifications/servlet/" target="_blank">Jakarta Servlet Specification</a></li>
                                <li><strong>Apache Tomcatのドキュメント</strong>：<a href="https://tomcat.apache.org/tomcat-10.0-doc/index.html" target="_blank">Apache Tomcat 10 Documentation</a></li>
                                <li><strong>Mavenによるプロジェクト管理</strong>：<a href="https://maven.apache.org/guides/getting-started/index.html" target="_blank">Maven Getting Started Guide</a></li>
                            </ul>
                        </div>
                    </section>
                </section>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center py-4">
        <div class="container">
            <p class="mb-0">Copyright © 2025 F-Circle All rights reserved.</p>
        </div>
    </footer>

    <!-- Bootstrap JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 理解度テストの回答確認ボタンの処理
        document.getElementById('checkAnswers').addEventListener('click', function() {
            document.getElementById('quizResults').classList.remove('d-none');
        });
    </script>
</body>
</html>