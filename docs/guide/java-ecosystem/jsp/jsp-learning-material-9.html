<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSPå­¦ç¿’æ•™æ ç¬¬9ç«  - ç°¡æ˜“Webã‚¢ãƒ—ãƒªé–‹ç™º</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        .navbar {
            background-color: #f57c00;
        }

        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
            background-color: #f8f9fa;
        }

        .chapter-title {
            color: #f57c00;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #f57c00;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #ff9800;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        .sub-section-title {
            color: #666;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            border-left: 4px solid #f57c00;
            padding-left: 0.8rem;
        }

        .highlight {
            background-color: #fff3e0;
            border: 1px solid #ffb74d;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .exercise-container {
            background-color: #e8f5e8;
            border: 1px solid #81c784;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .quiz-container {
            background-color: #e3f2fd;
            border: 1px solid #64b5f6;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .code-block {
            background-color: #2d3748;
            color: #e2e8f0;
            border-radius: 5px;
            padding: 1rem;
            overflow-x: auto;
            margin: 0.5rem 0;
        }

        .code-inline {
            background-color: #f5f5f5;
            color: #d73502;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }

        .nav-link {
            color: #666 !important;
        }

        .nav-link.active {
            color: #f57c00 !important;
            font-weight: bold;
        }

        .btn-primary {
            background-color: #f57c00;
            border-color: #f57c00;
        }

        .btn-primary:hover {
            background-color: #e65100;
            border-color: #e65100;
        }

        .alert-info {
            background-color: #e3f2fd;
            border-color: #81d4fa;
            color: #0277bd;
        }

        .alert-warning {
            background-color: #fff3e0;
            border-color: #ffcc02;
            color: #e65100;
        }

        .alert-success {
            background-color: #e8f5e8;
            border-color: #81c784;
            color: #2e7d32;
        }

        pre {
            white-space: pre-wrap;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f57c00;
            color: white;
        }

        .architecture-diagram {
            background-color: #f9f9f9;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 2rem;
            margin: 1rem 0;
            text-align: center;
        }

        .file-structure {
            background-color: #f5f5f5;
            border-left: 4px solid #f57c00;
            padding: 1rem;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand">
                <strong>JSPå­¦ç¿’æ•™æ</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>å­¦ç¿’ç« </span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-1.html">
                                ç¬¬1ç« : äº‹å‰æº–å‚™
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-2.html">
                                ç¬¬2ç« : JSPã®åŸºæœ¬ç†è§£
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-3.html">
                                ç¬¬3ç« : ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã¨å¼
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-4.html">
                                ç¬¬4ç« : ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-5.html">
                                ç¬¬5ç« : ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‡¦ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-6.html">
                                ç¬¬6ç« : JSPã¨JavaBeans
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-7.html">
                                ç¬¬7ç« : ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã‚¹ã‚³ãƒ¼ãƒ—
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-8.html">
                                ç¬¬8ç« : ELï¼ˆå¼è¨€èªï¼‰ã¨JSTLå…¥é–€
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="jsp-learning-material-9.html">
                                ç¬¬9ç« : ç°¡æ˜“Webã‚¢ãƒ—ãƒªé–‹ç™º
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-10.html">
                                ç¬¬10ç« : æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸ã®ã‚¬ã‚¤ãƒ‰
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">ç¬¬9ç« : ç°¡æ˜“Webã‚¢ãƒ—ãƒªé–‹ç™º</h1>
                </div>

                <div id="chapter9">
                    <h2 class="chapter-title">ç°¡æ˜“Webã‚¢ãƒ—ãƒªé–‹ç™º</h2>
                    
                    <div class="highlight">
                        <h5>ã“ã®ç« ã§å­¦ã¶ã“ã¨</h5>
                        <ul>
                            <li>MVCãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç†è§£ã¨å®Ÿè£…æ–¹æ³•</li>
                            <li>JSPã€Servletã€JavaBeansã®é©åˆ‡ãªå½¹å‰²åˆ†æ‹…</li>
                            <li>ãƒ•ã‚©ãƒ¼ãƒ å‡¦ç†ã®å®Ÿè£…æ–¹æ³•</li>
                            <li>ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å‡¦ç†ã®å®Ÿè£…æ–¹æ³•</li>
                            <li>å®Ÿè·µçš„ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®åŸºæœ¬ãƒ•ãƒ­ãƒ¼</li>
                            <li>ã“ã‚Œã¾ã§å­¦ã‚“ã æŠ€è¡“ã®çµ±åˆ</li>
                        </ul>
                    </div>

                    <h3 class="section-title">9.1 MVCã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ç†è§£</h3>
                    <p>
                        <strong>MVCï¼ˆModel-View-Controllerï¼‰</strong>ã¯ã€Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«ãŠã„ã¦
                        åºƒãæ¡ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚è²¬ä»»ã‚’æ˜ç¢ºã«åˆ†é›¢ã™ã‚‹ã“ã¨ã§ã€
                        ä¿å®ˆæ€§ã¨æ‹¡å¼µæ€§ã®é«˜ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚
                    </p>

                    <div class="architecture-diagram">
                        <div class="mermaid">
                            graph TD
                                A[ãƒ¦ãƒ¼ã‚¶ãƒ¼] -->|ãƒªã‚¯ã‚¨ã‚¹ãƒˆ| B[Controller<br/>Servlet]
                                B -->|ãƒ‡ãƒ¼ã‚¿å‡¦ç†è¦æ±‚| C[Model<br/>JavaBeans/DAO]
                                C -->|ãƒ‡ãƒ¼ã‚¿| B
                                B -->|ãƒ‡ãƒ¼ã‚¿è»¢é€| D[View<br/>JSP]
                                D -->|ãƒ¬ã‚¹ãƒãƒ³ã‚¹| A
                                
                                style B fill:#ffb74d
                                style C fill:#81c784
                                style D fill:#64b5f6
                        </div>
                    </div>

                    <table>
                        <tr>
                            <th>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</th>
                            <th>å½¹å‰²</th>
                            <th>å®Ÿè£…æŠ€è¡“</th>
                            <th>è²¬ä»»</th>
                        </tr>
                        <tr>
                            <td><strong>Model</strong></td>
                            <td>ãƒ‡ãƒ¼ã‚¿ã¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯</td>
                            <td>JavaBeans, DAO</td>
                            <td>ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ãƒ»å‡¦ç†</td>
                        </tr>
                        <tr>
                            <td><strong>View</strong></td>
                            <td>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹</td>
                            <td>JSP, HTML, CSS</td>
                            <td>ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤º</td>
                        </tr>
                        <tr>
                            <td><strong>Controller</strong></td>
                            <td>åˆ¶å¾¡ãƒ»èª¿æ•´</td>
                            <td>Servlet</td>
                            <td>ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ãƒ»ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡</td>
                        </tr>
                    </table>

                    <h3 class="section-title">9.2 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã¨ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ </h3>
                    <p>
                        å®Ÿè·µçš„ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€Œã‚¿ã‚¹ã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚
                        ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã§é–‹ç™ºã‚’é€²ã‚ã¾ã™ã€‚
                    </p>

                    <div class="file-structure">
                        <h6>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ </h6>
                        <pre><code>webapp/
â”œâ”€â”€ WEB-INF/
â”‚   â”œâ”€â”€ web.xml
â”‚   â””â”€â”€ classes/
â”‚       â”œâ”€â”€ Task.java (Model)
â”‚       â”œâ”€â”€ TaskDAO.java (Data Access Object)
â”‚       â””â”€â”€ TaskController.java (Controller)
â”œâ”€â”€ css/
â”‚   â””â”€â”€ style.css
â”œâ”€â”€ index.jsp (ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸)
â”œâ”€â”€ task-list.jsp (ã‚¿ã‚¹ã‚¯ä¸€è¦§)
â”œâ”€â”€ task-form.jsp (ã‚¿ã‚¹ã‚¯ç™»éŒ²ãƒ»ç·¨é›†)
â””â”€â”€ task-detail.jsp (ã‚¿ã‚¹ã‚¯è©³ç´°)
</code></pre>
                    </div>

                    <h3 class="section-title">9.3 Modelã®å®Ÿè£…ï¼ˆJavaBeans + DAOï¼‰</h3>
                    
                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 9-1: Taskãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¹ã®ä½œæˆ</h5>
                        <p>ã‚¿ã‚¹ã‚¯æƒ…å ±ã‚’ç®¡ç†ã™ã‚‹JavaBeansã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
                        
                        <h6>1. Taskã‚¯ãƒ©ã‚¹ï¼ˆsrc/Task.javaï¼‰ã‚’ä½œæˆ</h6>
                        <pre class="code-block"><code class="language-java">import java.io.Serializable;
import java.util.Date;

public class Task implements Serializable {
    private int id;
    private String title;
    private String description;
    private String priority;
    private String status;
    private Date createdDate;
    private Date dueDate;
    private boolean completed;
    
    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿
    public Task() {
        this.createdDate = new Date();
        this.status = "æ–°è¦";
        this.completed = false;
    }
    
    // ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ä»˜ãï¼‰
    public Task(String title, String description) {
        this();
        this.title = title;
        this.description = description;
    }
    
    // getter/setterãƒ¡ã‚½ãƒƒãƒ‰
    public int getId() { return id; }
    public void setId(int id) { this.id = id; }
    
    public String getTitle() { return title; }
    public void setTitle(String title) { this.title = title; }
    
    public String getDescription() { return description; }
    public void setDescription(String description) { this.description = description; }
    
    public String getPriority() { return priority; }
    public void setPriority(String priority) { this.priority = priority; }
    
    public String getStatus() { return status; }
    public void setStatus(String status) { this.status = status; }
    
    public Date getCreatedDate() { return createdDate; }
    public void setCreatedDate(Date createdDate) { this.createdDate = createdDate; }
    
    public Date getDueDate() { return dueDate; }
    public void setDueDate(Date dueDate) { this.dueDate = dueDate; }
    
    public boolean isCompleted() { return completed; }
    public void setCompleted(boolean completed) { 
        this.completed = completed; 
        this.status = completed ? "å®Œäº†" : "é€²è¡Œä¸­";
    }
    
    // ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãƒ¡ã‚½ãƒƒãƒ‰
    public String getPriorityColor() {
        switch (priority) {
            case "é«˜": return "red";
            case "ä¸­": return "orange";
            case "ä½": return "green";
            default: return "gray";
        }
    }
    
    public boolean isOverdue() {
        if (dueDate == null || completed) return false;
        return new Date().after(dueDate);
    }
    
    public String getFormattedInfo() {
        return String.format("[%s] %s - %s", priority, title, status);
    }
}</code></pre>

                        <h6>2. TaskDAOã‚¯ãƒ©ã‚¹ï¼ˆsrc/TaskDAO.javaï¼‰ã‚’ä½œæˆ</h6>
                        <pre class="code-block"><code class="language-java">import java.util.*;
import java.text.SimpleDateFormat;

public class TaskDAO {
    // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä»£ã‚ã‚Šã«ãƒ¡ãƒ¢ãƒªå†…ã§ã‚¿ã‚¹ã‚¯ã‚’ç®¡ç†
    private static Map&lt;Integer, Task&gt; tasks = new HashMap&lt;&gt;();
    private static int nextId = 1;
    
    // é™çš„åˆæœŸåŒ–ã§ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ
    static {
        Task task1 = new Task("ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè³‡æ–™ä½œæˆ", "æ¥é€±ã®ãƒ—ãƒ¬ã‚¼ãƒ³ç”¨è³‡æ–™ã‚’ä½œæˆã™ã‚‹");
        task1.setPriority("é«˜");
        task1.setDueDate(getDateFromString("2024-01-15"));
        addTask(task1);
        
        Task task2 = new Task("ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ", "æ–°æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã™ã‚‹");
        task2.setPriority("ä¸­");
        task2.setStatus("é€²è¡Œä¸­");
        task2.setDueDate(getDateFromString("2024-01-20"));
        addTask(task2);
        
        Task task3 = new Task("ä¼šè­°è³‡æ–™æº–å‚™", "æœˆæ¬¡å ±å‘Šä¼šã®æº–å‚™");
        task3.setPriority("ä½");
        task3.setCompleted(true);
        addTask(task3);
    }
    
    // ã‚¿ã‚¹ã‚¯ã®è¿½åŠ 
    public static void addTask(Task task) {
        task.setId(nextId++);
        tasks.put(task.getId(), task);
    }
    
    // ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ã‚’å–å¾—
    public static List&lt;Task&gt; getAllTasks() {
        return new ArrayList&lt;&gt;(tasks.values());
    }
    
    // IDã§ã‚¿ã‚¹ã‚¯ã‚’å–å¾—
    public static Task getTaskById(int id) {
        return tasks.get(id);
    }
    
    // ã‚¿ã‚¹ã‚¯ã®æ›´æ–°
    public static boolean updateTask(Task task) {
        if (tasks.containsKey(task.getId())) {
            tasks.put(task.getId(), task);
            return true;
        }
        return false;
    }
    
    // ã‚¿ã‚¹ã‚¯ã®å‰Šé™¤
    public static boolean deleteTask(int id) {
        return tasks.remove(id) != null;
    }
    
    // å„ªå…ˆåº¦ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
    public static List&lt;Task&gt; getTasksByPriority(String priority) {
        List&lt;Task&gt; filtered = new ArrayList&lt;&gt;();
        for (Task task : tasks.values()) {
            if (priority.equals(task.getPriority())) {
                filtered.add(task);
            }
        }
        return filtered;
    }
    
    // å®Œäº†çŠ¶æ…‹ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
    public static List&lt;Task&gt; getTasksByStatus(boolean completed) {
        List&lt;Task&gt; filtered = new ArrayList&lt;&gt;();
        for (Task task : tasks.values()) {
            if (task.isCompleted() == completed) {
                filtered.add(task);
            }
        }
        return filtered;
    }
    
    // çµ±è¨ˆæƒ…å ±ã®å–å¾—
    public static Map&lt;String, Integer&gt; getTaskStatistics() {
        Map&lt;String, Integer&gt; stats = new HashMap&lt;&gt;();
        stats.put("total", tasks.size());
        stats.put("completed", getTasksByStatus(true).size());
        stats.put("pending", getTasksByStatus(false).size());
        
        // å„ªå…ˆåº¦åˆ¥çµ±è¨ˆ
        stats.put("high", getTasksByPriority("é«˜").size());
        stats.put("medium", getTasksByPriority("ä¸­").size());
        stats.put("low", getTasksByPriority("ä½").size());
        
        return stats;
    }
    
    // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ¡ã‚½ãƒƒãƒ‰
    private static Date getDateFromString(String dateStr) {
        try {
            SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
            return sdf.parse(dateStr);
        } catch (Exception e) {
            return new Date();
        }
    }
}</code></pre>

                        <h6>æœŸå¾…ã•ã‚Œã‚‹çµæœ</h6>
                        <p>
                            ã‚¿ã‚¹ã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã™ã‚‹Modelã‚¯ãƒ©ã‚¹ã¨DAOã‚¯ãƒ©ã‚¹ãŒä½œæˆã•ã‚Œã€
                            CRUDã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆä½œæˆãƒ»èª­å–ãƒ»æ›´æ–°ãƒ»å‰Šé™¤ï¼‰ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚
                        </p>
                    </div>

                    <h3 class="section-title">9.4 Viewã®å®Ÿè£…ï¼ˆJSPï¼‰</h3>
                    
                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 9-2: ã‚¿ã‚¹ã‚¯ä¸€è¦§ãƒšãƒ¼ã‚¸ã®ä½œæˆ</h5>
                        <p>ELã¨JSTLã‚’æ´»ç”¨ã—ãŸã‚¿ã‚¹ã‚¯ä¸€è¦§è¡¨ç¤ºãƒšãƒ¼ã‚¸ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
                        
                        <h6>1. CSSã‚¹ã‚¿ã‚¤ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆcss/style.cssï¼‰ã‚’ä½œæˆ</h6>
                        <pre class="code-block"><code class="language-css">/* ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒªã®ã‚¹ã‚¿ã‚¤ãƒ« */
body {
    font-family: 'Arial', sans-serif;
    margin: 0;
    padding: 20px;
    background-color: #f5f5f5;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    background-color: white;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.header {
    text-align: center;
    color: #333;
    margin-bottom: 2rem;
}

.stats {
    display: flex;
    justify-content: space-around;
    margin-bottom: 2rem;
}

.stat-card {
    background: #e3f2fd;
    padding: 1rem;
    border-radius: 8px;
    text-align: center;
    min-width: 120px;
}

.stat-number {
    font-size: 2rem;
    font-weight: bold;
    color: #1976d2;
}

.task-table {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0;
}

.task-table th,
.task-table td {
    border: 1px solid #ddd;
    padding: 12px;
    text-align: left;
}

.task-table th {
    background-color: #f57c00;
    color: white;
}

.priority-high { color: red; font-weight: bold; }
.priority-medium { color: orange; font-weight: bold; }
.priority-low { color: green; font-weight: bold; }

.status-completed { background-color: #e8f5e8; }
.status-overdue { background-color: #ffebee; }

.btn {
    padding: 8px 16px;
    margin: 0 4px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    text-decoration: none;
    display: inline-block;
}

.btn-primary { background-color: #2196f3; color: white; }
.btn-success { background-color: #4caf50; color: white; }
.btn-warning { background-color: #ff9800; color: white; }
.btn-danger { background-color: #f44336; color: white; }

.form-group {
    margin-bottom: 1rem;
}

.form-group label {
    display: block;
    margin-bottom: 4px;
    font-weight: bold;
}

.form-control {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
}
</code></pre>

                        <h6>2. ã‚¿ã‚¹ã‚¯ä¸€è¦§ãƒšãƒ¼ã‚¸ï¼ˆtask-list.jspï¼‰ã‚’ä½œæˆ</h6>
                        <pre class="code-block"><code class="language-jsp">&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;
&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %&gt;
&lt;%@ page import="java.util.*, TaskDAO" %&gt;
&lt;%
    // ã‚¿ã‚¹ã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆå±æ€§ã«è¨­å®š
    List&lt;Task&gt; tasks = TaskDAO.getAllTasks();
    Map&lt;String, Integer&gt; stats = TaskDAO.getTaskStatistics();
    
    request.setAttribute("tasks", tasks);
    request.setAttribute("stats", stats);
%&gt;

&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - ã‚¿ã‚¹ã‚¯ä¸€è¦§&lt;/title&gt;
    &lt;link rel="stylesheet" href="css/style.css"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;div class="header"&gt;
            &lt;h1&gt;ğŸ“‹ ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ &lt;/h1&gt;
            &lt;p&gt;åŠ¹ç‡çš„ãªã‚¿ã‚¹ã‚¯ç®¡ç†ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æˆåŠŸã«å°ãã¾ã—ã‚‡ã†&lt;/p&gt;
        &lt;/div&gt;

        &lt;!-- çµ±è¨ˆæƒ…å ±è¡¨ç¤º --&gt;
        &lt;div class="stats"&gt;
            &lt;div class="stat-card"&gt;
                &lt;div class="stat-number"&gt;${stats.total}&lt;/div&gt;
                &lt;div&gt;ç·ã‚¿ã‚¹ã‚¯æ•°&lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="stat-card"&gt;
                &lt;div class="stat-number"&gt;${stats.completed}&lt;/div&gt;
                &lt;div&gt;å®Œäº†æ¸ˆã¿&lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="stat-card"&gt;
                &lt;div class="stat-number"&gt;${stats.pending}&lt;/div&gt;
                &lt;div&gt;æœªå®Œäº†&lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="stat-card"&gt;
                &lt;div class="stat-number"&gt;&lt;fmt:formatNumber value="${(stats.completed / stats.total) * 100}" maxFractionDigits="0"/&gt;%&lt;/div&gt;
                &lt;div&gt;é€²æ—ç‡&lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;!-- ã‚¿ã‚¹ã‚¯æ“ä½œãƒœã‚¿ãƒ³ --&gt;
        &lt;div style="margin-bottom: 1rem; text-align: right;"&gt;
            &lt;a href="task-form.jsp" class="btn btn-primary"&gt;â• æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ &lt;/a&gt;
        &lt;/div&gt;

        &lt;!-- ã‚¿ã‚¹ã‚¯ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ« --&gt;
        &lt;table class="task-table"&gt;
            &lt;thead&gt;
                &lt;tr&gt;
                    &lt;th&gt;ID&lt;/th&gt;
                    &lt;th&gt;ã‚¿ã‚¤ãƒˆãƒ«&lt;/th&gt;
                    &lt;th&gt;èª¬æ˜&lt;/th&gt;
                    &lt;th&gt;å„ªå…ˆåº¦&lt;/th&gt;
                    &lt;th&gt;ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹&lt;/th&gt;
                    &lt;th&gt;ä½œæˆæ—¥&lt;/th&gt;
                    &lt;th&gt;æœŸé™&lt;/th&gt;
                    &lt;th&gt;æ“ä½œ&lt;/th&gt;
                &lt;/tr&gt;
            &lt;/thead&gt;
            &lt;tbody&gt;
                &lt;c:choose&gt;
                    &lt;c:when test="${empty tasks}"&gt;
                        &lt;tr&gt;
                            &lt;td colspan="8" style="text-align: center; padding: 2rem; color: #666;"&gt;
                                ğŸ“ ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Šã¾ã›ã‚“ã€‚æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
                            &lt;/td&gt;
                        &lt;/tr&gt;
                    &lt;/c:when&gt;
                    &lt;c:otherwise&gt;
                        &lt;c:forEach var="task" items="${tasks}" varStatus="status"&gt;
                            &lt;tr class="&lt;c:if test='${task.completed}'&gt;status-completed&lt;/c:if&gt;&lt;c:if test='${task.overdue and !task.completed}'&gt;status-overdue&lt;/c:if&gt;"&gt;
                                &lt;td&gt;${task.id}&lt;/td&gt;
                                &lt;td&gt;
                                    &lt;strong&gt;${task.title}&lt;/strong&gt;
                                    &lt;c:if test="${task.overdue and !task.completed}"&gt;
                                        &lt;span style="color: red; font-size: 0.8em;"&gt; âš ï¸ æœŸé™åˆ‡ã‚Œ&lt;/span&gt;
                                    &lt;/c:if&gt;
                                &lt;/td&gt;
                                &lt;td&gt;${task.description}&lt;/td&gt;
                                &lt;td class="priority-&lt;c:choose&gt;&lt;c:when test='${task.priority == \"é«˜\"}'&gt;high&lt;/c:when&gt;&lt;c:when test='${task.priority == \"ä¸­\"}'&gt;medium&lt;/c:when&gt;&lt;c:otherwise&gt;low&lt;/c:otherwise&gt;&lt;/c:choose&gt;"&gt;
                                    ${task.priority}
                                &lt;/td&gt;
                                &lt;td&gt;
                                    &lt;c:choose&gt;
                                        &lt;c:when test="${task.completed}"&gt;
                                            âœ… ${task.status}
                                        &lt;/c:when&gt;
                                        &lt;c:otherwise&gt;
                                            ğŸ”„ ${task.status}
                                        &lt;/c:otherwise&gt;
                                    &lt;/c:choose&gt;
                                &lt;/td&gt;
                                &lt;td&gt;&lt;fmt:formatDate value="${task.createdDate}" pattern="MM/dd" /&gt;&lt;/td&gt;
                                &lt;td&gt;
                                    &lt;c:choose&gt;
                                        &lt;c:when test="${task.dueDate != null}"&gt;
                                            &lt;fmt:formatDate value="${task.dueDate}" pattern="MM/dd" /&gt;
                                        &lt;/c:when&gt;
                                        &lt;c:otherwise&gt;
                                            æœªè¨­å®š
                                        &lt;/c:otherwise&gt;
                                    &lt;/c:choose&gt;
                                &lt;/td&gt;
                                &lt;td&gt;
                                    &lt;a href="task-detail.jsp?id=${task.id}" class="btn btn-primary"&gt;è©³ç´°&lt;/a&gt;
                                    &lt;a href="task-form.jsp?id=${task.id}" class="btn btn-warning"&gt;ç·¨é›†&lt;/a&gt;
                                    &lt;c:choose&gt;
                                        &lt;c:when test="${task.completed}"&gt;
                                            &lt;a href="#" class="btn btn-success"&gt;å®Œäº†æ¸ˆã¿&lt;/a&gt;
                                        &lt;/c:when&gt;
                                        &lt;c:otherwise&gt;
                                            &lt;a href="javascript:completeTask(${task.id})" class="btn btn-success"&gt;å®Œäº†&lt;/a&gt;
                                        &lt;/c:otherwise&gt;
                                    &lt;/c:choose&gt;
                                &lt;/td&gt;
                            &lt;/tr&gt;
                        &lt;/c:forEach&gt;
                    &lt;/c:otherwise&gt;
                &lt;/c:choose&gt;
            &lt;/tbody&gt;
        &lt;/table&gt;

        &lt;!-- ãƒ•ãƒƒã‚¿ãƒ¼æƒ…å ± --&gt;
        &lt;div style="margin-top: 2rem; text-align: center; color: #666; border-top: 1px solid #ddd; padding-top: 1rem;"&gt;
            &lt;p&gt;ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  | æœ€çµ‚æ›´æ–°: &lt;fmt:formatDate value="${now}" pattern="yyyyå¹´MMæœˆddæ—¥ HH:mm" /&gt;&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;script&gt;
        function completeTask(taskId) {
            if (confirm('ã“ã®ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã«ã—ã¾ã™ã‹ï¼Ÿ')) {
                // å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€Controllerã«å‡¦ç†ã‚’å§”è­²
                location.href = 'task-controller.jsp?action=complete&amp;id=' + taskId;
            }
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®ç¾åœ¨æ™‚åˆ»ã‚’è¨­å®š
        window.onload = function() {
            &lt;% request.setAttribute("now", new java.util.Date()); %&gt;
        }
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                        <h6>æœŸå¾…ã•ã‚Œã‚‹çµæœ</h6>
                        <p>
                            ç¾ã—ã„çµ±è¨ˆæƒ…å ±ã¨ã‚¿ã‚¹ã‚¯ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã€å„ªå…ˆåº¦ã‚„å®Œäº†çŠ¶æ…‹ã«å¿œã˜ãŸè‰²åˆ†ã‘ãŒè¡Œã‚ã‚Œã¾ã™ã€‚
                            ELã¨JSTLã‚’æ´»ç”¨ã—ãŸæ¡ä»¶åˆ†å²ã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå‡¦ç†ãŒç¢ºèªã§ãã¾ã™ã€‚
                        </p>
                    </div>

                    <h3 class="section-title">9.5 Controllerã®å®Ÿè£…æ¦‚å¿µ</h3>
                    <p>
                        å®Ÿéš›ã®é–‹ç™ºã§ã¯<strong>Servlet</strong>ã‚’Controllerã¨ã—ã¦ä½¿ç”¨ã—ã¾ã™ãŒã€
                        ã“ã®å­¦ç¿’æ•™æã§ã¯åŸºæœ¬çš„ãªJSPæŠ€è¡“ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã„ã¾ã™ã€‚
                        Controllerã®å½¹å‰²ã¨å®Ÿè£…æ¦‚å¿µã‚’ç†è§£ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
                    </p>

                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 9-3: ç°¡æ˜“Controllerã®å®Ÿè£…</h5>
                        <p>JSPã‚’ä½¿ç”¨ã—ãŸç°¡æ˜“çš„ãªControllerå‡¦ç†ã‚’å®Ÿè£…ã—ã¾ã™ã€‚</p>
                        
                        <h6>ã‚¿ã‚¹ã‚¯Controller JSPï¼ˆtask-controller.jspï¼‰ã‚’ä½œæˆ</h6>
                        <pre class="code-block"><code class="language-jsp">&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;
&lt;%@ page import="java.util.*, TaskDAO, Task" %&gt;
&lt;%
    // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å–å¾—
    String action = request.getParameter("action");
    String idStr = request.getParameter("id");
    String message = "";
    String messageType = "success";
    
    try {
        if ("complete".equals(action) && idStr != null) {
            // ã‚¿ã‚¹ã‚¯å®Œäº†å‡¦ç†
            int id = Integer.parseInt(idStr);
            Task task = TaskDAO.getTaskById(id);
            if (task != null) {
                task.setCompleted(true);
                TaskDAO.updateTask(task);
                message = "ã‚¿ã‚¹ã‚¯ã€Œ" + task.getTitle() + "ã€ã‚’å®Œäº†ã—ã¾ã—ãŸã€‚";
            } else {
                message = "æŒ‡å®šã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚";
                messageType = "error";
            }
            
        } else if ("delete".equals(action) && idStr != null) {
            // ã‚¿ã‚¹ã‚¯å‰Šé™¤å‡¦ç†
            int id = Integer.parseInt(idStr);
            Task task = TaskDAO.getTaskById(id);
            if (task != null) {
                String title = task.getTitle();
                if (TaskDAO.deleteTask(id)) {
                    message = "ã‚¿ã‚¹ã‚¯ã€Œ" + title + "ã€ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚";
                } else {
                    message = "ã‚¿ã‚¹ã‚¯ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚";
                    messageType = "error";
                }
            } else {
                message = "æŒ‡å®šã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚";
                messageType = "error";
            }
            
        } else if ("add".equals(action)) {
            // ã‚¿ã‚¹ã‚¯è¿½åŠ å‡¦ç†
            String title = request.getParameter("title");
            String description = request.getParameter("description");
            String priority = request.getParameter("priority");
            
            if (title != null && !title.trim().isEmpty()) {
                Task newTask = new Task(title.trim(), description != null ? description.trim() : "");
                if (priority != null && !priority.trim().isEmpty()) {
                    newTask.setPriority(priority);
                }
                TaskDAO.addTask(newTask);
                message = "æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã€Œ" + title + "ã€ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚";
            } else {
                message = "ã‚¿ã‚¤ãƒˆãƒ«ã¯å¿…é ˆã§ã™ã€‚";
                messageType = "error";
            }
            
        } else if ("update".equals(action) && idStr != null) {
            // ã‚¿ã‚¹ã‚¯æ›´æ–°å‡¦ç†
            int id = Integer.parseInt(idStr);
            Task task = TaskDAO.getTaskById(id);
            if (task != null) {
                String title = request.getParameter("title");
                String description = request.getParameter("description");
                String priority = request.getParameter("priority");
                
                if (title != null && !title.trim().isEmpty()) {
                    task.setTitle(title.trim());
                    task.setDescription(description != null ? description.trim() : "");
                    if (priority != null && !priority.trim().isEmpty()) {
                        task.setPriority(priority);
                    }
                    TaskDAO.updateTask(task);
                    message = "ã‚¿ã‚¹ã‚¯ã€Œ" + title + "ã€ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚";
                } else {
                    message = "ã‚¿ã‚¤ãƒˆãƒ«ã¯å¿…é ˆã§ã™ã€‚";
                    messageType = "error";
                }
            } else {
                message = "æŒ‡å®šã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚";
                messageType = "error";
            }
        } else {
            message = "ç„¡åŠ¹ãªæ“ä½œã§ã™ã€‚";
            messageType = "error";
        }
        
    } catch (NumberFormatException e) {
        message = "ç„¡åŠ¹ãªIDãŒæŒ‡å®šã•ã‚Œã¾ã—ãŸã€‚";
        messageType = "error";
    } catch (Exception e) {
        message = "å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: " + e.getMessage();
        messageType = "error";
    }
    
    // ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¿å­˜ã—ã¦ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
    session.setAttribute("message", message);
    session.setAttribute("messageType", messageType);
    
    // ã‚¿ã‚¹ã‚¯ä¸€è¦§ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
    response.sendRedirect("task-list.jsp");
%&gt;</code></pre>

                        <h6>æœŸå¾…ã•ã‚Œã‚‹çµæœ</h6>
                        <p>
                            ã‚¿ã‚¹ã‚¯ã®å®Œäº†ã€å‰Šé™¤ã€è¿½åŠ ã€æ›´æ–°å‡¦ç†ãŒå®Ÿè£…ã•ã‚Œã€é©åˆ‡ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨å…±ã«
                            ã‚¿ã‚¹ã‚¯ä¸€è¦§ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã¾ã™ã€‚ã“ã‚ŒãŒControllerã®åŸºæœ¬çš„ãªå½¹å‰²ã§ã™ã€‚
                        </p>
                    </div>

                    <h3 class="section-title">9.6 ãƒ•ã‚©ãƒ¼ãƒ å‡¦ç†ã®å®Ÿè£…</h3>
                    
                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 9-4: ã‚¿ã‚¹ã‚¯ç™»éŒ²ãƒ»ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ ã®ä½œæˆ</h5>
                        <p>æ–°è¦ã‚¿ã‚¹ã‚¯ã®ç™»éŒ²ã¨æ—¢å­˜ã‚¿ã‚¹ã‚¯ã®ç·¨é›†ã‚’è¡Œã†ãƒ•ã‚©ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
                        
                        <h6>ã‚¿ã‚¹ã‚¯ãƒ•ã‚©ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ï¼ˆtask-form.jspï¼‰ã‚’ä½œæˆ</h6>
                        <pre class="code-block"><code class="language-jsp">&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;
&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %&gt;
&lt;%@ page import="TaskDAO, Task" %&gt;
&lt;%
    String idStr = request.getParameter("id");
    boolean isEdit = false;
    Task task = null;
    
    if (idStr != null) {
        try {
            int id = Integer.parseInt(idStr);
            task = TaskDAO.getTaskById(id);
            isEdit = (task != null);
        } catch (NumberFormatException e) {
            // ç„¡åŠ¹ãªID
        }
    }
    
    request.setAttribute("isEdit", isEdit);
    request.setAttribute("task", task);
%&gt;

&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - &lt;c:choose&gt;&lt;c:when test="${isEdit}"&gt;ã‚¿ã‚¹ã‚¯ç·¨é›†&lt;/c:when&gt;&lt;c:otherwise&gt;æ–°è¦ã‚¿ã‚¹ã‚¯ä½œæˆ&lt;/c:otherwise&gt;&lt;/c:choose&gt;&lt;/title&gt;
    &lt;link rel="stylesheet" href="css/style.css"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;div class="header"&gt;
            &lt;h1&gt;ğŸ“ &lt;c:choose&gt;&lt;c:when test="${isEdit}"&gt;ã‚¿ã‚¹ã‚¯ç·¨é›†&lt;/c:when&gt;&lt;c:otherwise&gt;æ–°è¦ã‚¿ã‚¹ã‚¯ä½œæˆ&lt;/c:otherwise&gt;&lt;/c:choose&gt;&lt;/h1&gt;
            &lt;p&gt;&lt;a href="task-list.jsp"&gt;â† ã‚¿ã‚¹ã‚¯ä¸€è¦§ã«æˆ»ã‚‹&lt;/a&gt;&lt;/p&gt;
        &lt;/div&gt;

        &lt;form action="task-controller.jsp" method="post" style="max-width: 600px; margin: 0 auto;"&gt;
            &lt;input type="hidden" name="action" value="&lt;c:choose&gt;&lt;c:when test='${isEdit}'&gt;update&lt;/c:when&gt;&lt;c:otherwise&gt;add&lt;/c:otherwise&gt;&lt;/c:choose&gt;"&gt;
            &lt;c:if test="${isEdit}"&gt;
                &lt;input type="hidden" name="id" value="${task.id}"&gt;
            &lt;/c:if&gt;
            
            &lt;div class="form-group"&gt;
                &lt;label for="title"&gt;ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒˆãƒ« *&lt;/label&gt;
                &lt;input type="text" id="title" name="title" class="form-control" 
                       value="&lt;c:out value='${task.title}' /&gt;" required&gt;
            &lt;/div&gt;
            
            &lt;div class="form-group"&gt;
                &lt;label for="description"&gt;èª¬æ˜&lt;/label&gt;
                &lt;textarea id="description" name="description" class="form-control" 
                          rows="4" style="resize: vertical;"&gt;&lt;c:out value='${task.description}' /&gt;&lt;/textarea&gt;
            &lt;/div&gt;
            
            &lt;div class="form-group"&gt;
                &lt;label for="priority"&gt;å„ªå…ˆåº¦&lt;/label&gt;
                &lt;select id="priority" name="priority" class="form-control"&gt;
                    &lt;option value="ä½" &lt;c:if test='${task.priority == "ä½"}'&gt;selected&lt;/c:if&gt;&gt;ä½&lt;/option&gt;
                    &lt;option value="ä¸­" &lt;c:if test='${task.priority == "ä¸­" or empty task.priority}'&gt;selected&lt;/c:if&gt;&gt;ä¸­&lt;/option&gt;
                    &lt;option value="é«˜" &lt;c:if test='${task.priority == "é«˜"}'&gt;selected&lt;/c:if&gt;&gt;é«˜&lt;/option&gt;
                &lt;/select&gt;
            &lt;/div&gt;
            
            &lt;div class="form-group"&gt;
                &lt;label for="dueDate"&gt;æœŸé™æ—¥&lt;/label&gt;
                &lt;input type="date" id="dueDate" name="dueDate" class="form-control" 
                       value="&lt;c:if test='${task.dueDate != null}'&gt;&lt;fmt:formatDate value='${task.dueDate}' pattern='yyyy-MM-dd' /&gt;&lt;/c:if&gt;"&gt;
            &lt;/div&gt;
            
            &lt;c:if test="${isEdit}"&gt;
                &lt;div class="form-group"&gt;
                    &lt;label&gt;
                        &lt;input type="checkbox" name="completed" value="true" 
                               &lt;c:if test='${task.completed}'&gt;checked&lt;/c:if&gt;&gt;
                        ã“ã®ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†æ¸ˆã¿ã«ã™ã‚‹
                    &lt;/label&gt;
                &lt;/div&gt;
                
                &lt;div class="form-group"&gt;
                    &lt;label&gt;ä½œæˆæ—¥: &lt;fmt:formatDate value="${task.createdDate}" pattern="yyyyå¹´MMæœˆddæ—¥ HH:mm" /&gt;&lt;/label&gt;
                &lt;/div&gt;
            &lt;/c:if&gt;
            
            &lt;div class="form-group" style="text-align: center; margin-top: 2rem;"&gt;
                &lt;button type="submit" class="btn btn-primary"&gt;
                    &lt;c:choose&gt;
                        &lt;c:when test="${isEdit}"&gt;âœï¸ æ›´æ–°ã™ã‚‹&lt;/c:when&gt;
                        &lt;c:otherwise&gt;â• ä½œæˆã™ã‚‹&lt;/c:otherwise&gt;
                    &lt;/c:choose&gt;
                &lt;/button&gt;
                &lt;a href="task-list.jsp" class="btn" style="background-color: #666; color: white; margin-left: 1rem;"&gt;ã‚­ãƒ£ãƒ³ã‚»ãƒ«&lt;/a&gt;
                
                &lt;c:if test="${isEdit}"&gt;
                    &lt;button type="button" class="btn btn-danger" style="margin-left: 1rem;" 
                            onclick="deleteTask(${task.id})"&gt;ğŸ—‘ï¸ å‰Šé™¤ã™ã‚‹&lt;/button&gt;
                &lt;/c:if&gt;
            &lt;/div&gt;
        &lt;/form&gt;

        &lt;!-- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ --&gt;
        &lt;div id="preview" style="max-width: 600px; margin: 2rem auto; padding: 1rem; background-color: #f9f9f9; border-radius: 8px; display: none;"&gt;
            &lt;h3&gt;ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼&lt;/h3&gt;
            &lt;div id="previewContent"&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;script&gt;
        function deleteTask(taskId) {
            if (confirm('ã“ã®ã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\nã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) {
                location.href = 'task-controller.jsp?action=delete&amp;id=' + taskId;
            }
        }
        
        // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½
        function updatePreview() {
            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;
            const priority = document.getElementById('priority').value;
            
            if (title.trim()) {
                const previewHtml = 
                    '&lt;strong&gt;ã‚¿ã‚¤ãƒˆãƒ«:&lt;/strong&gt; ' + title + '&lt;br&gt;' +
                    '&lt;strong&gt;èª¬æ˜:&lt;/strong&gt; ' + (description || 'ï¼ˆèª¬æ˜ãªã—ï¼‰') + '&lt;br&gt;' +
                    '&lt;strong&gt;å„ªå…ˆåº¦:&lt;/strong&gt; &lt;span style="color: ' + 
                    (priority === 'é«˜' ? 'red' : priority === 'ä¸­' ? 'orange' : 'green') + 
                    '"&gt;' + priority + '&lt;/span&gt;';
                
                document.getElementById('previewContent').innerHTML = previewHtml;
                document.getElementById('preview').style.display = 'block';
            } else {
                document.getElementById('preview').style.display = 'none';
            }
        }
        
        // ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
        document.addEventListener('DOMContentLoaded', function() {
            ['title', 'description', 'priority'].forEach(id =&gt; {
                document.getElementById(id).addEventListener('input', updatePreview);
            });
            updatePreview(); // åˆæœŸè¡¨ç¤º
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                        <h6>æœŸå¾…ã•ã‚Œã‚‹çµæœ</h6>
                        <p>
                            æ–°è¦ä½œæˆã¨ç·¨é›†ã®ä¸¡æ–¹ã«å¯¾å¿œã—ãŸãƒ•ã‚©ãƒ¼ãƒ ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
                            ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ã«ã‚ˆã‚Šã€å…¥åŠ›å†…å®¹ã‚’å³åº§ã«ç¢ºèªã§ãã¾ã™ã€‚
                        </p>
                    </div>

                    <div class="alert alert-success">
                        <h5>ğŸ‰ ç°¡æ˜“Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å®Œæˆï¼</h5>
                        <p>
                            ã“ã‚Œã¾ã§ã®ç« ã§å­¦ç¿’ã—ãŸä»¥ä¸‹ã®æŠ€è¡“ã‚’çµ±åˆã—ã¦ã€å®Ÿç”¨çš„ãªã‚¿ã‚¹ã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ãŒå®Œæˆã—ã¾ã—ãŸï¼š
                        </p>
                        <ul>
                            <li>âœ… JSPã®åŸºæœ¬æ§‹æ–‡ï¼ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã€å¼ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ï¼‰</li>
                            <li>âœ… JavaBeansã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒªãƒ³ã‚°</li>
                            <li>âœ… ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã¨ã‚¹ã‚³ãƒ¼ãƒ—æ´»ç”¨</li>
                            <li>âœ… ELï¼ˆå¼è¨€èªï¼‰ã¨JSTLã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰ç°¡æ½”åŒ–</li>
                            <li>âœ… ãƒ•ã‚©ãƒ¼ãƒ å‡¦ç†ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ“ä½œ</li>
                            <li>âœ… MVCã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®åŸºæœ¬æ¦‚å¿µ</li>
                        </ul>
                    </div>

                    <div class="quiz-container">
                        <h5>ç†è§£åº¦ç¢ºèªã‚¯ã‚¤ã‚º</h5>
                        <ol>
                            <li>MVCã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ãŠã‘ã‚‹å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆModelã€Viewã€Controllerï¼‰ã®å½¹å‰²ã‚’èª¬æ˜ã—ã¦ãã ã•ã„ã€‚</li>
                            <li>DAOãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç›®çš„ã¨åˆ©ç‚¹ã¯ä½•ã§ã™ã‹ï¼Ÿ</li>
                            <li>JSPãƒšãƒ¼ã‚¸ã§Javaã‚³ãƒ¼ãƒ‰ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹æŠ€è¡“ã¯ä½•ã§ã™ã‹ï¼Ÿ</li>
                            <li>ãƒ•ã‚©ãƒ¼ãƒ å‡¦ç†ã«ãŠã„ã¦ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é¢ã§æ³¨æ„ã™ã¹ãç‚¹ã‚’2ã¤æŒ™ã’ã¦ãã ã•ã„ã€‚</li>
                            <li>å®Ÿç”¨çš„ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«ãŠã„ã¦é‡è¦ãªè¨­è¨ˆåŸå‰‡ã‚’3ã¤æŒ™ã’ã¦ãã ã•ã„ã€‚</li>
                        </ol>
                        
                        <details>
                            <summary>è§£ç­”ä¾‹</summary>
                            <ol>
                                <li>
                                    Modelï¼šãƒ‡ãƒ¼ã‚¿ã¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆJavaBeansã€DAOï¼‰<br>
                                    Viewï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ï¼ˆJSPã€HTMLï¼‰<br>
                                    Controllerï¼šå‡¦ç†åˆ¶å¾¡ã¨ãƒ•ãƒ­ãƒ¼ç®¡ç†ï¼ˆServletï¼‰
                                </li>
                                <li>ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å‡¦ç†ã‚’åˆ†é›¢ã—ã€ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¨ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚’ç–çµåˆã«ã™ã‚‹ã“ã¨</li>
                                <li>ELï¼ˆå¼è¨€èªï¼‰ã¨JSTLï¼ˆJSPæ¨™æº–ã‚¿ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰</li>
                                <li>
                                    ãƒ»å…¥åŠ›å€¤ã®å¦¥å½“æ€§æ¤œè¨¼ï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰<br>
                                    ãƒ»SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–
                                </li>
                                <li>
                                    ãƒ»è²¬ä»»ã®åˆ†é›¢ï¼ˆé–¢å¿ƒã®åˆ†é›¢ï¼‰<br>
                                    ãƒ»å†åˆ©ç”¨æ€§ã®ç¢ºä¿<br>
                                    ãƒ»ä¿å®ˆæ€§ã®å‘ä¸Š
                                </li>
                            </ol>
                        </details>
                    </div>

                    <div class="highlight">
                        <h5>ã¾ã¨ã‚</h5>
                        <p>ã“ã®ç« ã§ã¯ã€ã“ã‚Œã¾ã§å­¦ç¿’ã—ãŸJSPæŠ€è¡“ã‚’çµ±åˆã—ã¦å®Ÿè·µçš„ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã—ã¾ã—ãŸã€‚</p>
                        <ul>
                            <li>MVCã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Ÿè£…</li>
                            <li>JavaBeansã¨DAOã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ç®¡ç†</li>
                            <li>ELã¨JSTLã‚’æ´»ç”¨ã—ãŸViewå±¤ã®å®Ÿè£…</li>
                            <li>ãƒ•ã‚©ãƒ¼ãƒ å‡¦ç†ã¨CRUDæ“ä½œã®å®Ÿè£…</li>
                            <li>å®Ÿç”¨çš„ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã®æ§‹ç¯‰</li>
                            <li>é©åˆ‡ãªè²¬ä»»åˆ†é›¢ã¨ã‚³ãƒ¼ãƒ‰æ§‹é€ </li>
                        </ul>
                        <p>æœ€çµ‚ç« ã§ã¯ã€ã•ã‚‰ãªã‚‹å­¦ç¿’ã‚¹ãƒ†ãƒƒãƒ—ã¨å®Ÿç”¨çš„ãªé–‹ç™ºã¸ã®ã‚¬ã‚¤ãƒ‰ã‚’æä¾›ã—ã¾ã™ã€‚</p>
                    </div>

                    <!-- Navigation -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="jsp-learning-material-8.html" class="btn btn-secondary">&larr; å‰ã®ç« </a>
                        <a href="jsp-learning-material-10.html" class="btn btn-primary">æ¬¡ã®ç«  &rarr;</a>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">&copy; 2025 F-Circle All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js åˆæœŸåŒ– -->
    <script>hljs.highlightAll();</script>
    
    <!-- Mermaid.js åˆæœŸåŒ– -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>