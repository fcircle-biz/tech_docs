<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSPå­¦ç¿’æ•™æ ç¬¬4ç«  - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        .navbar {
            background-color: #f57c00;
        }

        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
            background-color: #f8f9fa;
        }

        .chapter-title {
            color: #f57c00;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #f57c00;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #ff9800;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        .quiz-container {
            background-color: #fff3e0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #f57c00;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .nav-link.active {
            background-color: #f57c00 !important;
            color: white !important;
        }
    </style>
</head>
<body>
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand">
                <strong>JSPå­¦ç¿’æ•™æ</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>å­¦ç¿’ç« </span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-1.html">
                                ç¬¬1ç« : äº‹å‰æº–å‚™
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-2.html">
                                ç¬¬2ç« : JSPã®åŸºæœ¬ç†è§£
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-3.html">
                                ç¬¬3ç« : ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã¨å¼
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="jsp-learning-material-4.html">
                                ç¬¬4ç« : ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-5.html">
                                ç¬¬5ç« : ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‡¦ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-6.html">
                                ç¬¬6ç« : JSPã¨JavaBeans
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-7.html">
                                ç¬¬7ç« : ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã‚¹ã‚³ãƒ¼ãƒ—
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-8.html">
                                ç¬¬8ç« : ELï¼ˆå¼è¨€èªï¼‰ã¨JSTLå…¥é–€
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-9.html">
                                ç¬¬9ç« : ç°¡æ˜“Webã‚¢ãƒ—ãƒªé–‹ç™º
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-10.html">
                                ç¬¬10ç« : æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸ã®ã‚¬ã‚¤ãƒ‰
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">ç¬¬4ç« : ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h1>
                </div>

                <div id="chapter4">
                    <h2 class="chapter-title">JSPãƒšãƒ¼ã‚¸ã®å‹•ä½œåˆ¶å¾¡ã¨ã‚³ãƒ¼ãƒ‰å†åˆ©ç”¨</h2>

                    <div class="highlight">
                        <h5>ã“ã®ç« ã§å­¦ã¶ã“ã¨</h5>
                        <ul>
                            <li>pageãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã«ã‚ˆã‚‹ãƒšãƒ¼ã‚¸è¨­å®šã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—ã®åˆ¶å¾¡</li>
                            <li>includeãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã‚’ä½¿ã£ãŸé™çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰</li>
                            <li>taglibãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã«ã‚ˆã‚‹ã‚«ã‚¹ã‚¿ãƒ ã‚¿ã‚°ã®åˆ©ç”¨æº–å‚™</li>
                            <li>Javaã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨åå‰ç©ºé–“ç®¡ç†</li>
                            <li>ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã®ä½œæˆã¨ä¾‹å¤–å‡¦ç†ã®å®Ÿè£…</li>
                            <li>å®Ÿéš›ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã§ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–æ´»ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</li>
                        </ul>
                    </div>

                    <section id="page-directive">
                        <h3 class="section-title">4.1 pageãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã®è©³ç´°ç†è§£</h3>
                        
                        <p>pageãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ï¼ˆ&lt;%@ page %&gt;ï¼‰ã¯ã€JSPãƒšãƒ¼ã‚¸ã®åŸºæœ¬çš„ãªå‹•ä½œã‚’åˆ¶å¾¡ã™ã‚‹æœ€ã‚‚é‡è¦ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã§ã™ã€‚æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—ã€ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ãªã©ã€ãƒšãƒ¼ã‚¸å…¨ä½“ã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚</p>

                        <h4>ä¸»è¦ãªå±æ€§ä¸€è¦§</h4>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>å±æ€§</th>
                                    <th>èª¬æ˜</th>
                                    <th>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤</th>
                                    <th>ä¾‹</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>language</strong></td>
                                    <td>ä½¿ç”¨ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èª</td>
                                    <td>java</td>
                                    <td><code>language="java"</code></td>
                                </tr>
                                <tr>
                                    <td><strong>contentType</strong></td>
                                    <td>HTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®MIMEã‚¿ã‚¤ãƒ—</td>
                                    <td>text/html</td>
                                    <td><code>contentType="text/html; charset=UTF-8"</code></td>
                                </tr>
                                <tr>
                                    <td><strong>pageEncoding</strong></td>
                                    <td>JSPãƒ•ã‚¡ã‚¤ãƒ«è‡ªä½“ã®æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°</td>
                                    <td>ISO-8859-1</td>
                                    <td><code>pageEncoding="UTF-8"</code></td>
                                </tr>
                                <tr>
                                    <td><strong>import</strong></td>
                                    <td>ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹Javaã‚¯ãƒ©ã‚¹</td>
                                    <td>ãªã—</td>
                                    <td><code>import="java.util.*"</code></td>
                                </tr>
                                <tr>
                                    <td><strong>session</strong></td>
                                    <td>ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®æœ‰åŠ¹åŒ–</td>
                                    <td>true</td>
                                    <td><code>session="false"</code></td>
                                </tr>
                                <tr>
                                    <td><strong>buffer</strong></td>
                                    <td>å‡ºåŠ›ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚º</td>
                                    <td>8kb</td>
                                    <td><code>buffer="16kb"</code></td>
                                </tr>
                                <tr>
                                    <td><strong>errorPage</strong></td>
                                    <td>ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®è»¢é€å…ˆ</td>
                                    <td>ãªã—</td>
                                    <td><code>errorPage="error.jsp"</code></td>
                                </tr>
                                <tr>
                                    <td><strong>isErrorPage</strong></td>
                                    <td>ã“ã®ãƒšãƒ¼ã‚¸ãŒã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã‹ã©ã†ã‹</td>
                                    <td>false</td>
                                    <td><code>isErrorPage="true"</code></td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="exercise-container">
                            <h5>å®Ÿç¿’ 4-1: pageãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã®æ´»ç”¨</h5>
                            <p>æ§˜ã€…ãªpageãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–å±æ€§ã‚’ä½¿ç”¨ã—ãŸå®Ÿä¾‹ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
                            
                            <h6>page-demo.jspã®ä½œæˆ</h6>
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" 
         contentType="text/html; charset=UTF-8"
         pageEncoding="UTF-8"
         import="java.util.*,java.text.*"
         session="true"
         buffer="16kb"
         autoFlush="true"
         errorPage="error-handler.jsp" %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;pageãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¢&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; }
        .info-box { background: #e3f2fd; padding: 15px; border-radius: 5px; margin: 15px 0; }
        .demo-section { border: 1px solid #ddd; padding: 20px; margin: 15px 0; border-radius: 5px; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;pageãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã®è¨­å®šåŠ¹æœ&lt;/h1&gt;
    
    &lt;div class="info-box"&gt;
        &lt;h3&gt;ğŸ“ ç¾åœ¨ã®ãƒšãƒ¼ã‚¸è¨­å®š&lt;/h3&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;è¨€èªï¼š&lt;/strong&gt;Java&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼š&lt;/strong&gt;UTF-8&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—ï¼š&lt;/strong&gt;text/html; charset=UTF-8&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ï¼š&lt;/strong&gt;æœ‰åŠ¹&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚ºï¼š&lt;/strong&gt;16KB&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
    
    &lt;div class="demo-section"&gt;
        &lt;h3&gt;ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸã‚¯ãƒ©ã‚¹ã®ä½¿ç”¨ä¾‹&lt;/h3&gt;
        &lt;%
            // java.util.*ã®ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨
            Date currentDate = new Date();
            Calendar cal = Calendar.getInstance();
            List&lt;String&gt; fruits = Arrays.asList("ã‚Šã‚“ã”", "ãƒãƒŠãƒŠ", "ã‚ªãƒ¬ãƒ³ã‚¸");
            
            // java.text.*ã®ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨
            SimpleDateFormat sdf = new SimpleDateFormat("yyyyå¹´MMæœˆddæ—¥ HH:mm:ss");
            DecimalFormat df = new DecimalFormat("#,###");
        %&gt;
        
        &lt;p&gt;&lt;strong&gt;ç¾åœ¨æ—¥æ™‚ï¼š&lt;/strong&gt;&lt;%= sdf.format(currentDate) %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;å¹´ï¼š&lt;/strong&gt;&lt;%= cal.get(Calendar.YEAR) %&gt;å¹´&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;å¤§ããªæ•°å€¤ï¼š&lt;/strong&gt;&lt;%= df.format(1234567) %&gt;&lt;/p&gt;
        
        &lt;h4&gt;ãƒ•ãƒ«ãƒ¼ãƒ„ãƒªã‚¹ãƒˆ&lt;/h4&gt;
        &lt;ul&gt;
            &lt;% for (String fruit : fruits) { %&gt;
                &lt;li&gt;&lt;%= fruit %&gt;&lt;/li&gt;
            &lt;% } %&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
    
    &lt;div class="demo-section"&gt;
        &lt;h3&gt;ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±&lt;/h3&gt;
        &lt;p&gt;&lt;strong&gt;ã‚»ãƒƒã‚·ãƒ§ãƒ³IDï¼š&lt;/strong&gt;&lt;%= session.getId() %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;ä½œæˆæ—¥æ™‚ï¼š&lt;/strong&gt;&lt;%= sdf.format(new Date(session.getCreationTime())) %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;æœ€çµ‚ã‚¢ã‚¯ã‚»ã‚¹ï¼š&lt;/strong&gt;&lt;%= sdf.format(new Date(session.getLastAccessedTime())) %&gt;&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class="demo-section"&gt;
        &lt;h3&gt;ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ†ã‚¹ãƒˆ&lt;/h3&gt;
        &lt;p&gt;ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æ„å›³çš„ã«ã‚¨ãƒ©ãƒ¼ã‚’ç™ºç”Ÿã•ã›ã¾ã™ï¼š&lt;/p&gt;
        &lt;a href="?error=true" style="background: #f44336; color: white; padding: 10px; text-decoration: none; border-radius: 3px;"&gt;ã‚¨ãƒ©ãƒ¼ã‚’ç™ºç”Ÿã•ã›ã‚‹&lt;/a&gt;
        
        &lt;%
            String errorParam = request.getParameter("error");
            if ("true".equals(errorParam)) {
                // æ„å›³çš„ã«ã‚¨ãƒ©ãƒ¼ã‚’ç™ºç”Ÿ
                int result = 10 / 0; // ã‚¼ãƒ­é™¤ç®—ã‚¨ãƒ©ãƒ¼
            }
        %&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                            <h6>error-handler.jspã®ä½œæˆ</h6>
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8" isErrorPage="true" %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; background: #ffebee; }
        .error-container { max-width: 600px; margin: 0 auto; padding: 30px; background: white; border-radius: 10px; }
        .error-icon { font-size: 4em; color: #f44336; text-align: center; }
        .error-details { background: #f5f5f5; padding: 15px; border-radius: 5px; margin: 15px 0; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="error-container"&gt;
        &lt;div class="error-icon"&gt;âš ï¸&lt;/div&gt;
        &lt;h1 style="text-align: center; color: #f44336;"&gt;ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ&lt;/h1&gt;
        
        &lt;div class="error-details"&gt;
            &lt;h3&gt;ã‚¨ãƒ©ãƒ¼è©³ç´°&lt;/h3&gt;
            &lt;p&gt;&lt;strong&gt;ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—ï¼š&lt;/strong&gt;&lt;%= exception.getClass().getSimpleName() %&gt;&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼š&lt;/strong&gt;&lt;%= exception.getMessage() %&gt;&lt;/p&gt;
            &lt;p&gt;&lt;strong&gt;ç™ºç”Ÿæ—¥æ™‚ï¼š&lt;/strong&gt;&lt;%= new java.util.Date() %&gt;&lt;/p&gt;
        &lt;/div&gt;
        
        &lt;p style="text-align: center;"&gt;
            &lt;a href="page-demo.jsp" style="background: #4caf50; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;"&gt;å…ƒã®ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹&lt;/a&gt;
        &lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                        </div>
                    </section>

                    <section id="include-directive">
                        <h3 class="section-title">4.2 includeãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰å†åˆ©ç”¨</h3>
                        
                        <p>includeãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ï¼ˆ&lt;%@ include %&gt;ï¼‰ã¯ã€ä»–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ç¾åœ¨ã®JSPãƒšãƒ¼ã‚¸ã«é™çš„ã«å–ã‚Šè¾¼ã‚€ãŸã‚ã«ä½¿ç”¨ã—ã¾ã™ã€‚ãƒ˜ãƒƒãƒ€ãƒ¼ã€ãƒ•ãƒƒã‚¿ãƒ¼ã€å…±é€šéƒ¨å“ã®å†åˆ©ç”¨ã«éå¸¸ã«æœ‰åŠ¹ã§ã™ã€‚</p>

                        <h4>includeãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã®ç‰¹å¾´</h4>
                        <ul>
                            <li><strong>é™çš„ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰</strong>ï¼šç¿»è¨³æ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒçµåˆã•ã‚Œã‚‹</li>
                            <li><strong>ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å¯¾å¿œ</strong>ï¼šJSPã€HTMLã€CSSãªã©æ§˜ã€…ãªãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã‚’å–ã‚Šè¾¼ã‚ã‚‹</li>
                            <li><strong>ç›¸å¯¾ãƒ‘ã‚¹</strong>ï¼šç¾åœ¨ã®JSPãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹ã§æŒ‡å®š</li>
                            <li><strong>å¤‰æ•°å…±æœ‰</strong>ï¼šã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰å…ˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã¨å¤‰æ•°ã‚’å…±æœ‰</li>
                        </ul>

                        <div class="exercise-container">
                            <h5>å®Ÿç¿’ 4-2: includeãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã§ãƒšãƒ¼ã‚¸æ§‹é€ åŒ–</h5>
                            <p>å…±é€šã®ãƒ˜ãƒƒãƒ€ãƒ¼ã¨ãƒ•ãƒƒã‚¿ãƒ¼ã‚’ä½œæˆã—ã€è¤‡æ•°ã®ãƒšãƒ¼ã‚¸ã§å†åˆ©ç”¨ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
                            
                            <h6>header.jspã®ä½œæˆ</h6>
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;
&lt;header style="background: #2196f3; color: white; padding: 20px; text-align: center;"&gt;
    &lt;h1&gt;ğŸŒŸ ãƒã‚¤Webã‚µã‚¤ãƒˆ&lt;/h1&gt;
    &lt;nav&gt;
        &lt;a href="main-page.jsp" style="color: white; margin: 0 10px; text-decoration: none;"&gt;ãƒ›ãƒ¼ãƒ &lt;/a&gt;
        &lt;a href="about-page.jsp" style="color: white; margin: 0 10px; text-decoration: none;"&gt;ä¼šç¤¾æ¦‚è¦&lt;/a&gt;
        &lt;a href="contact-page.jsp" style="color: white; margin: 0 10px; text-decoration: none;"&gt;ãŠå•ã„åˆã‚ã›&lt;/a&gt;
    &lt;/nav&gt;
    &lt;p&gt;&lt;small&gt;æœ€çµ‚æ›´æ–°: &lt;%= new java.text.SimpleDateFormat("yyyy/MM/dd").format(new java.util.Date()) %&gt;&lt;/small&gt;&lt;/p&gt;
&lt;/header&gt;</code></pre>

                            <h6>footer.jspã®ä½œæˆ</h6>
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;
&lt;footer style="background: #424242; color: white; padding: 20px; text-align: center; margin-top: 30px;"&gt;
    &lt;p&gt;&amp;copy; 2024 ãƒã‚¤Webã‚µã‚¤ãƒˆ. All rights reserved.&lt;/p&gt;
    &lt;p&gt;&lt;small&gt;ã‚¢ã‚¯ã‚»ã‚¹æ—¥æ™‚: &lt;%= new java.util.Date() %&gt;&lt;/small&gt;&lt;/p&gt;
    &lt;div&gt;
        &lt;a href="#" style="color: #90caf9; margin: 0 5px;"&gt;ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼&lt;/a&gt; | 
        &lt;a href="#" style="color: #90caf9; margin: 0 5px;"&gt;åˆ©ç”¨è¦ç´„&lt;/a&gt; | 
        &lt;a href="#" style="color: #90caf9; margin: 0 5px;"&gt;ã‚µã‚¤ãƒˆãƒãƒƒãƒ—&lt;/a&gt;
    &lt;/div&gt;
&lt;/footer&gt;</code></pre>

                            <h6>main-page.jspã®ä½œæˆï¼ˆincludeãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ä½¿ç”¨ï¼‰</h6>
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 0; }
        .content { max-width: 800px; margin: 0 auto; padding: 30px; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;%@ include file="header.jsp" %&gt;
    
    &lt;div class="content"&gt;
        &lt;h2&gt;ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã¸ã‚ˆã†ã“ã&lt;/h2&gt;
        
        &lt;%
            String userName = "ç”°ä¸­å¤ªéƒ";
            int visitCount = 5;
        %&gt;
        
        &lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€&lt;%= userName %&gt;ã•ã‚“ï¼&lt;/p&gt;
        &lt;p&gt;ã‚ãªãŸã®è¨ªå•å›æ•°: &lt;%= visitCount %&gt;å›&lt;/p&gt;
        
        &lt;div style="background: #e8f5e8; padding: 20px; border-radius: 5px; margin: 20px 0;"&gt;
            &lt;h3&gt;ğŸ“¢ ãŠçŸ¥ã‚‰ã›&lt;/h3&gt;
            &lt;ul&gt;
                &lt;li&gt;æ–°å•†å“ã€Œã‚¹ãƒãƒ¼ãƒˆã‚¦ã‚©ãƒƒãƒProã€ã‚’ç™ºå£²é–‹å§‹&lt;/li&gt;
                &lt;li&gt;ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®ãŸã‚ã€8/15 2:00-4:00ã¯ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢&lt;/li&gt;
                &lt;li&gt;ãŠå®¢æ§˜æº€è¶³åº¦èª¿æŸ»ã«ã”å”åŠ›ãã ã•ã„&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
        
        &lt;h3&gt;äººæ°—å•†å“&lt;/h3&gt;
        &lt;%
            String[] products = {"ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³", "ãƒãƒ¼ãƒˆãƒ‘ã‚½ã‚³ãƒ³", "ãƒ¯ã‚¤ãƒ¤ãƒ¬ã‚¹ã‚¤ãƒ¤ãƒ›ãƒ³"};
            int[] prices = {89800, 129800, 15800};
        %&gt;
        
        &lt;div style="display: flex; gap: 20px; flex-wrap: wrap;"&gt;
            &lt;% for (int i = 0; i &lt; products.length; i++) { %&gt;
                &lt;div style="border: 1px solid #ddd; padding: 15px; border-radius: 5px; flex: 1; min-width: 200px;"&gt;
                    &lt;h4&gt;&lt;%= products[i] %&gt;&lt;/h4&gt;
                    &lt;p style="font-size: 1.2em; color: #f44336; font-weight: bold;"&gt;Â¥&lt;%= String.format("%,d", prices[i]) %&gt;&lt;/p&gt;
                    &lt;button style="background: #4caf50; color: white; border: none; padding: 8px 15px; border-radius: 3px;"&gt;è©³ç´°ã‚’è¦‹ã‚‹&lt;/button&gt;
                &lt;/div&gt;
            &lt;% } %&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;%@ include file="footer.jsp" %&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                        </div>
                    </section>

                    <section id="taglib-directive">
                        <h3 class="section-title">4.3 taglibãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¨ã‚«ã‚¹ã‚¿ãƒ ã‚¿ã‚°</h3>
                        
                        <p>taglibãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¯ã€ã‚«ã‚¹ã‚¿ãƒ ã‚¿ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆJSTLã€ç‹¬è‡ªã‚¿ã‚°ãªã©ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚æ¬¡ç« ä»¥é™ã§è©³ã—ãå­¦ã¶JSTLã®æº–å‚™ã¨ã—ã¦ã€åŸºæœ¬çš„ãªä½¿ã„æ–¹ã‚’ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚</p>

                        <h4>taglibãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã®åŸºæœ¬æ§‹æ–‡</h4>
                        <pre class="code-block"><code class="language-html">&lt;%@ taglib prefix="ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹" uri="ã‚¿ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªURI" %&gt;</code></pre>

                        <div class="highlight">
                            <h6>JSTLã®æº–å‚™ï¼ˆå‚è€ƒï¼‰</h6>
                            <p>JavaServer Pages Standard Tag Libraryï¼ˆJSTLï¼‰ã¯ã€JSPã§ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹å‡¦ç†ã‚’ã‚¿ã‚°å½¢å¼ã§æä¾›ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚ç¬¬8ç« ã§è©³ã—ãå­¦ç¿’ã—ã¾ã™ã€‚</p>
                            <pre class="code-block"><code class="language-html">&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %&gt;</code></pre>
                        </div>
                    </section>

                    <section id="import-handling">
                        <h3 class="section-title">4.4 Javaã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆç®¡ç†</h3>
                        
                        <p>JSPã§Javaã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹éš›ã®åŠ¹ç‡çš„ãªã‚¤ãƒ³ãƒãƒ¼ãƒˆç®¡ç†æ–¹æ³•ã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚</p>

                        <h4>ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®è¨˜è¿°æ–¹æ³•</h4>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>è¨˜è¿°æ–¹æ³•</th>
                                    <th>ä¾‹</th>
                                    <th>ç”¨é€”</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>å˜ä¸€ã‚¯ãƒ©ã‚¹</td>
                                    <td><code>import="java.util.Date"</code></td>
                                    <td>ç‰¹å®šã®ã‚¯ãƒ©ã‚¹1ã¤ã®ã¿ä½¿ç”¨</td>
                                </tr>
                                <tr>
                                    <td>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å…¨ä½“</td>
                                    <td><code>import="java.util.*"</code></td>
                                    <td>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã®è¤‡æ•°ã‚¯ãƒ©ã‚¹ä½¿ç”¨</td>
                                </tr>
                                <tr>
                                    <td>è¤‡æ•°ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</td>
                                    <td><code>import="java.util.*, java.text.*"</code></td>
                                    <td>è¤‡æ•°ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½¿ç”¨</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="exercise-container">
                            <h5>å®Ÿç¿’ 4-3: åŠ¹ç‡çš„ãªã‚¤ãƒ³ãƒãƒ¼ãƒˆç®¡ç†</h5>
                            <p>æ§˜ã€…ãªã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–¹æ³•ã‚’æ¯”è¼ƒã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
                            
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"
    import="java.util.*, java.text.*, java.time.*, java.math.*" %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ã‚¤ãƒ³ãƒãƒ¼ãƒˆç®¡ç†ãƒ‡ãƒ¢&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; }
        .demo-box { border: 1px solid #ddd; padding: 20px; margin: 15px 0; border-radius: 5px; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;ã‚¤ãƒ³ãƒãƒ¼ãƒˆç®¡ç†ã®ãƒ‡ãƒ¢&lt;/h1&gt;
    
    &lt;div class="demo-box"&gt;
        &lt;h3&gt;java.util.*ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½¿ç”¨&lt;/h3&gt;
        &lt;%
            Date now = new Date();
            Calendar cal = Calendar.getInstance();
            List&lt;String&gt; colors = Arrays.asList("èµ¤", "é’", "ç·‘", "é»„");
            Map&lt;String, Integer&gt; scores = new HashMap&lt;&gt;();
            scores.put("æ•°å­¦", 85);
            scores.put("è‹±èª", 92);
        %&gt;
        &lt;p&gt;ç¾åœ¨æ—¥æ™‚: &lt;%= now %&gt;&lt;/p&gt;
        &lt;p&gt;å¹´: &lt;%= cal.get(Calendar.YEAR) %&gt;&lt;/p&gt;
        &lt;p&gt;è‰²ã®ç¨®é¡: &lt;%= colors.size() %&gt;ç¨®é¡&lt;/p&gt;
        &lt;p&gt;ç§‘ç›®æ•°: &lt;%= scores.size() %&gt;ç§‘ç›®&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class="demo-box"&gt;
        &lt;h3&gt;java.text.*ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½¿ç”¨&lt;/h3&gt;
        &lt;%
            SimpleDateFormat sdf = new SimpleDateFormat("yyyyå¹´MMæœˆddæ—¥(E)");
            DecimalFormat df = new DecimalFormat("#,###.00");
            NumberFormat nf = NumberFormat.getCurrencyInstance(Locale.JAPAN);
        %&gt;
        &lt;p&gt;ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿æ—¥ä»˜: &lt;%= sdf.format(now) %&gt;&lt;/p&gt;
        &lt;p&gt;å°æ•°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: &lt;%= df.format(1234.5678) %&gt;&lt;/p&gt;
        &lt;p&gt;é€šè²¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: &lt;%= nf.format(15800) %&gt;&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class="demo-box"&gt;
        &lt;h3&gt;java.time.*ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½¿ç”¨ï¼ˆJava 8ä»¥é™ï¼‰&lt;/h3&gt;
        &lt;%
            LocalDateTime ldt = LocalDateTime.now();
            LocalDate ld = LocalDate.now();
            DateTimeFormatter dtf = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss");
        %&gt;
        &lt;p&gt;LocalDateTime: &lt;%= ldt %&gt;&lt;/p&gt;
        &lt;p&gt;LocalDate: &lt;%= ld %&gt;&lt;/p&gt;
        &lt;p&gt;ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: &lt;%= ldt.format(dtf) %&gt;&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class="demo-box"&gt;
        &lt;h3&gt;java.math.*ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä½¿ç”¨&lt;/h3&gt;
        &lt;%
            BigDecimal bd1 = new BigDecimal("123.456");
            BigDecimal bd2 = new BigDecimal("78.901");
            BigInteger bi = new BigInteger("123456789012345678901234567890");
        %&gt;
        &lt;p&gt;BigDecimalè¨ˆç®—: &lt;%= bd1.add(bd2) %&gt;&lt;/p&gt;
        &lt;p&gt;BigInteger: &lt;%= bi %&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                        </div>
                    </section>

                    <section id="error-handling">
                        <h3 class="section-title">4.5 ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸å‡¦ç†ã®å®Ÿè£…</h3>
                        
                        <p>Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒé‡è¦ã§ã™ã€‚JSPã§ã®ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã®ä½œæˆæ–¹æ³•ã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚</p>

                        <div class="exercise-container">
                            <h5>å®Ÿç¿’ 4-4: åŒ…æ‹¬çš„ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ </h5>
                            <p>æ§˜ã€…ãªç¨®é¡ã®ã‚¨ãƒ©ãƒ¼ã«å¯¾å¿œã§ãã‚‹ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
                            
                            <h6>comprehensive-error.jspã®ä½œæˆ</h6>
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8" isErrorPage="true"
    import="java.io.*, java.util.*" %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 0; background: linear-gradient(135deg, #ffebee, #f3e5f5); }
        .error-container { max-width: 800px; margin: 50px auto; padding: 30px; background: white; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .error-header { text-align: center; margin-bottom: 30px; }
        .error-icon { font-size: 5em; margin-bottom: 10px; }
        .error-details { background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0; }
        .error-actions { text-align: center; margin-top: 30px; }
        .btn { display: inline-block; padding: 12px 24px; margin: 5px; text-decoration: none; border-radius: 5px; font-weight: bold; }
        .btn-primary { background: #2196f3; color: white; }
        .btn-secondary { background: #6c757d; color: white; }
        .btn-danger { background: #f44336; color: white; }
        .stack-trace { background: #1e1e1e; color: #00ff00; padding: 15px; border-radius: 5px; font-family: monospace; font-size: 0.9em; max-height: 300px; overflow-y: auto; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="error-container"&gt;
        &lt;div class="error-header"&gt;
            &lt;div class="error-icon"&gt;ğŸš¨&lt;/div&gt;
            &lt;h1 style="color: #f44336; margin: 0;"&gt;ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ&lt;/h1&gt;
            &lt;p style="color: #666; font-size: 1.1em;"&gt;ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã„ãŸã—ã¾ã—ãŸã€‚&lt;/p&gt;
        &lt;/div&gt;
        
        &lt;%
            // ã‚¨ãƒ©ãƒ¼æƒ…å ±ã®åˆ†æ
            String errorType = "æœªçŸ¥ã®ã‚¨ãƒ©ãƒ¼";
            String errorMessage = "è©³ç´°ä¸æ˜";
            String userAdvice = "ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚";
            String errorIcon = "âš ï¸";
            
            if (exception != null) {
                errorType = exception.getClass().getSimpleName();
                errorMessage = exception.getMessage() != null ? exception.getMessage() : "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãªã—";
                
                // ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—åˆ¥ã®å¯¾å¿œ
                if (exception instanceof ArithmeticException) {
                    errorIcon = "ğŸ”¢";
                    userAdvice = "è¨ˆç®—å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚å…¥åŠ›å€¤ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚";
                } else if (exception instanceof NullPointerException) {
                    errorIcon = "âŒ";
                    userAdvice = "ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚";
                } else if (exception instanceof NumberFormatException) {
                    errorIcon = "ğŸ”¤";
                    userAdvice = "æ•°å€¤å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚å…¥åŠ›å†…å®¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚";
                } else if (exception instanceof IOException) {
                    errorIcon = "ğŸ“";
                    userAdvice = "ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ›¸ãã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚";
                }
            }
            
            // ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæƒ…å ±
            Date errorTime = new Date();
            String sessionId = session.getId();
            String userAgent = request.getHeader("User-Agent");
            String remoteAddr = request.getRemoteAddr();
            
            // ã‚¨ãƒ©ãƒ¼IDç”Ÿæˆ
            String errorId = "ERR-" + System.currentTimeMillis();
        %&gt;
        
        &lt;div class="error-details"&gt;
            &lt;h3&gt;&lt;%= errorIcon %&gt; ã‚¨ãƒ©ãƒ¼è©³ç´°æƒ…å ±&lt;/h3&gt;
            &lt;table style="width: 100%; border-collapse: collapse;"&gt;
                &lt;tr&gt;
                    &lt;td style="padding: 8px; font-weight: bold; background: #e9ecef; width: 150px;"&gt;ã‚¨ãƒ©ãƒ¼ID&lt;/td&gt;
                    &lt;td style="padding: 8px;"&gt;&lt;%= errorId %&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td style="padding: 8px; font-weight: bold; background: #e9ecef;"&gt;ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—&lt;/td&gt;
                    &lt;td style="padding: 8px;"&gt;&lt;%= errorType %&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td style="padding: 8px; font-weight: bold; background: #e9ecef;"&gt;ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸&lt;/td&gt;
                    &lt;td style="padding: 8px;"&gt;&lt;%= errorMessage %&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td style="padding: 8px; font-weight: bold; background: #e9ecef;"&gt;ç™ºç”Ÿæ—¥æ™‚&lt;/td&gt;
                    &lt;td style="padding: 8px;"&gt;&lt;%= errorTime %&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td style="padding: 8px; font-weight: bold; background: #e9ecef;"&gt;ã‚»ãƒƒã‚·ãƒ§ãƒ³ID&lt;/td&gt;
                    &lt;td style="padding: 8px;"&gt;&lt;%= sessionId %&gt;&lt;/td&gt;
                &lt;/tr&gt;
            &lt;/table&gt;
        &lt;/div&gt;
        
        &lt;div style="background: #e3f2fd; padding: 15px; border-radius: 10px; border-left: 4px solid #2196f3;"&gt;
            &lt;h4 style="margin-top: 0;"&gt;ğŸ’¡ å¯¾å‡¦æ–¹æ³•&lt;/h4&gt;
            &lt;p&gt;&lt;%= userAdvice %&gt;&lt;/p&gt;
            &lt;p&gt;&lt;small&gt;ã‚¨ãƒ©ãƒ¼ãŒç¶šãå ´åˆã¯ã€ã‚¨ãƒ©ãƒ¼IDã€Œ&lt;strong&gt;&lt;%= errorId %&gt;&lt;/strong&gt;ã€ã‚’ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚&lt;/small&gt;&lt;/p&gt;
        &lt;/div&gt;
        
        &lt;% if (exception != null && request.getParameter("debug") != null) { %&gt;
            &lt;div style="margin: 20px 0;"&gt;
                &lt;h4&gt;ğŸ” ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ï¼ˆé–‹ç™ºè€…å‘ã‘ï¼‰&lt;/h4&gt;
                &lt;div class="stack-trace"&gt;
                    &lt;%
                        StringWriter sw = new StringWriter();
                        PrintWriter pw = new PrintWriter(sw);
                        exception.printStackTrace(pw);
                        String stackTrace = sw.toString();
                    %&gt;
                    &lt;pre&gt;&lt;%= stackTrace.replaceAll("&lt;", "&amp;lt;").replaceAll("&gt;", "&amp;gt;") %&gt;&lt;/pre&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;% } %&gt;
        
        &lt;div class="error-actions"&gt;
            &lt;a href="javascript:history.back()" class="btn btn-secondary"&gt;â¬…ï¸ å‰ã®ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹&lt;/a&gt;
            &lt;a href="main-page.jsp" class="btn btn-primary"&gt;ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹&lt;/a&gt;
            &lt;a href="?debug=true" class="btn btn-danger"&gt;ğŸ”§ è©³ç´°è¡¨ç¤º&lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                        </div>
                    </section>

                    <div class="quiz-container">
                        <h5>ç†è§£åº¦ç¢ºèªã‚¯ã‚¤ã‚º</h5>
                        <ol>
                            <li>pageãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã®contentTypeå±æ€§ã¨pageEncodingå±æ€§ã®é•ã„ã¨å½¹å‰²ã‚’èª¬æ˜ã—ã¦ãã ã•ã„ã€‚</li>
                            <li>includeãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¨&lt;jsp:include&gt;ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¦ç´ ã®é•ã„ã‚’èª¬æ˜ã—ã¦ãã ã•ã„ã€‚</li>
                            <li>ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹éš›ã«å¿…è¦ãªpageãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã®å±æ€§ã¯ä½•ã§ã™ã‹ï¼Ÿ</li>
                            <li>ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–‡ã§ã€Œjava.util.*ã€ã¨ã€Œjava.util.Dateã€ã®ä½¿ã„åˆ†ã‘ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ãã ã•ã„ã€‚</li>
                            <li>JSPã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã‚’ç„¡åŠ¹ã«ã—ãŸã„å ´åˆã€ã©ã®ã‚ˆã†ãªè¨­å®šã‚’è¡Œã„ã¾ã™ã‹ï¼Ÿ</li>
                        </ol>
                        
                        <details>
                            <summary>è§£ç­”ä¾‹</summary>
                            <ol>
                                <li><strong>contentTypeã¨pageEncodingã®é•ã„</strong>
                                    <ul>
                                        <li>contentTypeï¼šHTTPãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®MIMEã‚¿ã‚¤ãƒ—ã‚’è¨­å®šï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã«é€ä¿¡ã•ã‚Œã‚‹æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼‰</li>
                                        <li>pageEncodingï¼šJSPãƒ•ã‚¡ã‚¤ãƒ«è‡ªä½“ã®æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿æ™‚ã«ä½¿ç”¨ï¼‰</li>
                                    </ul>
                                </li>
                                <li><strong>includeãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¨jsp:includeã®é•ã„</strong>
                                    <ul>
                                        <li>includeãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ï¼šç¿»è¨³æ™‚ã«é™çš„ã«çµåˆï¼ˆ&lt;%@ include file="..." %&gt;ï¼‰</li>
                                        <li>jsp:includeï¼šå®Ÿè¡Œæ™‚ã«å‹•çš„ã«çµåˆï¼ˆ&lt;jsp:include page="..." /&gt;ï¼‰</li>
                                    </ul>
                                </li>
                                <li><strong>ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã«å¿…è¦ãªå±æ€§</strong>ï¼š<code>isErrorPage="true"</code> - ã“ã‚Œã«ã‚ˆã‚Š exception ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒåˆ©ç”¨å¯èƒ½ã«ãªã‚‹</li>
                                <li><strong>ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®ä½¿ã„åˆ†ã‘</strong>
                                    <ul>
                                        <li>java.util.*ï¼šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…ã®è¤‡æ•°ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ</li>
                                        <li>java.util.Dateï¼šç‰¹å®šã®ã‚¯ãƒ©ã‚¹1ã¤ã®ã¿ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆï¼ˆã‚ˆã‚Šæ˜ç¢ºï¼‰</li>
                                    </ul>
                                </li>
                                <li><strong>ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®ç„¡åŠ¹åŒ–</strong>ï¼š<code>session="false"</code> ã‚’pageãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã«è¿½åŠ </li>
                            </ol>
                        </details>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="jsp-learning-material-3.html" class="btn btn-secondary">â† å‰ã®ç« : ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã¨å¼</a>
                        <a href="jsp-learning-material-5.html" class="btn btn-primary">æ¬¡ã®ç«  â†’ ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‡¦ç†</a>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">Â© 2025 F-Circle. All rights reserved.<br>
æœ¬è³‡æ–™ã¯AIãƒ„ãƒ¼ãƒ«ã‚’æ´»ç”¨ã—ã€äººé–“ã«ã‚ˆã‚‹ç·¨é›†ãƒ»ç›£ä¿®ã®ã‚‚ã¨ä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚ç„¡æ–­è»¢è¼‰ãƒ»å†é…å¸ƒã‚’ç¦ã˜ã¾ã™ã€‚</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js åˆæœŸåŒ– -->
    <script>hljs.highlightAll();</script>
    
    <!-- Mermaid.js åˆæœŸåŒ– -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>