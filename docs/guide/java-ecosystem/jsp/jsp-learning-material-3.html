<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSPå­¦ç¿’æ•™æ ç¬¬3ç«  - ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã¨å¼</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        .navbar {
            background-color: #f57c00;
        }

        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
            background-color: #f8f9fa;
        }

        .chapter-title {
            color: #f57c00;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #f57c00;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #ff9800;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        .quiz-container {
            background-color: #fff3e0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #f57c00;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .nav-link.active {
            background-color: #f57c00 !important;
            color: white !important;
        }
    </style>
</head>
<body>
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand">
                <strong>JSPå­¦ç¿’æ•™æ</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>å­¦ç¿’ç« </span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-1.html">
                                ç¬¬1ç« : äº‹å‰æº–å‚™
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-2.html">
                                ç¬¬2ç« : JSPã®åŸºæœ¬ç†è§£
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="jsp-learning-material-3.html">
                                ç¬¬3ç« : ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã¨å¼
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-4.html">
                                ç¬¬4ç« : ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-5.html">
                                ç¬¬5ç« : ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‡¦ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-6.html">
                                ç¬¬6ç« : JSPã¨JavaBeans
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-7.html">
                                ç¬¬7ç« : ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã‚¹ã‚³ãƒ¼ãƒ—
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-8.html">
                                ç¬¬8ç« : ELï¼ˆå¼è¨€èªï¼‰ã¨JSTLå…¥é–€
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-9.html">
                                ç¬¬9ç« : ç°¡æ˜“Webã‚¢ãƒ—ãƒªé–‹ç™º
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-10.html">
                                ç¬¬10ç« : æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸ã®ã‚¬ã‚¤ãƒ‰
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">ç¬¬3ç« : ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã¨å¼</h1>
                </div>

                <div id="chapter3">
                    <h2 class="chapter-title">JSPã®æ ¸å¿ƒçš„ãªæ§‹æ–‡è¦ç´ ã‚’ãƒã‚¹ã‚¿ãƒ¼ã™ã‚‹</h2>

                    <div class="highlight">
                        <h5>ã“ã®ç« ã§å­¦ã¶ã“ã¨</h5>
                        <ul>
                            <li>ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆï¼ˆ&lt;% %&gt;ï¼‰ã®è©³ç´°ãªä½¿ã„æ–¹ã¨æ´»ç”¨æ–¹æ³•</li>
                            <li>å¼ï¼ˆ&lt;%= %&gt;ï¼‰ã«ã‚ˆã‚‹å‹•çš„ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‡ºåŠ›</li>
                            <li>å®£è¨€ï¼ˆ&lt;%! %&gt;ï¼‰ã‚’ä½¿ã£ãŸãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å®šç¾©</li>
                            <li>JSPå†…ã§ã®å¤‰æ•°ã®ã‚¹ã‚³ãƒ¼ãƒ—ã¨æœ‰åŠ¹ç¯„å›²</li>
                            <li>æ¡ä»¶åˆ†å²ã€ç¹°ã‚Šè¿”ã—å‡¦ç†ãªã©ã®åˆ¶å¾¡æ§‹é€ </li>
                            <li>å®Ÿè·µçš„ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã§ã®æ´»ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</li>
                        </ul>
                    </div>

                    <section id="scriptlet-basics">
                        <h3 class="section-title">3.1 ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã®åŸºæœ¬ç†è§£</h3>
                        
                        <p>ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆï¼ˆ&lt;% %&gt;ï¼‰ã¯ã€JSPãƒšãƒ¼ã‚¸å†…ã«Javaã‚³ãƒ¼ãƒ‰ã‚’ç›´æ¥è¨˜è¿°ã™ã‚‹ãŸã‚ã®æœ€ã‚‚åŸºæœ¬çš„ãªæ§‹æ–‡ã§ã™ã€‚ã“ã“ã§ã¯å¤‰æ•°ã®å®£è¨€ã€è¨ˆç®—å‡¦ç†ã€ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ãªã©ã€ã‚ã‚‰ã‚†ã‚‹Javaå‡¦ç†ãŒè¨˜è¿°ã§ãã¾ã™ã€‚</p>

                        <h4>ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã®ç‰¹å¾´ã¨å‹•ä½œåŸç†</h4>
                        <p>ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã¯ã€JSPã‹ã‚‰Servletã«å¤‰æ›ã•ã‚Œã‚‹éš›ã«ã€_jspService()ãƒ¡ã‚½ãƒƒãƒ‰å†…ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦åŸ‹ã‚è¾¼ã¾ã‚Œã¾ã™ã€‚</p>

                        <div class="mermaid">
                            flowchart TD
                                A["JSPãƒ•ã‚¡ã‚¤ãƒ«<br/>&lt;% int x = 10; %&gt;"] --> B["Servletå¤‰æ›"]
                                B --> C["_jspService()å†…ã«<br/>int x = 10;ã¨ã—ã¦é…ç½®"]
                                C --> D["ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè¡Œæ™‚ã«<br/>ã‚³ãƒ¼ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹"]
                        </div>

                        <h4>åŸºæœ¬çš„ãªè¨˜è¿°è¦å‰‡</h4>
                        <ul>
                            <li><strong>ã‚»ãƒŸã‚³ãƒ­ãƒ³ãŒå¿…è¦</strong>ï¼šJavaæ–‡ãªã®ã§æ–‡ã®çµ‚ã‚ã‚Šã«ã‚»ãƒŸã‚³ãƒ­ãƒ³ã‚’ä»˜ã‘ã‚‹</li>
                            <li><strong>ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°</strong>ï¼šã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆå†…ã®å¤‰æ•°ã¯ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°</li>
                            <li><strong>è¤‡æ•°è¡Œå¯¾å¿œ</strong>ï¼šæ”¹è¡Œã‚’å«ã‚€é•·ã„å‡¦ç†ã‚‚è¨˜è¿°å¯èƒ½</li>
                            <li><strong>HTMLæ··åœ¨</strong>ï¼šã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆé–“ã«HTMLã‚’æŒŸã‚€ã“ã¨ãŒå¯èƒ½</li>
                        </ul>

                        <div class="exercise-container">
                            <h5>å®Ÿç¿’ 3-1: åŸºæœ¬çš„ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆ</h5>
                            <p>å¤‰æ•°ã®å®£è¨€ã¨åŸºæœ¬çš„ãªå‡¦ç†ã‚’å«ã‚€ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
                            
                            <h6>scriptlet-basic.jspã®ä½œæˆ</h6>
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆåŸºæœ¬&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; }
        .info { background: #e3f2fd; padding: 15px; border-radius: 5px; margin: 10px 0; }
        .calculation { background: #f3e5f5; padding: 15px; border-radius: 5px; margin: 10px 0; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã®ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³&lt;/h1&gt;
    
    &lt;%
        // åŸºæœ¬çš„ãªå¤‰æ•°å®£è¨€
        String companyName = "ABCæ ªå¼ä¼šç¤¾";
        int foundedYear = 2010;
        double revenue = 125.7;
        boolean isPublic = true;
        
        // ç¾åœ¨å¹´ã®è¨ˆç®—
        int currentYear = java.util.Calendar.getInstance().get(java.util.Calendar.YEAR);
        int yearsInBusiness = currentYear - foundedYear;
    %&gt;
    
    &lt;div class="info"&gt;
        &lt;h2&gt;ä¼šç¤¾æƒ…å ±&lt;/h2&gt;
        &lt;p&gt;&lt;strong&gt;ä¼šç¤¾åï¼š&lt;/strong&gt;&lt;%= companyName %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;è¨­ç«‹å¹´ï¼š&lt;/strong&gt;&lt;%= foundedYear %&gt;å¹´&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;å£²ä¸Šé«˜ï¼š&lt;/strong&gt;&lt;%= revenue %&gt;å„„å††&lt;/p&gt;
        
        &lt;% if (isPublic) { %&gt;
            &lt;p&gt;&lt;strong&gt;ä¸Šå ´åŒºåˆ†ï¼š&lt;/strong&gt;ä¸Šå ´ä¼æ¥­&lt;/p&gt;
        &lt;% } else { %&gt;
            &lt;p&gt;&lt;strong&gt;ä¸Šå ´åŒºåˆ†ï¼š&lt;/strong&gt;æœªä¸Šå ´ä¼æ¥­&lt;/p&gt;
        &lt;% } %&gt;
    &lt;/div&gt;
    
    &lt;div class="calculation"&gt;
        &lt;h3&gt;è¨ˆç®—çµæœ&lt;/h3&gt;
        &lt;p&gt;è¨­ç«‹ã‹ã‚‰ã®å¹´æ•°: &lt;%= yearsInBusiness %&gt;å¹´&lt;/p&gt;
        
        &lt;%
            // å£²ä¸Šé«˜ã®æ®µéšè©•ä¾¡
            String evaluation;
            if (revenue >= 100) {
                evaluation = "å¤§ä¼æ¥­";
            } else if (revenue >= 50) {
                evaluation = "ä¸­å …ä¼æ¥­";
            } else {
                evaluation = "ä¸­å°ä¼æ¥­";
            }
        %&gt;
        &lt;p&gt;ä¼æ¥­è¦æ¨¡: &lt;%= evaluation %&gt;&lt;/p&gt;
        &lt;p&gt;ãƒ‡ãƒ¼ã‚¿æ›´æ–°æ™‚åˆ»: &lt;%= new java.util.Date() %&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                            <h6>å®Ÿè¡Œã¨ç¢ºèªãƒã‚¤ãƒ³ãƒˆ</h6>
                            <ol>
                                <li>å¤‰æ•°ãŒã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã§å®£è¨€ã•ã‚Œã€å¼ã§å‡ºåŠ›ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª</li>
                                <li>ifæ–‡ã«ã‚ˆã‚‹æ¡ä»¶åˆ†å²ãŒHTMLã®ç”Ÿæˆã«å½±éŸ¿ã™ã‚‹ã“ã¨ã‚’ç¢ºèª</li>
                                <li>è¨ˆç®—å‡¦ç†ãŒæ­£ã—ãå®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª</li>
                                <li>ãƒšãƒ¼ã‚¸ã‚’ä½•åº¦ã‹ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦æ™‚åˆ»ãŒæ›´æ–°ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª</li>
                            </ol>
                        </div>
                    </section>

                    <section id="expressions">
                        <h3 class="section-title">3.2 å¼ï¼ˆExpressionï¼‰ã«ã‚ˆã‚‹å‹•çš„å‡ºåŠ›</h3>

                        <p>å¼ï¼ˆ&lt;%= %&gt;ï¼‰ã¯ã€Javaå¼ã®çµæœã‚’ç›´æ¥HTMLå†…ã«å‡ºåŠ›ã™ã‚‹ãŸã‚ã®æ§‹æ–‡ã§ã™ã€‚å¤‰æ•°ã®å€¤ã€ãƒ¡ã‚½ãƒƒãƒ‰ã®æˆ»ã‚Šå€¤ã€è¨ˆç®—çµæœãªã©ã‚’ç°¡æ½”ã«è¡¨ç¤ºã§ãã¾ã™ã€‚</p>

                        <h4>å¼ã®åŸºæœ¬çš„ãªç‰¹å¾´</h4>
                        <ul>
                            <li><strong>ã‚»ãƒŸã‚³ãƒ­ãƒ³ä¸è¦</strong>ï¼šå¼ãªã®ã§ã‚»ãƒŸã‚³ãƒ­ãƒ³ã¯ä»˜ã‘ãªã„</li>
                            <li><strong>è‡ªå‹•å‹å¤‰æ›</strong>ï¼šçµæœãŒè‡ªå‹•çš„ã«æ–‡å­—åˆ—ã«å¤‰æ›ã•ã‚Œã¦å‡ºåŠ›</li>
                            <li><strong>å˜ä¸€å¼ã®ã¿</strong>ï¼šè¤‡æ•°ã®æ–‡ã¯è¨˜è¿°ã§ããªã„</li>
                            <li><strong>æˆ»ã‚Šå€¤å¿…é ˆ</strong>ï¼šä½•ã‚‰ã‹ã®å€¤ã‚’è¿”ã™å¼ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„</li>
                        </ul>

                        <h4>æ§˜ã€…ãªå¼ã®ä½¿ç”¨ä¾‹</h4>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>ã‚«ãƒ†ã‚´ãƒª</th>
                                    <th>å¼ã®ä¾‹</th>
                                    <th>ç”¨é€”</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>å¤‰æ•°å‡ºåŠ›</strong></td>
                                    <td><code>&lt;%= userName %&gt;</code></td>
                                    <td>å¤‰æ•°ã®å€¤ã‚’è¡¨ç¤º</td>
                                </tr>
                                <tr>
                                    <td><strong>è¨ˆç®—çµæœ</strong></td>
                                    <td><code>&lt;%= price * 1.1 %&gt;</code></td>
                                    <td>æ•°å€¤è¨ˆç®—ã®çµæœã‚’è¡¨ç¤º</td>
                                </tr>
                                <tr>
                                    <td><strong>ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—</strong></td>
                                    <td><code>&lt;%= user.getName() %&gt;</code></td>
                                    <td>ãƒ¡ã‚½ãƒƒãƒ‰ã®æˆ»ã‚Šå€¤ã‚’è¡¨ç¤º</td>
                                </tr>
                                <tr>
                                    <td><strong>æ¡ä»¶æ¼”ç®—å­</strong></td>
                                    <td><code>&lt;%= age >= 20 ? "æˆäºº" : "æœªæˆå¹´" %&gt;</code></td>
                                    <td>æ¡ä»¶ã«å¿œã˜ãŸå€¤ã‚’è¡¨ç¤º</td>
                                </tr>
                                <tr>
                                    <td><strong>æ–‡å­—åˆ—æ“ä½œ</strong></td>
                                    <td><code>&lt;%= name.toUpperCase() %&gt;</code></td>
                                    <td>æ–‡å­—åˆ—å‡¦ç†ã®çµæœã‚’è¡¨ç¤º</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="exercise-container">
                            <h5>å®Ÿç¿’ 3-2: å¼ã‚’æ´»ç”¨ã—ãŸå•†å“ã‚«ã‚¿ãƒ­ã‚°</h5>
                            <p>æ§˜ã€…ãªå¼ã‚’ä½¿ç”¨ã—ã¦å•†å“æƒ…å ±ã‚’å‹•çš„ã«è¡¨ç¤ºã™ã‚‹ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
                            
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;å•†å“ã‚«ã‚¿ãƒ­ã‚° - å¼ã®ãƒ‡ãƒ¢&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; }
        .product { border: 1px solid #ddd; padding: 20px; margin: 15px; border-radius: 5px; }
        .price { font-size: 1.2em; font-weight: bold; color: #d32f2f; }
        .status { padding: 3px 8px; border-radius: 3px; color: white; font-size: 0.9em; }
        .in-stock { background: #4caf50; }
        .out-of-stock { background: #f44336; }
        .discount { background: #ff9800; padding: 3px 8px; color: white; border-radius: 3px; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;å•†å“ã‚«ã‚¿ãƒ­ã‚°&lt;/h1&gt;
    
    &lt;%
        // å•†å“ãƒ‡ãƒ¼ã‚¿ï¼ˆå®Ÿéš›ã®é–‹ç™ºã§ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—ï¼‰
        String[] productNames = {"ãƒãƒ¼ãƒˆPC", "ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³", "ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ", "ãƒ˜ãƒƒãƒ‰ãƒ•ã‚©ãƒ³"};
        int[] prices = {89800, 128000, 45800, 12800};
        int[] stocks = {5, 0, 12, 8};
        double[] discountRates = {0.1, 0.0, 0.15, 0.05};
        
        // ç¨ç‡
        double taxRate = 0.1;
    %&gt;
    
    &lt;% for (int i = 0; i &lt; productNames.length; i++) { %&gt;
        &lt;div class="product"&gt;
            &lt;h3&gt;&lt;%= productNames[i] %&gt;&lt;/h3&gt;
            
            &lt;p&gt;&lt;strong&gt;å•†å“IDï¼š&lt;/strong&gt;PROD-&lt;%= String.format("%03d", i + 1) %&gt;&lt;/p&gt;
            
            &lt;p class="price"&gt;
                å®šä¾¡: Â¥&lt;%= String.format("%,d", prices[i]) %&gt;
                
                &lt;% if (discountRates[i] > 0) { %&gt;
                    &lt;span class="discount"&gt;&lt;%= (int)(discountRates[i] * 100) %&gt;% OFF&lt;/span&gt;
                    &lt;br&gt;
                    ã‚»ãƒ¼ãƒ«ä¾¡æ ¼: Â¥&lt;%= String.format("%,d", (int)(prices[i] * (1 - discountRates[i]))) %&gt;
                &lt;% } %&gt;
            &lt;/p&gt;
            
            &lt;p&gt;&lt;strong&gt;ç¨è¾¼ä¾¡æ ¼ï¼š&lt;/strong&gt;
                Â¥&lt;%= String.format("%,d", (int)(prices[i] * (1 - discountRates[i]) * (1 + taxRate))) %&gt;
            &lt;/p&gt;
            
            &lt;p&gt;&lt;strong&gt;åœ¨åº«çŠ¶æ³ï¼š&lt;/strong&gt;
                &lt;span class="status &lt;%= stocks[i] > 0 ? "in-stock" : "out-of-stock" %&gt;"&gt;
                    &lt;%= stocks[i] > 0 ? "åœ¨åº«ã‚ã‚Š (" + stocks[i] + "å€‹)" : "åœ¨åº«åˆ‡ã‚Œ" %&gt;
                &lt;/span&gt;
            &lt;/p&gt;
            
            &lt;p&gt;&lt;strong&gt;é…é€äºˆå®šï¼š&lt;/strong&gt;
                &lt;%= stocks[i] > 0 ? "1-2æ—¥ä»¥å†…" : "å…¥è·å¾…ã¡" %&gt;
            &lt;/p&gt;
        &lt;/div&gt;
    &lt;% } %&gt;
    
    &lt;hr&gt;
    &lt;p&gt;&lt;small&gt;ã‚«ã‚¿ãƒ­ã‚°æ›´æ–°æ—¥æ™‚: &lt;%= new java.text.SimpleDateFormat("yyyyå¹´MMæœˆddæ—¥ HH:mm").format(new java.util.Date()) %&gt;&lt;/small&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                            <h6>ã“ã®å®Ÿç¿’ã®ãƒã‚¤ãƒ³ãƒˆ</h6>
                            <ul>
                                <li>é…åˆ—ã‚’ä½¿ã£ãŸãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ã¨ç¹°ã‚Šè¿”ã—å‡¦ç†</li>
                                <li>æ¡ä»¶æ¼”ç®—å­ï¼ˆä¸‰é …æ¼”ç®—å­ï¼‰ã®æ´»ç”¨</li>
                                <li>String.formatã«ã‚ˆã‚‹æ•°å€¤ã®æ›¸å¼è¨­å®š</li>
                                <li>å‹•çš„ãªCSSã‚¯ãƒ©ã‚¹ã®å‰²ã‚Šå½“ã¦</li>
                                <li>è¨ˆç®—çµæœã®è¡¨ç¤º</li>
                            </ul>
                        </div>
                    </section>

                    <section id="declarations">
                        <h3 class="section-title">3.3 å®£è¨€ï¼ˆDeclarationï¼‰ã®æ´»ç”¨</h3>

                        <p>å®£è¨€ï¼ˆ&lt;%! %&gt;ï¼‰ã¯ã€ãƒ¡ã‚½ãƒƒãƒ‰ã‚„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã®æ§‹æ–‡ã§ã™ã€‚é€šå¸¸ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆãŒãƒ¡ã‚½ãƒƒãƒ‰å†…ã«é…ç½®ã•ã‚Œã‚‹ã®ã«å¯¾ã—ã€å®£è¨€ã¯ã‚¯ãƒ©ã‚¹ãƒ¬ãƒ™ãƒ«ã§å®šç¾©ã•ã‚Œã¾ã™ã€‚</p>

                        <h4>å®£è¨€ã®ç‰¹å¾´ã¨æ³¨æ„ç‚¹</h4>
                        <div class="mermaid">
                            flowchart TD
                                A["JSPå®£è¨€<br/>&lt;%! int counter = 0; %&gt;"] --> B["Servletã‚¯ãƒ©ã‚¹ã®<br/>ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã¨ã—ã¦é…ç½®"]
                                B --> C["å…¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§å…±æœ‰ã•ã‚Œã‚‹"]
                                C --> D["ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•ã®å•é¡Œã‚ã‚Š"]
                                
                                E["JSPã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆ<br/>&lt;% int x = 0; %&gt;"] --> F["_jspService()ãƒ¡ã‚½ãƒƒãƒ‰å†…ã®<br/>ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã¨ã—ã¦é…ç½®"]
                                F --> G["ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¯ã«ç‹¬ç«‹"]
                                G --> H["ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•"]
                        </div>

                        <div class="warning">
                            <h6>é‡è¦ãªæ³¨æ„äº‹é …</h6>
                            <p>å®£è¨€ã§å®šç¾©ã—ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã¯ã€è¤‡æ•°ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåŒæ™‚ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸå ´åˆã«ãƒ‡ãƒ¼ã‚¿ãŒæ··åœ¨ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ç‰¹åˆ¥ãªç†ç”±ãŒãªã„é™ã‚Šã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆå†…ã§ã®ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ä½¿ç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p>
                        </div>

                        <h4>é©åˆ‡ãªå®£è¨€ã®ä½¿ç”¨ä¾‹</h4>
                        <div class="exercise-container">
                            <h5>å®Ÿç¿’ 3-3: å®£è¨€ã‚’ä½¿ã£ãŸãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ¡ã‚½ãƒƒãƒ‰</h5>
                            <p>è¨ˆç®—å‡¦ç†ã‚’è¡Œã†ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®£è¨€ã§å®šç¾©ã—ã€JSPå†…ã§å†åˆ©ç”¨ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
                            
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;

&lt;%!
    // æ¶ˆè²»ç¨è¾¼ã¿ä¾¡æ ¼ã‚’è¨ˆç®—ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
    public double calculateTaxIncludedPrice(double price, double taxRate) {
        return price * (1 + taxRate);
    }
    
    // å‰²å¼•ä¾¡æ ¼ã‚’è¨ˆç®—ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
    public double calculateDiscountPrice(double price, double discountRate) {
        return price * (1 - discountRate);
    }
    
    // BMIã‚’è¨ˆç®—ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
    public double calculateBMI(double height, double weight) {
        return weight / (height * height);
    }
    
    // BMIã‚«ãƒ†ã‚´ãƒªã‚’åˆ¤å®šã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰
    public String getBMICategory(double bmi) {
        if (bmi &lt; 18.5) return "ä½ä½“é‡";
        else if (bmi &lt; 25.0) return "æ¨™æº–ä½“é‡";
        else if (bmi &lt; 30.0) return "è‚¥æº€1åº¦";
        else return "è‚¥æº€2åº¦ä»¥ä¸Š";
    }
%&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;å®£è¨€ãƒ¡ã‚½ãƒƒãƒ‰ã®ãƒ‡ãƒ¢&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; }
        .calculator { border: 1px solid #ddd; padding: 20px; margin: 15px 0; border-radius: 5px; }
        .result { background: #e8f5e8; padding: 10px; border-radius: 3px; margin: 10px 0; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;å®£è¨€ãƒ¡ã‚½ãƒƒãƒ‰ã®æ´»ç”¨ä¾‹&lt;/h1&gt;
    
    &lt;div class="calculator"&gt;
        &lt;h3&gt;ä¾¡æ ¼è¨ˆç®—æ©Ÿ&lt;/h3&gt;
        &lt;%
            double originalPrice = 10000;
            double taxRate = 0.1;
            double discountRate = 0.2;
        %&gt;
        
        &lt;p&gt;å®šä¾¡: Â¥&lt;%= String.format("%,.0f", originalPrice) %&gt;&lt;/p&gt;
        &lt;p&gt;å‰²å¼•ä¾¡æ ¼: Â¥&lt;%= String.format("%,.0f", calculateDiscountPrice(originalPrice, discountRate)) %&gt;&lt;/p&gt;
        &lt;p&gt;ç¨è¾¼ä¾¡æ ¼: Â¥&lt;%= String.format("%,.0f", calculateTaxIncludedPrice(originalPrice, taxRate)) %&gt;&lt;/p&gt;
        &lt;div class="result"&gt;
            &lt;strong&gt;æœ€çµ‚ä¾¡æ ¼ï¼ˆå‰²å¼•å¾Œç¨è¾¼ï¼‰: 
            Â¥&lt;%= String.format("%,.0f", calculateTaxIncludedPrice(calculateDiscountPrice(originalPrice, discountRate), taxRate)) %&gt;&lt;/strong&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class="calculator"&gt;
        &lt;h3&gt;BMIè¨ˆç®—æ©Ÿ&lt;/h3&gt;
        &lt;%
            double[] heights = {1.70, 1.65, 1.80};
            double[] weights = {65.0, 58.0, 85.0};
            String[] names = {"ç”°ä¸­ã•ã‚“", "ä½è—¤ã•ã‚“", "éˆ´æœ¨ã•ã‚“"};
        %&gt;
        
        &lt;% for (int i = 0; i &lt; names.length; i++) { %&gt;
            &lt;% double bmi = calculateBMI(heights[i], weights[i]); %&gt;
            &lt;p&gt;&lt;%= names[i] %&gt; (èº«é•·: &lt;%= heights[i] %&gt;m, ä½“é‡: &lt;%= weights[i] %&gt;kg)&lt;/p&gt;
            &lt;div class="result"&gt;
                BMI: &lt;%= String.format("%.1f", bmi) %&gt; - &lt;%= getBMICategory(bmi) %&gt;
            &lt;/div&gt;
        &lt;% } %&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                            <h6>å®£è¨€ãƒ¡ã‚½ãƒƒãƒ‰ã®åˆ©ç‚¹</h6>
                            <ul>
                                <li><strong>ã‚³ãƒ¼ãƒ‰ã®å†åˆ©ç”¨</strong>ï¼šåŒã˜å‡¦ç†ã‚’è¤‡æ•°ç®‡æ‰€ã§ä½¿ç”¨å¯èƒ½</li>
                                <li><strong>å¯èª­æ€§å‘ä¸Š</strong>ï¼šè¤‡é›‘ãªè¨ˆç®—ã‚’ãƒ¡ã‚½ãƒƒãƒ‰åã§è¡¨ç¾</li>
                                <li><strong>ä¿å®ˆæ€§å‘ä¸Š</strong>ï¼šä¿®æ­£æ™‚ã¯1ç®‡æ‰€ã®ã¿å¤‰æ›´ã™ã‚Œã°è‰¯ã„</li>
                                <li><strong>ãƒ†ã‚¹ãƒˆã®å®¹æ˜“æ€§</strong>ï¼šç‹¬ç«‹ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦ãƒ†ã‚¹ãƒˆå¯èƒ½</li>
                            </ul>
                        </div>
                    </section>

                    <section id="variables-scope">
                        <h3 class="section-title">3.4 å¤‰æ•°ã¨ã‚¹ã‚³ãƒ¼ãƒ—ã®ç†è§£</h3>

                        <p>JSPã«ãŠã‘ã‚‹å¤‰æ•°ã®ã‚¹ã‚³ãƒ¼ãƒ—ï¼ˆæœ‰åŠ¹ç¯„å›²ï¼‰ã‚’ç†è§£ã™ã‚‹ã“ã¨ã¯ã€æ­£ã—ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãä¸Šã§éå¸¸ã«é‡è¦ã§ã™ã€‚</p>

                        <h4>JSPã§ã®å¤‰æ•°ã‚¹ã‚³ãƒ¼ãƒ—</h4>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>å®£è¨€å ´æ‰€</th>
                                    <th>ã‚¹ã‚³ãƒ¼ãƒ—</th>
                                    <th>å…±æœ‰ãƒ¬ãƒ™ãƒ«</th>
                                    <th>æ¨å¥¨åº¦</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>&lt;%! %&gt; å®£è¨€</strong></td>
                                    <td>ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°</td>
                                    <td>å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã§å…±æœ‰</td>
                                    <td>æ³¨æ„ã—ã¦ä½¿ç”¨</td>
                                </tr>
                                <tr>
                                    <td><strong>&lt;% %&gt; ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆ</strong></td>
                                    <td>ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°</td>
                                    <td>ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¯ã«ç‹¬ç«‹</td>
                                    <td>æ¨å¥¨</td>
                                </tr>
                                <tr>
                                    <td><strong>implicit objects</strong></td>
                                    <td>ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¹ã‚³ãƒ¼ãƒ—</td>
                                    <td>1ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…ã§å…±æœ‰</td>
                                    <td>é©åˆ‡ãªä½¿ç”¨</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="highlight">
                            <h6>ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•ãƒ†ã‚£ã®é‡è¦æ€§</h6>
                            <p>Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯è¤‡æ•°ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåŒæ™‚ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ãŒå¸¸ã§ã™ã€‚ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ç•°ãªã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ãŒæ··åœ¨ã™ã‚‹å±é™ºæ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>
                        </div>

                        <div class="exercise-container">
                            <h5>å®Ÿç¿’ 3-4: ã‚¹ã‚³ãƒ¼ãƒ—ã®é•ã„ã‚’ç†è§£ã™ã‚‹</h5>
                            <p>ç•°ãªã‚‹ã‚¹ã‚³ãƒ¼ãƒ—ã§ã®å¤‰æ•°ã®å‹•ä½œã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
                            
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;

&lt;%!
    // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ï¼ˆå…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã§å…±æœ‰ã•ã‚Œã‚‹ - æ³¨æ„ï¼ï¼‰
    private int instanceCounter = 0;
    private String lastAccessUser = "æœªè¨­å®š";
%&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;å¤‰æ•°ã‚¹ã‚³ãƒ¼ãƒ—ã®ãƒ‡ãƒ¢&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; }
        .scope-demo { border: 1px solid #ddd; padding: 15px; margin: 15px 0; border-radius: 5px; }
        .warning { background: #fff3e0; border-left: 4px solid #ff9800; }
        .safe { background: #e8f5e8; border-left: 4px solid #4caf50; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;å¤‰æ•°ã‚¹ã‚³ãƒ¼ãƒ—ã®ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³&lt;/h1&gt;
    
    &lt;%
        // ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¯ã«ç‹¬ç«‹ï¼‰
        int localCounter = 0;
        String currentTime = new java.text.SimpleDateFormat("HH:mm:ss").format(new java.util.Date());
        String sessionId = session.getId();
        
        // ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã®æ›´æ–°ï¼ˆå±é™ºãªä¾‹ï¼‰
        instanceCounter++;
        lastAccessUser = sessionId.substring(0, 8); // ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã®ä¸€éƒ¨ã‚’ä½¿ç”¨
        
        // ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã®æ›´æ–°
        localCounter = 100;
    %&gt;
    
    &lt;div class="scope-demo warning"&gt;
        &lt;h3&gt;âš ï¸ ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ï¼ˆå…±æœ‰ã•ã‚Œã‚‹ï¼‰&lt;/h3&gt;
        &lt;p&gt;&lt;strong&gt;ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ï¼š&lt;/strong&gt;&lt;%= instanceCounter %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;æœ€å¾Œã®ã‚¢ã‚¯ã‚»ã‚¹ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼š&lt;/strong&gt;&lt;%= lastAccessUser %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;small&gt;â€» ã“ã®å€¤ã¯å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å…±æœ‰ã•ã‚Œã‚‹ãŸã‚ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¯ã‚»ã‚¹ã«ã‚ˆã‚Šå¤‰æ›´ã•ã‚Œã¾ã™&lt;/small&gt;&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class="scope-demo safe"&gt;
        &lt;h3&gt;âœ… ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ï¼ˆå®‰å…¨ï¼‰&lt;/h3&gt;
        &lt;p&gt;&lt;strong&gt;ãƒ­ãƒ¼ã‚«ãƒ«ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ï¼š&lt;/strong&gt;&lt;%= localCounter %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;ã‚¢ã‚¯ã‚»ã‚¹æ™‚åˆ»ï¼š&lt;/strong&gt;&lt;%= currentTime %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;ã‚ãªãŸã®ã‚»ãƒƒã‚·ãƒ§ãƒ³IDï¼š&lt;/strong&gt;&lt;%= sessionId %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;small&gt;â€» ã“ã‚Œã‚‰ã®å€¤ã¯ã‚ãªãŸã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå°‚ç”¨ã§ã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯å½±éŸ¿ã•ã‚Œã¾ã›ã‚“&lt;/small&gt;&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class="scope-demo"&gt;
        &lt;h3&gt;å®Ÿé¨“ã—ã¦ã¿ã¾ã—ã‚‡ã†&lt;/h3&gt;
        &lt;p&gt;1. ã“ã®ãƒšãƒ¼ã‚¸ã‚’è¤‡æ•°å›ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„&lt;/p&gt;
        &lt;p&gt;2. åˆ¥ã®ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆã¾ãŸã¯åˆ¥ã‚¿ãƒ–ï¼‰ã§ã‚‚åŒã˜ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦ãã ã•ã„&lt;/p&gt;
        &lt;p&gt;3. ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã¨ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã®é•ã„ã‚’è¦³å¯Ÿã—ã¦ãã ã•ã„&lt;/p&gt;
        
        &lt;p&gt;&lt;a href="javascript:location.reload()" style="padding: 10px; background: #007bff; color: white; text-decoration: none; border-radius: 3px;"&gt;ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰&lt;/a&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                            <h6>å®Ÿé¨“ã®è¦³å¯Ÿãƒã‚¤ãƒ³ãƒˆ</h6>
                            <ul>
                                <li>ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã¯æ¯å›åŒã˜å€¤ï¼ˆ100ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹</li>
                                <li>ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã¯ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãŸã³ã«å¢—åŠ ã™ã‚‹</li>
                                <li>åˆ¥ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚‚åŒã˜ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ãŒå…±æœ‰ã•ã‚Œã‚‹</li>
                                <li>ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã¯ãƒ–ãƒ©ã‚¦ã‚¶æ¯ã«ç•°ãªã‚‹</li>
                            </ul>
                        </div>
                    </section>

                    <section id="control-structures">
                        <h3 class="section-title">3.5 åˆ¶å¾¡æ§‹é€ ã®æ´»ç”¨</h3>

                        <p>JSPã§ã¯ã€Javaã®åˆ¶å¾¡æ§‹é€ ï¼ˆæ¡ä»¶åˆ†å²ã€ç¹°ã‚Šè¿”ã—å‡¦ç†ï¼‰ã‚’HTMLã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å‹•çš„ãªWebãƒšãƒ¼ã‚¸ãŒä½œæˆã§ãã¾ã™ã€‚</p>

                        <h4>ä¸»è¦ãªåˆ¶å¾¡æ§‹é€ </h4>
                        <div class="mermaid">
                            flowchart TD
                                A["åˆ¶å¾¡æ§‹é€ "] --> B["æ¡ä»¶åˆ†å²"]
                                A --> C["ç¹°ã‚Šè¿”ã—å‡¦ç†"]
                                A --> D["ä¾‹å¤–å‡¦ç†"]
                                
                                B --> B1["if-elseæ–‡"]
                                B --> B2["switchæ–‡"]
                                B --> B3["ä¸‰é …æ¼”ç®—å­"]
                                
                                C --> C1["foræ–‡"]
                                C --> C2["whileæ–‡"]
                                C --> C3["æ‹¡å¼µforæ–‡"]
                                
                                D --> D1["try-catchæ–‡"]
                                D --> D2["finallyæ–‡"]
                        </div>

                        <div class="exercise-container">
                            <h5>å®Ÿç¿’ 3-5: åˆ¶å¾¡æ§‹é€ ã‚’ä½¿ã£ãŸå‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h5>
                            <p>æ§˜ã€…ãªåˆ¶å¾¡æ§‹é€ ã‚’ä½¿ç”¨ã—ã¦ã€æ¡ä»¶ã«å¿œã˜ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”Ÿæˆã‚’è¡Œã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
                            
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;åˆ¶å¾¡æ§‹é€ ã®ãƒ‡ãƒ¢&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; }
        .section { border: 1px solid #ddd; padding: 20px; margin: 15px 0; border-radius: 5px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background: #f2f2f2; }
        .grade-A { background: #e8f5e8; }
        .grade-B { background: #fff3e0; }
        .grade-C { background: #ffebee; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;åˆ¶å¾¡æ§‹é€ ã®ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³&lt;/h1&gt;
    
    &lt;%
        // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æº–å‚™
        String[] studentNames = {"ç”°ä¸­å¤ªéƒ", "ä½è—¤èŠ±å­", "éˆ´æœ¨ä¸€éƒ", "é«˜æ©‹ç¾å’²", "æ¸¡è¾ºå¥å¤ª"};
        int[] mathScores = {95, 72, 65, 88, 45};
        int[] englishScores = {88, 91, 78, 85, 52};
        
        // ç¾åœ¨æ™‚åˆ»ã®å–å¾—
        java.util.Calendar cal = java.util.Calendar.getInstance();
        int currentHour = cal.get(java.util.Calendar.HOUR_OF_DAY);
        String timeOfDay;
        
        // æ™‚åˆ»ã«å¿œã˜ãŸæŒ¨æ‹¶ï¼ˆif-elseæ–‡ï¼‰
        if (currentHour &lt; 6) {
            timeOfDay = "æ·±å¤œ";
        } else if (currentHour &lt; 12) {
            timeOfDay = "åˆå‰";
        } else if (currentHour &lt; 18) {
            timeOfDay = "åˆå¾Œ";
        } else {
            timeOfDay = "å¤œ";
        }
    %&gt;
    
    &lt;div class="section"&gt;
        &lt;h2&gt;æ™‚åˆ»ã«ã‚ˆã‚‹å‹•çš„æŒ¨æ‹¶&lt;/h2&gt;
        &lt;p&gt;&lt;%= timeOfDay %&gt;ã®å­¦ç¿’ã€ãŠç–²ã‚Œæ§˜ã§ã™ï¼&lt;/p&gt;
        &lt;p&gt;ç¾åœ¨æ™‚åˆ»ï¼š&lt;%= cal.get(java.util.Calendar.HOUR_OF_DAY) %&gt;æ™‚&lt;%= cal.get(java.util.Calendar.MINUTE) %&gt;åˆ†&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class="section"&gt;
        &lt;h2&gt;æˆç¸¾ä¸€è¦§è¡¨ï¼ˆforæ–‡ã«ã‚ˆã‚‹ç¹°ã‚Šè¿”ã—å‡¦ç†ï¼‰&lt;/h2&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;th&gt;ç”Ÿå¾’å&lt;/th&gt;
                &lt;th&gt;æ•°å­¦&lt;/th&gt;
                &lt;th&gt;è‹±èª&lt;/th&gt;
                &lt;th&gt;å¹³å‡&lt;/th&gt;
                &lt;th&gt;è©•ä¾¡&lt;/th&gt;
            &lt;/tr&gt;
            
            &lt;% 
            for (int i = 0; i &lt; studentNames.length; i++) {
                double average = (mathScores[i] + englishScores[i]) / 2.0;
                String grade;
                String gradeClass;
                
                // switchæ–‡ã«ã‚ˆã‚‹è©•ä¾¡åˆ†é¡
                switch ((int)(average / 10)) {
                    case 10:
                    case 9:
                        grade = "A (å„ªç§€)";
                        gradeClass = "grade-A";
                        break;
                    case 8:
                    case 7:
                        grade = "B (è‰¯å¥½)";
                        gradeClass = "grade-B";
                        break;
                    default:
                        grade = "C (è¦åŠªåŠ›)";
                        gradeClass = "grade-C";
                }
            %&gt;
            
            &lt;tr class="&lt;%= gradeClass %&gt;"&gt;
                &lt;td&gt;&lt;%= studentNames[i] %&gt;&lt;/td&gt;
                &lt;td&gt;&lt;%= mathScores[i] %&gt;ç‚¹&lt;/td&gt;
                &lt;td&gt;&lt;%= englishScores[i] %&gt;ç‚¹&lt;/td&gt;
                &lt;td&gt;&lt;%= String.format("%.1f", average) %&gt;ç‚¹&lt;/td&gt;
                &lt;td&gt;&lt;%= grade %&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;% } %&gt;
        &lt;/table&gt;
    &lt;/div&gt;
    
    &lt;div class="section"&gt;
        &lt;h2&gt;çµ±è¨ˆæƒ…å ±ï¼ˆæ‹¡å¼µforæ–‡ã¨whileæ–‡ï¼‰&lt;/h2&gt;
        
        &lt;%
            // æ•°å­¦ã®çµ±è¨ˆ
            int mathTotal = 0;
            int mathMax = mathScores[0];
            int mathMin = mathScores[0];
            
            for (int score : mathScores) {
                mathTotal += score;
                if (score &gt; mathMax) mathMax = score;
                if (score &lt; mathMin) mathMin = score;
            }
            double mathAverage = (double)mathTotal / mathScores.length;
            
            // é«˜å¾—ç‚¹è€…ã®ã‚«ã‚¦ãƒ³ãƒˆï¼ˆwhileæ–‡ï¼‰
            int highScoreCount = 0;
            int index = 0;
            while (index &lt; mathScores.length) {
                if (mathScores[index] &gt;= 80) {
                    highScoreCount++;
                }
                index++;
            }
        %&gt;
        
        &lt;h3&gt;æ•°å­¦ç§‘ç›®çµ±è¨ˆ&lt;/h3&gt;
        &lt;ul&gt;
            &lt;li&gt;å¹³å‡ç‚¹ï¼š&lt;%= String.format("%.1f", mathAverage) %&gt;ç‚¹&lt;/li&gt;
            &lt;li&gt;æœ€é«˜ç‚¹ï¼š&lt;%= mathMax %&gt;ç‚¹&lt;/li&gt;
            &lt;li&gt;æœ€ä½ç‚¹ï¼š&lt;%= mathMin %&gt;ç‚¹&lt;/li&gt;
            &lt;li&gt;80ç‚¹ä»¥ä¸Šï¼š&lt;%= highScoreCount %&gt;å&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
    
    &lt;div class="section"&gt;
        &lt;h2&gt;ä¾‹å¤–å‡¦ç†ã®ãƒ‡ãƒ¢&lt;/h2&gt;
        
        &lt;%
            String[] testInputs = {"100", "abc", "75", "50.5"};
            
            for (String input : testInputs) {
                try {
                    int score = Integer.parseInt(input);
                    String result = (score &gt;= 60) ? "åˆæ ¼" : "ä¸åˆæ ¼";
        %&gt;
                    &lt;p&gt;å…¥åŠ›å€¤ã€Œ&lt;%= input %&gt;ã€â†’ &lt;%= score %&gt;ç‚¹ (&lt;%= result %&gt;)&lt;/p&gt;
        &lt;%
                } catch (NumberFormatException e) {
        %&gt;
                    &lt;p style="color: red;"&gt;å…¥åŠ›å€¤ã€Œ&lt;%= input %&gt;ã€â†’ ã‚¨ãƒ©ãƒ¼: æ•°å€¤ã§ã¯ã‚ã‚Šã¾ã›ã‚“&lt;/p&gt;
        &lt;%
                }
            }
        %&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                            <h6>ã“ã®å®Ÿç¿’ã®ãƒã‚¤ãƒ³ãƒˆ</h6>
                            <ul>
                                <li>if-elseæ–‡ã«ã‚ˆã‚‹æ¡ä»¶åˆ†å²ã§ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åˆ‡ã‚Šæ›¿ãˆ</li>
                                <li>foræ–‡ã‚’ä½¿ã£ãŸç¹°ã‚Šè¿”ã—å‡¦ç†ã«ã‚ˆã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ç”Ÿæˆ</li>
                                <li>switchæ–‡ã«ã‚ˆã‚‹åˆ†é¡å‡¦ç†</li>
                                <li>æ‹¡å¼µforæ–‡ã¨whileæ–‡ã®ä½¿ã„åˆ†ã‘</li>
                                <li>try-catchæ–‡ã«ã‚ˆã‚‹ä¾‹å¤–å‡¦ç†</li>
                                <li>ä¸‰é …æ¼”ç®—å­ã®æ´»ç”¨</li>
                            </ul>
                        </div>
                    </section>

                    <section id="practical-examples">
                        <h3 class="section-title">3.6 å®Ÿè·µçš„ãªæ´»ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³</h3>

                        <p>ã“ã‚Œã¾ã§å­¦ã‚“ã ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã€å¼ã€å®£è¨€ã‚’çµ„ã¿åˆã‚ã›ã¦ã€å®Ÿéš›ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿè£…ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>

                        <div class="exercise-container">
                            <h5>å®Ÿç¿’ 3-6: ç°¡æ˜“ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆçµæœè¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ </h5>
                            <p>ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã—ã¦ã€çµæœã‚’ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«ã«è¡¨ç¤ºã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
                            
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;

&lt;%!
    // ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã®ãŸã‚ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ¡ã‚½ãƒƒãƒ‰
    public double calculatePercentage(int value, int total) {
        return total == 0 ? 0 : (double)value / total * 100;
    }
    
    public String generateProgressBar(double percentage) {
        int barLength = (int)(percentage / 2); // 50% = 25æ–‡å­—
        StringBuilder bar = new StringBuilder();
        for (int i = 0; i &lt; barLength; i++) {
            bar.append("â–ˆ");
        }
        return bar.toString();
    }
    
    public String getColorByPercentage(double percentage) {
        if (percentage &gt;= 50) return "#4caf50";
        else if (percentage &gt;= 30) return "#ff9800";
        else return "#f44336";
    }
%&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆçµæœè¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ &lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        .survey-section { margin: 30px 0; }
        .option { margin: 10px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .progress-bar { font-family: monospace; font-size: 14px; line-height: 1; }
        .stats { background: #e3f2fd; padding: 15px; border-radius: 5px; margin: 20px 0; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;h1&gt;ğŸ“Š ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆçµæœè¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ &lt;/h1&gt;
        
        &lt;%
            // ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ï¼ˆå®Ÿéš›ã«ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—ï¼‰
            String[] questions = {
                "å½“ç¤¾ã®ã‚µãƒ¼ãƒ“ã‚¹ã«æº€è¶³ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
                "ãƒªãƒ”ãƒ¼ãƒˆã—ã¦åˆ©ç”¨ã—ãŸã„ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
                "å‹äººã«æ¨è–¦ã—ãŸã„ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ"
            };
            
            String[][] options = {
                {"éå¸¸ã«æº€è¶³", "æº€è¶³", "æ™®é€š", "ä¸æº€", "éå¸¸ã«ä¸æº€"},
                {"å¿…ãšåˆ©ç”¨ã™ã‚‹", "ãŠãã‚‰ãåˆ©ç”¨ã™ã‚‹", "ã‚ã‹ã‚‰ãªã„", "åˆ©ç”¨ã—ãªã„"},
                {"ãœã²æ¨è–¦ã™ã‚‹", "æ¨è–¦ã™ã‚‹", "ã©ã¡ã‚‰ã§ã‚‚ãªã„", "æ¨è–¦ã—ãªã„"}
            };
            
            int[][] responses = {
                {45, 78, 32, 12, 3},    // è³ªå•1ã®å›ç­”æ•°
                {62, 89, 28, 15},       // è³ªå•2ã®å›ç­”æ•°
                {38, 71, 45, 18}        // è³ªå•3ã®å›ç­”æ•°
            };
            
            // å…¨ä½“çµ±è¨ˆ
            int totalResponses = 0;
            for (int[] questionResponses : responses) {
                for (int count : questionResponses) {
                    totalResponses += count;
                }
            }
            
            java.util.Date surveyDate = new java.util.Date();
        %&gt;
        
        &lt;div class="stats"&gt;
            &lt;h3&gt;ğŸ“ˆ èª¿æŸ»æ¦‚è¦&lt;/h3&gt;
            &lt;ul&gt;
                &lt;li&gt;&lt;strong&gt;ç·å›ç­”æ•°ï¼š&lt;/strong&gt;&lt;%= totalResponses %&gt;ä»¶&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;èª¿æŸ»æœŸé–“ï¼š&lt;/strong&gt;2024å¹´3æœˆ1æ—¥ - 3æœˆ31æ—¥&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;é›†è¨ˆæ—¥æ™‚ï¼š&lt;/strong&gt;&lt;%= new java.text.SimpleDateFormat("yyyyå¹´MMæœˆddæ—¥ HH:mm").format(surveyDate) %&gt;&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
        
        &lt;% for (int q = 0; q &lt; questions.length; q++) { %&gt;
            &lt;div class="survey-section"&gt;
                &lt;h2&gt;Q&lt;%= (q + 1) %&gt;: &lt;%= questions[q] %&gt;&lt;/h2&gt;
                
                &lt;%
                    // è³ªå•ã”ã¨ã®åˆè¨ˆå›ç­”æ•°ã‚’è¨ˆç®—
                    int questionTotal = 0;
                    for (int count : responses[q]) {
                        questionTotal += count;
                    }
                %&gt;
                
                &lt;p&gt;&lt;strong&gt;å›ç­”è€…æ•°ï¼š&lt;/strong&gt;&lt;%= questionTotal %&gt;å&lt;/p&gt;
                
                &lt;% for (int o = 0; o &lt; options[q].length; o++) { %&gt;
                    &lt;%
                        int count = responses[q][o];
                        double percentage = calculatePercentage(count, questionTotal);
                        String progressBar = generateProgressBar(percentage);
                        String color = getColorByPercentage(percentage);
                    %&gt;
                    
                    &lt;div class="option"&gt;
                        &lt;div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;"&gt;
                            &lt;strong&gt;&lt;%= options[q][o] %&gt;&lt;/strong&gt;
                            &lt;span&gt;&lt;%= count %&gt;å (&lt;%= String.format("%.1f", percentage) %&gt;%)&lt;/span&gt;
                        &lt;/div&gt;
                        &lt;div class="progress-bar" style="color: &lt;%= color %&gt;"&gt;
                            &lt;%= progressBar %&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;% } %&gt;
                
                &lt;%-- è³ªå•ã”ã¨ã®å‚¾å‘åˆ†æ --%&gt;
                &lt;%
                    // æœ€ã‚‚å¤šã„å›ç­”ã‚’è¦‹ã¤ã‘ã‚‹
                    int maxCount = 0;
                    String mostPopular = "";
                    for (int o = 0; o &lt; options[q].length; o++) {
                        if (responses[q][o] &gt; maxCount) {
                            maxCount = responses[q][o];
                            mostPopular = options[q][o];
                        }
                    }
                    
                    // æº€è¶³åº¦ã®é«˜ã„å›ç­”ï¼ˆæœ€åˆã®2ã¤ã®é¸æŠè‚¢ï¼‰ã®åˆè¨ˆ
                    int positiveCount = 0;
                    if (responses[q].length &gt;= 2) {
                        positiveCount = responses[q][0] + responses[q][1];
                    }
                    double positiveRate = calculatePercentage(positiveCount, questionTotal);
                %&gt;
                
                &lt;div style="background: #f8f9fa; padding: 10px; border-radius: 3px; margin-top: 10px;"&gt;
                    &lt;small&gt;
                        &lt;strong&gt;ğŸ“Š åˆ†æï¼š&lt;/strong&gt;
                        æœ€å¤šå›ç­”ã€Œ&lt;%= mostPopular %&gt;ã€(&lt;%= maxCount %&gt;å)
                        
                        &lt;% if (positiveRate &gt;= 60) { %&gt;
                            | é«˜è©•ä¾¡ç‡: &lt;%= String.format("%.1f", positiveRate) %&gt;% âœ¨
                        &lt;% } else if (positiveRate &gt;= 40) { %&gt;
                            | è©•ä¾¡ç‡: &lt;%= String.format("%.1f", positiveRate) %&gt;% ğŸ“ˆ
                        &lt;% } else { %&gt;
                            | æ”¹å–„ã®ä½™åœ°ã‚ã‚Š: &lt;%= String.format("%.1f", positiveRate) %&gt;% ğŸ’¡
                        &lt;% } %&gt;
                    &lt;/small&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;% } %&gt;
        
        &lt;div class="stats"&gt;
            &lt;h3&gt;ğŸ¯ ç·åˆåˆ†æ&lt;/h3&gt;
            &lt;%
                // å…¨ä½“çš„ãªå‚¾å‘ã‚’åˆ†æ
                int totalPositive = 0;
                int totalAnswers = 0;
                
                for (int q = 0; q &lt; responses.length; q++) {
                    if (responses[q].length &gt;= 2) {
                        totalPositive += responses[q][0] + responses[q][1];
                    }
                    for (int count : responses[q]) {
                        totalAnswers += count;
                    }
                }
                
                double overallSatisfaction = calculatePercentage(totalPositive, totalAnswers);
            %&gt;
            
            &lt;p&gt;&lt;strong&gt;ç·åˆæº€è¶³åº¦ï¼š&lt;/strong&gt;&lt;%= String.format("%.1f", overallSatisfaction) %&gt;%&lt;/p&gt;
            
            &lt;% if (overallSatisfaction &gt;= 70) { %&gt;
                &lt;p style="color: #4caf50;"&gt;âœ… å„ªç§€ãªè©•ä¾¡çµæœã§ã™ã€‚ç¾åœ¨ã®ã‚µãƒ¼ãƒ“ã‚¹å“è³ªã‚’ç¶­æŒã—ã¦ãã ã•ã„ã€‚&lt;/p&gt;
            &lt;% } else if (overallSatisfaction &gt;= 50) { %&gt;
                &lt;p style="color: #ff9800;"&gt;ğŸ“Š å¹³å‡çš„ãªè©•ä¾¡ã§ã™ã€‚æ”¹å–„ç‚¹ã‚’ç‰¹å®šã—ã€ã‚µãƒ¼ãƒ“ã‚¹å‘ä¸Šã«åŠªã‚ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
            &lt;% } else { %&gt;
                &lt;p style="color: #f44336;"&gt;âš ï¸ æ”¹å–„ãŒå¿…è¦ã§ã™ã€‚ãŠå®¢æ§˜ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è©³ã—ãåˆ†æã—ã€å¯¾ç­–ã‚’è¬›ã˜ã¦ãã ã•ã„ã€‚&lt;/p&gt;
            &lt;% } %&gt;
        &lt;/div&gt;
        
        &lt;hr&gt;
        &lt;p&gt;&lt;small&gt;â€» ã“ã®ãƒ‡ãƒ¢ã¯æ•™è‚²ç›®çš„ã§ä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚å®Ÿéš›ã®æ¥­å‹™ã§ã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã®é€£æºã‚„ã‚ˆã‚Šè©³ç´°ãªçµ±è¨ˆåˆ†æãŒå¿…è¦ã§ã™ã€‚&lt;/small&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                            <h6>ã“ã®å®Ÿç¿’ã‹ã‚‰å­¦ã¹ã‚‹å®Ÿè·µãƒ‘ã‚¿ãƒ¼ãƒ³</h6>
                            <ul>
                                <li><strong>å®£è¨€ãƒ¡ã‚½ãƒƒãƒ‰ã®æ´»ç”¨</strong>ï¼šè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®å†åˆ©ç”¨</li>
                                <li><strong>å¤šæ¬¡å…ƒé…åˆ—ã®å‡¦ç†</strong>ï¼šè¤‡é›‘ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®æ“ä½œ</li>
                                <li><strong>å‹•çš„ãªCSSã®é©ç”¨</strong>ï¼šãƒ‡ãƒ¼ã‚¿ã«å¿œã˜ãŸã‚¹ã‚¿ã‚¤ãƒ«å¤‰æ›´</li>
                                <li><strong>ãƒã‚¹ãƒˆã—ãŸãƒ«ãƒ¼ãƒ—</strong>ï¼šè³ªå•ã¨é¸æŠè‚¢ã®äºŒé‡æ§‹é€ </li>
                                <li><strong>æ¡ä»¶ã«å¿œã˜ãŸã‚³ãƒ¡ãƒ³ãƒˆç”Ÿæˆ</strong>ï¼šãƒ‡ãƒ¼ã‚¿åˆ†æçµæœã®è¡¨ç¤º</li>
                                <li><strong>æ–‡å­—åˆ—ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ</strong>ï¼šæ•°å€¤ã®è¦‹ã‚„ã™ã„è¡¨ç¤º</li>
                            </ul>
                        </div>
                    </section>

                    <div class="quiz-container">
                        <h5>ç†è§£åº¦ç¢ºèªã‚¯ã‚¤ã‚º</h5>
                        <ol>
                            <li>ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆï¼ˆ&lt;% %&gt;ï¼‰ã¨å¼ï¼ˆ&lt;%= %&gt;ï¼‰ã®è¨˜è¿°ãƒ«ãƒ¼ãƒ«ã®é•ã„ã‚’3ã¤æŒ™ã’ã¦ãã ã•ã„ã€‚</li>
                            <li>å®£è¨€ï¼ˆ&lt;%! %&gt;ï¼‰ã§å®šç¾©ã—ãŸå¤‰æ•°ãŒã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•ã§ãªã„ç†ç”±ã‚’èª¬æ˜ã—ã¦ãã ã•ã„ã€‚</li>
                            <li>JSPå†…ã§æ¡ä»¶åˆ†å²ã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•ã‚’3ã¤æŒ™ã’ã€ãã‚Œãã‚Œã®ç‰¹å¾´ã‚’èª¬æ˜ã—ã¦ãã ã•ã„ã€‚</li>
                            <li>ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã®é©åˆ‡ãªä½¿ã„åˆ†ã‘ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ãã ã•ã„ã€‚</li>
                            <li>JSPã§ä¾‹å¤–å‡¦ç†ã‚’è¡Œã†éš›ã®æ³¨æ„ç‚¹ã¨æ¨å¥¨ã•ã‚Œã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¦ãã ã•ã„ã€‚</li>
                        </ol>
                        
                        <details>
                            <summary>è§£ç­”ä¾‹</summary>
                            <ol>
                                <li><strong>ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã¨å¼ã®é•ã„</strong>
                                    <ul>
                                        <li>ã‚»ãƒŸã‚³ãƒ­ãƒ³ï¼šã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã¯å¿…è¦ã€å¼ã¯ä¸è¦</li>
                                        <li>æˆ»ã‚Šå€¤ï¼šã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã¯ä¸è¦ã€å¼ã¯å€¤ã‚’è¿”ã™å¿…è¦ã‚ã‚Š</li>
                                        <li>ç”¨é€”ï¼šã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ¬ãƒƒãƒˆã¯å‡¦ç†ã€å¼ã¯å‡ºåŠ›</li>
                                    </ul>
                                </li>
                                <li><strong>å®£è¨€å¤‰æ•°ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•å•é¡Œ</strong>ï¼šè¤‡æ•°ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒåŒã˜Servletã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã€åŒæ™‚ã‚¢ã‚¯ã‚»ã‚¹ã§å¤‰æ•°ã®å€¤ãŒäºˆæœŸã›ãšå¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹</li>
                                <li><strong>æ¡ä»¶åˆ†å²ã®å®Ÿè£…æ–¹æ³•</strong>
                                    <ul>
                                        <li>if-elseæ–‡ï¼šè¤‡é›‘ãªæ¡ä»¶åˆ¤å®šã«é©ã—ã¦ã„ã‚‹</li>
                                        <li>switchæ–‡ï¼šå›ºå®šå€¤ã«ã‚ˆã‚‹åˆ†å²ã«é©ã—ã¦ã„ã‚‹</li>
                                        <li>ä¸‰é …æ¼”ç®—å­ï¼šã‚·ãƒ³ãƒ—ãƒ«ãªæ¡ä»¶ã§ã®å€¤é¸æŠã«é©ã—ã¦ã„ã‚‹</li>
                                    </ul>
                                </li>
                                <li><strong>å¤‰æ•°ã®ä½¿ã„åˆ†ã‘</strong>
                                    <ul>
                                        <li>ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ï¼šãƒªã‚¯ã‚¨ã‚¹ãƒˆå›ºæœ‰ã®ãƒ‡ãƒ¼ã‚¿ã€ä¸€æ™‚çš„ãªè¨ˆç®—å€¤</li>
                                        <li>ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ï¼šã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§å…±æœ‰ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ï¼ˆä½¿ç”¨ã¯æ…é‡ã«ï¼‰</li>
                                    </ul>
                                </li>
                                <li><strong>ä¾‹å¤–å‡¦ç†ã®æ³¨æ„ç‚¹</strong>ï¼štry-catchæ–‡ã‚’é©åˆ‡ã«ä½¿ç”¨ã—ã€ã‚¨ãƒ©ãƒ¼å†…å®¹ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åˆ†ã‹ã‚Šã‚„ã™ãè¡¨ç¤ºã™ã‚‹ã€‚æ©Ÿå¯†æƒ…å ±ã¯æ¼ã‚‰ã•ãªã„ã€‚ãƒ­ã‚°å‡ºåŠ›ã‚‚ä½µç”¨ã™ã‚‹</li>
                            </ol>
                        </details>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="jsp-learning-material-2.html" class="btn btn-secondary">â† å‰ã®ç« : JSPã®åŸºæœ¬ç†è§£</a>
                        <a href="jsp-learning-material-4.html" class="btn btn-primary">æ¬¡ã®ç«  â†’ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</a>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">Â© 2025 F-Circle. All rights reserved.<br>
æœ¬è³‡æ–™ã¯AIãƒ„ãƒ¼ãƒ«ã‚’æ´»ç”¨ã—ã€äººé–“ã«ã‚ˆã‚‹ç·¨é›†ãƒ»ç›£ä¿®ã®ã‚‚ã¨ä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚ç„¡æ–­è»¢è¼‰ãƒ»å†é…å¸ƒã‚’ç¦ã˜ã¾ã™ã€‚</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js åˆæœŸåŒ– -->
    <script>hljs.highlightAll();</script>
    
    <!-- Mermaid.js åˆæœŸåŒ– -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>