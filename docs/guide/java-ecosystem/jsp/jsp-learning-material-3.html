<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSP学習教材 第3章 - スクリプトレットと式</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        .navbar {
            background-color: #f57c00;
        }

        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
            background-color: #f8f9fa;
        }

        .chapter-title {
            color: #f57c00;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #f57c00;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #ff9800;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        .quiz-container {
            background-color: #fff3e0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #f57c00;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .nav-link.active {
            background-color: #f57c00 !important;
            color: white !important;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand">
                <strong>JSP学習教材</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-1.html">
                                第1章: 事前準備
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-2.html">
                                第2章: JSPの基本理解
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="jsp-learning-material-3.html">
                                第3章: スクリプトレットと式
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-4.html">
                                第4章: ディレクティブとインポート
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-5.html">
                                第5章: リクエストとレスポンスの処理
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-6.html">
                                第6章: JSPとJavaBeans
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-7.html">
                                第7章: セッションとスコープ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-8.html">
                                第8章: EL（式言語）とJSTL入門
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-9.html">
                                第9章: 簡易Webアプリ開発
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jsp-learning-material-10.html">
                                第10章: 次のステップへのガイド
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第3章: スクリプトレットと式</h1>
                </div>

                <div id="chapter3">
                    <h2 class="chapter-title">JSPの核心的な構文要素をマスターする</h2>

                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>スクリプトレット（&lt;% %&gt;）の詳細な使い方と活用方法</li>
                            <li>式（&lt;%= %&gt;）による動的なコンテンツ出力</li>
                            <li>宣言（&lt;%! %&gt;）を使ったメソッドとフィールドの定義</li>
                            <li>JSP内での変数のスコープと有効範囲</li>
                            <li>条件分岐、繰り返し処理などの制御構造</li>
                            <li>実践的なWebアプリケーション開発での活用パターン</li>
                        </ul>
                    </div>

                    <section id="scriptlet-basics">
                        <h3 class="section-title">3.1 スクリプトレットの基本理解</h3>
                        
                        <p>スクリプトレット（&lt;% %&gt;）は、JSPページ内にJavaコードを直接記述するための最も基本的な構文です。ここでは変数の宣言、計算処理、メソッド呼び出しなど、あらゆるJava処理が記述できます。</p>

                        <h4>スクリプトレットの特徴と動作原理</h4>
                        <p>スクリプトレットは、JSPからServletに変換される際に、_jspService()メソッド内のローカルコードとして埋め込まれます。</p>

                        <div class="mermaid">
                            flowchart TD
                                A["JSPファイル<br/>&lt;% int x = 10; %&gt;"] --> B["Servlet変換"]
                                B --> C["_jspService()内に<br/>int x = 10;として配置"]
                                C --> D["メソッド実行時に<br/>コードが実行される"]
                        </div>

                        <h4>基本的な記述規則</h4>
                        <ul>
                            <li><strong>セミコロンが必要</strong>：Java文なので文の終わりにセミコロンを付ける</li>
                            <li><strong>ローカル変数</strong>：スクリプトレット内の変数はメソッドのローカル変数</li>
                            <li><strong>複数行対応</strong>：改行を含む長い処理も記述可能</li>
                            <li><strong>HTML混在</strong>：スクリプトレット間にHTMLを挟むことが可能</li>
                        </ul>

                        <div class="exercise-container">
                            <h5>実習 3-1: 基本的なスクリプトレット</h5>
                            <p>変数の宣言と基本的な処理を含むスクリプトレットを作成してみましょう。</p>
                            
                            <h6>scriptlet-basic.jspの作成</h6>
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;スクリプトレット基本&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; }
        .info { background: #e3f2fd; padding: 15px; border-radius: 5px; margin: 10px 0; }
        .calculation { background: #f3e5f5; padding: 15px; border-radius: 5px; margin: 10px 0; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;スクリプトレットのデモンストレーション&lt;/h1&gt;
    
    &lt;%
        // 基本的な変数宣言
        String companyName = "ABC株式会社";
        int foundedYear = 2010;
        double revenue = 125.7;
        boolean isPublic = true;
        
        // 現在年の計算
        int currentYear = java.util.Calendar.getInstance().get(java.util.Calendar.YEAR);
        int yearsInBusiness = currentYear - foundedYear;
    %&gt;
    
    &lt;div class="info"&gt;
        &lt;h2&gt;会社情報&lt;/h2&gt;
        &lt;p&gt;&lt;strong&gt;会社名：&lt;/strong&gt;&lt;%= companyName %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;設立年：&lt;/strong&gt;&lt;%= foundedYear %&gt;年&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;売上高：&lt;/strong&gt;&lt;%= revenue %&gt;億円&lt;/p&gt;
        
        &lt;% if (isPublic) { %&gt;
            &lt;p&gt;&lt;strong&gt;上場区分：&lt;/strong&gt;上場企業&lt;/p&gt;
        &lt;% } else { %&gt;
            &lt;p&gt;&lt;strong&gt;上場区分：&lt;/strong&gt;未上場企業&lt;/p&gt;
        &lt;% } %&gt;
    &lt;/div&gt;
    
    &lt;div class="calculation"&gt;
        &lt;h3&gt;計算結果&lt;/h3&gt;
        &lt;p&gt;設立からの年数: &lt;%= yearsInBusiness %&gt;年&lt;/p&gt;
        
        &lt;%
            // 売上高の段階評価
            String evaluation;
            if (revenue >= 100) {
                evaluation = "大企業";
            } else if (revenue >= 50) {
                evaluation = "中堅企業";
            } else {
                evaluation = "中小企業";
            }
        %&gt;
        &lt;p&gt;企業規模: &lt;%= evaluation %&gt;&lt;/p&gt;
        &lt;p&gt;データ更新時刻: &lt;%= new java.util.Date() %&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                            <h6>実行と確認ポイント</h6>
                            <ol>
                                <li>変数がスクリプトレットで宣言され、式で出力されていることを確認</li>
                                <li>if文による条件分岐がHTMLの生成に影響することを確認</li>
                                <li>計算処理が正しく実行されることを確認</li>
                                <li>ページを何度かリロードして時刻が更新されることを確認</li>
                            </ol>
                        </div>
                    </section>

                    <section id="expressions">
                        <h3 class="section-title">3.2 式（Expression）による動的出力</h3>

                        <p>式（&lt;%= %&gt;）は、Java式の結果を直接HTML内に出力するための構文です。変数の値、メソッドの戻り値、計算結果などを簡潔に表示できます。</p>

                        <h4>式の基本的な特徴</h4>
                        <ul>
                            <li><strong>セミコロン不要</strong>：式なのでセミコロンは付けない</li>
                            <li><strong>自動型変換</strong>：結果が自動的に文字列に変換されて出力</li>
                            <li><strong>単一式のみ</strong>：複数の文は記述できない</li>
                            <li><strong>戻り値必須</strong>：何らかの値を返す式でなければならない</li>
                        </ul>

                        <h4>様々な式の使用例</h4>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>カテゴリ</th>
                                    <th>式の例</th>
                                    <th>用途</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>変数出力</strong></td>
                                    <td><code>&lt;%= userName %&gt;</code></td>
                                    <td>変数の値を表示</td>
                                </tr>
                                <tr>
                                    <td><strong>計算結果</strong></td>
                                    <td><code>&lt;%= price * 1.1 %&gt;</code></td>
                                    <td>数値計算の結果を表示</td>
                                </tr>
                                <tr>
                                    <td><strong>メソッド呼び出し</strong></td>
                                    <td><code>&lt;%= user.getName() %&gt;</code></td>
                                    <td>メソッドの戻り値を表示</td>
                                </tr>
                                <tr>
                                    <td><strong>条件演算子</strong></td>
                                    <td><code>&lt;%= age >= 20 ? "成人" : "未成年" %&gt;</code></td>
                                    <td>条件に応じた値を表示</td>
                                </tr>
                                <tr>
                                    <td><strong>文字列操作</strong></td>
                                    <td><code>&lt;%= name.toUpperCase() %&gt;</code></td>
                                    <td>文字列処理の結果を表示</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="exercise-container">
                            <h5>実習 3-2: 式を活用した商品カタログ</h5>
                            <p>様々な式を使用して商品情報を動的に表示するページを作成してみましょう。</p>
                            
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;商品カタログ - 式のデモ&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; }
        .product { border: 1px solid #ddd; padding: 20px; margin: 15px; border-radius: 5px; }
        .price { font-size: 1.2em; font-weight: bold; color: #d32f2f; }
        .status { padding: 3px 8px; border-radius: 3px; color: white; font-size: 0.9em; }
        .in-stock { background: #4caf50; }
        .out-of-stock { background: #f44336; }
        .discount { background: #ff9800; padding: 3px 8px; color: white; border-radius: 3px; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;商品カタログ&lt;/h1&gt;
    
    &lt;%
        // 商品データ（実際の開発ではデータベースから取得）
        String[] productNames = {"ノートPC", "スマートフォン", "タブレット", "ヘッドフォン"};
        int[] prices = {89800, 128000, 45800, 12800};
        int[] stocks = {5, 0, 12, 8};
        double[] discountRates = {0.1, 0.0, 0.15, 0.05};
        
        // 税率
        double taxRate = 0.1;
    %&gt;
    
    &lt;% for (int i = 0; i &lt; productNames.length; i++) { %&gt;
        &lt;div class="product"&gt;
            &lt;h3&gt;&lt;%= productNames[i] %&gt;&lt;/h3&gt;
            
            &lt;p&gt;&lt;strong&gt;商品ID：&lt;/strong&gt;PROD-&lt;%= String.format("%03d", i + 1) %&gt;&lt;/p&gt;
            
            &lt;p class="price"&gt;
                定価: ¥&lt;%= String.format("%,d", prices[i]) %&gt;
                
                &lt;% if (discountRates[i] > 0) { %&gt;
                    &lt;span class="discount"&gt;&lt;%= (int)(discountRates[i] * 100) %&gt;% OFF&lt;/span&gt;
                    &lt;br&gt;
                    セール価格: ¥&lt;%= String.format("%,d", (int)(prices[i] * (1 - discountRates[i]))) %&gt;
                &lt;% } %&gt;
            &lt;/p&gt;
            
            &lt;p&gt;&lt;strong&gt;税込価格：&lt;/strong&gt;
                ¥&lt;%= String.format("%,d", (int)(prices[i] * (1 - discountRates[i]) * (1 + taxRate))) %&gt;
            &lt;/p&gt;
            
            &lt;p&gt;&lt;strong&gt;在庫状況：&lt;/strong&gt;
                &lt;span class="status &lt;%= stocks[i] > 0 ? "in-stock" : "out-of-stock" %&gt;"&gt;
                    &lt;%= stocks[i] > 0 ? "在庫あり (" + stocks[i] + "個)" : "在庫切れ" %&gt;
                &lt;/span&gt;
            &lt;/p&gt;
            
            &lt;p&gt;&lt;strong&gt;配送予定：&lt;/strong&gt;
                &lt;%= stocks[i] > 0 ? "1-2日以内" : "入荷待ち" %&gt;
            &lt;/p&gt;
        &lt;/div&gt;
    &lt;% } %&gt;
    
    &lt;hr&gt;
    &lt;p&gt;&lt;small&gt;カタログ更新日時: &lt;%= new java.text.SimpleDateFormat("yyyy年MM月dd日 HH:mm").format(new java.util.Date()) %&gt;&lt;/small&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                            <h6>この実習のポイント</h6>
                            <ul>
                                <li>配列を使ったデータの管理と繰り返し処理</li>
                                <li>条件演算子（三項演算子）の活用</li>
                                <li>String.formatによる数値の書式設定</li>
                                <li>動的なCSSクラスの割り当て</li>
                                <li>計算結果の表示</li>
                            </ul>
                        </div>
                    </section>

                    <section id="declarations">
                        <h3 class="section-title">3.3 宣言（Declaration）の活用</h3>

                        <p>宣言（&lt;%! %&gt;）は、メソッドやインスタンス変数を定義するための構文です。通常のスクリプトレットがメソッド内に配置されるのに対し、宣言はクラスレベルで定義されます。</p>

                        <h4>宣言の特徴と注意点</h4>
                        <div class="mermaid">
                            flowchart TD
                                A["JSP宣言<br/>&lt;%! int counter = 0; %&gt;"] --> B["Servletクラスの<br/>インスタンス変数として配置"]
                                B --> C["全リクエストで共有される"]
                                C --> D["スレッドセーフの問題あり"]
                                
                                E["JSPスクリプトレット<br/>&lt;% int x = 0; %&gt;"] --> F["_jspService()メソッド内の<br/>ローカル変数として配置"]
                                F --> G["リクエスト毎に独立"]
                                G --> H["スレッドセーフ"]
                        </div>

                        <div class="warning">
                            <h6>重要な注意事項</h6>
                            <p>宣言で定義したインスタンス変数は、複数のユーザーが同時にアクセスした場合にデータが混在する可能性があります。特別な理由がない限り、スクリプトレット内でのローカル変数使用を推奨します。</p>
                        </div>

                        <h4>適切な宣言の使用例</h4>
                        <div class="exercise-container">
                            <h5>実習 3-3: 宣言を使ったユーティリティメソッド</h5>
                            <p>計算処理を行うメソッドを宣言で定義し、JSP内で再利用してみましょう。</p>
                            
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;

&lt;%!
    // 消費税込み価格を計算するメソッド
    public double calculateTaxIncludedPrice(double price, double taxRate) {
        return price * (1 + taxRate);
    }
    
    // 割引価格を計算するメソッド
    public double calculateDiscountPrice(double price, double discountRate) {
        return price * (1 - discountRate);
    }
    
    // BMIを計算するメソッド
    public double calculateBMI(double height, double weight) {
        return weight / (height * height);
    }
    
    // BMIカテゴリを判定するメソッド
    public String getBMICategory(double bmi) {
        if (bmi &lt; 18.5) return "低体重";
        else if (bmi &lt; 25.0) return "標準体重";
        else if (bmi &lt; 30.0) return "肥満1度";
        else return "肥満2度以上";
    }
%&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;宣言メソッドのデモ&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; }
        .calculator { border: 1px solid #ddd; padding: 20px; margin: 15px 0; border-radius: 5px; }
        .result { background: #e8f5e8; padding: 10px; border-radius: 3px; margin: 10px 0; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;宣言メソッドの活用例&lt;/h1&gt;
    
    &lt;div class="calculator"&gt;
        &lt;h3&gt;価格計算機&lt;/h3&gt;
        &lt;%
            double originalPrice = 10000;
            double taxRate = 0.1;
            double discountRate = 0.2;
        %&gt;
        
        &lt;p&gt;定価: ¥&lt;%= String.format("%,.0f", originalPrice) %&gt;&lt;/p&gt;
        &lt;p&gt;割引価格: ¥&lt;%= String.format("%,.0f", calculateDiscountPrice(originalPrice, discountRate)) %&gt;&lt;/p&gt;
        &lt;p&gt;税込価格: ¥&lt;%= String.format("%,.0f", calculateTaxIncludedPrice(originalPrice, taxRate)) %&gt;&lt;/p&gt;
        &lt;div class="result"&gt;
            &lt;strong&gt;最終価格（割引後税込）: 
            ¥&lt;%= String.format("%,.0f", calculateTaxIncludedPrice(calculateDiscountPrice(originalPrice, discountRate), taxRate)) %&gt;&lt;/strong&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class="calculator"&gt;
        &lt;h3&gt;BMI計算機&lt;/h3&gt;
        &lt;%
            double[] heights = {1.70, 1.65, 1.80};
            double[] weights = {65.0, 58.0, 85.0};
            String[] names = {"田中さん", "佐藤さん", "鈴木さん"};
        %&gt;
        
        &lt;% for (int i = 0; i &lt; names.length; i++) { %&gt;
            &lt;% double bmi = calculateBMI(heights[i], weights[i]); %&gt;
            &lt;p&gt;&lt;%= names[i] %&gt; (身長: &lt;%= heights[i] %&gt;m, 体重: &lt;%= weights[i] %&gt;kg)&lt;/p&gt;
            &lt;div class="result"&gt;
                BMI: &lt;%= String.format("%.1f", bmi) %&gt; - &lt;%= getBMICategory(bmi) %&gt;
            &lt;/div&gt;
        &lt;% } %&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                            <h6>宣言メソッドの利点</h6>
                            <ul>
                                <li><strong>コードの再利用</strong>：同じ処理を複数箇所で使用可能</li>
                                <li><strong>可読性向上</strong>：複雑な計算をメソッド名で表現</li>
                                <li><strong>保守性向上</strong>：修正時は1箇所のみ変更すれば良い</li>
                                <li><strong>テストの容易性</strong>：独立したメソッドとしてテスト可能</li>
                            </ul>
                        </div>
                    </section>

                    <section id="variables-scope">
                        <h3 class="section-title">3.4 変数とスコープの理解</h3>

                        <p>JSPにおける変数のスコープ（有効範囲）を理解することは、正しいコードを書く上で非常に重要です。</p>

                        <h4>JSPでの変数スコープ</h4>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>宣言場所</th>
                                    <th>スコープ</th>
                                    <th>共有レベル</th>
                                    <th>推奨度</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>&lt;%! %&gt; 宣言</strong></td>
                                    <td>インスタンス変数</td>
                                    <td>全ユーザー間で共有</td>
                                    <td>注意して使用</td>
                                </tr>
                                <tr>
                                    <td><strong>&lt;% %&gt; スクリプトレット</strong></td>
                                    <td>ローカル変数</td>
                                    <td>リクエスト毎に独立</td>
                                    <td>推奨</td>
                                </tr>
                                <tr>
                                    <td><strong>implicit objects</strong></td>
                                    <td>リクエストスコープ</td>
                                    <td>1リクエスト内で共有</td>
                                    <td>適切な使用</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="highlight">
                            <h6>スレッドセーフティの重要性</h6>
                            <p>Webアプリケーションでは複数のユーザーが同時にアクセスすることが常です。インスタンス変数を使用すると、異なるユーザーのデータが混在する危険性があります。</p>
                        </div>

                        <div class="exercise-container">
                            <h5>実習 3-4: スコープの違いを理解する</h5>
                            <p>異なるスコープでの変数の動作を確認してみましょう。</p>
                            
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;

&lt;%!
    // インスタンス変数（全ユーザー間で共有される - 注意！）
    private int instanceCounter = 0;
    private String lastAccessUser = "未設定";
%&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;変数スコープのデモ&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; }
        .scope-demo { border: 1px solid #ddd; padding: 15px; margin: 15px 0; border-radius: 5px; }
        .warning { background: #fff3e0; border-left: 4px solid #ff9800; }
        .safe { background: #e8f5e8; border-left: 4px solid #4caf50; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;変数スコープのデモンストレーション&lt;/h1&gt;
    
    &lt;%
        // ローカル変数（リクエスト毎に独立）
        int localCounter = 0;
        String currentTime = new java.text.SimpleDateFormat("HH:mm:ss").format(new java.util.Date());
        String sessionId = session.getId();
        
        // インスタンス変数の更新（危険な例）
        instanceCounter++;
        lastAccessUser = sessionId.substring(0, 8); // セッションIDの一部を使用
        
        // ローカル変数の更新
        localCounter = 100;
    %&gt;
    
    &lt;div class="scope-demo warning"&gt;
        &lt;h3&gt;⚠️ インスタンス変数（共有される）&lt;/h3&gt;
        &lt;p&gt;&lt;strong&gt;インスタンスカウンター：&lt;/strong&gt;&lt;%= instanceCounter %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;最後のアクセスユーザー：&lt;/strong&gt;&lt;%= lastAccessUser %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;small&gt;※ この値は全ユーザーで共有されるため、他のユーザーのアクセスにより変更されます&lt;/small&gt;&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class="scope-demo safe"&gt;
        &lt;h3&gt;✅ ローカル変数（安全）&lt;/h3&gt;
        &lt;p&gt;&lt;strong&gt;ローカルカウンター：&lt;/strong&gt;&lt;%= localCounter %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;アクセス時刻：&lt;/strong&gt;&lt;%= currentTime %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;あなたのセッションID：&lt;/strong&gt;&lt;%= sessionId %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;small&gt;※ これらの値はあなたのリクエスト専用で、他のユーザーには影響されません&lt;/small&gt;&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class="scope-demo"&gt;
        &lt;h3&gt;実験してみましょう&lt;/h3&gt;
        &lt;p&gt;1. このページを複数回リロードしてください&lt;/p&gt;
        &lt;p&gt;2. 別のブラウザ（または別タブ）でも同じページを開いてください&lt;/p&gt;
        &lt;p&gt;3. インスタンス変数とローカル変数の違いを観察してください&lt;/p&gt;
        
        &lt;p&gt;&lt;a href="javascript:location.reload()" style="padding: 10px; background: #007bff; color: white; text-decoration: none; border-radius: 3px;"&gt;ページをリロード&lt;/a&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                            <h6>実験の観察ポイント</h6>
                            <ul>
                                <li>ローカル変数は毎回同じ値（100）が表示される</li>
                                <li>インスタンス変数はリロードするたびに増加する</li>
                                <li>別のブラウザでアクセスしても同じインスタンス変数が共有される</li>
                                <li>セッションIDはブラウザ毎に異なる</li>
                            </ul>
                        </div>
                    </section>

                    <section id="control-structures">
                        <h3 class="section-title">3.5 制御構造の活用</h3>

                        <p>JSPでは、Javaの制御構造（条件分岐、繰り返し処理）をHTMLと組み合わせて使用できます。これにより、動的なWebページが作成できます。</p>

                        <h4>主要な制御構造</h4>
                        <div class="mermaid">
                            flowchart TD
                                A["制御構造"] --> B["条件分岐"]
                                A --> C["繰り返し処理"]
                                A --> D["例外処理"]
                                
                                B --> B1["if-else文"]
                                B --> B2["switch文"]
                                B --> B3["三項演算子"]
                                
                                C --> C1["for文"]
                                C --> C2["while文"]
                                C --> C3["拡張for文"]
                                
                                D --> D1["try-catch文"]
                                D --> D2["finally文"]
                        </div>

                        <div class="exercise-container">
                            <h5>実習 3-5: 制御構造を使った動的コンテンツ</h5>
                            <p>様々な制御構造を使用して、条件に応じたコンテンツ生成を行ってみましょう。</p>
                            
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;制御構造のデモ&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; }
        .section { border: 1px solid #ddd; padding: 20px; margin: 15px 0; border-radius: 5px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background: #f2f2f2; }
        .grade-A { background: #e8f5e8; }
        .grade-B { background: #fff3e0; }
        .grade-C { background: #ffebee; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;制御構造のデモンストレーション&lt;/h1&gt;
    
    &lt;%
        // テストデータの準備
        String[] studentNames = {"田中太郎", "佐藤花子", "鈴木一郎", "高橋美咲", "渡辺健太"};
        int[] mathScores = {95, 72, 65, 88, 45};
        int[] englishScores = {88, 91, 78, 85, 52};
        
        // 現在時刻の取得
        java.util.Calendar cal = java.util.Calendar.getInstance();
        int currentHour = cal.get(java.util.Calendar.HOUR_OF_DAY);
        String timeOfDay;
        
        // 時刻に応じた挨拶（if-else文）
        if (currentHour &lt; 6) {
            timeOfDay = "深夜";
        } else if (currentHour &lt; 12) {
            timeOfDay = "午前";
        } else if (currentHour &lt; 18) {
            timeOfDay = "午後";
        } else {
            timeOfDay = "夜";
        }
    %&gt;
    
    &lt;div class="section"&gt;
        &lt;h2&gt;時刻による動的挨拶&lt;/h2&gt;
        &lt;p&gt;&lt;%= timeOfDay %&gt;の学習、お疲れ様です！&lt;/p&gt;
        &lt;p&gt;現在時刻：&lt;%= cal.get(java.util.Calendar.HOUR_OF_DAY) %&gt;時&lt;%= cal.get(java.util.Calendar.MINUTE) %&gt;分&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class="section"&gt;
        &lt;h2&gt;成績一覧表（for文による繰り返し処理）&lt;/h2&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;th&gt;生徒名&lt;/th&gt;
                &lt;th&gt;数学&lt;/th&gt;
                &lt;th&gt;英語&lt;/th&gt;
                &lt;th&gt;平均&lt;/th&gt;
                &lt;th&gt;評価&lt;/th&gt;
            &lt;/tr&gt;
            
            &lt;% 
            for (int i = 0; i &lt; studentNames.length; i++) {
                double average = (mathScores[i] + englishScores[i]) / 2.0;
                String grade;
                String gradeClass;
                
                // switch文による評価分類
                switch ((int)(average / 10)) {
                    case 10:
                    case 9:
                        grade = "A (優秀)";
                        gradeClass = "grade-A";
                        break;
                    case 8:
                    case 7:
                        grade = "B (良好)";
                        gradeClass = "grade-B";
                        break;
                    default:
                        grade = "C (要努力)";
                        gradeClass = "grade-C";
                }
            %&gt;
            
            &lt;tr class="&lt;%= gradeClass %&gt;"&gt;
                &lt;td&gt;&lt;%= studentNames[i] %&gt;&lt;/td&gt;
                &lt;td&gt;&lt;%= mathScores[i] %&gt;点&lt;/td&gt;
                &lt;td&gt;&lt;%= englishScores[i] %&gt;点&lt;/td&gt;
                &lt;td&gt;&lt;%= String.format("%.1f", average) %&gt;点&lt;/td&gt;
                &lt;td&gt;&lt;%= grade %&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;% } %&gt;
        &lt;/table&gt;
    &lt;/div&gt;
    
    &lt;div class="section"&gt;
        &lt;h2&gt;統計情報（拡張for文とwhile文）&lt;/h2&gt;
        
        &lt;%
            // 数学の統計
            int mathTotal = 0;
            int mathMax = mathScores[0];
            int mathMin = mathScores[0];
            
            for (int score : mathScores) {
                mathTotal += score;
                if (score &gt; mathMax) mathMax = score;
                if (score &lt; mathMin) mathMin = score;
            }
            double mathAverage = (double)mathTotal / mathScores.length;
            
            // 高得点者のカウント（while文）
            int highScoreCount = 0;
            int index = 0;
            while (index &lt; mathScores.length) {
                if (mathScores[index] &gt;= 80) {
                    highScoreCount++;
                }
                index++;
            }
        %&gt;
        
        &lt;h3&gt;数学科目統計&lt;/h3&gt;
        &lt;ul&gt;
            &lt;li&gt;平均点：&lt;%= String.format("%.1f", mathAverage) %&gt;点&lt;/li&gt;
            &lt;li&gt;最高点：&lt;%= mathMax %&gt;点&lt;/li&gt;
            &lt;li&gt;最低点：&lt;%= mathMin %&gt;点&lt;/li&gt;
            &lt;li&gt;80点以上：&lt;%= highScoreCount %&gt;名&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
    
    &lt;div class="section"&gt;
        &lt;h2&gt;例外処理のデモ&lt;/h2&gt;
        
        &lt;%
            String[] testInputs = {"100", "abc", "75", "50.5"};
            
            for (String input : testInputs) {
                try {
                    int score = Integer.parseInt(input);
                    String result = (score &gt;= 60) ? "合格" : "不合格";
        %&gt;
                    &lt;p&gt;入力値「&lt;%= input %&gt;」→ &lt;%= score %&gt;点 (&lt;%= result %&gt;)&lt;/p&gt;
        &lt;%
                } catch (NumberFormatException e) {
        %&gt;
                    &lt;p style="color: red;"&gt;入力値「&lt;%= input %&gt;」→ エラー: 数値ではありません&lt;/p&gt;
        &lt;%
                }
            }
        %&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                            <h6>この実習のポイント</h6>
                            <ul>
                                <li>if-else文による条件分岐でのコンテンツ切り替え</li>
                                <li>for文を使った繰り返し処理によるテーブル生成</li>
                                <li>switch文による分類処理</li>
                                <li>拡張for文とwhile文の使い分け</li>
                                <li>try-catch文による例外処理</li>
                                <li>三項演算子の活用</li>
                            </ul>
                        </div>
                    </section>

                    <section id="practical-examples">
                        <h3 class="section-title">3.6 実践的な活用パターン</h3>

                        <p>これまで学んだスクリプトレット、式、宣言を組み合わせて、実際のWebアプリケーションでよく使われるパターンを実装してみましょう。</p>

                        <div class="exercise-container">
                            <h5>実習 3-6: 簡易アンケート結果表示システム</h5>
                            <p>アンケートデータを処理して、結果をグラフィカルに表示するシステムを作成します。</p>
                            
                            <pre class="code-block"><code class="language-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;

&lt;%!
    // データ処理のためのユーティリティメソッド
    public double calculatePercentage(int value, int total) {
        return total == 0 ? 0 : (double)value / total * 100;
    }
    
    public String generateProgressBar(double percentage) {
        int barLength = (int)(percentage / 2); // 50% = 25文字
        StringBuilder bar = new StringBuilder();
        for (int i = 0; i &lt; barLength; i++) {
            bar.append("█");
        }
        return bar.toString();
    }
    
    public String getColorByPercentage(double percentage) {
        if (percentage &gt;= 50) return "#4caf50";
        else if (percentage &gt;= 30) return "#ff9800";
        else return "#f44336";
    }
%&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;アンケート結果表示システム&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        .survey-section { margin: 30px 0; }
        .option { margin: 10px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .progress-bar { font-family: monospace; font-size: 14px; line-height: 1; }
        .stats { background: #e3f2fd; padding: 15px; border-radius: 5px; margin: 20px 0; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;h1&gt;📊 アンケート結果表示システム&lt;/h1&gt;
        
        &lt;%
            // アンケートデータ（実際にはデータベースから取得）
            String[] questions = {
                "当社のサービスに満足していますか？",
                "リピートして利用したいと思いますか？",
                "友人に推薦したいと思いますか？"
            };
            
            String[][] options = {
                {"非常に満足", "満足", "普通", "不満", "非常に不満"},
                {"必ず利用する", "おそらく利用する", "わからない", "利用しない"},
                {"ぜひ推薦する", "推薦する", "どちらでもない", "推薦しない"}
            };
            
            int[][] responses = {
                {45, 78, 32, 12, 3},    // 質問1の回答数
                {62, 89, 28, 15},       // 質問2の回答数
                {38, 71, 45, 18}        // 質問3の回答数
            };
            
            // 全体統計
            int totalResponses = 0;
            for (int[] questionResponses : responses) {
                for (int count : questionResponses) {
                    totalResponses += count;
                }
            }
            
            java.util.Date surveyDate = new java.util.Date();
        %&gt;
        
        &lt;div class="stats"&gt;
            &lt;h3&gt;📈 調査概要&lt;/h3&gt;
            &lt;ul&gt;
                &lt;li&gt;&lt;strong&gt;総回答数：&lt;/strong&gt;&lt;%= totalResponses %&gt;件&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;調査期間：&lt;/strong&gt;2024年3月1日 - 3月31日&lt;/li&gt;
                &lt;li&gt;&lt;strong&gt;集計日時：&lt;/strong&gt;&lt;%= new java.text.SimpleDateFormat("yyyy年MM月dd日 HH:mm").format(surveyDate) %&gt;&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
        
        &lt;% for (int q = 0; q &lt; questions.length; q++) { %&gt;
            &lt;div class="survey-section"&gt;
                &lt;h2&gt;Q&lt;%= (q + 1) %&gt;: &lt;%= questions[q] %&gt;&lt;/h2&gt;
                
                &lt;%
                    // 質問ごとの合計回答数を計算
                    int questionTotal = 0;
                    for (int count : responses[q]) {
                        questionTotal += count;
                    }
                %&gt;
                
                &lt;p&gt;&lt;strong&gt;回答者数：&lt;/strong&gt;&lt;%= questionTotal %&gt;名&lt;/p&gt;
                
                &lt;% for (int o = 0; o &lt; options[q].length; o++) { %&gt;
                    &lt;%
                        int count = responses[q][o];
                        double percentage = calculatePercentage(count, questionTotal);
                        String progressBar = generateProgressBar(percentage);
                        String color = getColorByPercentage(percentage);
                    %&gt;
                    
                    &lt;div class="option"&gt;
                        &lt;div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;"&gt;
                            &lt;strong&gt;&lt;%= options[q][o] %&gt;&lt;/strong&gt;
                            &lt;span&gt;&lt;%= count %&gt;名 (&lt;%= String.format("%.1f", percentage) %&gt;%)&lt;/span&gt;
                        &lt;/div&gt;
                        &lt;div class="progress-bar" style="color: &lt;%= color %&gt;"&gt;
                            &lt;%= progressBar %&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;% } %&gt;
                
                &lt;%-- 質問ごとの傾向分析 --%&gt;
                &lt;%
                    // 最も多い回答を見つける
                    int maxCount = 0;
                    String mostPopular = "";
                    for (int o = 0; o &lt; options[q].length; o++) {
                        if (responses[q][o] &gt; maxCount) {
                            maxCount = responses[q][o];
                            mostPopular = options[q][o];
                        }
                    }
                    
                    // 満足度の高い回答（最初の2つの選択肢）の合計
                    int positiveCount = 0;
                    if (responses[q].length &gt;= 2) {
                        positiveCount = responses[q][0] + responses[q][1];
                    }
                    double positiveRate = calculatePercentage(positiveCount, questionTotal);
                %&gt;
                
                &lt;div style="background: #f8f9fa; padding: 10px; border-radius: 3px; margin-top: 10px;"&gt;
                    &lt;small&gt;
                        &lt;strong&gt;📊 分析：&lt;/strong&gt;
                        最多回答「&lt;%= mostPopular %&gt;」(&lt;%= maxCount %&gt;名)
                        
                        &lt;% if (positiveRate &gt;= 60) { %&gt;
                            | 高評価率: &lt;%= String.format("%.1f", positiveRate) %&gt;% ✨
                        &lt;% } else if (positiveRate &gt;= 40) { %&gt;
                            | 評価率: &lt;%= String.format("%.1f", positiveRate) %&gt;% 📈
                        &lt;% } else { %&gt;
                            | 改善の余地あり: &lt;%= String.format("%.1f", positiveRate) %&gt;% 💡
                        &lt;% } %&gt;
                    &lt;/small&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;% } %&gt;
        
        &lt;div class="stats"&gt;
            &lt;h3&gt;🎯 総合分析&lt;/h3&gt;
            &lt;%
                // 全体的な傾向を分析
                int totalPositive = 0;
                int totalAnswers = 0;
                
                for (int q = 0; q &lt; responses.length; q++) {
                    if (responses[q].length &gt;= 2) {
                        totalPositive += responses[q][0] + responses[q][1];
                    }
                    for (int count : responses[q]) {
                        totalAnswers += count;
                    }
                }
                
                double overallSatisfaction = calculatePercentage(totalPositive, totalAnswers);
            %&gt;
            
            &lt;p&gt;&lt;strong&gt;総合満足度：&lt;/strong&gt;&lt;%= String.format("%.1f", overallSatisfaction) %&gt;%&lt;/p&gt;
            
            &lt;% if (overallSatisfaction &gt;= 70) { %&gt;
                &lt;p style="color: #4caf50;"&gt;✅ 優秀な評価結果です。現在のサービス品質を維持してください。&lt;/p&gt;
            &lt;% } else if (overallSatisfaction &gt;= 50) { %&gt;
                &lt;p style="color: #ff9800;"&gt;📊 平均的な評価です。改善点を特定し、サービス向上に努めましょう。&lt;/p&gt;
            &lt;% } else { %&gt;
                &lt;p style="color: #f44336;"&gt;⚠️ 改善が必要です。お客様のフィードバックを詳しく分析し、対策を講じてください。&lt;/p&gt;
            &lt;% } %&gt;
        &lt;/div&gt;
        
        &lt;hr&gt;
        &lt;p&gt;&lt;small&gt;※ このデモは教育目的で作成されています。実際の業務では、データベースとの連携やより詳細な統計分析が必要です。&lt;/small&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                            <h6>この実習から学べる実践パターン</h6>
                            <ul>
                                <li><strong>宣言メソッドの活用</strong>：計算ロジックの再利用</li>
                                <li><strong>多次元配列の処理</strong>：複雑なデータ構造の操作</li>
                                <li><strong>動的なCSSの適用</strong>：データに応じたスタイル変更</li>
                                <li><strong>ネストしたループ</strong>：質問と選択肢の二重構造</li>
                                <li><strong>条件に応じたコメント生成</strong>：データ分析結果の表示</li>
                                <li><strong>文字列フォーマット</strong>：数値の見やすい表示</li>
                            </ul>
                        </div>
                    </section>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>スクリプトレット（&lt;% %&gt;）と式（&lt;%= %&gt;）の記述ルールの違いを3つ挙げてください。</li>
                            <li>宣言（&lt;%! %&gt;）で定義した変数がスレッドセーフでない理由を説明してください。</li>
                            <li>JSP内で条件分岐を実装する方法を3つ挙げ、それぞれの特徴を説明してください。</li>
                            <li>ローカル変数とインスタンス変数の適切な使い分けについて説明してください。</li>
                            <li>JSPで例外処理を行う際の注意点と推奨される方法を説明してください。</li>
                        </ol>
                        
                        <details>
                            <summary>解答例</summary>
                            <ol>
                                <li><strong>スクリプトレットと式の違い</strong>
                                    <ul>
                                        <li>セミコロン：スクリプトレットは必要、式は不要</li>
                                        <li>戻り値：スクリプトレットは不要、式は値を返す必要あり</li>
                                        <li>用途：スクリプトレットは処理、式は出力</li>
                                    </ul>
                                </li>
                                <li><strong>宣言変数のスレッドセーフ問題</strong>：複数のリクエストが同じServletインスタンスを共有するため、同時アクセスで変数の値が予期せず変更される可能性がある</li>
                                <li><strong>条件分岐の実装方法</strong>
                                    <ul>
                                        <li>if-else文：複雑な条件判定に適している</li>
                                        <li>switch文：固定値による分岐に適している</li>
                                        <li>三項演算子：シンプルな条件での値選択に適している</li>
                                    </ul>
                                </li>
                                <li><strong>変数の使い分け</strong>
                                    <ul>
                                        <li>ローカル変数：リクエスト固有のデータ、一時的な計算値</li>
                                        <li>インスタンス変数：アプリケーション全体で共有するデータ（使用は慎重に）</li>
                                    </ul>
                                </li>
                                <li><strong>例外処理の注意点</strong>：try-catch文を適切に使用し、エラー内容をユーザーに分かりやすく表示する。機密情報は漏らさない。ログ出力も併用する</li>
                            </ol>
                        </details>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="jsp-learning-material-2.html" class="btn btn-secondary">← 前の章: JSPの基本理解</a>
                        <a href="jsp-learning-material-4.html" class="btn btn-primary">次の章 → ディレクティブとインポート</a>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- フッター -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
    
    <!-- Mermaid.js 初期化 -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>