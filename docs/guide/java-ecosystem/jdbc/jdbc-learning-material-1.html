<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JDBC学習教材 第1章 - JDBCの基礎</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <style>
        /* ベースレイアウト */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        /* ナビゲーション */
        .navbar {
            background-color: #f57c00;
        }

        /* サイドバー */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }

        /* タイトル */
        .chapter-title {
            color: #f57c00;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #f57c00;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #ff9800;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        /* コンテンツボックス */
        .quiz-container {
            background-color: #fff3e0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #f57c00;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        /* コードハイライト */
        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        /* ナビゲーション */
        .nav-link.active {
            background-color: #f57c00 !important;
            color: white !important;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="../../../../index.html">JDBC学習教材</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="../../../../index.html">ホーム</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../../../index.html">学習ガイド</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="README.md">JDBC</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="jdbc-learning-material-1.html">第1章: JDBCの基礎</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jdbc-learning-material-2.html">第2章: データベース接続</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jdbc-learning-material-3.html">第3章: 基本的なCRUD操作</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jdbc-learning-material-4.html">第4章: 例外処理とリソース管理</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jdbc-learning-material-5.html">第5章: 高度なJDBC機能</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jdbc-learning-material-6.html">第6章: JDBCとオブジェクト指向設計</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jdbc-learning-material-7.html">第7章: パフォーマンスとセキュリティ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jdbc-learning-material-8.html">第8章: 総合プロジェクト</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jdbc-learning-material-9.html">第9章: JDBCリファレンス</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="jdbc-learning-material-10.html">第10章: データベース固有の設定</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- 章ヘッダー -->
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第1章: JDBCの基礎</h1>
                </div>

                <div id="chapter1">
                    <!-- 章タイトル -->
                    <h2 class="chapter-title">Java Database Connectivityの世界へようこそ</h2>
                    
                    <!-- 学習目標 -->
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>JDBCとは何か、なぜ必要なのかを理解する</li>
                            <li>JDBCのアーキテクチャと仕組みを学ぶ</li>
                            <li>JDBCドライバの種類とその特徴を知る</li>
                            <li>PostgreSQLを使った開発環境の準備</li>
                            <li>JDBCがどのようにJavaアプリケーションとデータベースを繋ぐかを理解する</li>
                        </ul>
                    </div>

                    <!-- セクション1: JDBCとは何か -->
                    <h3 class="section-title">1.1 JDBCとは何か？</h3>
                    <p>JDBC（Java Database Connectivity）は、Javaプログラムからデータベースにアクセスするための標準的なAPIです。JDBCを使用することで、開発者はJavaアプリケーションから様々な種類のデータベース（PostgreSQL、MySQL、Oracle、SQL Serverなど）に対して統一的な方法でアクセスできるようになります。</p>

                    <div class="highlight">
                        <h6>JDBCの重要性</h6>
                        <p>現代のビジネスアプリケーションでは、顧客情報、商品データ、取引記録など、膨大な量のデータを効率的に管理する必要があります。JDBCは、これらのデータをJavaアプリケーションから安全かつ効率的に操作するための橋渡し役を担います。</p>
                    </div>

                    <p>JDBCが解決する主な課題は以下の通りです：</p>
                    <ul>
                        <li><strong>データベース依存性の解消</strong>：異なるデータベース製品に対して同じコードで操作できる</li>
                        <li><strong>標準化されたAPI</strong>：どのデータベースを使っても一貫したプログラミング方法</li>
                        <li><strong>効率的なリソース管理</strong>：データベース接続の適切な管理</li>
                        <li><strong>セキュリティ</strong>：SQLインジェクションなどの攻撃から保護する仕組み</li>
                    </ul>

                    <!-- セクション2: JDBCのアーキテクチャ -->
                    <h3 class="section-title">1.2 JDBCのアーキテクチャ</h3>
                    <p>JDBCは階層化されたアーキテクチャを採用しており、各層が特定の役割を担っています。この設計により、異なるデータベースに対して統一されたインターフェースを提供できます。</p>

                    <div class="mermaid">
                        flowchart TD
                            A["Javaアプリケーション"] --> B["JDBC API<br/>(java.sql パッケージ)"]
                            B --> C["DriverManager"]
                            C --> D["JDBCドライバ<br/>(データベース固有)"]
                            D --> E["データベース<br/>(PostgreSQL, MySQL, Oracle等)"]
                            
                            style A fill:#e1f5fe
                            style B fill:#fff3e0
                            style C fill:#fff3e0
                            style D fill:#f3e5f5
                            style E fill:#e8f5e8
                    </div>

                    <p>各層の詳細な説明：</p>
                    <ul>
                        <li><strong>Javaアプリケーション層</strong>：ビジネスロジックを実装する部分で、JDBC APIを通じてデータベースにアクセスします</li>
                        <li><strong>JDBC API層</strong>：java.sqlパッケージに含まれる標準インターフェース群（Connection、Statement、ResultSetなど）</li>
                        <li><strong>DriverManager層</strong>：適切なJDBCドライバを選択し、データベース接続を管理します</li>
                        <li><strong>JDBCドライバ層</strong>：各データベース製品専用のドライバで、JDBC APIの実装を提供します</li>
                        <li><strong>データベース層</strong>：実際のデータが格納されているデータベース管理システム</li>
                    </ul>

                    <!-- セクション3: JDBCドライバの種類 -->
                    <h3 class="section-title">1.3 JDBCドライバの種類と特徴</h3>
                    <p>JDBCドライバには4つの主要なタイプがあり、それぞれ異なる実装方式と特徴を持ちます。現在最も一般的に使用されているのはType 4ドライバです。</p>

                    <div class="mermaid">
                        flowchart LR
                            A["Type 1<br/>JDBC-ODBCブリッジ"] --> B["Type 2<br/>ネイティブAPIドライバ"]
                            B --> C["Type 3<br/>ネットワークプロトコル"]
                            C --> D["Type 4<br/>Thin（Pure Java）"]
                            
                            style A fill:#ffebee
                            style B fill:#fff3e0
                            style C fill:#e8f5e8
                            style D fill:#e1f5fe
                    </div>

                    <h4>Type 4ドライバ（Pure Javaドライバ）</h4>
                    <p>現在最も推奨される方式で、以下の特徴があります：</p>
                    <ul>
                        <li><strong>完全にJavaで実装</strong>：プラットフォーム独立性が高い</li>
                        <li><strong>ネイティブライブラリ不要</strong>：追加のソフトウェアインストールが不要</li>
                        <li><strong>高いパフォーマンス</strong>：データベースとの直接通信により高速</li>
                        <li><strong>配布が容易</strong>：JARファイル1つで完結</li>
                    </ul>

                    <p>主要なデータベースのType 4ドライバ例：</p>
                    <ul>
                        <li>PostgreSQL: postgresql-XX.X.X.jar</li>
                        <li>MySQL: mysql-connector-java-X.X.XX.jar</li>
                        <li>Oracle: ojdbc8.jar</li>
                        <li>SQL Server: mssql-jdbc-X.X.X.jre8.jar</li>
                    </ul>

                    <!-- セクション4: PostgreSQL環境セットアップ -->
                    <h3 class="section-title">1.4 PostgreSQL開発環境のセットアップ</h3>
                    <p>このコースでは、PostgreSQLを使用してJDBCを学習します。PostgreSQLはオープンソースのリレーショナルデータベース管理システムで、強力な機能と優れた標準SQL準拠性を持ちます。</p>

                    <div class="highlight">
                        <h6>なぜPostgreSQLを選ぶのか？</h6>
                        <ul>
                            <li><strong>オープンソース</strong>：無料で使用でき、学習に最適</li>
                            <li><strong>標準準拠</strong>：SQL標準に厳密に従い、学習したスキルが他のDBでも活かせる</li>
                            <li><strong>豊富な機能</strong>：JSON、配列、ユーザー定義型など高度な機能をサポート</li>
                            <li><strong>活発なコミュニティ</strong>：豊富なドキュメントとサポート</li>
                        </ul>
                    </div>

                    <p>必要なソフトウェアの準備：</p>
                    <ol>
                        <li><strong>JDK 8以上</strong>：JDBC 4.0以降の機能を使用するため</li>
                        <li><strong>PostgreSQL サーバー</strong>：データベース本体</li>
                        <li><strong>PostgreSQL JDBCドライバ</strong>：JavaからPostgreSQLにアクセスするため</li>
                        <li><strong>IDE</strong>：Eclipse、IntelliJ IDEA、VS Codeなど</li>
                    </ol>

                    <!-- 実習セクション -->
                    <div class="exercise-container">
                        <h5>実習 1-1: JDBCドライバの確認</h5>
                        <p>この実習では、JDBCドライバが正しくセットアップされているかを確認する簡単なプログラムを作成します。</p>
                        
                        <h6>手順</h6>
                        <ol>
                            <li>新しいJavaプロジェクトを作成します</li>
                            <li>PostgreSQL JDBCドライバ（postgresql-XX.X.X.jar）をクラスパスに追加します</li>
                            <li>以下のコードを実行して、ドライバが正しく読み込まれることを確認します</li>
                        </ol>

                        <h6>実行例</h6>
                        <pre class="code-block"><code class="language-java">public class DriverTest {
    public static void main(String[] args) {
        try {
            // PostgreSQL JDBCドライバを読み込み
            Class.forName("org.postgresql.Driver");
            System.out.println("PostgreSQL JDBCドライバが正常に読み込まれました！");
            
            // ドライバの基本情報を表示
            java.sql.Driver driver = java.sql.DriverManager.getDriver("jdbc:postgresql://");
            System.out.println("ドライババージョン: " + driver.getMajorVersion() + "." + driver.getMinorVersion());
            
        } catch (ClassNotFoundException e) {
            System.err.println("JDBCドライバが見つかりません: " + e.getMessage());
        } catch (java.sql.SQLException e) {
            System.err.println("データベースエラー: " + e.getMessage());
        }
    }
}</code></pre>

                        <h6>期待される結果</h6>
                        <p>プログラムを実行すると、以下のような出力が表示されるはずです：</p>
                        <pre class="code-block"><code class="language-bash">PostgreSQL JDBCドライバが正常に読み込まれました！
ドライババージョン: 42.2</code></pre>
                    </div>

                    <!-- セクション5: JDBCの基本概念 -->
                    <h3 class="section-title">1.5 JDBCの基本概念</h3>
                    <p>JDBCプログラミングを始める前に、重要な概念を理解しておきましょう。これらの概念は次章以降で詳しく学習します。</p>

                    <div class="mermaid">
                        flowchart LR
                            A["1. Connection<br/>(データベース接続)"] --> B["2. Statement<br/>(SQL実行)"]
                            B --> C["3. ResultSet<br/>(結果取得)"]
                            C --> D["4. Resource管理<br/>(リソース解放)"]
                            
                            style A fill:#e1f5fe
                            style B fill:#fff3e0
                            style C fill:#e8f5e8
                            style D fill:#ffebee
                    </div>

                    <p>各概念の簡単な説明：</p>
                    <ul>
                        <li><strong>Connection</strong>：データベースへの接続を表すオブジェクト。すべてのデータベース操作の出発点</li>
                        <li><strong>Statement</strong>：SQL文を実行するためのオブジェクト。SELECT、INSERT、UPDATE、DELETE文を実行</li>
                        <li><strong>ResultSet</strong>：SELECT文の実行結果を表すオブジェクト。行単位でデータを取得</li>
                        <li><strong>リソース管理</strong>：使用後のオブジェクトを適切に閉じることで、メモリリークを防止</li>
                    </ul>

                    <div class="warning">
                        <h6>重要な注意点</h6>
                        <p>JDBCオブジェクト（Connection、Statement、ResultSet）は使用後に必ず閉じる必要があります。これを忘れると、メモリリークやデータベース接続不足が発生する可能性があります。次章で学ぶtry-with-resources構文を使用することで、この問題を自動的に解決できます。</p>
                    </div>

                    <!-- 理解度確認クイズ -->
                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>JDBCの正式名称は何ですか？また、JDBCが解決する主要な問題を3つ挙げてください。</li>
                            <li>JDBCアーキテクチャにおいて、DriverManagerの役割は何ですか？</li>
                            <li>Type 4 JDBCドライバの特徴を3つ説明してください。</li>
                            <li>PostgreSQLを学習用データベースとして選ぶ理由を2つ挙げてください。</li>
                            <li>JDBC プログラミングにおける基本的な4つのステップを順番に答えてください。</li>
                        </ol>
                        
                        <details>
                            <summary>解答例を見る</summary>
                            <ol>
                                <li><strong>Java Database Connectivity</strong>。主要な問題：(1)データベース依存性の解消、(2)標準化されたAPI提供、(3)効率的なリソース管理</li>
                                <li>適切なJDBCドライバを選択し、データベース接続を管理する役割</li>
                                <li>(1)完全にJavaで実装、(2)ネイティブライブラリ不要、(3)高いパフォーマンス</li>
                                <li>(1)オープンソースで無料、(2)標準SQL準拠で学習スキルが他DBでも活用可能</li>
                                <li>(1)Connection（接続確立）、(2)Statement（SQL実行）、(3)ResultSet（結果取得）、(4)Resource管理（リソース解放）</li>
                            </ol>
                        </details>
                    </div>

                    <!-- 章間ナビゲーション -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="README.md" class="btn btn-secondary">← 目次に戻る</a>
                        <a href="jdbc-learning-material-2.html" class="btn btn-primary">次の章：データベース接続 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
    
    <!-- Mermaid.js 初期化 -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>