<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Struts 1.x学習教材 第2章 - 環境構築とプロジェクト作成</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        .navbar {
            background-color: #6d4c41;
        }
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        .chapter-title {
            color: #6d4c41;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #6d4c41;
            padding-bottom: 0.5rem;
        }
        .section-title {
            color: #8d6e63;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        code {
            display: block;
            background-color: #f5f5f5;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            white-space: pre;
            overflow-x: auto;
        }
        .quiz-container {
            background-color: #efebe9;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #6d4c41;
        }
        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }
        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }
        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }
        .nav-link.active {
            background-color: #6d4c41 !important;
            color: white !important;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="README.md">Struts 1.x学習ガイド</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-1.html">第1章: Struts 1.xの基本概念とMVCアーキテクチャ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="struts1-learning-material-2.html">第2章: 環境構築とプロジェクト作成</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-3.html">第3章: ActionクラスとActionForm</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-4.html">第4章: struts-config.xmlの設定と管理</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-5.html">第5章: JSPとの連携とTagライブラリ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-6.html">第6章: バリデーション機能とエラーハンドリング</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-7.html">第7章: セッション管理とセキュリティ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-8.html">第8章: 国際化（i18n）とプロパティファイル</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-9.html">第9章: データベース連携と実践的開発</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-10.html">第10章: デバッグ・テスト・デプロイメント</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第2章: 環境構築とプロジェクト作成</h1>
                </div>

                <div id="chapter2">
                    <h2 class="chapter-title">Struts 1.x 開発環境のセットアップ</h2>
                    
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>Java開発環境の準備とバージョン選択</li>
                            <li>Eclipse/IntelliJ IDEAでのStruts開発環境構築</li>
                            <li>Apache Tomcatサーバーの設定と連携</li>
                            <li>Maven/Antを使ったプロジェクト作成</li>
                            <li>必要なStrutsライブラリの導入</li>
                        </ul>
                    </div>

                    <h3 class="section-title">2.1 開発環境の要件</h3>
                    <p>Struts 1.x開発に必要な環境要件を確認しましょう：</p>
                    
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>ソフトウェア</th>
                                    <th>推奨バージョン</th>
                                    <th>役割</th>
                                    <th>備考</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>JDK</strong></td>
                                    <td>1.4 ～ 1.8</td>
                                    <td>Java実行環境</td>
                                    <td>Struts 1.xは古い仕様のため</td>
                                </tr>
                                <tr>
                                    <td><strong>Servlet Container</strong></td>
                                    <td>Tomcat 6.x ～ 8.x</td>
                                    <td>Webアプリケーション実行</td>
                                    <td>Servlet 2.3以上が必要</td>
                                </tr>
                                <tr>
                                    <td><strong>IDE</strong></td>
                                    <td>Eclipse 3.x ～</td>
                                    <td>統合開発環境</td>
                                    <td>IntelliJ IDEA も可能</td>
                                </tr>
                                <tr>
                                    <td><strong>ビルドツール</strong></td>
                                    <td>Maven 2.x/3.x, Ant</td>
                                    <td>プロジェクト管理</td>
                                    <td>依存ライブラリ管理</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="warning">
                        <h5>バージョン互換性の注意</h5>
                        <p>
                            Struts 1.xは古いフレームワークのため、最新のJava環境では動作しない場合があります。
                            学習目的の場合は、JDK 8以下とTomcat 8以下の組み合わせを推奨します。
                        </p>
                    </div>

                    <h3 class="section-title">2.2 Java開発環境の準備</h3>
                    
                    <div class="exercise-container">
                        <h5>実習 2-1: JDK の確認とインストール</h5>
                        <p>開発環境のJavaバージョンを確認し、必要に応じてJDK 8をインストールします：</p>
                        <code># Javaバージョンの確認
java -version
javac -version

# JDK 8 がない場合のダウンロード元
# Oracle JDK: https://www.oracle.com/java/technologies/javase-jdk8-downloads.html
# OpenJDK: https://adoptopenjdk.net/

# 環境変数の設定例（Windows）
set JAVA_HOME=C:\Program Files\Java\jdk1.8.0_XXX
set PATH=%JAVA_HOME%\bin;%PATH%

# 環境変数の設定例（Linux/Mac）
export JAVA_HOME=/usr/lib/jvm/java-8-openjdk
export PATH=$JAVA_HOME/bin:$PATH</code>
                    </div>

                    <h3 class="section-title">2.3 Apache Tomcat の設定</h3>
                    
                    <div class="exercise-container">
                        <h5>実習 2-2: Tomcat 8 のダウンロードと設定</h5>
                        <p>Apache Tomcat をダウンロードして基本設定を行います：</p>
                        <code># 1. Tomcat 8 のダウンロード
# https://tomcat.apache.org/download-80.cgi から取得

# 2. 解凍と配置
# Windows: C:\apache-tomcat-8.5.XX
# Linux/Mac: /opt/apache-tomcat-8.5.XX

# 3. 環境変数の設定
# Windows
set CATALINA_HOME=C:\apache-tomcat-8.5.XX
set CATALINA_BASE=%CATALINA_HOME%

# Linux/Mac
export CATALINA_HOME=/opt/apache-tomcat-8.5.XX
export CATALINA_BASE=$CATALINA_HOME

# 4. 起動確認
cd %CATALINA_HOME%\bin
startup.bat    # Windows
./startup.sh   # Linux/Mac

# 5. ブラウザで確認
# http://localhost:8080</code>
                    </div>

                    <h4>Tomcat管理ユーザーの設定</h4>
                    <div class="exercise-container">
                        <h5>実習 2-3: Tomcat Manager の設定</h5>
                        <p>Webアプリケーションのデプロイメント用にTomcat Managerを設定：</p>
                        <code># conf/tomcat-users.xml を編集
&lt;tomcat-users&gt;
  &lt;role rolename="manager-gui"/&gt;
  &lt;role rolename="manager-script"/&gt;
  &lt;user username="admin" password="admin123" roles="manager-gui,manager-script"/&gt;
&lt;/tomcat-users&gt;

# Tomcat 再起動後、以下でアクセス確認
# http://localhost:8080/manager/html</code>
                    </div>

                    <h3 class="section-title">2.4 Eclipse での Struts プロジェクト作成</h3>
                    
                    <div class="exercise-container">
                        <h5>実習 2-4: Eclipse での Dynamic Web Project 作成</h5>
                        <p>Eclipse を使ってStruts 1.x用のWebプロジェクトを作成します：</p>
                        <ol>
                            <li><strong>新規プロジェクト作成</strong>
                                <ul>
                                    <li>File → New → Project...</li>
                                    <li>Web → Dynamic Web Project を選択</li>
                                    <li>Project name: "StrutsLearning"</li>
                                    <li>Target runtime: Apache Tomcat v8.5</li>
                                    <li>Dynamic web module version: 3.1</li>
                                </ul>
                            </li>
                            <li><strong>プロジェクト構造確認</strong>
                                <code>StrutsLearning/
├── src/main/java/          # Javaソースコード
├── src/main/resources/     # 設定ファイル
├── src/main/webapp/        # Webリソース
│   ├── WEB-INF/
│   │   ├── web.xml         # Web アプリケーション設定
│   │   └── lib/            # ライブラリ
│   └── index.jsp           # トップページ
└── pom.xml                 # Maven設定（Maven使用時）</code>
                            </li>
                        </ol>
                    </div>

                    <h3 class="section-title">2.5 Struts 1.x ライブラリの導入</h3>
                    
                    <h4>Maven を使用する場合</h4>
                    <div class="exercise-container">
                        <h5>実習 2-5: Maven での依存ライブラリ設定</h5>
                        <p>pom.xml に Struts 1.x の依存ライブラリを追加：</p>
                        <code>&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;struts-learning&lt;/artifactId&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;
    &lt;packaging&gt;war&lt;/packaging&gt;
    
    &lt;properties&gt;
        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;
        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;/properties&gt;
    
    &lt;dependencies&gt;
        &lt;!-- Struts 1.x Core --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.struts&lt;/groupId&gt;
            &lt;artifactId&gt;struts-core&lt;/artifactId&gt;
            &lt;version&gt;1.3.10&lt;/version&gt;
        &lt;/dependency&gt;
        
        &lt;!-- Struts Taglib --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.struts&lt;/groupId&gt;
            &lt;artifactId&gt;struts-taglib&lt;/artifactId&gt;
            &lt;version&gt;1.3.10&lt;/version&gt;
        &lt;/dependency&gt;
        
        &lt;!-- Servlet API --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;
            &lt;version&gt;3.1.0&lt;/version&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;
        
        &lt;!-- JSP API --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;
            &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;
            &lt;version&gt;2.2&lt;/version&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;
        
        &lt;!-- JSTL --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
            &lt;artifactId&gt;jstl&lt;/artifactId&gt;
            &lt;version&gt;1.2&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    
&lt;/project&gt;</code>
                    </div>

                    <h4>手動でライブラリを配置する場合</h4>
                    <div class="exercise-container">
                        <h5>実習 2-6: ライブラリの手動配置</h5>
                        <p>Struts 1.x の JAR ファイルを WEB-INF/lib に配置：</p>
                        <code># 必要なライブラリファイル（WEB-INF/lib 配下に配置）
struts.jar              # Struts コアライブラリ
commons-beanutils.jar   # Apache Commons BeanUtils
commons-collections.jar # Apache Commons Collections
commons-digester.jar    # Apache Commons Digester
commons-fileupload.jar  # ファイルアップロード機能
commons-logging.jar     # ログ機能
commons-validator.jar   # バリデーション機能

# ダウンロード元
# https://archive.apache.org/dist/struts/</code>
                    </div>

                    <h3 class="section-title">2.6 基本的なweb.xml の設定</h3>
                    
                    <div class="exercise-container">
                        <h5>実習 2-7: web.xml での Struts 設定</h5>
                        <p>WEB-INF/web.xml に Struts の基本設定を追加：</p>
                        <code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
         http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="3.0"&gt;
    
    &lt;display-name&gt;Struts Learning Application&lt;/display-name&gt;
    
    &lt;!-- Struts ActionServlet の設定 --&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;action&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.apache.struts.action.ActionServlet&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;config&lt;/param-name&gt;
            &lt;param-value&gt;/WEB-INF/struts-config.xml&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
    
    &lt;!-- *.do パターンを ActionServlet にマッピング --&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;action&lt;/servlet-name&gt;
        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
    
    &lt;!-- Struts タグライブラリの設定 --&gt;
    &lt;taglib&gt;
        &lt;taglib-uri&gt;/WEB-INF/struts-html.tld&lt;/taglib-uri&gt;
        &lt;taglib-location&gt;/WEB-INF/struts-html.tld&lt;/taglib-location&gt;
    &lt;/taglib&gt;
    
    &lt;taglib&gt;
        &lt;taglib-uri&gt;/WEB-INF/struts-bean.tld&lt;/taglib-uri&gt;
        &lt;taglib-location&gt;/WEB-INF/struts-bean.tld&lt;/taglib-location&gt;
    &lt;/taglib&gt;
    
    &lt;taglib&gt;
        &lt;taglib-uri&gt;/WEB-INF/struts-logic.tld&lt;/taglib-uri&gt;
        &lt;taglib-location&gt;/WEB-INF/struts-logic.tld&lt;/taglib-location&gt;
    &lt;/taglib&gt;
    
    &lt;!-- セッションタイムアウト設定 --&gt;
    &lt;session-config&gt;
        &lt;session-timeout&gt;30&lt;/session-timeout&gt;
    &lt;/session-config&gt;
    
    &lt;!-- ウェルカムファイル --&gt;
    &lt;welcome-file-list&gt;
        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;
    
&lt;/web-app&gt;</code>
                    </div>

                    <h3 class="section-title">2.7 プロジェクトの動作確認</h3>
                    
                    <div class="exercise-container">
                        <h5>実習 2-8: 基本動作確認用ページの作成</h5>
                        <p>プロジェクトが正常にセットアップされているか確認するためのテストページを作成：</p>
                        
                        <h6>index.jsp の作成</h6>
                        <code>&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %&gt;
&lt;%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %&gt;

&lt;html:html&gt;
&lt;head&gt;
    &lt;title&gt;Struts 1.x Learning - Welcome&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Struts 1.x 学習プロジェクト&lt;/h1&gt;
    &lt;p&gt;環境構築が正常に完了しました！&lt;/p&gt;
    
    &lt;h3&gt;動作確認&lt;/h3&gt;
    &lt;ul&gt;
        &lt;li&gt;Struts バージョン: 1.3.10&lt;/li&gt;
        &lt;li&gt;サーバー: Apache Tomcat&lt;/li&gt;
        &lt;li&gt;現在日時: &lt;%= new java.util.Date() %&gt;&lt;/li&gt;
    &lt;/ul&gt;
    
    &lt;p&gt;
        &lt;html:link page="/hello.do"&gt;Hello Struts アクションを実行&lt;/html:link&gt;
    &lt;/p&gt;
&lt;/body&gt;
&lt;/html:html&gt;</code>
                    </div>

                    <h3 class="section-title">2.8 開発環境の最適化</h3>
                    
                    <h4>Eclipse での開発効率化設定</h4>
                    <ul>
                        <li><strong>自動リロード</strong>: Server設定でauto-reload有効化</li>
                        <li><strong>文字エンコーディング</strong>: UTF-8に統一</li>
                        <li><strong>フォーマッター</strong>: Java/JSPコードの自動整形</li>
                        <li><strong>デバッグ設定</strong>: リモートデバッグの有効化</li>
                    </ul>

                    <div class="exercise-container">
                        <h5>実習 2-9: Eclipse での設定最適化</h5>
                        <code># 1. プロジェクトプロパティ → Project Facets
#    Java: 1.8
#    Dynamic Web Module: 3.1

# 2. プロジェクトプロパティ → Resource
#    Text file encoding: UTF-8

# 3. Server 設定
#    Modules タブで Auto-reload enabled を確認

# 4. Run Configuration
#    VM arguments: -Dfile.encoding=UTF-8</code>
                    </div>

                    <div class="warning">
                        <h5>トラブルシューティング</h5>
                        <h6>よくある問題と解決方法</h6>
                        <ul>
                            <li><strong>ClassNotFoundException</strong>: WEB-INF/lib に必要なJARファイルが配置されているか確認</li>
                            <li><strong>404 Error</strong>: web.xml のサーブレットマッピングが正しく設定されているか確認</li>
                            <li><strong>文字化け</strong>: JSPページとweb.xmlでUTF-8エンコーディングが設定されているか確認</li>
                            <li><strong>起動エラー</strong>: Tomcatのポート8080が他のプロセスで使用されていないか確認</li>
                        </ul>
                    </div>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>Struts 1.x で推奨されるJDKのバージョン範囲は何ですか？</li>
                            <li>web.xml でStruts の ActionServlet を設定する際の必須パラメータは何ですか？</li>
                            <li>*.do パターンのURLマッピングを設定する理由を説明してください。</li>
                            <li>WEB-INF/lib に配置が必要な主要なStruts関連JARファイルを3つ挙げてください。</li>
                            <li>Eclipse でTomcat との連携開発を行う際の設定確認ポイントを2つ挙げてください。</li>
                        </ol>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="struts1-learning-material-1.html" class="btn btn-secondary">← 前の章</a>
                        <a href="struts1-learning-material-3.html" class="btn btn-primary">次の章 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>