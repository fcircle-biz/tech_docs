<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Struts 1.x学習教材 第1章 - Struts 1.xの基本概念とMVCアーキテクチャ</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        .navbar {
            background-color: #795548;
        }
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        .chapter-title {
            color: #795548;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #795548;
            padding-bottom: 0.5rem;
        }
        .section-title {
            color: #8d6e63;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        code {
            display: block;
            background-color: #f5f5f5;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            white-space: pre;
            overflow-x: auto;
        }
        .quiz-container {
            background-color: #efebe9;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #795548;
        }
        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }
        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }
        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }
        .nav-link.active {
            background-color: #795548 !important;
            color: white !important;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="README.md">Struts 1.x学習ガイド</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse" role="navigation" aria-label="Chapter navigation">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="struts1-learning-material-1.html">第1章: Struts 1.xの基本概念とMVCアーキテクチャ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-2.html">第2章: 環境構築とプロジェクト作成</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-3.html">第3章: ActionクラスとActionForm</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-4.html">第4章: struts-config.xmlの設定と管理</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-5.html">第5章: JSPとの連携とTagライブラリ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-6.html">第6章: バリデーション機能とエラーハンドリング</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-7.html">第7章: セッション管理とセキュリティ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-8.html">第8章: 国際化（i18n）とプロパティファイル</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-9.html">第9章: データベース連携と実践的開発</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="struts1-learning-material-10.html">第10章: デバッグ・テスト・デプロイメント</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4" role="main">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第1章: Struts 1.xの基本概念とMVCアーキテクチャ</h1>
                </div>

                <div id="chapter1">
                    <h2 class="chapter-title">Apache Struts 1.x フレームワークとは</h2>
                    
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>Apache Struts 1.xフレームワークの概要と歴史</li>
                            <li>MVCアーキテクチャの理解と利点</li>
                            <li>Web開発におけるStrutsの位置づけ</li>
                            <li>Struts 1.xの主要コンポーネント</li>
                            <li>現在の開発状況と注意事項</li>
                        </ul>
                    </div>

                    <div class="warning">
                        <h5>重要な注意事項</h5>
                        <p>
                            Apache Struts 1.xは<strong>2013年にEOL（End of Life）</strong>に達しており、
                            セキュリティアップデートが提供されません。新規開発には使用せず、
                            レガシーシステムの保守・理解・移行作業の目的で学習してください。
                        </p>
                    </div>

                    <h3 class="section-title">1.1 Apache Struts 1.xの概要</h3>
                    <p>
                        Apache Struts 1.xは、Javaベースのオープンソース Webアプリケーションフレームワークです。
                        2000年にリリースされ、Java EEエンタープライズ開発において長期間にわたって広く使用されました。
                        Servlet/JSP技術をベースとし、MVCアーキテクチャパターンを実装しています。
                    </p>

                    <h4>Struts 1.xの歴史</h4>
                    <ul>
                        <li><strong>2000年</strong>: Craig McClanahan により開発開始</li>
                        <li><strong>2001年</strong>: Apache Software Foundationプロジェクトとなる</li>
                        <li><strong>2004年</strong>: Struts 1.2.x系で機能が成熟</li>
                        <li><strong>2008年</strong>: Struts 2.xがリリース（別アーキテクチャ）</li>
                        <li><strong>2013年</strong>: Struts 1.x系の開発終了・EOL</li>
                    </ul>

                    <h3 class="section-title">1.2 MVCアーキテクチャの理解</h3>
                    <p>MVCは Model-View-Controller の略で、アプリケーションを3つの層に分離する設計パターンです：</p>
                    
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>レイヤー</th>
                                    <th>役割</th>
                                    <th>Struts 1.xでの実装</th>
                                    <th>具体例</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Model</strong></td>
                                    <td>ビジネスロジック・データ処理</td>
                                    <td>ActionForm、JavaBean、DAO</td>
                                    <td>顧客情報クラス、計算処理</td>
                                </tr>
                                <tr>
                                    <td><strong>View</strong></td>
                                    <td>ユーザーインターフェース</td>
                                    <td>JSP、Strutsタグライブラリ</td>
                                    <td>入力フォーム、結果表示</td>
                                </tr>
                                <tr>
                                    <td><strong>Controller</strong></td>
                                    <td>リクエスト制御・処理の振り分け</td>
                                    <td>ActionServlet、Action クラス</td>
                                    <td>ログイン処理、画面遷移</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h4>MVCの利点</h4>
                    <ul>
                        <li><strong>関心の分離</strong>: 各層の責任が明確</li>
                        <li><strong>保守性</strong>: 修正の影響範囲が限定的</li>
                        <li><strong>再利用性</strong>: コンポーネントの再利用が容易</li>
                        <li><strong>テスト容易性</strong>: 単体テストが書きやすい</li>
                        <li><strong>チーム開発</strong>: 役割分担しやすい</li>
                    </ul>

                    <h3 class="section-title">1.3 Struts 1.xの主要コンポーネント</h3>
                    
                    <h4>1. ActionServlet</h4>
                    <p>Strutsアプリケーションの中央制御機能を担うサーブレットです：</p>
                    <ul>
                        <li>全てのHTTPリクエストを受信</li>
                        <li>適切なActionクラスに処理を委譲</li>
                        <li>設定ファイル（struts-config.xml）を読み込み</li>
                        <li>レスポンスの生成とフォワード</li>
                    </ul>

                    <h4>2. Action クラス</h4>
                    <p>ビジネスロジックを実装するコントローラークラスです：</p>
                    <ul>
                        <li>org.apache.struts.action.Action を継承</li>
                        <li>execute() メソッドで処理を実装</li>
                        <li>ActionForward を返して画面遷移を制御</li>
                    </ul>

                    <h4>3. ActionForm</h4>
                    <p>HTMLフォームのデータを格納するJavaBean です：</p>
                    <ul>
                        <li>フォームの入力値を自動的にマッピング</li>
                        <li>validate() メソッドで入力検証</li>
                        <li>Actionクラスに渡されて処理される</li>
                    </ul>

                    <h4>4. struts-config.xml</h4>
                    <p>Strutsアプリケーションの設定ファイルです：</p>
                    <ul>
                        <li>Action、ActionForm の定義</li>
                        <li>画面遷移（ActionForward）の設定</li>
                        <li>プラグイン・メッセージリソースの設定</li>
                    </ul>

                    <div class="exercise-container">
                        <h5>実習 1-1: Struts 1.x アーキテクチャの理解</h5>
                        <p>以下のシナリオをStruts 1.xのMVCアーキテクチャで整理してみましょう：</p>
                        <p><strong>シナリオ</strong>: ユーザーがログインフォームに ID・パスワードを入力して認証を行う</p>
                        
                        <h6>各コンポーネントの役割</h6>
                        <code>1. View (JSP)
   - login.jsp: ログインフォーム表示
   - welcome.jsp: ログイン成功画面
   - error.jsp: エラー画面

2. Model (ActionForm + JavaBean)
   - LoginForm: ID・パスワードの入力値を格納
   - User: ユーザー情報を表現するビジネスオブジェクト
   - UserDAO: データベースからユーザー情報を取得

3. Controller (Action)
   - LoginAction: ログイン処理のビジネスロジック
   - ユーザー認証
   - 認証結果に応じた画面遷移の決定</code>
                    </div>

                    <h3 class="section-title">1.4 リクエスト処理の流れ</h3>
                    <p>Struts 1.xでのHTTPリクエスト処理は以下のような流れになります：</p>
                    
                    <div class="exercise-container">
                        <h5>実習 1-2: リクエスト処理フローの追跡</h5>
                        <code>1. ブラウザからHTTPリクエスト送信
   ↓
2. ActionServletがリクエストを受信
   ↓  
3. struts-config.xmlから適切なActionを特定
   ↓
4. ActionFormにリクエストパラメータを自動設定
   ↓
5. ActionForm.validate()でデータ検証
   ↓
6. Action.execute()でビジネスロジック実行
   ↓
7. ActionForwardで次の画面を決定
   ↓
8. JSPページを表示（または他のActionにフォワード）</code>
                    </div>

                    <h3 class="section-title">1.5 Struts 1.xの利点と制約</h3>
                    
                    <h4>利点</h4>
                    <ul>
                        <li><strong>MVCパターン</strong>: 明確な層分離</li>
                        <li><strong>設定ベース</strong>: XMLによる宣言的な設定</li>
                        <li><strong>タグライブラリ</strong>: 豊富なJSPタグ</li>
                        <li><strong>バリデーション</strong>: 統合された入力検証機能</li>
                        <li><strong>国際化</strong>: メッセージリソースによる多言語対応</li>
                    </ul>

                    <h4>制約・問題点</h4>
                    <ul>
                        <li><strong>Action継承</strong>: org.apache.struts.action.Actionへの依存</li>
                        <li><strong>Singletonパターン</strong>: Actionクラスのインスタンス管理</li>
                        <li><strong>テストしにくさ</strong>: ServletAPIへの密結合</li>
                        <li><strong>設定の複雑さ</strong>: 大規模アプリケーションでのXML管理</li>
                        <li><strong>型安全性</strong>: 文字列ベースの設定によるエラー</li>
                    </ul>

                    <h3 class="section-title">1.6 現在の開発動向と代替技術</h3>
                    
                    <h4>EOL後の状況</h4>
                    <p>Struts 1.xは2013年に開発終了となり、以下の状況です：</p>
                    <ul>
                        <li>セキュリティパッチの提供終了</li>
                        <li>新機能追加・バグ修正の停止</li>
                        <li>コミュニティサポートの縮小</li>
                        <li>最新Java環境での動作保証なし</li>
                    </ul>

                    <h4>推奨される代替フレームワーク</h4>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>フレームワーク</th>
                                    <th>特徴</th>
                                    <th>移行難易度</th>
                                    <th>推奨レベル</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Spring Boot</strong></td>
                                    <td>Java標準、豊富な機能</td>
                                    <td>中程度</td>
                                    <td>★★★★★</td>
                                </tr>
                                <tr>
                                    <td>Apache Struts 2.x</td>
                                    <td>Struts 1.xの後継</td>
                                    <td>低い</td>
                                    <td>★★★☆☆</td>
                                </tr>
                                <tr>
                                    <td>JSF (JavaServer Faces)</td>
                                    <td>Java EE標準</td>
                                    <td>高い</td>
                                    <td>★★☆☆☆</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>MVCアーキテクチャの3つの層と、それぞれの役割を説明してください。</li>
                            <li>Struts 1.xでHTTPリクエストを最初に受信するコンポーネントは何ですか？</li>
                            <li>ActionFormクラスの主な役割を2つ挙げてください。</li>
                            <li>Struts 1.xが2013年にEOLになった理由と、新規開発で使用すべきでない理由を説明してください。</li>
                            <li>Struts 1.xから移行する場合、最も推奨される代替フレームワークは何ですか？</li>
                        </ol>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="README.md" class="btn btn-secondary">← ガイド一覧</a>
                        <a href="struts1-learning-material-2.html" class="btn btn-primary">次の章 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>