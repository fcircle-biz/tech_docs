<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring Boot初心者向け学習教材 - 第3章：Spring Bootの基本構成とDI</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        .navbar {
            background-color: #28a745;
        }
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        .chapter-title {
            color: #28a745;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #28a745;
            padding-bottom: 0.5rem;
        }
        .section-title {
            color: #218838;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        code {
            display: block;
            background-color: #f5f5f5;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            white-space: pre;
            overflow-x: auto;
        }
        .quiz-container {
            background-color: #e8f4e8;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .quiz-question {
            font-weight: 500;
            margin-bottom: 1rem;
        }
        .diagram {
            max-width: 100%;
            height: auto;
            margin: 1.5rem 0;
            text-align: center;
        }
        .exercise {
            background-color: #fff8e1;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1.5rem 0;
        }
        .note {
            background-color: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 1rem;
            margin: 1.5rem 0;
        }
        #table-of-contents .list-group-item {
            border: none;
            padding: 0.5rem 1rem;
        }
        #table-of-contents .list-group-item-action {
            color: #28a745;
        }
        #table-of-contents .list-group-item-action.active,
        .list-group-item.active {
            color: white !important;
            background-color: #28a745;
            border-color: #28a745;
        }
        .section-nav {
            padding-left: 1rem;
        }
        .inline-code {
            background-color: #f5f5f5;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            display: inline;
        }
        footer {
            background-color: #28a745;
            color: white;
            padding: 1rem 0;
            margin-top: 3rem;
        }
        .table-example {
            width: 100%;
            margin-bottom: 1rem;
            border-collapse: collapse;
        }
        .table-example th {
            background-color: #e8f4e8;
            border: 1px solid #c3e6cb;
            padding: 0.5rem;
            text-align: center;
        }
        .table-example td {
            border: 1px solid #c3e6cb;
            padding: 0.5rem;
            text-align: center;
        }
        .example-result {
            background-color: #f1f8e9;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
        }
        .warning {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
            padding: 1rem;
            margin: 1.5rem 0;
        }
    </style>
</head>
<body data-bs-spy="scroll" data-bs-target="#tableOfContents">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">Spring Boot初心者向け学習教材</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#introduction">はじめに</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#chapter3">第3章: Spring Bootの基本構成とDI</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container my-4">
        <div class="row">
            <!-- Sidebar - Table of Contents -->
            <div class="col-lg-3">
                <div class="sidebar">
                    <div class="card">
                        <div class="card-header bg-success text-white">
                            <h5 class="mb-0">目次</h5>
                        </div>
                        <div id="table-of-contents" class="list-group list-group-flush">
                            <a href="#introduction" class="list-group-item list-group-item-action">はじめに</a>
                            <a href="#chapter3" class="list-group-item list-group-item-action">第3章: Spring Bootの基本構成とDI</a>
                            <div class="section-nav">
                                <a href="#spring-boot-basics" class="list-group-item list-group-item-action">3.1 Spring Bootの自動構成とクラス構成</a>
                                <a href="#dependency-injection" class="list-group-item list-group-item-action">3.2 DI（依存性注入）</a>
                                <a href="#annotations" class="list-group-item list-group-item-action">3.3 アノテーションの基本</a>
                                <a href="#application-yml" class="list-group-item list-group-item-action">3.4 application.ymlの使い方</a>
                                <a href="#chapter3-quiz" class="list-group-item list-group-item-action">3.5 理解度確認テスト</a>
                            </div>
                            <a href="#next-steps" class="list-group-item list-group-item-action">次のステップ</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="col-lg-9">
                <section id="introduction">
                    <h1 class="display-5 mb-4">Spring Boot初心者向け学習教材</h1>
                    <p class="lead">この教材では、Java開発の効率化と保守性の向上を実現するSpring Bootについて学習します。この第3章では、Spring Bootの基本構成と依存性注入（DI）について学びます。</p>

                    <div class="note">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>Spring Bootの自動構成とクラス構成の理解</li>
                            <li>DI（依存性注入）の概念と実装方法</li>
                            <li>主要なアノテーションとその使い方</li>
                            <li>application.ymlの設定と活用方法</li>
                            <li>実践的なコーディング例</li>
                        </ul>
                    </div>
                    
                    <div class="note">
                        <h5>前提条件</h5>
                        <p>この教材は以下の環境を想定しています：</p>
                        <ul>
                            <li>JDK 21</li>
                            <li>PostgreSQL データベース</li>
                            <li>Spring Data JDBC</li>
                        </ul>
                    </div>
                </section>

                <section id="chapter3">
                    <h2 class="chapter-title">第3章：Spring Bootの基本構成とDI（依存性注入）</h2>
                    <p>Spring Bootは、Springフレームワークをより簡単に使えるように設計されたツールで、最小限の設定で本格的なアプリケーションを構築できます。この章では、Spring Bootの構成とDIの基本を理解し、効率的なアプリケーション開発の基礎を学びます。</p>

                    <section id="spring-boot-basics">
                        <h3 class="section-title">3.1 Spring Bootの自動構成とクラス構成</h3>
                        <p>Spring Bootの大きな特徴は「自動構成（Auto-configuration）」です。これは必要最小限の設定で、アプリケーションを迅速に立ち上げることを可能にします。</p>

                        <h4>Spring Bootの自動構成</h4>
                        <p>Spring Bootでは、クラスパス上にあるライブラリやJARファイルを検出し、自動的に適切な設定を行います。例えば、以下のような機能が自動構成の対象です：</p>
                        
                        <ul>
                            <li>データベース接続（JDBCやJPA）</li>
                            <li>Webサーバー（Tomcat、Jettyなど）</li>
                            <li>セキュリティ設定</li>
                            <li>ログ設定</li>
                            <li>キャッシュ機能</li>
                        </ul>

                        <p>Spring Bootの自動構成は、主に<span class="inline-code">@EnableAutoConfiguration</span>アノテーションや<span class="inline-code">@SpringBootApplication</span>アノテーション（これは<span class="inline-code">@EnableAutoConfiguration</span>を含む）によって有効になります。</p>

                        <h4>Spring Bootアプリケーションの基本構成</h4>
                        <p>典型的なSpring Bootアプリケーションの構成は以下のようになります：</p>

                        <code>src/
  ├── main/
  │   ├── java/
  │   │   └── com/example/myapp/
  │   │       ├── MyApplication.java        # メインアプリケーションクラス
  │   │       ├── controller/               # コントローラークラス
  │   │       ├── service/                  # サービスクラス
  │   │       ├── repository/               # リポジトリクラス
  │   │       ├── entity/                   # エンティティクラス
  │   │       └── config/                   # 設定クラス
  │   └── resources/
  │       ├── application.yml               # アプリケーション設定
  │       ├── static/                       # 静的リソース
  │       └── templates/                    # テンプレートファイル
  └── test/                                 # テストコード</code>

                        <h4>メインアプリケーションクラス</h4>
                        <p>Spring Bootアプリケーションのエントリーポイントとなるクラスは通常、以下のように記述します：</p>

                        <code>package com.example.myapp;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class MyApplication {
    public static void main(String[] args) {
        SpringApplication.run(MyApplication.class, args);
    }
}</code>

                        <p><span class="inline-code">@SpringBootApplication</span>アノテーションは以下の3つのアノテーションを含んでいます：</p>
                        <ul>
                            <li><strong>@EnableAutoConfiguration</strong>: クラスパスに基づいて設定を自動的に行う</li>
                            <li><strong>@ComponentScan</strong>: アノテーションが付与されたコンポーネントを検出する</li>
                            <li><strong>@Configuration</strong>: アプリケーションのコンテキスト定義を含む設定クラスとして指定する</li>
                        </ul>

                        <div class="diagram">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 300" width="600" height="300">
                                <!-- SpringBootApplication -->
                                <rect x="250" y="20" width="150" height="40" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" rx="5" />
                                <text x="325" y="45" text-anchor="middle" font-size="14">@SpringBootApplication</text>
                                
                                <!-- 3つの要素 -->
                                <rect x="100" y="120" width="150" height="40" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" rx="5" />
                                <text x="175" y="145" text-anchor="middle" font-size="14">@EnableAutoConfiguration</text>
                                
                                <rect x="250" y="120" width="150" height="40" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" rx="5" />
                                <text x="325" y="145" text-anchor="middle" font-size="14">@ComponentScan</text>
                                
                                <rect x="400" y="120" width="150" height="40" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" rx="5" />
                                <text x="475" y="145" text-anchor="middle" font-size="14">@Configuration</text>
                                
                                <!-- 機能説明 -->
                                <rect x="100" y="200" width="150" height="60" fill="#f5f5f5" stroke="#9e9e9e" stroke-width="1" rx="3" />
                                <text x="175" y="225" text-anchor="middle" font-size="12">自動設定</text>
                                <text x="175" y="245" text-anchor="middle" font-size="12">クラスパスに基づく</text>
                                
                                <rect x="250" y="200" width="150" height="60" fill="#f5f5f5" stroke="#9e9e9e" stroke-width="1" rx="3" />
                                <text x="325" y="225" text-anchor="middle" font-size="12">コンポーネントスキャン</text>
                                <text x="325" y="245" text-anchor="middle" font-size="12">自動検出</text>
                                
                                <rect x="400" y="200" width="150" height="60" fill="#f5f5f5" stroke="#9e9e9e" stroke-width="1" rx="3" />
                                <text x="475" y="225" text-anchor="middle" font-size="12">設定定義</text>
                                <text x="475" y="245" text-anchor="middle" font-size="12">Bean定義</text>
                                
                                <!-- 矢印 -->
                                <line x1="325" y1="60" x2="175" y2="120" stroke="#000" stroke-width="1.5" marker-end="url(#arrow)" />
                                <line x1="325" y1="60" x2="325" y2="120" stroke="#000" stroke-width="1.5" marker-end="url(#arrow)" />
                                <line x1="325" y1="60" x2="475" y2="120" stroke="#000" stroke-width="1.5" marker-end="url(#arrow)" />
                                
                                <line x1="175" y1="160" x2="175" y2="200" stroke="#000" stroke-width="1" marker-end="url(#arrow)" />
                                <line x1="325" y1="160" x2="325" y2="200" stroke="#000" stroke-width="1" marker-end="url(#arrow)" />
                                <line x1="475" y1="160" x2="475" y2="200" stroke="#000" stroke-width="1" marker-end="url(#arrow)" />
                                
                                <defs>
                                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                        <path d="M0,0 L0,6 L9,3 z" fill="#000" />
                                    </marker>
                                </defs>
                            </svg>
                            <p class="text-center">図3.1: @SpringBootApplicationの構造</p>
                        </div>

                        <div class="exercise">
                            <h5>演習 3.1: Spring Bootアプリケーションの作成</h5>
                            <p>簡単なSpring Bootアプリケーションを作成して、自動構成の仕組みを確認しましょう。</p>
                            <ol>
                                <li>Spring Initializrを使用して、新しいSpring Bootプロジェクトを作成します。</li>
                                <li>依存関係に「Web」と「JDBC API」、「PostgreSQL Driver」を追加します。</li>
                                <li>生成されたプロジェクトをIDEでインポートして、プロジェクト構造を確認します。</li>
                                <li>以下のようなコントローラクラスを作成して、動作を確認します。</li>
                            </ol>
                            
                            <code>package com.example.myapp.controller;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class HelloController {
    
    @GetMapping("/hello")
    public String hello() {
        return "Hello, Spring Boot!";
    }
}</code>
                            
                            <p>このコードを作成し、アプリケーションを実行すると、<span class="inline-code">http://localhost:8080/hello</span>にアクセスすることで「Hello, Spring Boot!」というメッセージが表示されるはずです。</p>
                        </div>
                    </section>

                    <section id="dependency-injection">
                        <h3 class="section-title">3.2 DI（依存性注入）</h3>
                        <p>依存性注入（Dependency Injection、DI）は、オブジェクト間の依存関係をフレームワークが自動的に解決する設計パターンです。DIにより、コンポーネント間の結合度を下げ、テスト容易性と保守性を向上させることができます。</p>

                        <h4>DIの基本概念</h4>
                        <p>DIの核心は、クラス内で他のクラスを直接インスタンス化するのではなく、外部から依存性を「注入」することです。これにより、以下のメリットがあります：</p>
                        
                        <ul>
                            <li>クラス間の結合度の低減（疎結合）</li>
                            <li>再利用性の向上</li>
                            <li>テストの容易さ</li>
                            <li>保守性の向上</li>
                        </ul>

                        <h4>DIの例：従来の方法 vs DIを使用した方法</h4>
                        <p>以下は、従来の方法とDIを使用した方法の違いを示す例です：</p>

                        <p><strong>従来の方法（DIなし）</strong></p>
                        <code>// UserServiceは、UserRepositoryを直接インスタンス化して使用
public class UserService {
    private UserRepository userRepository;
    
    public UserService() {
        // 強い結合 - UserServiceはUserRepositoryに依存
        this.userRepository = new UserRepository();
    }
    
    public User getUserById(Long id) {
        return userRepository.findById(id);
    }
}</code>

                        <p><strong>DIを使用した方法</strong></p>
                        <code>// UserServiceは、外部から注入されたUserRepositoryを使用
public class UserService {
    private final UserRepository userRepository;
    
    // コンストラクタ注入
    public UserService(UserRepository userRepository) {
        // 弱い結合 - UserRepositoryの実装はSpringが注入
        this.userRepository = userRepository;
    }
    
    public User getUserById(Long id) {
        return userRepository.findById(id);
    }
}</code>

                        <h4>DIの種類</h4>
                        <p>Spring Bootでサポートされている主なDIの方法は3つあります：</p>

                        <div class="table-responsive">
                            <table class="table-example">
                                <tr>
                                    <th>注入方法</th>
                                    <th>説明</th>
                                    <th>コード例</th>
                                    <th>推奨度</th>
                                </tr>
                                <tr>
                                    <td>コンストラクタ注入</td>
                                    <td>コンストラクタを通じて依存性を注入</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@Autowired<br>public Service(Repository r) {...}</code></td>
                                    <td>★★★（最も推奨）</td>
                                </tr>
                                <tr>
                                    <td>セッター注入</td>
                                    <td>セッターメソッドを通じて依存性を注入</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@Autowired<br>public void setRepo(Repository r) {...}</code></td>
                                    <td>★★（状況による）</td>
                                </tr>
                                <tr>
                                    <td>フィールド注入</td>
                                    <td>フィールドに直接依存性を注入</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@Autowired<br>private Repository repository;</code></td>
                                    <td>★（非推奨）</td>
                                </tr>
                            </table>
                        </div>

                        <div class="note">
                            <h5>なぜコンストラクタ注入が推奨されるのか？</h5>
                            <ul>
                                <li><strong>不変性</strong>：finalキーワードが使用でき、不変性を保証できる</li>
                                <li><strong>必須依存性の明示</strong>：必要な依存性を明示的に宣言できる</li>
                                <li><strong>循環依存の検出</strong>：循環依存関係を早期に検出できる</li>
                                <li><strong>テスト容易性</strong>：テスト時にモックオブジェクトを簡単に注入できる</li>
                            </ul>
                        </div>

                        <h4>DIの実装例</h4>
                        <p>以下は、Spring BootでDIを使用したシンプルなアプリケーションの例です：</p>

                        <code>// ユーザーエンティティ
package com.example.myapp.entity;

public class User {
    private Long id;
    private String name;
    private String email;
    
    // コンストラクタ、ゲッター、セッター（省略）
    public User(Long id, String name, String email) {
        this.id = id;
        this.name = name;
        this.email = email;
    }
    
    // ゲッターとセッター
    public Long getId() { return id; }
    public void setId(Long id) { this.id = id; }
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    public String getEmail() { return email; }
    public void setEmail(String email) { this.email = email; }
}

// リポジトリインターフェース
package com.example.myapp.repository;

import com.example.myapp.entity.User;
import java.util.List;
import java.util.Optional;

public interface UserRepository {
    List<User> findAll();
    Optional<User> findById(Long id);
    User save(User user);
    void deleteById(Long id);
}

// リポジトリ実装クラス
package com.example.myapp.repository;

import com.example.myapp.entity.User;
import org.springframework.stereotype.Repository;
import java.util.*;

@Repository
public class UserRepositoryImpl implements UserRepository {
    private final Map<Long, User> users = new HashMap<>();
    
    public UserRepositoryImpl() {
        // 初期データ
        users.put(1L, new User(1L, "山田太郎", "yamada@example.com"));
        users.put(2L, new User(2L, "佐藤花子", "sato@example.com"));
    }
    
    @Override
    public List<User> findAll() {
        return new ArrayList<>(users.values());
    }
    
    @Override
    public Optional<User> findById(Long id) {
        return Optional.ofNullable(users.get(id));
    }
    
    @Override
    public User save(User user) {
        if (user.getId() == null) {
            user.setId(users.size() + 1L);
        }
        users.put(user.getId(), user);
        return user;
    }
    
    @Override
    public void deleteById(Long id) {
        users.remove(id);
    }
}

// サービスクラス
package com.example.myapp.service;

import com.example.myapp.entity.User;
import com.example.myapp.repository.UserRepository;
import org.springframework.stereotype.Service;
import java.util.List;
import java.util.Optional;

@Service
public class UserService {
    private final UserRepository userRepository;
    
    // コンストラクタ注入
    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }
    
    public List<User> getAllUsers() {
        return userRepository.findAll();
    }
    
    public Optional<User> getUserById(Long id) {
        return userRepository.findById(id);
    }
    
    public User createUser(User user) {
        return userRepository.save(user);
    }
    
    public void deleteUser(Long id) {
        userRepository.deleteById(id);
    }
}

// コントローラクラス
package com.example.myapp.controller;

import com.example.myapp.entity.User;
import com.example.myapp.service.UserService;
import org.springframework.web.bind.annotation.*;
import java.util.List;

@RestController
@RequestMapping("/api/users")
public class UserController {
    private final UserService userService;
    
    // コンストラクタ注入
    public UserController(UserService userService) {
        this.userService = userService;
    }
    
    @GetMapping
    public List<User> getAllUsers() {
        return userService.getAllUsers();
    }
    
    @GetMapping("/{id}")
    public User getUserById(@PathVariable Long id) {
        return userService.getUserById(id)
            .orElseThrow(() -> new RuntimeException("User not found with id: " + id));
    }
    
    @PostMapping
    public User createUser(@RequestBody User user) {
        return userService.createUser(user);
    }
    
    @DeleteMapping("/{id}")
    public void deleteUser(@PathVariable Long id) {
        userService.deleteUser(id);
    }
}</code>

                        <div class="diagram">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 250" width="600" height="250">
                                <!-- クライアント -->
                                <rect x="50" y="105" width="100" height="40" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" rx="5" />
                                <text x="100" y="130" text-anchor="middle" font-size="14">クライアント</text>
                                
                                <!-- コントローラ -->
                                <rect x="200" y="105" width="100" height="40" fill="#fff8e1" stroke="#ffc107" stroke-width="2" rx="5" />
                                <text x="250" y="130" text-anchor="middle" font-size="14">Controller</text>
                                
                                <!-- サービス -->
                                <rect x="350" y="105" width="100" height="40" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" rx="5" />
                                <text x="400" y="130" text-anchor="middle" font-size="14">Service</text>
                                
                                <!-- リポジトリ -->
                                <rect x="500" y="105" width="100" height="40" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2" rx="5" />
                                <text x="550" y="130" text-anchor="middle" font-size="14">Repository</text>
                                
                                <!-- アノテーション -->
                                <text x="250" y="95" text-anchor="middle" font-size="12" fill="#D32F2F">@RestController</text>
                                <text x="400" y="95" text-anchor="middle" font-size="12" fill="#D32F2F">@Service</text>
                                <text x="550" y="95" text-anchor="middle" font-size="12" fill="#D32F2F">@Repository</text>
                                
                                <!-- 矢印 -->
                                <line x1="150" y1="125" x2="200" y2="125" stroke="#000" stroke-width="1.5" marker-end="url(#arrow)" />
                                <line x1="300" y1="125" x2="350" y2="125" stroke="#000" stroke-width="1.5" marker-end="url(#arrow)" />
                                <line x1="450" y1="125" x2="500" y2="125" stroke="#000" stroke-width="1.5" marker-end="url(#arrow)" />
                                
                                <!-- コンストラクタ注入 -->
                                <text x="325" y="165" text-anchor="middle" font-size="12">コンストラクタ注入</text>
                                <path d="M325,155 l0,15 l-10,-10 m10,10 l10,-10" stroke="#D32F2F" stroke-width="1.5" fill="none" />
                                
                                <text x="475" y="165" text-anchor="middle" font-size="12">コンストラクタ注入</text>
                                <path d="M475,155 l0,15 l-10,-10 m10,10 l10,-10" stroke="#D32F2F" stroke-width="1.5" fill="none" />
                                
                                <defs>
                                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                        <path d="M0,0 L0,6 L9,3 z" fill="#000" />
                                    </marker>
                                </defs>
                                
                                <text x="300" y="30" text-anchor="middle" font-size="16" font-weight="bold">依存性注入（DI）の流れ</text>
                                <text x="300" y="50" text-anchor="middle" font-size="12">Spring IoC コンテナがBeanを管理し、依存関係を自動注入</text>
                            </svg>
                            <p class="text-center">図3.2: Spring BootにおけるDIとレイヤー構造</p>
                        </div>

                        <div class="exercise">
                            <h5>演習 3.2: DIの実装</h5>
                            <p>ここまでの例を参考に、以下の要件を満たすコードを実装してみましょう：</p>
                            <ol>
                                <li>Book（書籍）エンティティを作成（id, title, author, price）</li>
                                <li>BookRepositoryインターフェースとその実装を作成</li>
                                <li>BookServiceクラスを作成し、コンストラクタ注入でリポジトリを利用</li>
                                <li>BookControllerクラスを作成し、コンストラクタ注入でサービスを利用</li>
                                <li>基本的なCRUD操作を実装</li>
                            </ol>
                        </div>
                    </section>

                    <section id="annotations">
                        <h3 class="section-title">3.3 アノテーションの基本</h3>
                        <p>Spring Bootでは、様々なアノテーションを使用してコンポーネントの役割や振る舞いを定義します。ここでは、主要なアノテーションとその使い方を解説します。</p>

                        <h4>コンポーネントスキャンとステレオタイプアノテーション</h4>
                        <p>Spring Bootは、特定のアノテーションが付与されたクラスを自動的に検出し、Beanとして登録します。これらのアノテーションは「ステレオタイプアノテーション」と呼ばれます。</p>

                        <div class="table-responsive">
                            <table class="table-example">
                                <tr>
                                    <th>アノテーション</th>
                                    <th>説明</th>
                                    <th>主な用途</th>
                                </tr>
                                <tr>
                                    <td>@Component</td>
                                    <td>汎用的なSpringコンポーネント</td>
                                    <td>他のステレオタイプに当てはまらない一般的なクラス</td>
                                </tr>
                                <tr>
                                    <td>@Service</td>
                                    <td>ビジネスロジックを含むサービス層</td>
                                    <td>ビジネスロジックの実装、トランザクション処理</td>
                                </tr>
                                <tr>
                                    <td>@Repository</td>
                                    <td>データアクセス層</td>
                                    <td>データベースアクセス、例外変換機能あり</td>
                                </tr>
                                <tr>
                                    <td>@Controller</td>
                                    <td>MVCのコントローラー層</td>
                                    <td>Webリクエストのハンドリング（ビュー返却）</td>
                                </tr>
                                <tr>
                                    <td>@RestController</td>
                                    <td>RESTfulのコントローラー層</td>
                                    <td>Webリクエストのハンドリング（データ直接返却）</td>
                                </tr>
                                <tr>
                                    <td>@Configuration</td>
                                    <td>設定クラス</td>
                                    <td>Bean定義、設定の集約</td>
                                </tr>
                            </table>
                        </div>

                        <div class="note">
                            <h5>@Componentと特殊化アノテーション</h5>
                            <p>@Service、@Repository、@Controller、@RestControllerは全て内部的に@Componentを含んでいます。これらは「@Componentの特殊化（Specialization）」と呼ばれます。機能的には同じですが、クラスの役割を明確にし、将来的な機能拡張の余地を残すために使い分けることが推奨されています。</p>
                        </div>

                        <h4>その他の主要なアノテーション</h4>
                        <p>Spring Bootでよく使用される他のアノテーションを紹介します。</p>

                        <div class="table-responsive">
                            <table class="table-example">
                                <tr>
                                    <th>アノテーション</th>
                                    <th>説明</th>
                                    <th>例</th>
                                </tr>
                                <tr>
                                    <td>@Autowired</td>
                                    <td>依存性を自動注入する</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@Autowired<br>private UserService service;</code></td>
                                </tr>
                                <tr>
                                    <td>@Qualifier</td>
                                    <td>複数の候補がある場合に注入するBeanを指定</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@Autowired<br>@Qualifier("userServiceImpl")<br>private UserService service;</code></td>
                                </tr>
                                <tr>
                                    <td>@Value</td>
                                    <td>プロパティ値を注入</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@Value("${app.name}")<br>private String appName;</code></td>
                                </tr>
                                <tr>
                                    <td>@ConfigurationProperties</td>
                                    <td>設定プロパティをまとめて注入</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@ConfigurationProperties(prefix = "mail")<br>public class MailProperties { ... }</code></td>
                                </tr>
                                <tr>
                                    <td>@Bean</td>
                                    <td>設定クラス内でBeanを定義</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@Bean<br>public DataSource dataSource() { ... }</code></td>
                                </tr>
                            </table>
                        </div>

                        <h4>Webアプリケーション用アノテーション</h4>
                        <p>Spring MVCやRESTful APIを実装する際によく使用されるアノテーションです。</p>

                        <div class="table-responsive">
                            <table class="table-example">
                                <tr>
                                    <th>アノテーション</th>
                                    <th>説明</th>
                                    <th>例</th>
                                </tr>
                                <tr>
                                    <td>@RequestMapping</td>
                                    <td>URLマッピングを定義</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@RequestMapping("/users")</code></td>
                                </tr>
                                <tr>
                                    <td>@GetMapping</td>
                                    <td>GETリクエストのマッピング</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@GetMapping("/{id}")</code></td>
                                </tr>
                                <tr>
                                    <td>@PostMapping</td>
                                    <td>POSTリクエストのマッピング</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@PostMapping</code></td>
                                </tr>
                                <tr>
                                    <td>@PutMapping</td>
                                    <td>PUTリクエストのマッピング</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@PutMapping("/{id}")</code></td>
                                </tr>
                                <tr>
                                    <td>@DeleteMapping</td>
                                    <td>DELETEリクエストのマッピング</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@DeleteMapping("/{id}")</code></td>
                                </tr>
                                <tr>
                                    <td>@PathVariable</td>
                                    <td>URLのパス変数を取得</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@PathVariable Long id</code></td>
                                </tr>
                                <tr>
                                    <td>@RequestParam</td>
                                    <td>リクエストパラメータを取得</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@RequestParam String name</code></td>
                                </tr>
                                <tr>
                                    <td>@RequestBody</td>
                                    <td>リクエストボディをオブジェクトにマッピング</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@RequestBody User user</code></td>
                                </tr>
                                <tr>
                                    <td>@ResponseBody</td>
                                    <td>戻り値をレスポンスボディとして返却</td>
                                    <td><code style="display: inline; padding: 0.2rem;">@ResponseBody User getUser()</code></td>
                                </tr>
                            </table>
                        </div>

                        <h4>アノテーションの使用例</h4>
                        <p>実際のコードでアノテーションを使用する例を見てみましょう：</p>

                        <code>// 設定クラスの例
@Configuration
@EnableTransactionManagement
public class AppConfig {
    
    @Bean
    public DataSource dataSource(
            @Value("${spring.datasource.url}") String url,
            @Value("${spring.datasource.username}") String username,
            @Value("${spring.datasource.password}") String password) {
        
        DriverManagerDataSource dataSource = new DriverManagerDataSource();
        dataSource.setUrl(url);
        dataSource.setUsername(username);
        dataSource.setPassword(password);
        return dataSource;
    }
    
    @Bean
    public PlatformTransactionManager transactionManager(DataSource dataSource) {
        return new DataSourceTransactionManager(dataSource);
    }
}

// サービスクラスの例
@Service
@Transactional
public class ProductService {
    
    private final ProductRepository productRepository;
    
    public ProductService(ProductRepository productRepository) {
        this.productRepository = productRepository;
    }
    
    public List<Product> findAllProducts() {
        return productRepository.findAll();
    }
    
    public Product findProductById(Long id) {
        return productRepository.findById(id)
                .orElseThrow(() -> new ResourceNotFoundException("Product not found"));
    }
    
    public Product saveProduct(Product product) {
        return productRepository.save(product);
    }
}

// RESTコントローラの例
@RestController
@RequestMapping("/api/products")
public class ProductController {
    
    private final ProductService productService;
    
    public ProductController(ProductService productService) {
        this.productService = productService;
    }
    
    @GetMapping
    public List<Product> getAllProducts() {
        return productService.findAllProducts();
    }
    
    @GetMapping("/{id}")
    public Product getProductById(@PathVariable Long id) {
        return productService.findProductById(id);
    }
    
    @PostMapping
    @ResponseStatus(HttpStatus.CREATED)
    public Product createProduct(@RequestBody @Valid ProductDTO productDTO) {
        Product product = convertToEntity(productDTO);
        return productService.saveProduct(product);
    }
    
    @PutMapping("/{id}")
    public Product updateProduct(@PathVariable Long id, @RequestBody @Valid ProductDTO productDTO) {
        Product product = convertToEntity(productDTO);
        product.setId(id);
        return productService.saveProduct(product);
    }
    
    @DeleteMapping("/{id}")
    @ResponseStatus(HttpStatus.NO_CONTENT)
    public void deleteProduct(@PathVariable Long id) {
        productService.deleteProduct(id);
    }
    
    private Product convertToEntity(ProductDTO dto) {
        // DTOからエンティティへの変換ロジック
        // ...
    }
}</code>

                        <div class="exercise">
                            <h5>演習 3.3: アノテーションの活用</h5>
                            <p>以下の要件に従ってコードを実装してみましょう：</p>
                            <ol>
                                <li>ProductControllerクラスに、名前で商品を検索するAPIエンドポイントを追加（@GetMapping、@RequestParamを使用）</li>
                                <li>価格範囲で商品を検索するAPIエンドポイントを追加（最小価格と最大価格をパラメータとして受け取る）</li>
                                <li>@ConfigurationPropertiesを使って、アプリケーション固有の設定（例：商品画像のアップロードパス、ページサイズのデフォルト値など）を管理するクラスを作成</li>
                            </ol>
                        </div>
                    </section>

                    <section id="application-yml">
                        <h3 class="section-title">3.4 application.ymlの使い方</h3>
                        <p>Spring Bootアプリケーションでは、<span class="inline-code">application.properties</span>または<span class="inline-code">application.yml</span>ファイルを使用して設定を管理します。YAMLフォーマット（.yml）は階層構造を持ち、可読性が高いため、多くのプロジェクトで採用されています。</p>

                        <h4>application.ymlの基本構造</h4>
                        <p>YAMLフォーマットは階層構造を使って設定をグループ化し、インデントを使って関係性を表現します。</p>

                        <code># application.yml の例
server:
  port: 8080
  servlet:
    context-path: /api

spring:
  application:
    name: my-application
  datasource:
    url: jdbc:postgresql://localhost:5432/mydb
    username: postgres
    password: password
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true

logging:
  level:
    root: INFO
    org.springframework: INFO
    com.example.myapp: DEBUG

# カスタム設定
app:
  security:
    jwt-secret: mySecretKey
    jwt-expiration-ms: 86400000
  cors:
    allowed-origins:
      - http://localhost:3000
      - https://example.com
  upload:
    path: /uploads
    max-file-size: 10MB</code>

                        <h4>プロファイル設定</h4>
                        <p>Spring Bootでは、環境ごとに異なる設定を適用するために「プロファイル」機能が提供されています。例えば、開発環境、テスト環境、本番環境で異なる設定を使用できます。</p>

                        <code># プロファイル設定の例
spring:
  profiles:
    active: dev

---
spring:
  config:
    activate:
      on-profile: dev
  datasource:
    url: jdbc:postgresql://localhost:5432/mydb_dev
    username: dev_user
    password: dev_password
  jpa:
    show-sql: true

logging:
  level:
    root: INFO
    com.example.myapp: DEBUG

---
spring:
  config:
    activate:
      on-profile: test
  datasource:
    url: jdbc:postgresql://localhost:5432/mydb_test
    username: test_user
    password: test_password
  jpa:
    hibernate:
      ddl-auto: create-drop

---
spring:
  config:
    activate:
      on-profile: prod
  datasource:
    url: jdbc:postgresql://prod-server:5432/mydb_prod
    username: prod_user
    password: prod_password
  jpa:
    show-sql: false
    hibernate:
      ddl-auto: none

logging:
  level:
    root: WARN
    com.example.myapp: INFO</code>

                        <h4>設定値の注入方法</h4>
                        <p>application.ymlで定義した設定値は、以下の方法でJavaコードに注入できます：</p>

                        <code>// @Valueアノテーションを使用した個別の設定値の注入
@Component
public class SecurityComponent {
    
    @Value("${app.security.jwt-secret}")
    private String jwtSecret;
    
    @Value("${app.security.jwt-expiration-ms}")
    private long jwtExpirationMs;
    
    // メソッドやコンストラクタ（省略）
}

// @ConfigurationPropertiesを使用したグループ設定の注入
@Component
@ConfigurationProperties(prefix = "app.upload")
public class UploadProperties {
    
    private String path;
    private String maxFileSize;
    
    // ゲッターとセッター
    public String getPath() {
        return path;
    }
    
    public void setPath(String path) {
        this.path = path;
    }
    
    public String getMaxFileSize() {
        return maxFileSize;
    }
    
    public void setMaxFileSize(String maxFileSize) {
        this.maxFileSize = maxFileSize;
    }
}

// コンストラクタで使用する例
@Service
public class FileUploadService {
    
    private final UploadProperties uploadProperties;
    
    public FileUploadService(UploadProperties uploadProperties) {
        this.uploadProperties = uploadProperties;
    }
    
    public String getUploadPath() {
        return uploadProperties.getPath();
    }
    
    public String getMaxFileSize() {
        return uploadProperties.getMaxFileSize();
    }
}</code>

                        <div class="note">
                            <h5>application.ymlとapplication.propertiesの違い</h5>
                            <p>両者の違いは主に構文と表現力です。以下は同じ設定をYML形式とProperties形式で表現した例です：</p>
                            
                            <p><strong>YML形式：</strong></p>
                            <code>spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/mydb
    username: postgres
    password: password</code>
                            
                            <p><strong>Properties形式：</strong></p>
                            <code>spring.datasource.url=jdbc:postgresql://localhost:5432/mydb
spring.datasource.username=postgres
spring.datasource.password=password</code>
                            
                            <p>YML形式は階層構造が明確で、特に複雑な設定を扱う場合に可読性が高いというメリットがあります。</p>
                        </div>

                        <h4>Spring Data JDBCの設定例</h4>
                        <p>今回のカリキュラムでは、Spring Data JDBCとPostgreSQLを使用しています。以下は、その設定例です：</p>

                        <code># Spring Data JDBCとPostgreSQLの設定例
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/mydb
    username: postgres
    password: password
    driver-class-name: org.postgresql.Driver
  data:
    jdbc:
      repositories:
        enabled: true
  jdbc:
    template:
      fetch-size: 100
      max-rows: 500

# PostgreSQL固有の設定
postgresql:
  connection-timeout: 30000
  idle-timeout: 600000
  max-lifetime: 1800000
  maximum-pool-size: 10</code>

                        <div class="exercise">
                            <h5>演習 3.4: application.ymlの活用</h5>
                            <p>以下の要件に従って、application.ymlファイルを作成してみましょう：</p>
                            <ol>
                                <li>基本的なSpring Boot設定（サーバーポート、アプリケーション名など）</li>
                                <li>データベース接続設定（PostgreSQL用）</li>
                                <li>ロギング設定（ルートレベルはINFO、アプリケーションパッケージはDEBUG）</li>
                                <li>カスタム設定セクションを追加（app.feature-flags, app.email-settingsなど）</li>
                                <li>開発環境と本番環境のプロファイルを定義</li>
                            </ol>
                            <p>また、このYML設定を利用するための@ConfigurationPropertiesクラスも実装してみましょう。</p>
                        </div>
                    </section>

                    <section id="chapter3-quiz">
                        <h3 class="section-title">3.5 理解度確認テスト</h3>
                        <div class="quiz-container">
                            <h4>第3章の理解度チェック</h4>
                            <p>以下の問題に答えて、第3章の内容の理解度を確認しましょう。</p>
                            
                            <div class="quiz-question">
                                <p><strong>問題1:</strong> Spring Bootの自動構成（Auto-configuration）を有効にするアノテーションはどれですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1a" value="a">
                                    <label class="form-check-label" for="q1a">
                                        @AutoConfiguration
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1b" value="b">
                                    <label class="form-check-label" for="q1b">
                                        @EnableAutoConfiguration
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1c" value="c">
                                        <label class="form-check-label" for="q1c">
                                        @AutoConfigure
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q1" id="q1d" value="d">
                                        <label class="form-check-label" for="q1d">
                                        @Configuration
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題2:</strong> Spring Bootにおいて最も推奨される依存性注入（DI）の方法はどれですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2a" value="a">
                                    <label class="form-check-label" for="q2a">
                                        フィールド注入
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2b" value="b">
                                    <label class="form-check-label" for="q2b">
                                        セッター注入
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2c" value="c">
                                        <label class="form-check-label" for="q2c">
                                        コンストラクタ注入
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q2" id="q2d" value="d">
                                        <label class="form-check-label" for="q2d">
                                        メソッド注入
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題3:</strong> データアクセス層のコンポーネントを定義するためのアノテーションはどれですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3a" value="a">
                                    <label class="form-check-label" for="q3a">
                                        @Service
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3b" value="b">
                                    <label class="form-check-label" for="q3b">
                                        @Component
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3c" value="c">
                                        <label class="form-check-label" for="q3c">
                                        @Controller
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q3" id="q3d" value="d">
                                        <label class="form-check-label" for="q3d">
                                        @Repository
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題4:</strong> リクエストボディをJavaオブジェクトに変換するアノテーションはどれですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4a" value="a">
                                    <label class="form-check-label" for="q4a">
                                        @RequestBody
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4b" value="b">
                                    <label class="form-check-label" for="q4b">
                                        @ResponseBody
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4c" value="c">
                                        <label class="form-check-label" for="q4c">
                                        @RequestParam
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q4" id="q4d" value="d">
                                        <label class="form-check-label" for="q4d">
                                        @PathVariable
                                    </label>
                                </div>
                            </div>
                            
                            <div class="quiz-question">
                                <p><strong>問題5:</strong> application.ymlで環境ごとに異なる設定を適用するための機能は何ですか？</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5a" value="a">
                                    <label class="form-check-label" for="q5a">
                                        セクション
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5b" value="b">
                                    <label class="form-check-label" for="q5b">
                                        プロファイル
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5c" value="c">
                                        <label class="form-check-label" for="q5c">
                                        バリアント
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="q5" id="q5d" value="d">
                                        <label class="form-check-label" for="q5d">
                                        コンフィグマップ
                                    </label>
                                </div>
                            </div>
                            
                            <button class="btn btn-success mt-3" id="checkAnswers">回答を確認</button>
                            <div id="quizResults" class="mt-3 d-none">
                                <div class="alert alert-success">
                                    <h5>正解:</h5>
                                    <ol>
                                        <li>b（@EnableAutoConfiguration）</li>
                                        <li>c（コンストラクタ注入）</li>
                                        <li>d（@Repository）</li>
                                        <li>a（@RequestBody）</li>
                                        <li>b（プロファイル）</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section id="next-steps">
                        <h3 class="section-title">次のステップ</h3>
                        <p>この章では、Spring Bootの基本構成とDI（依存性注入）について学びました。特に、自動構成の仕組み、DIの実装方法、アノテーションの活用、application.ymlの設定方法を理解することができました。</p>
                        <p>次の章では、Spring Data JDBCを使用したデータベース連携について学習します。エンティティの定義、リポジトリの実装、データの永続化、トランザクション管理などの重要な概念を扱います。</p>
                        <div class="note">
                            <h5>推奨される追加学習</h5>
                            <ul>
                                <li><strong>Spring Boot公式ドキュメント</strong>：<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/" target="_blank">Spring Boot Reference Documentation</a></li>
                                <li><strong>Spring Data JDBC</strong>：<a href="https://docs.spring.io/spring-data/jdbc/docs/current/reference/html/" target="_blank">Spring Data JDBC Reference Documentation</a></li>
                                <li><strong>依存性注入のベストプラクティス</strong>：<a href="https://spring.io/blog/2007/07/11/setter-injection-versus-constructor-injection-and-the-use-of-required/" target="_blank">Setter Injection versus Constructor Injection</a></li>
                                <li><strong>Spring Bootのアノテーション</strong>：<a href="https://www.baeldung.com/spring-boot-annotations" target="_blank">Spring Boot Annotations</a></li>
                            </ul>
                        </div>
                    </section>
                </section>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center py-4">
        <div class="container">
            <p class="mb-0">Copyright © 2025 F-Circle All rights reserved.</p>
        </div>
    </footer>

    <!-- Bootstrap JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 理解度テストの回答確認ボタンの処理
        document.getElementById('checkAnswers').addEventListener('click', function() {
            document.getElementById('quizResults').classList.remove('d-none');
        });
    </script>
</body>
</html>