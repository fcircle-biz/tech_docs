<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EARS学習教材 第5章 - Unwanted Behavior要求パターン</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <!-- カスタムCSS -->
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        .navbar {
            background-color: #2e7d32;
        }
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        .chapter-title {
            color: #2e7d32;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #2e7d32;
            padding-bottom: 0.5rem;
        }
        .section-title {
            color: #4caf50;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        .quiz-container {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #2e7d32;
        }
        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }
        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }
        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }
        .code-block {
            background-color: #1e1e1e;
            color: white;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        .nav-link.active {
            background-color: #2e7d32 !important;
            color: white !important;
        }
        .pattern-example {
            background-color: #e3f2fd;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #1976d2;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand"><strong>EARS学習教材</strong></a>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item"><a class="nav-link" href="ears-learning-material-1.html">第1章: EARSの概要と背景</a></li>
                        <li class="nav-item"><a class="nav-link" href="ears-learning-material-2.html">第2章: 要求記述の基本原則</a></li>
                        <li class="nav-item"><a class="nav-link" href="ears-learning-material-3.html">第3章: Ubiquitous要求パターン</a></li>
                        <li class="nav-item"><a class="nav-link" href="ears-learning-material-4.html">第4章: Event-driven要求パターン</a></li>
                        <li class="nav-item"><a class="nav-link active" href="ears-learning-material-5.html">第5章: Unwanted Behavior要求パターン</a></li>
                        <li class="nav-item"><a class="nav-link" href="ears-learning-material-6.html">第6章: State-driven要求パターン</a></li>
                        <li class="nav-item"><a class="nav-link" href="ears-learning-material-7.html">第7章: Optional Feature要求パターン</a></li>
                        <li class="nav-item"><a class="nav-link" href="ears-learning-material-8.html">第8章: 複合パターンと実践演習</a></li>
                    </ul>
                </div>
            </nav>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第5章: Unwanted Behavior要求パターン</h1>
                </div>

                <div id="chapter5">
                    <h2 class="chapter-title">望ましくない動作への対処要求記述</h2>
                    
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>Unwanted Behavior（望ましくない動作）要求パターンの基本概念</li>
                            <li>「If [unwanted condition], then the [system] shall [requirement]」構文の使用方法</li>
                            <li>例外処理とエラーハンドリング要求の記述</li>
                            <li>システムの異常状態への対処方法定義</li>
                            <li>セキュリティ侵害やシステム障害への対応要求</li>
                            <li>フェイルセーフ設計のための要求記述</li>
                        </ul>
                    </div>

                    <h3 class="section-title">5.1 Unwanted Behavior要求パターンの基本概念</h3>
                    
                    <p>
                        <strong>Unwanted Behavior要求パターン</strong>は、システムにとって<strong>望ましくない状況</strong>が発生した時の
                        適切な対処方法を記述するパターンです。システムの信頼性・安全性・セキュリティを確保するために不可欠な要求パターンです。
                    </p>

                    <div class="mermaid">
                        graph TD
                            A["Unwanted Behavior<br/>パターン"] --> B["例外処理<br/>Exception Handling"]
                            A --> C["エラー対応<br/>Error Response"]
                            A --> D["セキュリティ対策<br/>Security Measures"]
                            A --> E["障害対応<br/>Fault Tolerance"]
                            
                            B --> B1["入力値エラー<br/>データ不正"]
                            C --> C1["システムエラー<br/>通信障害"]
                            D --> D1["不正アクセス<br/>攻撃検知"]
                            E --> E1["ハードウェア故障<br/>リソース不足"]
                            
                            style A fill:#ffebee,stroke:#d32f2f,stroke-width:3px
                    </div>

                    <div class="pattern-example">
                        <h6>Unwanted Behaviorパターンの基本構文</h6>
                        <pre class="code-block"><code class="language-plaintext">If [unwanted condition/situation], then the [system name] shall [system response]

【構成要素】
- If : 条件を示すキーワード（望ましくない状況）
- [unwanted condition] : 発生してほしくない条件・状況
- then : 結果を示すキーワード
- the [system name] : 対象システム名
- shall : 義務を示す助動詞
- [system response] : システムの対処・応答</code></pre>
                    </div>

                    <h3 class="section-title">5.2 望ましくない状況の分類と対処パターン</h3>

                    <p>
                        Unwanted Behaviorパターンで扱う「望ましくない状況」は、システムの信頼性に影響する様々な問題を包含します：
                    </p>

                    <div class="highlight">
                        <h6>1. 入力・データの異常</h6>
                        <p>不正な入力値や破損データに対する対処：</p>
                        <pre class="code-block"><code class="language-plaintext">If ユーザーが無効な形式のメールアドレスを入力した場合、
then the 入力検証システム shall エラーメッセージを表示し再入力を求める

If データファイルが破損している場合、
then the データ処理システム shall エラーログを記録し管理者に通知する</code></pre>
                    </div>

                    <div class="highlight">
                        <h6>2. システムリソースの問題</h6>
                        <p>リソース不足や性能限界への対処：</p>
                        <pre class="code-block"><code class="language-plaintext">If メモリ使用量が90%を超えた場合、
then the アプリケーション shall 不要なキャッシュを解放し警告を発する

If データベース接続プールが枯渇した場合、
then the 接続管理システム shall 新規要求を待機キューに入れる</code></pre>
                    </div>

                    <div class="highlight">
                        <h6>3. セキュリティ脅威</h6>
                        <p>不正アクセスや攻撃への対処：</p>
                        <pre class="code-block"><code class="language-plaintext">If 同一IPアドレスから5分間に10回以上のログイン失敗が発生した場合、
then the セキュリティシステム shall 該当IPアドレスを30分間ブロックする

If SQLインジェクション攻撃パターンを検知した場合、
then the Webアプリケーション shall 要求を拒否しセキュリティログに記録する</code></pre>
                    </div>

                    <h3 class="section-title">5.3 Event-drivenパターンとの違いと使い分け</h3>

                    <p>
                        Unwanted Behaviorパターンは、Event-drivenパターンと似ていますが、重要な違いがあります：
                    </p>

                    <div class="warning">
                        <h6>パターンの使い分け基準</h6>
                        <table class="table table-striped">
                            <thead>
                                <tr><th>観点</th><th>Event-driven (When)</th><th>Unwanted Behavior (If-then)</th></tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>対象状況</td>
                                    <td>通常の・期待される出来事</td>
                                    <td>異常な・望ましくない状況</td>
                                </tr>
                                <tr>
                                    <td>発生頻度</td>
                                    <td>定期的・頻繁に発生</td>
                                    <td>稀・例外的に発生</td>
                                </tr>
                                <tr>
                                    <td>対処の性質</td>
                                    <td>通常業務の一部</td>
                                    <td>問題解決・被害軽減</td>
                                </tr>
                                <tr>
                                    <td>設計の観点</td>
                                    <td>機能的要求</td>
                                    <td>非機能的要求（信頼性・安全性）</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="pattern-example">
                        <h6>同じ状況での使い分け例</h6>
                        <pre class="code-block"><code class="language-plaintext">【通常のログイン処理：Event-driven】
When ユーザーが正しいID・パスワードを入力した時、
the 認証システム shall ユーザーをメインページにリダイレクトする

【不正ログイン対処：Unwanted Behavior】  
If ユーザーが3回連続でパスワードを間違えた場合、
then the 認証システム shall アカウントを15分間ロックアウトする</code></pre>
                    </div>

                    <h3 class="section-title">5.4 フェイルセーフ設計のためのUnwanted Behavior要求</h3>

                    <p>
                        システムの安全性を確保するためには、<strong>フェイルセーフ（fail-safe）</strong>の考え方に基づいた
                        Unwanted Behavior要求を設計することが重要です。
                    </p>

                    <div class="mermaid">
                        graph TD
                            A["フェイルセーフ設計原則"] --> B["安全側への誤作動<br/>Fail to Safe"]
                            A --> C["グレースフル・デグラデーション<br/>Graceful Degradation"]
                            A --> D["早期障害検出<br/>Early Detection"]
                            A --> E["自動復旧<br/>Auto Recovery"]
                            
                            B --> B1["危険回避を優先"]
                            C --> C1["機能制限で継続"]
                            D --> D1["問題の早期発見"]
                            E --> E1["自動的な復旧処理"]
                    </div>

                    <div class="pattern-example">
                        <h6>フェイルセーフ設計のUnwanted Behavior要求例</h6>
                        
                        <p><strong>安全側への誤作動：</strong></p>
                        <pre class="code-block"><code class="language-plaintext">If 温度センサーが故障または異常値を検出した場合、
then the 制御システム shall 機器を安全停止モードに移行する</code></pre>

                        <p><strong>グレースフル・デグラデーション：</strong></p>
                        <pre class="code-block"><code class="language-plaintext">If メインデータベースが応答しない場合、
then the アプリケーション shall 読み取り専用モードで継続動作する</code></pre>

                        <p><strong>自動復旧：</strong></p>
                        <pre class="code-block"><code class="language-plaintext">If ネットワーク接続が5秒間途絶えた場合、
then the 通信システム shall 自動的に代替経路での接続を試行する</code></pre>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 5-1: エラー処理要求の作成</h5>
                        <p>オンライン銀行システムについて、Unwanted Behavior要求を作成してください。</p>
                        
                        <h6>システム概要</h6>
                        <p>インターネットバンキングシステムで、以下の主要機能があります：</p>
                        <ul>
                            <li>残高照会・取引履歴表示</li>
                            <li>振込・送金処理</li>
                            <li>定期預金管理</li>
                            <li>セキュリティ認証</li>
                        </ul>
                        
                        <h6>作成課題</h6>
                        <p>以下の各シナリオについて、適切なUnwanted Behavior要求を作成してください：</p>
                        <ol>
                            <li>振込金額が口座残高を超えている場合</li>
                            <li>セッションタイムアウトが発生した場合</li>
                            <li>不正なアクセスパターンを検知した場合</li>
                            <li>システムメンテナンス中にアクセスされた場合</li>
                        </ol>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 5-2: Event-drivenとUnwanted Behaviorの使い分け</h5>
                        <p>以下のシナリオについて、Event-drivenとUnwanted Behaviorのどちらが適切かを判断し、要求を作成してください。</p>
                        
                        <h6>判断課題</h6>
                        <ol>
                            <li>ユーザーがファイルアップロードボタンをクリックした</li>
                            <li>アップロードファイルのサイズが制限を超えている</li>
                            <li>データベースバックアップが正常完了した</li>
                            <li>バックアップ処理中にディスク容量が不足した</li>
                            <li>ユーザーが検索キーワードを入力した</li>
                            <li>検索結果が0件だった</li>
                        </ol>
                    </div>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>
                                <strong>Unwanted Behaviorパターンの基本構文で正しいのはどれですか？</strong>
                                <ol type="a">
                                    <li>When [condition], the [system] shall [response]</li>
                                    <li>If [condition], then the [system] shall [response]</li>
                                    <li>While [condition], the [system] shall [response]</li>
                                    <li>Where [condition], the [system] shall [response]</li>
                                </ol>
                            </li>
                            
                            <li>
                                <strong>Unwanted Behaviorパターンが適用される状況として最も適切なのはどれですか？</strong>
                                <ol type="a">
                                    <li>ユーザーがボタンをクリックした時</li>
                                    <li>システムが正常に起動した時</li>
                                    <li>データベースから不正なデータが検出された時</li>
                                    <li>定期的なバックアップが実行された時</li>
                                </ol>
                            </li>
                            
                            <li>
                                <strong>フェイルセーフ設計の原則として適切でないのはどれですか？</strong>
                                <ol type="a">
                                    <li>危険回避を優先する</li>
                                    <li>機能制限でも継続動作させる</li>
                                    <li>問題を早期に検出する</li>
                                    <li>性能を最優先で維持する</li>
                                </ol>
                            </li>
                        </ol>
                    </div>

                    <h3 class="section-title">5.5 章のまとめ</h3>
                    
                    <div class="highlight">
                        <h6>重要なポイント</h6>
                        <ul>
                            <li><strong>基本構文</strong>：「If [unwanted condition], then the [system] shall [response]」</li>
                            <li><strong>対象状況</strong>：例外・エラー・セキュリティ脅威・システム障害への対処</li>
                            <li><strong>Event-drivenとの違い</strong>：望ましくない状況への対処 vs 通常業務の処理</li>
                            <li><strong>フェイルセーフ設計</strong>：安全性を最優先とした要求記述</li>
                            <li><strong>信頼性確保</strong>：システムの堅牢性を高める要求設計</li>
                        </ul>
                    </div>

                    <p>
                        Unwanted Behaviorパターンは、システムの信頼性と安全性を確保するために不可欠です。
                        次の章では、システムの特定の状態に依存する要求を記述する「State-driven要求パターン」について学習します。
                    </p>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="ears-learning-material-4.html" class="btn btn-secondary">← 前の章</a>
                        <a href="ears-learning-material-6.html" class="btn btn-primary">次の章 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>