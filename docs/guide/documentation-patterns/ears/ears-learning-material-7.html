<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EARS学習教材 第7章 - Optional Feature要求パターン</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; padding-top: 56px; }
        .navbar { background-color: #2e7d32; }
        .sidebar { position: sticky; top: 70px; height: calc(100vh - 70px); overflow-y: auto; }
        .chapter-title { color: #2e7d32; margin-top: 1.5rem; margin-bottom: 1rem; border-bottom: 2px solid #2e7d32; padding-bottom: 0.5rem; }
        .section-title { color: #4caf50; margin-top: 1.2rem; margin-bottom: 0.8rem; }
        .quiz-container { background-color: #e8f5e8; border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; border-left: 4px solid #2e7d32; }
        .exercise-container { background-color: #f3e5f5; border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; border-left: 4px solid #9c27b0; }
        .highlight { background-color: #ffecb3; border-radius: 8px; padding: 1rem; margin: 1rem 0; border-left: 4px solid #ffc107; }
        .code-block { background-color: #1e1e1e; color: white; border-radius: 5px; padding: 1rem; margin: 1rem 0; }
        .nav-link.active { background-color: #2e7d32 !important; color: white !important; }
        .pattern-example { background-color: #e3f2fd; border-radius: 8px; padding: 1rem; margin: 1rem 0; border-left: 4px solid #1976d2; }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand"><strong>EARS学習教材</strong></a>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item"><a class="nav-link" href="ears-learning-material-1.html">第1章: EARSの概要と背景</a></li>
                        <li class="nav-item"><a class="nav-link" href="ears-learning-material-2.html">第2章: 要求記述の基本原則</a></li>
                        <li class="nav-item"><a class="nav-link" href="ears-learning-material-3.html">第3章: Ubiquitous要求パターン</a></li>
                        <li class="nav-item"><a class="nav-link" href="ears-learning-material-4.html">第4章: Event-driven要求パターン</a></li>
                        <li class="nav-item"><a class="nav-link" href="ears-learning-material-5.html">第5章: Unwanted Behavior要求パターン</a></li>
                        <li class="nav-item"><a class="nav-link" href="ears-learning-material-6.html">第6章: State-driven要求パターン</a></li>
                        <li class="nav-item"><a class="nav-link active" href="ears-learning-material-7.html">第7章: Optional Feature要求パターン</a></li>
                        <li class="nav-item"><a class="nav-link" href="ears-learning-material-8.html">第8章: 複合パターンと実践演習</a></li>
                    </ul>
                </div>
            </nav>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第7章: Optional Feature要求パターン</h1>
                </div>

                <div id="chapter7">
                    <h2 class="chapter-title">条件付き機能要求の記述方法</h2>
                    
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>Optional Feature（オプション機能）要求パターンの基本概念</li>
                            <li>「Where [feature is included], the [system] shall [requirement]」構文の使用方法</li>
                            <li>条件付き機能と設定依存機能の記述</li>
                            <li>モジュール化設計における要求記述</li>
                            <li>ライセンス・エディション別機能の要求管理</li>
                            <li>設定可能システムでの実用的適用例</li>
                        </ul>
                    </div>

                    <h3 class="section-title">7.1 Optional Feature要求パターンの基本概念</h3>
                    
                    <p>
                        <strong>Optional Feature要求パターン</strong>は、特定の機能やモジュールが含まれる・有効化される場合にのみ適用される要求を記述するパターンです。
                        現代のソフトウェアシステムは、柔軟性と拡張性のために多くのオプション機能を提供しており、これらの条件付き機能を明確に定義することが重要です。
                    </p>

                    <div class="mermaid">
                        graph TD
                            A["ベースシステム"] --> B["基本機能群"]
                            A --> C["Optional Feature A"]
                            A --> D["Optional Feature B"]
                            A --> E["Optional Feature C"]
                            
                            C --> C1["機能A有効時の要求"]
                            D --> D1["機能B有効時の要求"]
                            E --> E1["機能C有効時の要求"]
                            
                            style C fill:#e8f5e8,stroke:#4caf50
                            style D fill:#e8f5e8,stroke:#4caf50
                            style E fill:#e8f5e8,stroke:#4caf50
                    </div>

                    <div class="pattern-example">
                        <h6>Optional Featureパターンの基本構文</h6>
                        <pre class="code-block"><code class="language-plaintext">Where [feature/option is included/enabled], the [system name] shall [system response]

【構成要素】
- Where : 条件を示すキーワード
- [feature/option is included/enabled] : 機能・オプションの包含・有効化条件
- the [system name] : 対象システム名
- shall : 義務を示す助動詞
- [system response] : その機能が有効時の要求される動作</code></pre>
                    </div>

                    <h3 class="section-title">7.2 Optional Feature適用場面の分類</h3>

                    <p>Optional Featureパターンは、様々なシステム設計シナリオで活用されます：</p>

                    <div class="highlight">
                        <h6>1. ライセンス・エディション別機能</h6>
                        <p>商用ソフトウェアの段階的機能提供：</p>
                        <pre class="code-block"><code class="language-plaintext">Where プロフェッショナルエディションが選択されている場合、
the レポートシステム shall 高度な分析レポート機能を提供する

Where エンタープライズライセンスが有効な場合、
the システム shall LDAP連携による認証機能を提供する</code></pre>
                    </div>

                    <div class="highlight">
                        <h6>2. 設定・構成依存機能</h6>
                        <p>システム設定による機能の有効・無効：</p>
                        <pre class="code-block"><code class="language-plaintext">Where デバッグモードが有効化されている場合、
the アプリケーション shall 詳細なログ出力機能を実行する

Where SSL暗号化設定が有効な場合、
the Webサーバー shall 全通信をHTTPS経由で実行する</code></pre>
                    </div>

                    <div class="highlight">
                        <h6>3. プラグイン・アドオン機能</h6>
                        <p>拡張モジュールによる追加機能：</p>
                        <pre class="code-block"><code class="language-plaintext">Where 多言語プラグインがインストールされている場合、
the ユーザーインターフェース shall 選択された言語での表示機能を提供する

Where 決済プラグインが有効な場合、
the ECサイト shall クレジットカード決済機能を提供する</code></pre>
                    </div>

                    <h3 class="section-title">7.3 State-drivenパターンとの違いと使い分け</h3>

                    <p>
                        Optional FeatureパターンとState-drivenパターンは、どちらも条件付きの要求を記述しますが、
                        条件の性質が大きく異なります：
                    </p>

                    <div class="pattern-example">
                        <h6>使い分けの基準</h6>
                        
                        <table class="table table-striped">
                            <thead>
                                <tr><th>観点</th><th>Optional Feature (Where)</th><th>State-driven (While)</th></tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>条件の性質</td>
                                    <td>システム構成・設定の選択</td>
                                    <td>システム動作状態の変化</td>
                                </tr>
                                <tr>
                                    <td>変更頻度</td>
                                    <td>設定・導入時に決定（静的）</td>
                                    <td>運用中に頻繁に変化（動的）</td>
                                </tr>
                                <tr>
                                    <td>持続性</td>
                                    <td>長期間継続（設定変更まで）</td>
                                    <td>一時的（状態遷移まで）</td>
                                </tr>
                                <tr>
                                    <td>決定タイミング</td>
                                    <td>システム設計・設定時</td>
                                    <td>システム実行時</td>
                                </tr>
                            </tbody>
                        </table>

                        <p><strong>具体例での比較：</strong></p>
                        <pre class="code-block"><code class="language-plaintext">【Optional Feature - 静的条件】
Where 監査ログ機能が有効化されている場合、
the システム shall 全ての操作履歴を記録する

【State-driven - 動的状態】  
While システムが監査モードで動作している間、
the システム shall リアルタイム監視を実行する</code></pre>
                    </div>

                    <h3 class="section-title">7.4 複雑な条件組み合わせの記述</h3>

                    <p>
                        実際のシステムでは、複数のオプション機能の組み合わせや、条件の階層化が必要になることがあります：
                    </p>

                    <div class="highlight">
                        <h6>複合条件の記述例</h6>
                        
                        <p><strong>AND条件（複数機能の同時有効）：</strong></p>
                        <pre class="code-block"><code class="language-plaintext">Where レポート機能とデータエクスポート機能が両方有効な場合、
the システム shall 自動レポート配信機能を提供する</code></pre>

                        <p><strong>階層条件（機能の依存関係）：</strong></p>
                        <pre class="code-block"><code class="language-plaintext">Where 高度な分析機能が有効かつプレミアムライセンスが適用されている場合、
the データ分析エンジン shall 機械学習ベースの予測分析を実行する</code></pre>

                        <p><strong>バージョン・環境条件：</strong></p>
                        <pre class="code-block"><code class="language-plaintext">Where モバイルアプリ版かつ位置情報機能が許可されている場合、
the アプリケーション shall 近隣店舗情報を自動表示する</code></pre>
                    </div>

                    <h3 class="section-title">7.5 設定管理システムでの適用例</h3>

                    <p>
                        大規模なエンタープライズシステムでは、多数のオプション機能を組み合わせて使用します。
                        CRM（顧客関係管理）システムを例に見てみましょう：
                    </p>

                    <div class="mermaid">
                        graph TD
                            A["CRMベースシステム"] --> B["標準機能"]
                            A --> C["マーケティング<br/>オートメーション"]
                            A --> D["営業支援<br/>機能"]
                            A --> E["カスタマー<br/>サポート"]
                            A --> F["分析レポート<br/>機能"]
                            
                            B --> B1["顧客管理<br/>連絡先管理"]
                            C --> C1["メール配信<br/>キャンペーン管理"]
                            D --> D1["商談管理<br/>売上予測"]
                            E --> E1["チケット管理<br/>FAQ管理"]
                            F --> F1["売上分析<br/>顧客分析"]
                    </div>

                    <div class="pattern-example">
                        <h6>CRMシステムのOptional Feature要求例</h6>
                        
                        <pre class="code-block"><code class="language-plaintext">【マーケティング機能】
Where マーケティングオートメーション機能が有効な場合、
the CRMシステム shall 顧客セグメント別の自動メール配信機能を提供する

【営業支援機能】
Where 営業支援モジュールがインストールされている場合、
the システム shall 商談パイプライン管理と売上予測機能を提供する

【多言語対応】
Where 国際化パックが有効化されている場合、
the ユーザーインターフェース shall 英語・日本語・中国語での表示を提供する

【API連携】
Where 外部API連携オプションが購入されている場合、
the システム shall RESTful APIとWebhookによる他システム連携を提供する</code></pre>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 7-1: ECサイトのOptional Feature要求作成</h5>
                        <p>多機能ECサイトシステムについて、Optional Feature要求を作成してください。</p>
                        
                        <h6>システム概要</h6>
                        <p>以下のオプション機能を持つECサイト：</p>
                        <ul>
                            <li>基本EC機能（商品表示・カート・決済）</li>
                            <li>会員ランクシステム（Bronze/Silver/Gold）</li>
                            <li>レビュー・評価機能</li>
                            <li>ポイントシステム</li>
                            <li>定期購入機能</li>
                            <li>多言語対応</li>
                        </ul>
                        
                        <h6>要求作成課題</h6>
                        <p>以下の各オプション機能について、Optional Feature要求を作成してください：</p>
                        <ol>
                            <li>Gold会員向けの特別機能</li>
                            <li>ポイントシステム有効時の追加機能</li>
                            <li>レビュー機能有効時の商品表示</li>
                            <li>定期購入機能とポイント機能の組み合わせ</li>
                        </ol>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 7-2: 全EARSパターンの総合判断</h5>
                        <p>以下のシナリオについて、最適なEARSパターンを選択し、適切な要求文を作成してください。</p>
                        
                        <h6>総合判断課題</h6>
                        <ol>
                            <li>システムは常に全ての取引データを暗号化する</li>
                            <li>ユーザーがログインボタンを押した時の処理</li>
                            <li>不正なアクセスが検知された場合の対処</li>
                            <li>システムがメンテナンス中の間の表示</li>
                            <li>プレミアム機能が有効な場合の追加サービス</li>
                        </ol>
                        
                        <h6>選択基準</h6>
                        <ul>
                            <li><strong>Ubiquitous</strong>：常時・普遍的な要求</li>
                            <li><strong>Event-driven</strong>：特定イベントトリガーの要求</li>
                            <li><strong>Unwanted Behavior</strong>：異常・望ましくない状況への対処</li>
                            <li><strong>State-driven</strong>：特定状態継続中の動的要求</li>
                            <li><strong>Optional Feature</strong>：条件付き・設定依存の静的要求</li>
                        </ul>
                    </div>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>
                                <strong>Optional Featureパターンの基本構文で正しいのはどれですか？</strong>
                                <ol type="a">
                                    <li>When [feature], the [system] shall [response]</li>
                                    <li>Where [feature is included], the [system] shall [response]</li>
                                    <li>While [feature], the [system] shall [response]</li>
                                    <li>If [feature], then the [system] shall [response]</li>
                                </ol>
                            </li>
                            
                            <li>
                                <strong>Optional FeatureパターンとState-drivenパターンの主な違いは何ですか？</strong>
                                <ol type="a">
                                    <li>構文の複雑さ</li>
                                    <li>条件の静的性 vs 動的性</li>
                                    <li>重要度の高低</li>
                                    <li>記述の詳細度</li>
                                </ol>
                            </li>
                            
                            <li>
                                <strong>次のうち、Optional Feature要求として最も適切なのはどれですか？</strong>
                                <ol type="a">
                                    <li>システムが起動中の間のモニタリング</li>
                                    <li>プレミアム機能が購入されている場合の追加サービス</li>
                                    <li>エラーが発生した時の緊急停止処理</li>
                                    <li>ユーザーがボタンをクリックした時の画面遷移</li>
                                </ol>
                            </li>
                        </ol>
                    </div>

                    <h3 class="section-title">7.6 章のまとめ</h3>
                    
                    <div class="highlight">
                        <h6>重要なポイント</h6>
                        <ul>
                            <li><strong>基本構文</strong>：「Where [feature is included], the [system] shall [response]」</li>
                            <li><strong>静的条件</strong>：システム設定・構成による長期的な条件付き要求</li>
                            <li><strong>適用場面</strong>：ライセンス別機能、プラグイン機能、設定依存機能</li>
                            <li><strong>State-drivenとの区別</strong>：静的設定 vs 動的状態変化の明確な理解</li>
                            <li><strong>複合条件</strong>：複数機能の組み合わせによる条件記述</li>
                            <li><strong>モジュール設計</strong>：柔軟なシステム構成のための要求管理</li>
                        </ul>
                    </div>

                    <p>
                        Optional Featureパターンは、現代の柔軟で拡張可能なシステム設計において重要な役割を果たします。
                        次の章では、これまで学習した5つのEARSパターンを組み合わせた複合的な要求記述と、
                        実際のプロジェクトでの実践的な活用方法について学習します。
                    </p>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="ears-learning-material-6.html" class="btn btn-secondary">← 前の章</a>
                        <a href="ears-learning-material-8.html" class="btn btn-primary">次の章 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>