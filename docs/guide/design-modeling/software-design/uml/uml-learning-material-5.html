<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UML学習教材 第5章 - アクティビティ図によるワークフロー設計</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        
        .navbar {
            background-color: #2c3e50;
        }
        
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        
        .chapter-title {
            color: #2c3e50;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #2c3e50;
            padding-bottom: 0.5rem;
        }
        
        .section-title {
            color: #34495e;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        
        .quiz-container {
            background-color: #e8f4f8;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #2c3e50;
        }
        
        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }
        
        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }
        
        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }
        
        .code-block {
            background-color: #1e1e1e;
            color: white;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .nav-link.active {
            background-color: #2c3e50 !important;
            color: white !important;
        }
        
        .concept-box {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #4caf50;
        }
        
        .workflow-example {
            background-color: #f0f8ff;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #1976d2;
        }
        
        .symbol-table {
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand">
                <strong>UML学習教材</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-01.html">
                                第1章: UML入門と基本概念
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-02.html">
                                第2章: クラス図の基礎
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-03.html">
                                第3章: ユースケース図とアクター
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-04.html">
                                第4章: シーケンス図による相互作用モデリング
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="uml-learning-material-05.html">
                                第5章: アクティビティ図によるワークフロー設計
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-06.html">
                                第6章: ステートマシン図による状態遷移モデリング
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-07.html">
                                第7章: コンポーネント図とデプロイメント図
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-08.html">
                                第8章: その他の重要な図と高度な技法
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-09.html">
                                第9章: UMLツールの実践活用
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-10.html">
                                第10章: 実践的なシステム設計演習
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第5章: アクティビティ図によるワークフロー設計</h1>
                </div>

                <div id="chapter5">
                    <h2 class="chapter-title">ビジネスプロセスとアルゴリズムの可視化</h2>
                    
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>アクティビティ図の目的とワークフロー表現の重要性</li>
                            <li>アクション、制御フロー、オブジェクトフローの概念</li>
                            <li>開始・終了ノード、分岐・結合ノードの使用法</li>
                            <li>並行処理（フォーク・ジョイン）の表現方法</li>
                            <li>スイムレーンによる責任の明確化</li>
                            <li>例外処理とイベント受信の表現</li>
                            <li>ビジネスプロセスのモデリング実践手法</li>
                        </ul>
                    </div>

                    <h3 class="section-title">5.1 アクティビティ図とは何か</h3>
                    <p>アクティビティ図（Activity Diagram）は、ビジネスプロセスやシステム内のワークフロー、アルゴリズムを視覚的に表現するUMLの振る舞い図です。処理の流れと並行性を重視した表現が特徴です。</p>
                    
                    <div class="concept-box">
                        <h6>アクティビティ図が重要な理由</h6>
                        <ul>
                            <li><strong>プロセスの可視化</strong>：複雑なビジネスプロセスや処理フローを分かりやすく表現</li>
                            <li><strong>並行処理の理解</strong>：同時に実行される処理や依存関係を明確化</li>
                            <li><strong>業務改善</strong>：現状のプロセスを分析し、ボトルネックや無駄を発見</li>
                            <li><strong>システム設計</strong>：ビジネスルールをシステム仕様に落とし込み</li>
                        </ul>
                    </div>

                    <p>アクティビティ図は、まるで料理のレシピのようなものです。どの手順をいつ行い、どの作業を並行して進められるかを明確に示します。複数の料理人（アクター）が協力して一つの料理（成果物）を完成させる過程も表現できます。</p>

                    <h3 class="section-title">5.2 アクティビティ図の基本要素</h3>
                    <p>アクティビティ図は様々な記号を組み合わせてワークフローを表現します。</p>

                    <table class="table table-bordered symbol-table">
                        <thead>
                            <tr>
                                <th>記号</th>
                                <th>名称</th>
                                <th>説明</th>
                                <th>用途</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>●</td>
                                <td>初期ノード</td>
                                <td>アクティビティの開始点</td>
                                <td>プロセスの開始</td>
                            </tr>
                            <tr>
                                <td>◉</td>
                                <td>終了ノード</td>
                                <td>アクティビティの終了点</td>
                                <td>プロセスの完了</td>
                            </tr>
                            <tr>
                                <td>□</td>
                                <td>アクション</td>
                                <td>実行される処理や作業</td>
                                <td>具体的な作業内容</td>
                            </tr>
                            <tr>
                                <td>◇</td>
                                <td>分岐ノード</td>
                                <td>条件に基づく分岐</td>
                                <td>if文、switch文</td>
                            </tr>
                            <tr>
                                <td>◇</td>
                                <td>結合ノード</td>
                                <td>複数の分岐の再結合</td>
                                <td>分岐後の合流点</td>
                            </tr>
                            <tr>
                                <td>■</td>
                                <td>フォーク</td>
                                <td>並行処理の開始</td>
                                <td>並行実行の分岐</td>
                            </tr>
                            <tr>
                                <td>■</td>
                                <td>ジョイン</td>
                                <td>並行処理の同期</td>
                                <td>並行処理の合流</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="mermaid">
                        graph TD
                            A[開始] --> B[メール確認]
                            B --> C{新着あり？}
                            C -->|Yes| D[メール処理]
                            C -->|No| E[待機]
                            D --> F[返信作成]
                            F --> G[送信]
                            E --> B
                            G --> H[終了]
                    </div>

                    <h3 class="section-title">5.3 制御フローとオブジェクトフロー</h3>
                    <p>アクティビティ図では2種類のフローを表現します。</p>

                    <h4>制御フロー（Control Flow）</h4>
                    <p>アクション間の実行順序を表す流れです。実線の矢印で表現されます。</p>

                    <div class="concept-box">
                        <h6>制御フローの特徴</h6>
                        <ul>
                            <li>処理の実行順序を規定</li>
                            <li>条件や制約を付けることが可能</li>
                            <li>分岐や並行処理の制御に使用</li>
                            <li>時間的な依存関係を表現</li>
                        </ul>
                    </div>

                    <h4>オブジェクトフロー（Object Flow）</h4>
                    <p>アクション間で受け渡されるデータや成果物の流れを表します。</p>

                    <div class="mermaid">
                        graph LR
                            A[注文受付] --> B[注文データ]
                            B --> C[在庫確認]
                            C --> D[確認結果]
                            D --> E[出荷指示]
                            E --> F[出荷伝票]
                            F --> G[商品発送]
                    </div>

                    <div class="workflow-example">
                        <h6>オブジェクトフローの例</h6>
                        <ul>
                            <li><strong>文書作成プロセス</strong>：下書き → レビュー版 → 最終版</li>
                            <li><strong>製造プロセス</strong>：原材料 → 半製品 → 完成品</li>
                            <li><strong>システム処理</strong>：入力データ → 処理済みデータ → 結果</li>
                        </ul>
                    </div>

                    <h3 class="section-title">5.4 分岐と結合</h3>
                    <p>条件に基づく処理の分岐と、分岐した処理の再結合を表現します。</p>

                    <h4>分岐ノード（Decision Node）</h4>
                    <p>条件に基づいて処理の流れを分岐させます。ダイヤモンド形で表現されます。</p>

                    <div class="mermaid">
                        graph TD
                            A[ユーザー登録] --> B{年齢確認}
                            B -->|18歳以上| C[一般会員登録]
                            B -->|18歳未満| D[保護者同意確認]
                            D --> E[制限付き登録]
                            C --> F[登録完了]
                            E --> F
                    </div>

                    <div class="concept-box">
                        <h6>分岐ノード使用のポイント</h6>
                        <ul>
                            <li><strong>ガード条件</strong>：分岐の条件を明確に記述</li>
                            <li><strong>相互排他</strong>：全ての条件は相互に排他的</li>
                            <li><strong>完全性</strong>：全ての可能なケースを網羅</li>
                            <li><strong>else条件</strong>：その他の条件も考慮</li>
                        </ul>
                    </div>

                    <h4>結合ノード（Merge Node）</h4>
                    <p>分岐した処理を再び一つの流れに統合します。</p>

                    <div class="exercise-container">
                        <h5>実習 5-1: オンライン購入プロセスのモデリング</h5>
                        <p>ECサイトでの商品購入プロセスをアクティビティ図で表現してみましょう。</p>
                        
                        <h6>プロセスの流れ</h6>
                        <ol>
                            <li>商品検索・選択</li>
                            <li>カートに追加</li>
                            <li>ログイン確認（未ログインなら会員登録またはログイン）</li>
                            <li>配送先情報入力</li>
                            <li>支払い方法選択（クレジット、銀行振込、代引き）</li>
                            <li>注文確認</li>
                            <li>注文完了</li>
                        </ol>
                        
                        <h6>PlantUMLの例</h6>
                        <pre class="code-block"><code class="language-bash">@startuml
start

:商品検索・選択;
:カートに追加;

if (ログイン済み？) then (No)
    if (アカウント持ち？) then (Yes)
        :ログイン;
    else (No)
        :会員登録;
    endif
endif

:配送先情報入力;

switch (支払い方法選択)
case (クレジット)
    :クレジット決済;
case (銀行振込)
    :振込先情報表示;
case (代引き)
    :代引き手数料追加;
endswitch

:注文確認;
:注文完了;

stop
@enduml</code></pre>
                        
                        <h6>期待される結果</h6>
                        <ul>
                            <li>条件分岐が適切に表現されている</li>
                            <li>開始・終了ノードが正しく配置されている</li>
                            <li>ビジネスロジックが分かりやすく表現されている</li>
                        </ul>
                    </div>

                    <h3 class="section-title">5.5 並行処理（フォークとジョイン）</h3>
                    <p>同時に実行可能な処理を表現するための重要な概念です。</p>

                    <h4>フォーク（Fork）</h4>
                    <p>一つの制御フローを複数の並行フローに分割します。太い黒線で表現されます。</p>

                    <h4>ジョイン（Join）</h4>
                    <p>複数の並行フローを同期して一つのフローに統合します。全ての並行処理が完了するまで待機します。</p>

                    <div class="mermaid">
                        graph TD
                            A[注文受付] --> B[処理開始]
                            B --> C{並行処理開始}
                            C --> D[在庫確認]
                            C --> E[クレジット確認]
                            C --> F[配送準備]
                            D --> G{並行処理終了}
                            E --> G
                            F --> G
                            G --> H[出荷指示]
                            H --> I[完了]
                    </div>

                    <div class="workflow-example">
                        <h6>並行処理の実世界の例</h6>
                        <ul>
                            <li><strong>レストラン</strong>：料理、ドリンク準備、テーブルセッティングを並行</li>
                            <li><strong>製造業</strong>：部品A製造、部品B製造、包装材準備を並行</li>
                            <li><strong>システム</strong>：データ処理、ログ記録、メール送信を並行</li>
                        </ul>
                    </div>

                    <h3 class="section-title">5.6 スイムレーン（責任の分担）</h3>
                    <p>スイムレーンは、アクティビティの責任者や実行部署を明確に区分する仕組みです。</p>

                    <div class="concept-box">
                        <h6>スイムレーンの効果</h6>
                        <ul>
                            <li><strong>責任の明確化</strong>：誰がどの作業を担当するかが一目瞭然</li>
                            <li><strong>部門間連携</strong>：部署をまたがる業務フローの理解促進</li>
                            <li><strong>コミュニケーション</strong>：引き継ぎポイントの特定</li>
                            <li><strong>業務改善</strong>：役割分担の最適化検討</li>
                        </ul>
                    </div>

                    <div class="mermaid">
                        graph TB
                            subgraph "営業部"
                                A1[見積もり作成]
                                A2[契約締結]
                            end
                            
                            subgraph "製造部"
                                B1[生産計画]
                                B2[製品製造]
                            end
                            
                            subgraph "品質管理部"
                                C1[検査実施]
                                C2[品質認証]
                            end
                            
                            subgraph "出荷部"
                                D1[梱包作業]
                                D2[出荷処理]
                            end
                            
                            A1 --> A2
                            A2 --> B1
                            B1 --> B2
                            B2 --> C1
                            C1 --> C2
                            C2 --> D1
                            D1 --> D2
                    </div>

                    <h3 class="section-title">5.7 例外処理とイベント</h3>
                    <p>正常な処理フローに加えて、例外的な状況への対応も重要です。</p>

                    <h4>例外フロー</h4>
                    <p>エラーや例外的な状況が発生した場合の処理を表現します。</p>

                    <div class="mermaid">
                        graph TD
                            A[ファイル読み込み] --> B{読み込み成功？}
                            B -->|Success| C[データ処理]
                            B -->|Error| D[エラーログ記録]
                            D --> E[デフォルト値使用]
                            C --> F[処理完了]
                            E --> F
                            
                            style D fill:#ffebee
                            style E fill:#ffebee
                    </div>

                    <h4>イベント受信</h4>
                    <p>外部からのシグナルやイベントを受信して処理を開始する場合の表現です。</p>

                    <div class="concept-box">
                        <h6>イベント駆動の例</h6>
                        <ul>
                            <li><strong>タイマーイベント</strong>：定期的なバックアップ処理</li>
                            <li><strong>ユーザーイベント</strong>：ボタンクリック、キー入力</li>
                            <li><strong>システムイベント</strong>：ファイル変更、ネットワーク接続</li>
                            <li><strong>ビジネスイベント</strong>：注文発生、在庫不足</li>
                        </ul>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 5-2: システムバックアップ処理のモデリング</h5>
                        <p>夜間に実行される自動バックアップシステムをスイムレーンを使ってモデリングしてみましょう。</p>
                        
                        <h6>要件</h6>
                        <ul>
                            <li><strong>システム管理部</strong>：バックアップ開始、ログ監視</li>
                            <li><strong>データベース</strong>：データダンプ、整合性チェック</li>
                            <li><strong>ストレージ</strong>：ファイル圧縮、外部保存</li>
                            <li><strong>監視システム</strong>：処理状況監視、異常時アラート</li>
                        </ul>
                        
                        <h6>処理フロー</h6>
                        <ol>
                            <li>午前2時にバックアップ開始</li>
                            <li>データベースのダンプと整合性チェックを並行実行</li>
                            <li>正常終了なら圧縮・保存、異常時はアラート送信</li>
                            <li>完了ログの記録</li>
                        </ol>
                        
                        <h6>PlantUMLの例</h6>
                        <pre class="code-block"><code class="language-bash">@startuml
|システム管理部|
start
:バックアップ開始;

|データベース|
split
  :データダンプ実行;
split again
  :整合性チェック;
end split

if (処理正常？) then (Yes)
  |ストレージ|
  :ファイル圧縮;
  :外部保存;
  
  |システム管理部|
  :完了ログ記録;
  
else (No)
  |監視システム|
  :アラート送信;
  
  |システム管理部|
  :エラーログ記録;
endif

stop
@enduml</code></pre>
                        
                        <h6>期待される結果</h6>
                        <ul>
                            <li>スイムレーンで責任分担が明確に表現されている</li>
                            <li>並行処理が適切にモデリングされている</li>
                            <li>正常系と異常系の両方が考慮されている</li>
                        </ul>
                    </div>

                    <h3 class="section-title">5.8 アクティビティ図作成のベストプラクティス</h3>
                    <p>効果的なアクティビティ図を作成するための実践的なガイドラインです。</p>

                    <div class="workflow-example">
                        <h6>設計時の考慮点</h6>
                        <ul>
                            <li><strong>適切な粒度</strong>：詳細すぎず、粗すぎない適度なレベル</li>
                            <li><strong>アクション名</strong>：動詞で始まる分かりやすい名前</li>
                            <li><strong>条件の明確化</strong>：分岐条件は明確で測定可能</li>
                            <li><strong>例外処理</strong>：正常系だけでなく異常系も考慮</li>
                        </ul>
                    </div>

                    <div class="warning">
                        <h6>よくある間違いと対策</h6>
                        <ul>
                            <li><strong>間違い</strong>：全ての処理を一つの図に詰め込む<br>
                                <strong>対策</strong>：大きなプロセスは階層化して分割</li>
                            <li><strong>間違い</strong>：並行処理の同期を忘れる<br>
                                <strong>対策</strong>：フォークとジョインのペアを確認</li>
                            <li><strong>間違い</strong>：責任の所在が不明確<br>
                                <strong>対策</strong>：スイムレーンで責任者を明示</li>
                        </ul>
                    </div>

                    <h3 class="section-title">5.9 他の図との連携</h3>
                    <p>アクティビティ図は他のUML図と組み合わせることで、より包括的な設計を表現できます。</p>

                    <div class="concept-box">
                        <h6>図間の関係性</h6>
                        <ul>
                            <li><strong>ユースケース図 → アクティビティ図</strong>：ユースケースの詳細なワークフロー</li>
                            <li><strong>アクティビティ図 → シーケンス図</strong>：アクションの詳細な相互作用</li>
                            <li><strong>クラス図 ↔ アクティビティ図</strong>：オブジェクトの状態変化とプロセス</li>
                            <li><strong>ステートマシン図 ↔ アクティビティ図</strong>：状態遷移とアクティビティ</li>
                        </ul>
                    </div>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>アクティビティ図の開始ノードと終了ノードはどのような記号で表現しますか？</li>
                            <li>制御フローとオブジェクトフローの違いを説明してください。</li>
                            <li>フォークとジョインの目的と違いは何ですか？</li>
                            <li>分岐ノードで条件を記述する際の注意点を3つ答えてください。</li>
                            <li>スイムレーンを使用する理由と効果を説明してください。</li>
                            <li>並行処理において、ジョインがすべての流れを待つ理由は何ですか？</li>
                            <li>アクティビティ図でイベント受信はどのように表現しますか？</li>
                        </ol>
                        
                        <h6>応用問題</h6>
                        <p>大学の履修登録システムを想定し、以下を含むアクティビティ図を作成してください：</p>
                        <ul>
                            <li>学生、教務課、システム管理者のスイムレーン</li>
                            <li>履修条件チェック（前提科目、単位上限）</li>
                            <li>抽選科目の場合の並行処理（抽選実施、結果通知）</li>
                            <li>エラー処理（満員、履修条件不足）</li>
                        </ul>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="uml-learning-material-04.html" class="btn btn-secondary">← 前の章</a>
                        <a href="uml-learning-material-06.html" class="btn btn-primary">次の章 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- フッター -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
    
    <!-- Mermaid.js 初期化 -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>