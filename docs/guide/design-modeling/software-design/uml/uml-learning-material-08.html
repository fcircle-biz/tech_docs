<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UML学習教材 第8章 - その他の重要な図と高度な技法</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; padding-top: 56px; }
        .navbar { background-color: #2c3e50; }
        .sidebar { position: sticky; top: 70px; height: calc(100vh - 70px); overflow-y: auto; }
        .chapter-title { color: #2c3e50; margin-top: 1.5rem; margin-bottom: 1rem; border-bottom: 2px solid #2c3e50; padding-bottom: 0.5rem; }
        .section-title { color: #34495e; margin-top: 1.2rem; margin-bottom: 0.8rem; }
        .quiz-container { background-color: #e8f4f8; border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; border-left: 4px solid #2c3e50; }
        .exercise-container { background-color: #f3e5f5; border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; border-left: 4px solid #9c27b0; }
        .highlight { background-color: #ffecb3; border-radius: 8px; padding: 1rem; margin: 1rem 0; border-left: 4px solid #ffc107; }
        .warning { background-color: #ffebee; border-radius: 8px; padding: 1rem; margin: 1rem 0; border-left: 4px solid #f44336; }
        .code-block { background-color: #1e1e1e; color: white; border-radius: 5px; padding: 1rem; margin: 1rem 0; }
        .nav-link.active { background-color: #2c3e50 !important; color: white !important; }
        .concept-box { background-color: #e8f5e8; border-radius: 8px; padding: 1rem; margin: 1rem 0; border-left: 4px solid #4caf50; }
        .advanced-box { background-color: #f3e5f5; border-radius: 8px; padding: 1rem; margin: 1rem 0; border-left: 4px solid #9c27b0; }
    </style>
</head>
<body>
    <!-- ナビゲーション -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand"><strong>UML学習教材</strong></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-01.html">第1章: UML入門と基本概念</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-02.html">第2章: クラス図の基礎</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-03.html">第3章: ユースケース図とアクター</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-04.html">第4章: シーケンス図による相互作用モデリング</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-05.html">第5章: アクティビティ図によるワークフロー設計</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-06.html">第6章: ステートマシン図による状態遷移モデリング</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-07.html">第7章: コンポーネント図とデプロイメント図</a></li>
                        <li class="nav-item"><a class="nav-link active" href="uml-learning-material-08.html">第8章: その他の重要な図と高度な技法</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-09.html">第9章: UMLツールの実践活用</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-10.html">第10章: 実践的なシステム設計演習</a></li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第8章: その他の重要な図と高度な技法</h1>
                </div>

                <div id="chapter8">
                    <h2 class="chapter-title">UMLの発展的技法と拡張メカニズム</h2>
                    
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>コミュニケーション図とタイミング図の活用方法</li>
                            <li>相互作用概要図による複合的な相互作用の表現</li>
                            <li>オブジェクト図による具体的なインスタンス関係</li>
                            <li>ステレオタイプ、タグ付き値、制約による拡張</li>
                            <li>UMLプロファイルの概念と実践的活用</li>
                            <li>OCL（Object Constraint Language）の基礎</li>
                            <li>UMLと他のモデリング技法の組み合わせ</li>
                        </ul>
                    </div>

                    <h3 class="section-title">8.1 コミュニケーション図</h3>
                    <p>コミュニケーション図（Communication Diagram）は、シーケンス図と同じ情報を、オブジェクト間の構造的な関係に重点を置いて表現します。</p>
                    
                    <div class="concept-box">
                        <h6>コミュニケーション図の特徴</h6>
                        <ul>
                            <li><strong>空間重視</strong>：時間軸ではなく、オブジェクトの配置に重点</li>
                            <li><strong>メッセージ番号</strong>：連続番号で実行順序を表現</li>
                            <li><strong>構造表現</strong>：オブジェクト間の関連や依存関係が明確</li>
                            <li><strong>プロトタイピング</strong>：システム設計初期段階で有効</li>
                        </ul>
                    </div>

                    <div class="mermaid">
                        graph LR
                            A[顧客] -->|1: 注文要求| B[注文システム]
                            B -->|2: 在庫確認| C[在庫管理]
                            C -->|3: 在庫状況| B
                            B -->|4: 決済処理| D[決済システム]
                            D -->|5: 決済結果| B
                            B -->|6: 注文確定| A
                    </div>

                    <h3 class="section-title">8.2 タイミング図</h3>
                    <p>タイミング図（Timing Diagram）は、オブジェクトの状態変化を時間軸に沿って詳細に表現する図です。</p>

                    <div class="advanced-box">
                        <h6>タイミング図の用途</h6>
                        <ul>
                            <li><strong>リアルタイムシステム</strong>：厳密なタイミング制約があるシステム</li>
                            <li><strong>プロトコル設計</strong>：通信プロトコルの状態遷移</li>
                            <li><strong>ハードウェア設計</strong>：信号のタイミング関係</li>
                            <li><strong>性能分析</strong>：システムの時間的振る舞いの分析</li>
                        </ul>
                    </div>

                    <h3 class="section-title">8.3 相互作用概要図</h3>
                    <p>相互作用概要図（Interaction Overview Diagram）は、複数のシーケンス図やコミュニケーション図を統合して、システム全体の相互作用を表現します。</p>

                    <div class="concept-box">
                        <h6>相互作用概要図の構成</h6>
                        <ul>
                            <li><strong>アクティビティ図形式</strong>：制御フローでシーケンスを接続</li>
                            <li><strong>相互作用使用</strong>：他の相互作用図への参照</li>
                            <li><strong>インライン相互作用</strong>：図中に直接埋め込まれた相互作用</li>
                            <li><strong>分岐・結合</strong>：条件に基づく相互作用の選択</li>
                        </ul>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 8-1: オンライン会議システムの相互作用モデリング</h5>
                        <p>オンライン会議システムの複雑な相互作用を、複数の図を組み合わせて表現してみましょう。</p>
                        
                        <h6>要件</h6>
                        <ul>
                            <li>会議開始から終了まで全体フロー</li>
                            <li>参加者ごとの状態管理</li>
                            <li>ネットワーク状況による動的な品質調整</li>
                        </ul>
                        
                        <h6>PlantUMLの例（コミュニケーション図）</h6>
                        <pre class="code-block"><code class="language-bash">@startuml
object "主催者" as Host
object "参加者A" as ParticipantA  
object "参加者B" as ParticipantB
object "会議サーバー" as Server
object "品質管理" as QoS

Host -> Server : 1: 会議開始
Server -> ParticipantA : 2: 参加招待
Server -> ParticipantB : 3: 参加招待
ParticipantA -> Server : 4: 参加確認
ParticipantB -> Server : 5: 参加確認
Server -> QoS : 6: 品質監視開始
QoS -> Server : 7: 品質レポート
Server -> Host : 8: 会議状況更新
Server -> ParticipantA : 9: 品質調整
Server -> ParticipantB : 10: 品質調整
@enduml</code></pre>
                        
                        <h6>期待される結果</h6>
                        <ul>
                            <li>複数の参加者の相互作用が構造的に表現されている</li>
                            <li>メッセージの順序関係が番号で明確になっている</li>
                            <li>品質管理などの継続的な処理が表現されている</li>
                        </ul>
                    </div>

                    <h3 class="section-title">8.4 オブジェクト図</h3>
                    <p>オブジェクト図（Object Diagram）は、特定の時点におけるオブジェクト（インスタンス）と、それらの間のリンクを表現します。</p>

                    <div class="concept-box">
                        <h6>オブジェクト図の用途</h6>
                        <ul>
                            <li><strong>設計検証</strong>：クラス図の設計が実際に機能するかの確認</li>
                            <li><strong>例示説明</strong>：複雑なクラス関係の具体例による説明</li>
                            <li><strong>テストケース</strong>：特定のシナリオでのオブジェクト状態</li>
                            <li><strong>デバッグ支援</strong>：実行時のオブジェクト関係の可視化</li>
                        </ul>
                    </div>

                    <div class="mermaid">
                        graph TB
                            subgraph "注文システムの実行時例"
                                A["customer1:Customer<br/>name='田中太郎'<br/>email='tanaka@example.com'"]
                                B["order1:Order<br/>orderDate='2025-01-15'<br/>totalAmount=15000"]
                                C["item1:OrderItem<br/>quantity=2<br/>unitPrice=5000"]
                                D["item2:OrderItem<br/>quantity=1<br/>unitPrice=5000"]
                                E["product1:Product<br/>name='ノートPC'<br/>price=5000"]
                                F["product2:Product<br/>name='マウス'<br/>price=5000"]
                                
                                A --> B
                                B --> C
                                B --> D
                                C --> E
                                D --> F
                            end
                    </div>

                    <h3 class="section-title">8.5 UMLの拡張メカニズム</h3>
                    <p>UMLは標準的な要素だけでは表現しきれない概念を、拡張メカニズムで補完できます。</p>

                    <h4>ステレオタイプ（Stereotype）</h4>
                    <p>既存のUML要素を特殊化し、特定の意味を持たせるメカニズムです。</p>

                    <div class="advanced-box">
                        <h6>よく使われるステレオタイプ</h6>
                        <ul>
                            <li><strong>&lt;&lt;interface&gt;&gt;</strong>：インターフェースを表すクラス</li>
                            <li><strong>&lt;&lt;abstract&gt;&gt;</strong>：抽象クラス</li>
                            <li><strong>&lt;&lt;entity&gt;&gt;</strong>：エンティティクラス（データ中心）</li>
                            <li><strong>&lt;&lt;control&gt;&gt;</strong>：制御クラス（処理中心）</li>
                            <li><strong>&lt;&lt;boundary&gt;&gt;</strong>：境界クラス（UI、外部IF）</li>
                            <li><strong>&lt;&lt;singleton&gt;&gt;</strong>：シングルトンパターンのクラス</li>
                        </ul>
                    </div>

                    <h4>タグ付き値（Tagged Values）</h4>
                    <p>UML要素に追加的な情報を付加するメカニズムです。</p>

                    <div class="mermaid">
                        classDiagram
                            class UserService {
                                &lt;&lt;service&gt;&gt;
                                version: 1.2
                                author: "開発チーム"
                                deprecated: false
                                +createUser()
                                +updateUser()
                                +deleteUser()
                            }
                            
                            class UserRepository {
                                &lt;&lt;repository&gt;&gt;
                                persistence: JPA
                                datasource: MySQL
                                +save()
                                +findById()
                                +delete()
                            }
                            
                            UserService --> UserRepository
                    </div>

                    <h4>制約（Constraints）</h4>
                    <p>UML要素に対する追加的な規則や条件を表現します。</p>

                    <div class="concept-box">
                        <h6>制約の種類</h6>
                        <ul>
                            <li><strong>前提条件</strong>：{pre: balance >= amount}</li>
                            <li><strong>事後条件</strong>：{post: balance = old.balance - amount}</li>
                            <li><strong>不変条件</strong>：{inv: age >= 0}</li>
                            <li><strong>派生制約</strong>：{total = price * quantity}</li>
                        </ul>
                    </div>

                    <h3 class="section-title">8.6 UMLプロファイル</h3>
                    <p>UMLプロファイル（UML Profile）は、特定のドメインやプラットフォーム向けにUMLを拡張する仕組みです。</p>

                    <div class="advanced-box">
                        <h6>代表的なUMLプロファイル</h6>
                        <ul>
                            <li><strong>SysMLプロファイル</strong>：システム工学向けの拡張</li>
                            <li><strong>SOAプロファイル</strong>：サービス指向アーキテクチャ</li>
                            <li><strong>BPMNプロファイル</strong>：ビジネスプロセスモデリング</li>
                            <li><strong>Webサービスプロファイル</strong>：Webサービス設計</li>
                            <li><strong>セキュリティプロファイル</strong>：セキュリティ要件モデリング</li>
                        </ul>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 8-2: Webアプリケーション向けカスタムプロファイル</h5>
                        <p>Webアプリケーション開発に特化したステレオタイプとタグ付き値を定義してみましょう。</p>
                        
                        <h6>要件</h6>
                        <ul>
                            <li>REST APIのエンドポイント表現</li>
                            <li>データベーステーブルとの対応</li>
                            <li>セキュリティレベルの表現</li>
                        </ul>
                        
                        <h6>PlantUMLの例</h6>
                        <pre class="code-block"><code class="language-bash">@startuml
class UserController {
    &lt;&lt;REST Controller&gt;&gt;
    {endpoint="/api/users"}
    {security="RBAC"}
    {version="v1"}
    
    +createUser() {GET /users}
    +getUser() {GET /users/{id}}
    +updateUser() {PUT /users/{id}}
    +deleteUser() {DELETE /users/{id}}
}

class User {
    &lt;&lt;Entity&gt;&gt;
    {table="users"}
    {schema="public"} 
    {audit=true}
    
    -id: Long {column="user_id", type="BIGINT"}
    -username: String {column="username", unique=true}
    -email: String {column="email", validation="email"}
    -createdAt: Date {column="created_at", type="TIMESTAMP"}
    
    {constraint: "username != null"}
    {constraint: "email matches '^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+$'"}
}

UserController --> User : uses
@enduml</code></pre>
                        
                        <h6>期待される結果</h6>
                        <ul>
                            <li>Webアプリケーション固有の概念がステレオタイプで表現されている</li>
                            <li>実装に必要な詳細情報がタグ付き値で記録されている</li>
                            <li>ビジネスルールが制約として明確に定義されている</li>
                        </ul>
                    </div>

                    <h3 class="section-title">8.7 OCL（Object Constraint Language）</h3>
                    <p>OCLは、UMLモデルに対して正確で曖昧性のない制約や条件を記述するための言語です。</p>

                    <div class="concept-box">
                        <h6>OCLの構成要素</h6>
                        <ul>
                            <li><strong>コンテキスト</strong>：制約が適用されるUML要素</li>
                            <li><strong>プロパティ</strong>：オブジェクトの属性や関連</li>
                            <li><strong>操作</strong>：コレクション操作、論理演算等</li>
                            <li><strong>ナビゲーション</strong>：関連を辿った値の参照</li>
                        </ul>
                    </div>

                    <div class="advanced-box">
                        <h6>OCL記述例</h6>
                        <pre><code>-- 注文の合計金額は0より大きい
context Order
  inv: self.totalAmount > 0

-- 顧客の年齢は18歳以上
context Customer  
  inv: self.age >= 18

-- 注文品目の価格は正の値
context OrderItem
  inv: self.unitPrice > 0 and self.quantity > 0

-- 派生属性の定義
context Order::totalAmount
  derive: self.orderItems->collect(quantity * unitPrice)->sum()</code></pre>
                    </div>

                    <h3 class="section-title">8.8 モデル変換と統合</h3>
                    <p>UMLは他のモデリング技法や実装技術と組み合わせて使用されます。</p>

                    <div class="concept-box">
                        <h6>モデル統合の例</h6>
                        <ul>
                            <li><strong>MDA（Model Driven Architecture）</strong>：モデルからコードの自動生成</li>
                            <li><strong>BPMN連携</strong>：ビジネスプロセスからシステム設計へ</li>
                            <li><strong>データモデリング</strong>：ER図からクラス図への変換</li>
                            <li><strong>アーキテクチャ記述</strong>：C4モデル、Archimateとの統合</li>
                        </ul>
                    </div>

                    <div class="warning">
                        <h6>高度な技法使用時の注意点</h6>
                        <ul>
                            <li><strong>過度な複雑化</strong>：必要以上に詳細にすると理解が困難に</li>
                            <li><strong>ツール依存</strong>：特定ツールにロックインされるリスク</li>
                            <li><strong>学習コスト</strong>：チーム全体での技法習得が必要</li>
                            <li><strong>保守性</strong>：拡張したモデルの長期的な保守性を考慮</li>
                        </ul>
                    </div>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>コミュニケーション図とシーケンス図の主な違いは何ですか？</li>
                            <li>タイミング図が特に有用なシステムの種類を3つ答えてください。</li>
                            <li>オブジェクト図とクラス図の関係を説明してください。</li>
                            <li>UMLの3つの拡張メカニズムを答えてください。</li>
                            <li>ステレオタイプ&lt;&lt;interface&gt;&gt;の目的は何ですか？</li>
                            <li>OCLを使用する利点を説明してください。</li>
                            <li>UMLプロファイルの概念と用途を説明してください。</li>
                        </ol>
                        
                        <h6>応用問題</h6>
                        <p>IoTシステムを想定し、以下の要件を満たすモデルを作成してください：</p>
                        <ul>
                            <li>センサーデータの時系列変化をタイミング図で表現</li>
                            <li>デバイスの状態管理をオブジェクト図で具体的に表現</li>
                            <li>IoT固有の概念（センサー、アクチュエータ、ゲートウェイ）をステレオタイプで定義</li>
                            <li>データ品質や通信制約をOCLで記述</li>
                        </ul>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="uml-learning-material-07.html" class="btn btn-secondary">← 前の章</a>
                        <a href="uml-learning-material-09.html" class="btn btn-primary">次の章 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- フッター -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script>mermaid.initialize({startOnLoad: true, theme: 'default'});</script>
</body>
</html>