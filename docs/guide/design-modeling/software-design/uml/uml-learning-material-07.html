<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UML学習教材 第7章 - コンポーネント図とデプロイメント図</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        .navbar { background-color: #2c3e50; }
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        .chapter-title {
            color: #2c3e50;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #2c3e50;
            padding-bottom: 0.5rem;
        }
        .section-title {
            color: #34495e;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        .quiz-container {
            background-color: #e8f4f8;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #2c3e50;
        }
        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }
        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }
        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }
        .code-block {
            background-color: #1e1e1e;
            color: white;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        .nav-link.active {
            background-color: #2c3e50 !important;
            color: white !important;
        }
        .concept-box {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #4caf50;
        }
        .architecture-box {
            background-color: #f0f8ff;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #1976d2;
        }
    </style>
</head>
<body>
    <!-- ナビゲーション -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand"><strong>UML学習教材</strong></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-01.html">第1章: UML入門と基本概念</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-02.html">第2章: クラス図の基礎</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-03.html">第3章: ユースケース図とアクター</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-04.html">第4章: シーケンス図による相互作用モデリング</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-05.html">第5章: アクティビティ図によるワークフロー設計</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-06.html">第6章: ステートマシン図による状態遷移モデリング</a></li>
                        <li class="nav-item"><a class="nav-link active" href="uml-learning-material-07.html">第7章: コンポーネント図とデプロイメント図</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-08.html">第8章: その他の重要な図と高度な技法</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-09.html">第9章: UMLツールの実践活用</a></li>
                        <li class="nav-item"><a class="nav-link" href="uml-learning-material-10.html">第10章: 実践的なシステム設計演習</a></li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第7章: コンポーネント図とデプロイメント図</h1>
                </div>

                <div id="chapter7">
                    <h2 class="chapter-title">システムの物理的構造とアーキテクチャ</h2>
                    
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>コンポーネント図による論理的なシステム構造の表現</li>
                            <li>コンポーネント間の依存関係とインターフェース設計</li>
                            <li>パッケージ図による大規模システムの組織化</li>
                            <li>デプロイメント図による物理的な配置の設計</li>
                            <li>ノード、アーティファクト、実行環境の概念</li>
                            <li>マイクロサービスアーキテクチャの表現方法</li>
                            <li>クラウド環境での配置設計手法</li>
                        </ul>
                    </div>

                    <h3 class="section-title">7.1 コンポーネント図の基礎</h3>
                    <p>コンポーネント図（Component Diagram）は、システムの論理的な構造を表現するUMLの構造図です。ソフトウェアコンポーネント間の関係と、それらが提供・要求するインターフェースを視覚化します。</p>
                    
                    <div class="concept-box">
                        <h6>コンポーネント図の重要性</h6>
                        <ul>
                            <li><strong>アーキテクチャ設計</strong>：システムの高レベル構造を設計・文書化</li>
                            <li><strong>モジュール化</strong>：独立性の高いコンポーネント設計</li>
                            <li><strong>依存関係管理</strong>：コンポーネント間の結合度を最適化</li>
                            <li><strong>再利用性向上</strong>：疎結合なコンポーネント設計</li>
                        </ul>
                    </div>

                    <div class="mermaid">
                        graph TB
                            subgraph "Webアプリケーション"
                                A[UIコンポーネント]
                                B[ビジネスロジック]
                                C[データアクセス]
                            end
                            
                            subgraph "外部システム"
                                D[決済システム]
                                E[メール配信]
                                F[データベース]
                            end
                            
                            A --> B
                            B --> C
                            B --> D
                            B --> E
                            C --> F
                    </div>

                    <h4>コンポーネントの表記法</h4>
                    <p>コンポーネントは矩形に小さなコンポーネント記号（組み合わせた矩形）を付けて表現します。</p>

                    <div class="architecture-box">
                        <h6>コンポーネントの例</h6>
                        <ul>
                            <li><strong>ライブラリ</strong>：共通機能をまとめたモジュール</li>
                            <li><strong>サービス</strong>：特定の責任を持つビジネス機能</li>
                            <li><strong>フレームワーク</strong>：アプリケーション基盤</li>
                            <li><strong>データベース</strong>：データ永続化層</li>
                        </ul>
                    </div>

                    <h3 class="section-title">7.2 インターフェースと依存関係</h3>
                    <p>コンポーネント間の相互作用は、提供インターフェース（lollipop記法）と要求インターフェース（socket記法）で表現されます。</p>

                    <div class="concept-box">
                        <h6>インターフェース設計原則</h6>
                        <ul>
                            <li><strong>契約による設計</strong>：明確なインターフェース定義</li>
                            <li><strong>依存性の逆転</strong>：抽象への依存、具象への非依存</li>
                            <li><strong>インターフェース分離</strong>：使用しない機能への依存回避</li>
                            <li><strong>単一責任</strong>：一つのインターフェースには一つの責任</li>
                        </ul>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 7-1: ECサイトのコンポーネント設計</h5>
                        <p>オンラインショッピングサイトのコンポーネント構造を設計してみましょう。</p>
                        
                        <h6>要件</h6>
                        <ul>
                            <li>フロントエンド（Web UI、モバイルアプリ）</li>
                            <li>バックエンドサービス（ユーザー管理、商品管理、注文処理）</li>
                            <li>外部連携（決済、配送、在庫システム）</li>
                        </ul>
                        
                        <h6>PlantUMLの例</h6>
                        <pre class="code-block"><code class="language-bash">@startuml
!define RECTANGLE class

package "フロントエンド層" {
  [Web UI] as WebUI
  [モバイルアプリ] as Mobile
}

package "アプリケーション層" {
  [ユーザー管理] as UserMgmt
  [商品管理] as ProductMgmt  
  [注文処理] as OrderProc
}

package "データ層" {
  [ユーザーDB] as UserDB
  [商品DB] as ProductDB
  [注文DB] as OrderDB
}

package "外部システム" {
  [決済システム] as Payment
  [配送システム] as Delivery
}

WebUI --> UserMgmt
WebUI --> ProductMgmt
WebUI --> OrderProc

Mobile --> UserMgmt
Mobile --> ProductMgmt
Mobile --> OrderProc

UserMgmt --> UserDB
ProductMgmt --> ProductDB
OrderProc --> OrderDB

OrderProc --> Payment
OrderProc --> Delivery

interface "IUserService" as IUser
interface "IProductService" as IProduct
interface "IOrderService" as IOrder

UserMgmt - IUser
ProductMgmt - IProduct
OrderProc - IOrder

WebUI ..> IUser
WebUI ..> IProduct
WebUI ..> IOrder
@enduml</code></pre>
                    </div>

                    <h3 class="section-title">7.3 パッケージ図による組織化</h3>
                    <p>大規模システムでは、関連するクラスやコンポーネントをパッケージでグループ化して管理します。</p>

                    <div class="mermaid">
                        graph TB
                            subgraph "com.company.ecommerce"
                                subgraph "ui"
                                    A[web]
                                    B[mobile]
                                end
                                
                                subgraph "service" 
                                    C[user]
                                    D[product]
                                    E[order]
                                end
                                
                                subgraph "repository"
                                    F[user]
                                    G[product] 
                                    H[order]
                                end
                                
                                subgraph "common"
                                    I[util]
                                    J[security]
                                end
                            end
                            
                            A --> C
                            A --> D
                            A --> E
                            C --> F
                            D --> G
                            E --> H
                            C --> I
                            D --> I
                            E --> I
                    </div>

                    <h3 class="section-title">7.4 デプロイメント図の基礎</h3>
                    <p>デプロイメント図（Deployment Diagram）は、システムのハードウェア構成と、そこに配置されるソフトウェアコンポーネントを表現します。</p>

                    <div class="architecture-box">
                        <h6>デプロイメント図の構成要素</h6>
                        <ul>
                            <li><strong>ノード</strong>：物理的または論理的な実行環境（サーバー、PC、VM）</li>
                            <li><strong>アーティファクト</strong>：実行可能な物理ファイル（.jar、.exe、.war）</li>
                            <li><strong>実行環境</strong>：アーティファクトを実行する環境（JVM、.NET Runtime）</li>
                            <li><strong>通信パス</strong>：ノード間の物理的または論理的な接続</li>
                        </ul>
                    </div>

                    <div class="mermaid">
                        graph TB
                            subgraph "データセンター"
                                subgraph "Webサーバー1"
                                    A[Apache Tomcat]
                                    B[webapp.war]
                                end
                                
                                subgraph "Webサーバー2"
                                    C[Apache Tomcat]
                                    D[webapp.war]
                                end
                                
                                subgraph "データベースサーバー"
                                    E[MySQL Server]
                                    F[ecommerce.db]
                                end
                                
                                subgraph "ロードバランサー"
                                    G[nginx]
                                end
                            end
                            
                            subgraph "クライアント"
                                H[Webブラウザ]
                                I[モバイルアプリ]
                            end
                            
                            H --> G
                            I --> G
                            G --> A
                            G --> C
                            A --> E
                            C --> E
                    </div>

                    <h3 class="section-title">7.5 クラウド環境での配置設計</h3>
                    <p>現代のシステム開発では、クラウドサービスを活用した配置設計が主流となっています。</p>

                    <div class="concept-box">
                        <h6>クラウド配置の特徴</h6>
                        <ul>
                            <li><strong>スケーラビリティ</strong>：需要に応じた自動スケーリング</li>
                            <li><strong>可用性</strong>：複数のアベイラビリティゾーンでの冗長化</li>
                            <li><strong>管理サービス</strong>：データベース、ロードバランサーのマネージドサービス利用</li>
                            <li><strong>セキュリティ</strong>：VPC、セキュリティグループによる分離</li>
                        </ul>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 7-2: AWS環境でのデプロイメント図</h5>
                        <p>AWSクラウド環境でのWebアプリケーション配置をモデリングしてみましょう。</p>
                        
                        <h6>要件</h6>
                        <ul>
                            <li>Application Load Balancer</li>
                            <li>Auto Scaling GroupのEC2インスタンス</li>
                            <li>RDS（MySQL）</li>
                            <li>S3（静的ファイル）</li>
                            <li>CloudFront（CDN）</li>
                        </ul>
                        
                        <h6>PlantUMLの例</h6>
                        <pre class="code-block"><code class="language-bash">@startuml
!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v15.0/dist
!includeurl AWSPuml/AWSCommon.puml
!includeurl AWSPuml/Compute/all.puml
!includeurl AWSPuml/Database/all.puml
!includeurl AWSPuml/Storage/all.puml
!includeurl AWSPuml/NetworkingContentDelivery/all.puml

node "インターネット" as Internet
node "CloudFront" as CF
node "Application Load Balancer" as ALB

rectangle "Auto Scaling Group" as ASG {
  node "EC2インスタンス1" as EC2_1 {
    artifact "webapp.jar"
  }
  node "EC2インスタンス2" as EC2_2 {
    artifact "webapp.jar" 
  }
}

node "RDS MySQL" as RDS {
  artifact "database"
}

node "S3 Bucket" as S3 {
  artifact "静的ファイル"
}

Internet --> CF : HTTPS
CF --> ALB : HTTP/HTTPS
ALB --> EC2_1 : HTTP
ALB --> EC2_2 : HTTP
EC2_1 --> RDS : JDBC
EC2_2 --> RDS : JDBC
EC2_1 --> S3 : API
EC2_2 --> S3 : API
@enduml</code></pre>
                    </div>

                    <h3 class="section-title">7.6 マイクロサービスアーキテクチャ</h3>
                    <p>現代的なアプリケーション設計では、マイクロサービスアーキテクチャが重要な役割を果たしています。</p>

                    <div class="architecture-box">
                        <h6>マイクロサービス設計原則</h6>
                        <ul>
                            <li><strong>サービス境界</strong>：ビジネス機能による明確な境界</li>
                            <li><strong>データ分離</strong>：各サービスが独自のデータストアを持つ</li>
                            <li><strong>API Gateway</strong>：外部からの統一的なアクセス窓口</li>
                            <li><strong>サービスディスカバリ</strong>：動的なサービス発見機能</li>
                        </ul>
                    </div>

                    <div class="mermaid">
                        graph TB
                            subgraph "API Gateway"
                                A[Authentication]
                                B[Rate Limiting]
                                C[Load Balancing]
                            end
                            
                            subgraph "マイクロサービス"
                                D[User Service]
                                E[Product Service]
                                F[Order Service]
                                G[Payment Service]
                            end
                            
                            subgraph "データストア"
                                H[User DB]
                                I[Product DB] 
                                J[Order DB]
                                K[Payment DB]
                            end
                            
                            subgraph "共通サービス"
                                L[Service Discovery]
                                M[Configuration]
                                N[Monitoring]
                            end
                            
                            A --> D
                            A --> E
                            A --> F
                            A --> G
                            
                            D --> H
                            E --> I
                            F --> J
                            G --> K
                            
                            D --> L
                            E --> L
                            F --> L
                            G --> L
                    </div>

                    <h3 class="section-title">7.7 運用・保守の考慮</h3>
                    <p>デプロイメント図では、運用・保守面での要件も考慮する必要があります。</p>

                    <div class="concept-box">
                        <h6>運用設計のポイント</h6>
                        <ul>
                            <li><strong>監視・ログ</strong>：アプリケーションとインフラの監視体制</li>
                            <li><strong>バックアップ・復旧</strong>：データ保護とRTO/RPO要件</li>
                            <li><strong>セキュリティ</strong>：ネットワーク分離、暗号化、認証</li>
                            <li><strong>CI/CD</strong>：自動デプロイメントパイプライン</li>
                        </ul>
                    </div>

                    <div class="warning">
                        <h6>設計時の注意点</h6>
                        <ul>
                            <li><strong>単一障害点の回避</strong>：冗長化による可用性確保</li>
                            <li><strong>性能要件</strong>：レスポンス時間、スループット要件の考慮</li>
                            <li><strong>コスト最適化</strong>：リソース使用量とコストのバランス</li>
                            <li><strong>コンプライアンス</strong>：規制要件への準拠</li>
                        </ul>
                    </div>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>コンポーネント図とクラス図の違いは何ですか？</li>
                            <li>提供インターフェースと要求インターフェースの記法の違いを説明してください。</li>
                            <li>デプロイメント図の主要な構成要素を4つ答えてください。</li>
                            <li>パッケージ図を使用する利点を3つ述べてください。</li>
                            <li>マイクロサービスアーキテクチャの特徴を説明してください。</li>
                            <li>クラウド環境でのデプロイメント設計で考慮すべき点は何ですか？</li>
                        </ol>
                        
                        <h6>応用問題</h6>
                        <p>動画配信サービスを想定し、以下を含む包括的な設計を作成してください：</p>
                        <ul>
                            <li>マイクロサービス構成のコンポーネント図</li>
                            <li>CDN、ストリーミングサーバー、データベースを含むデプロイメント図</li>
                            <li>負荷分散とスケーラビリティの考慮</li>
                            <li>コンテンツ配信の最適化</li>
                        </ul>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="uml-learning-material-06.html" class="btn btn-secondary">← 前の章</a>
                        <a href="uml-learning-material-08.html" class="btn btn-primary">次の章 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- フッター -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>hljs.highlightAll();</script>
    <script>mermaid.initialize({startOnLoad: true, theme: 'default'});</script>
</body>
</html>