<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UML学習教材 第3章 - ユースケース図とアクター</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        
        .navbar {
            background-color: #2c3e50;
        }
        
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        
        .chapter-title {
            color: #2c3e50;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #2c3e50;
            padding-bottom: 0.5rem;
        }
        
        .section-title {
            color: #34495e;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        
        .quiz-container {
            background-color: #e8f4f8;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #2c3e50;
        }
        
        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }
        
        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }
        
        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }
        
        .code-block {
            background-color: #1e1e1e;
            color: white;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .nav-link.active {
            background-color: #2c3e50 !important;
            color: white !important;
        }
        
        .concept-box {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #4caf50;
        }
        
        .actor-example {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #6c757d;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand">
                <strong>UML学習教材</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-01.html">
                                第1章: UML入門と基本概念
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-02.html">
                                第2章: クラス図の基礎
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="uml-learning-material-03.html">
                                第3章: ユースケース図とアクター
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-04.html">
                                第4章: シーケンス図による相互作用モデリング
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-05.html">
                                第5章: アクティビティ図によるワークフロー設計
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-06.html">
                                第6章: ステートマシン図による状態遷移モデリング
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-07.html">
                                第7章: コンポーネント図とデプロイメント図
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-08.html">
                                第8章: その他の重要な図と高度な技法
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-09.html">
                                第9章: UMLツールの実践活用
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="uml-learning-material-10.html">
                                第10章: 実践的なシステム設計演習
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第3章: ユースケース図とアクター</h1>
                </div>

                <div id="chapter3">
                    <h2 class="chapter-title">システムの機能要件を可視化する</h2>
                    
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>ユースケース図の目的と利用者視点でのシステム設計</li>
                            <li>アクターの識別方法と種類（主アクター・副アクター）</li>
                            <li>ユースケースの抽出と適切な粒度の設定</li>
                            <li>システム境界の定義と重要性</li>
                            <li>include関係とextend関係の使い分け</li>
                            <li>アクター間の汎化関係とその表現方法</li>
                            <li>要件定義からユースケース図への落とし込み手法</li>
                        </ul>
                    </div>

                    <h3 class="section-title">3.1 ユースケース図とは何か</h3>
                    <p>ユースケース図（Use Case Diagram）は、システムが提供する機能を利用者の視点から表現する図です。「誰が」「何を」システムに求めるかを視覚的に示し、システムの外部仕様を明確にします。</p>
                    
                    <div class="concept-box">
                        <h6>ユースケース図が重要な理由</h6>
                        <ul>
                            <li><strong>利用者視点の設計</strong>：技術者ではなく利用者の観点から機能を整理</li>
                            <li><strong>要件の明確化</strong>：「何のために」「誰のために」システムを作るかが明確</li>
                            <li><strong>開発範囲の定義</strong>：システムが実現すべき機能の境界を設定</li>
                            <li><strong>ステークホルダーとの合意</strong>：非技術者にも理解しやすい形で要件を共有</li>
                        </ul>
                    </div>

                    <p>ユースケース図は、まるで「お客さんがお店で何をしたいか」を整理した案内図のようなものです。お店（システム）に来るお客さん（アクター）が、どんなサービス（ユースケース）を利用できるかを一目で分かるようにします。</p>

                    <h3 class="section-title">3.2 ユースケース図の構成要素</h3>
                    <p>ユースケース図は4つの主要な要素から構成されています。</p>

                    <div class="mermaid">
                        graph LR
                            subgraph "システム境界"
                                UC1[ログイン]
                                UC2[商品検索]
                                UC3[注文処理]
                                UC4[在庫管理]
                            end
                            
                            A1[顧客] --> UC1
                            A1 --> UC2
                            A1 --> UC3
                            A2[管理者] --> UC4
                            A2 --> UC1
                    </div>

                    <h4>4つの構成要素</h4>
                    <ol>
                        <li><strong>アクター（Actor）</strong>：システムと相互作用する外部エンティティ</li>
                        <li><strong>ユースケース（Use Case）</strong>：システムが提供する機能単位</li>
                        <li><strong>システム境界（System Boundary）</strong>：開発対象システムの範囲</li>
                        <li><strong>関係（Relationship）</strong>：アクターとユースケース、ユースケース間の関係</li>
                    </ol>

                    <h3 class="section-title">3.3 アクターの識別と分類</h3>
                    <p>アクターはシステムの外部からシステムと相互作用する存在です。人だけでなく、他のシステムや装置も含まれます。</p>

                    <h4>アクターの種類</h4>
                    
                    <div class="actor-example">
                        <h6>主アクター（Primary Actor）</h6>
                        <p>システムからサービスを受ける側。システムを利用して目的を達成する。</p>
                        <ul>
                            <li><strong>例</strong>：ATMシステムの「銀行利用者」、ECサイトの「買い物客」</li>
                        </ul>
                    </div>

                    <div class="actor-example">
                        <h6>副アクター（Secondary Actor）</h6>
                        <p>システムにサービスを提供する側。システムから要求を受けて処理を行う。</p>
                        <ul>
                            <li><strong>例</strong>：決済システム、外部データベース、プリンタ</li>
                        </ul>
                    </div>

                    <div class="mermaid">
                        graph LR
                            A1[顧客<br/>主アクター] --> S[オンライン<br/>ショッピング<br/>システム]
                            A2[管理者<br/>主アクター] --> S
                            S --> A3[決済システム<br/>副アクター]
                            S --> A4[在庫管理システム<br/>副アクター]
                            S --> A5[メール配信<br/>システム<br/>副アクター]
                    </div>

                    <h4>アクター識別のポイント</h4>
                    <div class="concept-box">
                        <h6>効果的なアクター識別の手順</h6>
                        <ol>
                            <li><strong>システムの利用者を洗い出す</strong>：直接システムを操作する人</li>
                            <li><strong>役割で分類する</strong>：同じ人でも異なる役割は別アクター</li>
                            <li><strong>外部システムを特定する</strong>：連携する他システムやデバイス</li>
                            <li><strong>時間による制約を考慮する</strong>：定期処理を起動するタイマーなど</li>
                        </ol>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 3-1: 図書館システムのアクター識別</h5>
                        <p>図書館管理システムのアクターを識別してみましょう。</p>
                        
                        <h6>図書館の業務内容</h6>
                        <ul>
                            <li>利用者が図書を検索・予約・借用・返却する</li>
                            <li>司書が図書の登録・廃棄・貸出処理・返却処理を行う</li>
                            <li>管理者がシステム設定・利用者管理・統計レポート作成を行う</li>
                            <li>夜間に自動で延滞通知メールが送信される</li>
                            <li>他図書館との相互貸借システムと連携する</li>
                        </ul>
                        
                        <h6>手順</h6>
                        <ol>
                            <li>上記業務から関係者を抽出する</li>
                            <li>主アクターと副アクターに分類する</li>
                            <li>PlantUMLでアクターを表現する</li>
                        </ol>
                        
                        <h6>PlantUMLの例</h6>
                        <pre class="code-block"><code class="language-bash">@startuml
actor "図書館利用者" as User
actor "司書" as Librarian  
actor "システム管理者" as Admin
actor "タイマー" as Timer
actor "相互貸借システム" as ILL
actor "メールサーバー" as Mail

rectangle "図書館管理システム" {
    usecase "図書検索" as Search
    usecase "図書貸出" as Borrow
    usecase "延滞通知" as Notice
}

User --> Search
User --> Borrow
Timer --> Notice
Notice --> Mail
@enduml</code></pre>
                    </div>

                    <h3 class="section-title">3.4 ユースケースの抽出と記述</h3>
                    <p>ユースケースは、アクターがシステムから受けるサービスを表します。適切な粒度で抽出することが重要です。</p>

                    <h4>ユースケース抽出の基準</h4>
                    <div class="concept-box">
                        <h6>良いユースケースの特徴</h6>
                        <ul>
                            <li><strong>アクターの目標達成</strong>：アクターにとって価値のある結果をもたらす</li>
                            <li><strong>独立性</strong>：単独で意味を持ち、完結している</li>
                            <li><strong>観測可能性</strong>：外部から結果が確認できる</li>
                            <li><strong>適切な粒度</strong>：細かすぎず、粗すぎない</li>
                        </ul>
                    </div>

                    <div class="warning">
                        <h6>よくある間違い</h6>
                        <ul>
                            <li><strong>技術的すぎる</strong>：「データベースに接続」（利用者視点ではない）</li>
                            <li><strong>粒度が細かすぎる</strong>：「パスワード入力」（目標達成に不十分）</li>
                            <li><strong>粒度が粗すぎる</strong>：「システム管理」（具体性に欠ける）</li>
                            <li><strong>手段を目的化</strong>：「ログイン」は手段、目的は「システム利用」</li>
                        </ul>
                    </div>

                    <h4>ユースケースの命名規則</h4>
                    <p>ユースケース名は、アクターの目標を表す動詞句で表現します。</p>

                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>良い例</th>
                                <th>悪い例</th>
                                <th>理由</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>商品を注文する</td>
                                <td>注文画面</td>
                                <td>動作を表現している vs 画面名</td>
                            </tr>
                            <tr>
                                <td>会員情報を更新する</td>
                                <td>データ更新</td>
                                <td>具体的 vs 抽象的すぎる</td>
                            </tr>
                            <tr>
                                <td>売上レポートを生成する</td>
                                <td>レポート</td>
                                <td>行為を明確に表現 vs 曖昧</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3 class="section-title">3.5 システム境界の定義</h3>
                    <p>システム境界は、開発対象となるシステムの範囲を明確に定義します。</p>

                    <div class="mermaid">
                        graph TB
                            subgraph "開発対象システム"
                                direction TB
                                UC1[ユーザー登録]
                                UC2[商品検索]
                                UC3[注文処理]
                                UC4[支払い処理]
                            end
                            
                            subgraph "外部システム"
                                EXT1[決済代行サービス]
                                EXT2[配送業者システム]
                                EXT3[在庫管理システム]
                            end
                            
                            A1[顧客] --> UC1
                            A1 --> UC2
                            A1 --> UC3
                            UC4 --> EXT1
                            UC3 --> EXT2
                            UC2 --> EXT3
                    </div>

                    <div class="concept-box">
                        <h6>システム境界設定の重要性</h6>
                        <ul>
                            <li><strong>開発範囲の明確化</strong>：何を作り、何を作らないかを明示</li>
                            <li><strong>責任の明確化</strong>：どこまでが自社の責任範囲か</li>
                            <li><strong>インターフェース設計</strong>：外部システムとの連携点を特定</li>
                            <li><strong>リスク管理</strong>：外部依存による影響範囲を把握</li>
                        </ul>
                    </div>

                    <h3 class="section-title">3.6 ユースケース間の関係</h3>
                    <p>ユースケース間には3種類の関係があります。これらを適切に使い分けることで、効率的なモデリングができます。</p>

                    <h4>Include関係（包含関係）</h4>
                    <p>あるユースケースが他のユースケースを必ず含む関係です。共通処理の再利用に使用します。</p>

                    <div class="mermaid">
                        graph LR
                            UC1[商品注文] -.-> UC2[ログイン認証]
                            UC3[商品レビュー投稿] -.-> UC2
                            UC4[注文履歴確認] -.-> UC2
                            
                            UC1 -.-> |include| UC2
                            UC3 -.-> |include| UC2
                            UC4 -.-> |include| UC2
                    </div>

                    <div class="concept-box">
                        <h6>Include関係の特徴</h6>
                        <ul>
                            <li>点線の矢印で表現</li>
                            <li>「&lt;&lt;include&gt;&gt;」ラベル付き</li>
                            <li>必ず実行される共通処理</li>
                            <li>重複を避け、保守性を向上</li>
                        </ul>
                    </div>

                    <h4>Extend関係（拡張関係）</h4>
                    <p>特定の条件下で、基本ユースケースを拡張する関係です。オプション機能や例外処理に使用します。</p>

                    <div class="mermaid">
                        graph LR
                            UC1[商品注文]
                            UC2[クーポン適用] -.-> |extend| UC1
                            UC3[ギフト包装] -.-> |extend| UC1
                            UC4[配送日時指定] -.-> |extend| UC1
                    </div>

                    <div class="concept-box">
                        <h6>Extend関係の使用例</h6>
                        <ul>
                            <li><strong>オプション機能</strong>：ギフト包装、お急ぎ便</li>
                            <li><strong>割引・特典</strong>：クーポン適用、ポイント利用</li>
                            <li><strong>例外処理</strong>：エラー時の代替処理</li>
                            <li><strong>条件付き機能</strong>：VIP会員限定サービス</li>
                        </ul>
                    </div>

                    <h4>汎化関係（Generalization）</h4>
                    <p>ユースケース間の継承関係を表します。基本的なユースケースを特殊化する場合に使用します。</p>

                    <div class="mermaid">
                        graph TB
                            UC1[支払い処理]
                            UC2[クレジット決済] --> |汎化| UC1
                            UC3[銀行振込] --> |汎化| UC1  
                            UC4[電子マネー決済] --> |汎化| UC1
                            UC5[代金引換] --> |汎化| UC1
                    </div>

                    <div class="exercise-container">
                        <h5>実習 3-2: ECサイトのユースケース図作成</h5>
                        <p>オンラインショッピングサイトの主要機能をユースケース図で表現してみましょう。</p>
                        
                        <h6>要件</h6>
                        <ul>
                            <li><strong>アクター</strong>：一般顧客、会員顧客、管理者</li>
                            <li><strong>機能</strong>：商品検索、会員登録、ログイン、注文、支払い、商品管理</li>
                            <li><strong>条件</strong>：注文には会員登録とログインが必要、支払い方法は複数選択可能</li>
                        </ul>
                        
                        <h6>PlantUMLの例</h6>
                        <pre class="code-block"><code class="language-bash">@startuml
left to right direction

actor "一般客" as Guest
actor "会員" as Member
actor "管理者" as Admin

rectangle "ECサイトシステム" {
    usecase "商品検索" as Search
    usecase "会員登録" as Register  
    usecase "ログイン" as Login
    usecase "商品注文" as Order
    usecase "クレジット決済" as Credit
    usecase "銀行振込" as Bank
    usecase "商品管理" as Manage
}

Guest --> Search
Guest --> Register
Member --> Login
Member --> Order
Order --> Credit : extend
Order --> Bank : extend
Order ..> Login : include
Admin --> Manage
Admin --> Login

Member --|> Guest
@enduml</code></pre>
                        
                        <h6>期待される結果</h6>
                        <ul>
                            <li>アクター間の汎化関係が正しく表現されている</li>
                            <li>include/extend関係が適切に使用されている</li>
                            <li>システム境界が明確に定義されている</li>
                        </ul>
                    </div>

                    <h3 class="section-title">3.7 要件定義からユースケース図への展開</h3>
                    <p>実際の開発では、曖昧な要求からユースケース図を作成する能力が重要です。</p>

                    <h4>段階的なアプローチ</h4>
                    <ol>
                        <li><strong>ステークホルダーの特定</strong>：システムに関わる全ての利害関係者をリスト化</li>
                        <li><strong>ビジネス目標の理解</strong>：システム導入により達成したい目標を明確化</li>
                        <li><strong>アクターの抽出</strong>：ステークホルダーからシステムと直接やりとりする者を選出</li>
                        <li><strong>ユースケースの洗い出し</strong>：各アクターの目標を機能に分解</li>
                        <li><strong>関係の整理</strong>：重複や依存関係を include/extend で整理</li>
                        <li><strong>優先順位付け</strong>：ビジネス価値と技術的複雑性で順位付け</li>
                    </ol>

                    <div class="concept-box">
                        <h6>実践的なヒント</h6>
                        <ul>
                            <li><strong>ユーザーストーリーとの連携</strong>：「〜として、〜したい、なぜなら〜」形式と組み合わせる</li>
                            <li><strong>プロトタイプとの併用</strong>：画面イメージと合わせて検証する</li>
                            <li><strong>反復改善</strong>：開発進行に合わせてユースケース図も更新する</li>
                            <li><strong>トレーサビリティ</strong>：要件とユースケースの対応関係を管理する</li>
                        </ul>
                    </div>

                    <h3 class="section-title">3.8 ユースケース記述（詳細仕様）</h3>
                    <p>ユースケース図だけでは伝えきれない詳細な振る舞いを、文書で補完します。</p>

                    <div class="actor-example">
                        <h6>ユースケース記述の構成例</h6>
                        <p><strong>ユースケース名：</strong>商品注文</p>
                        <p><strong>主アクター：</strong>会員顧客</p>
                        <p><strong>前提条件：</strong>ログイン済み、商品をカートに追加済み</p>
                        <p><strong>事後条件：</strong>注文が確定し、在庫が減少、配送手配が開始</p>
                        <p><strong>基本フロー：</strong></p>
                        <ol>
                            <li>顧客が注文確認ボタンをクリック</li>
                            <li>システムが注文内容と料金を表示</li>
                            <li>顧客が配送先情報を入力</li>
                            <li>顧客が支払方法を選択</li>
                            <li>システムが注文を確定し、注文番号を発行</li>
                        </ol>
                        <p><strong>代替フロー：</strong>在庫不足の場合は代替商品を提案</p>
                    </div>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>ユースケース図の4つの構成要素は何ですか？</li>
                            <li>主アクターと副アクターの違いを説明してください。</li>
                            <li>include関係とextend関係の違いと使い分けを説明してください。</li>
                            <li>「ログイン画面表示」がユースケースとして不適切な理由は何ですか？</li>
                            <li>システム境界を設定する理由を3つ答えてください。</li>
                            <li>ユースケース間の汎化関係はどのような場面で使用しますか？</li>
                        </ol>
                        
                        <h6>応用問題</h6>
                        <p>病院の予約システムを想定して、以下を含むユースケース図を設計してください：</p>
                        <ul>
                            <li>患者、医師、受付スタッフ、システム管理者</li>
                            <li>予約、キャンセル、診察記録、スケジュール管理</li>
                            <li>適切なinclude/extend関係</li>
                        </ul>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="uml-learning-material-02.html" class="btn btn-secondary">← 前の章</a>
                        <a href="uml-learning-material-04.html" class="btn btn-primary">次の章 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- フッター -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
    
    <!-- Mermaid.js 初期化 -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>