<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" id="viewport-meta">
    <title>ER図学習教材 第8章 - 概念ER図の作成</title>

    <!-- ダークモード早期適用（フラッシュ防止） -->
    <script>
        (function() {
            const saved = localStorage.getItem('darkMode');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (saved === 'dark' || (saved === null && prefersDark)) {
                document.documentElement.classList.add('dark');
            }
        })();
    </script>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // ER図 - Sky カラーテーマ
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans JP"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts - Noto Sans JP -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- カスタムスタイル -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="font-sans bg-slate-50 text-slate-800 antialiased">
    <!-- ヘッダー/ナビゲーションバー -->
    <header class="fixed top-0 left-0 right-0 z-50 text-white header-rich header-rich-shadow">
        <nav class="w-full px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="flex items-center justify-between py-3">
                <!-- 左側: ロゴとタイトルセクション -->
                <div class="flex items-center gap-4">
                    <!-- アイコン -->
                    <div class="relative group">
                        <div class="absolute inset-0 bg-gradient-to-br from-yellow-400/30 to-orange-400/30 rounded-2xl blur-lg group-hover:blur-xl transition-all"></div>
                        <div class="relative w-14 h-14 bg-white/10 rounded-xl flex items-center justify-center backdrop-blur-sm border border-white/20">
                            <i class="fas fa-project-diagram text-3xl icon-rotate-hover drop-shadow-lg"></i>
                        </div>
                    </div>

                    <!-- タイトルとメタ情報 -->
                    <div class="flex flex-col gap-1">
                        <div class="flex items-center gap-2">
                            <span class="text-xl font-bold tracking-wide drop-shadow-md">ER図学習教材</span>
                            <span class="hidden sm:inline-flex items-center gap-1 px-2 py-0.5 bg-white/20 rounded-md text-[10px] font-semibold uppercase tracking-wider">
                                <i class="fas fa-star text-yellow-300 text-[8px]"></i>
                                初級
                            </span>
                        </div>
                        <div class="flex items-center gap-3 text-[11px] text-white/90 font-medium">
                            <div class="flex items-center gap-1">
                                <i class="fas fa-code text-[9px]"></i>
                                <span>データモデリング</span>
                            </div>
                            <div class="hidden sm:flex items-center gap-1">
                                <i class="fas fa-clock text-[9px]"></i>
                                <span>推奨 45分</span>
                            </div>
                            <div class="hidden lg:flex items-center gap-1">
                                <i class="fas fa-language text-[9px]"></i>
                                <span>日本語</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 右側: サイドバートグルボタン -->
                <button id="sidebar-toggle-btn" class="w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white/20 transition-all active:scale-95" title="サイドバーの表示/非表示">
                    <i class="fas fa-bars text-lg"></i>
                </button>
            </div>
        </nav>
    </header>

    <!-- メインレイアウト -->
    <div class="flex min-h-screen pt-20">
        <!-- サイドバーはsidebar-content.jsで動的に生成されます -->

        <!-- メインコンテンツ -->
        <main class="flex-1 min-w-0">
            <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-10 py-6">
                <!-- パンくずリスト -->
                <nav class="flex items-center gap-2 text-sm text-slate-500 mb-6">
                    <a href="#" class="hover:text-primary-600 transition-colors">ホーム</a>
                    <i class="fas fa-chevron-right text-xs"></i>
                    <a href="#" class="hover:text-primary-600 transition-colors">ER図</a>
                    <i class="fas fa-chevron-right text-xs"></i>
                    <span class="text-slate-700">第8章</span>
                </nav>

                <!-- 章ヘッダー -->
                <header class="mb-6">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium
                                     bg-primary-100 text-primary-700">
                            第8章
                        </span>
                    </div>
                    <h1 class="text-2xl sm:text-3xl font-bold text-slate-900 mb-2">概念ER図の作成 - ビジネス要件から設計を始める</h1>
                    <p class="text-slate-600">実際の業務要件から概念ER図を作成し、ビジネス視点でのモデリングを習得しましょう。</p>
                </header>

                <!-- 学習目標カード -->
                <div class="bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200
                            rounded-xl p-5 mb-6 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-amber-400 rounded-lg
                                    flex items-center justify-center">
                            <i class="fas fa-lightbulb text-white"></i>
                        </div>
                        <div>
                            <h2 class="text-lg font-semibold text-amber-800 mb-3">この章で学ぶこと</h2>
                            <ul class="space-y-2">
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>概念ER図とは何か、その役割と重要性を理解する</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>業務要件からエンティティを抽出する方法を学ぶ</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>エンティティ間のリレーションシップを特定する技術を習得する</span>
                                </li>
                                <li class="flex items-start gap-2 text-amber-900">
                                    <i class="fas fa-check-circle text-amber-500 mt-1 flex-shrink-0"></i>
                                    <span>オンライン書店システムを題材に概念ER図を作成する</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- セクション 8.1 -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.1 概念ER図とは
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        これまでの章でエンティティ、属性、リレーションシップ、カーディナリティ、主キー・外部キーなど、ER図の基本要素を学んできました。
                        これらの知識を使って、いよいよ実際のシステム設計を始めます。
                    </p>

                    <div class="bg-blue-50 border border-blue-200 rounded-xl p-5 mb-4">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-info-circle text-blue-500 text-lg mt-0.5"></i>
                            <div>
                                <h3 class="font-semibold text-blue-800 mb-2">概念ER図（Conceptual ER Diagram）</h3>
                                <p class="text-blue-900 text-sm mb-3">
                                    <strong>ビジネスの視点</strong>でデータとその関係性を表現したER図です。
                                    技術的な詳細（データ型、インデックス、物理設計など）は含めず、「どんな情報を管理するか」「情報同士がどう関連するか」を明確にします。
                                </p>
                                <ul class="text-blue-900 text-sm space-y-2">
                                    <li><strong>対象読者</strong>：業務担当者、経営者、システム企画者など（技術者以外も含む）</li>
                                    <li><strong>目的</strong>：業務要件とデータ構造の合意形成</li>
                                    <li><strong>抽象度</strong>：高い（詳細な実装は扱わない）</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <h3 class="text-lg font-semibold text-slate-700 mb-3 mt-6">ER図の3段階設計プロセス</h3>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                        <div class="bg-gradient-to-br from-purple-50 to-fuchsia-50 border border-purple-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold text-sm">1</span>
                                <h4 class="font-semibold text-purple-800">概念ER図</h4>
                            </div>
                            <p class="text-purple-900 text-sm">
                                ビジネス視点でデータ構造を定義。エンティティとリレーションシップを抽出。
                            </p>
                        </div>

                        <div class="bg-gradient-to-br from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold text-sm">2</span>
                                <h4 class="font-semibold text-blue-800">論理ER図</h4>
                            </div>
                            <p class="text-blue-900 text-sm">
                                概念ER図を詳細化。属性の追加、主キー・外部キーの明確化、正規化を適用。
                            </p>
                        </div>

                        <div class="bg-gradient-to-br from-emerald-50 to-teal-50 border border-emerald-200 rounded-lg p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="flex-shrink-0 w-8 h-8 bg-emerald-500 text-white rounded-full flex items-center justify-center font-bold text-sm">3</span>
                                <h4 class="font-semibold text-emerald-800">物理ER図</h4>
                            </div>
                            <p class="text-emerald-900 text-sm">
                                データベースに実装するための設計。データ型、インデックス、パフォーマンス考慮。
                            </p>
                        </div>
                    </div>

                    <p class="text-slate-600 leading-relaxed">
                        この章では<strong>第1段階の「概念ER図」</strong>の作成方法を実践的に学びます。
                    </p>
                </section>

                <!-- セクション 8.2 -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.2 業務要件の理解 - ヒアリングからスタート
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        概念ER図を作成する最初のステップは、<strong>業務要件を正しく理解すること</strong>です。
                        業務担当者や顧客へのヒアリングを通じて、「どんな情報を管理したいのか」「どんな業務フローがあるのか」を把握します。
                    </p>

                    <div class="bg-gradient-to-r from-slate-50 to-blue-50 border border-slate-200 rounded-xl p-6 mb-4">
                        <h3 class="font-semibold text-slate-800 mb-4">要件ヒアリングで確認すべきポイント</h3>
                        <div class="space-y-3">
                            <div class="flex items-start gap-3">
                                <div class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded flex items-center justify-center font-bold">1</div>
                                <div>
                                    <p class="font-medium text-slate-800">管理したい「もの」や「こと」は何か？</p>
                                    <p class="text-slate-600 text-sm">例：顧客、商品、注文、在庫、社員、部署など</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-3">
                                <div class="flex-shrink-0 w-8 h-8 bg-emerald-500 text-white rounded flex items-center justify-center font-bold">2</div>
                                <div>
                                    <p class="font-medium text-slate-800">それぞれについてどんな情報を記録するか？</p>
                                    <p class="text-slate-600 text-sm">例：顧客なら名前、メール、住所、電話番号など</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-3">
                                <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded flex items-center justify-center font-bold">3</div>
                                <div>
                                    <p class="font-medium text-slate-800">「もの」同士はどう関連しているか？</p>
                                    <p class="text-slate-600 text-sm">例：顧客が注文をする、注文に商品が含まれる、など</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-3">
                                <div class="flex-shrink-0 w-8 h-8 bg-orange-500 text-white rounded flex items-center justify-center font-bold">4</div>
                                <div>
                                    <p class="font-medium text-slate-800">数量関係はどうなっているか？</p>
                                    <p class="text-slate-600 text-sm">例：一人の顧客は複数の注文ができる（1対多）</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-emerald-50 border-l-4 border-emerald-500 p-4 my-6 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-star text-emerald-600 mt-1"></i>
                            <div>
                                <p class="text-emerald-900 font-medium">重要ポイント</p>
                                <p class="text-emerald-800 text-sm mt-1">
                                    概念ER図の段階では、「データ型は何か」「主キーは何桁にするか」などの技術的な詳細は考えません。
                                    まずは業務の全体像を把握し、必要なデータとその関係性を明確にすることに集中します。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 8.3 -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.3 ケーススタディ：オンライン書店システムの要件
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        ここからは、具体的な例として<strong>「オンライン書店システム」</strong>を題材に、概念ER図を作成していきます。
                        まずは業務要件を整理しましょう。
                    </p>

                    <div class="bg-gradient-to-r from-purple-50 to-fuchsia-50 border border-purple-200 rounded-xl p-5 mb-4 overflow-hidden">
                        <div class="flex items-start gap-4">
                            <div class="flex-shrink-0 w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                                <i class="fas fa-book text-white"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <h3 class="text-lg font-semibold text-purple-800 mb-3">オンライン書店システムの業務要件</h3>
                                <p class="text-purple-900 mb-4">顧客が書籍を検索・購入できるオンラインサービスを構築したい。</p>
                                <h4 class="font-medium text-purple-800 mb-2">機能要件</h4>
                                <ul class="space-y-2 mb-4">
                                    <li class="flex items-start gap-2 text-purple-900">
                                        <i class="fas fa-check text-purple-500 mt-1 flex-shrink-0"></i>
                                        <span>顧客は会員登録を行い、ログインして書籍を購入できる</span>
                                    </li>
                                    <li class="flex items-start gap-2 text-purple-900">
                                        <i class="fas fa-check text-purple-500 mt-1 flex-shrink-0"></i>
                                        <span>書籍は著者によって執筆され、出版社から出版される</span>
                                    </li>
                                    <li class="flex items-start gap-2 text-purple-900">
                                        <i class="fas fa-check text-purple-500 mt-1 flex-shrink-0"></i>
                                        <span>顧客は一度の注文で複数の書籍を購入できる</span>
                                    </li>
                                    <li class="flex items-start gap-2 text-purple-900">
                                        <i class="fas fa-check text-purple-500 mt-1 flex-shrink-0"></i>
                                        <span>注文履歴を管理し、配送状況を追跡できる</span>
                                    </li>
                                    <li class="flex items-start gap-2 text-purple-900">
                                        <i class="fas fa-check text-purple-500 mt-1 flex-shrink-0"></i>
                                        <span>顧客は購入した書籍にレビューを投稿できる</span>
                                    </li>
                                </ul>
                                <h4 class="font-medium text-purple-800 mb-2">管理したい情報</h4>
                                <ul class="space-y-1 text-purple-900 text-sm">
                                    <li>• 顧客情報（氏名、メールアドレス、住所、会員登録日など）</li>
                                    <li>• 書籍情報（書名、ISBN、価格、出版日、在庫数など）</li>
                                    <li>• 著者情報（著者名、プロフィールなど）</li>
                                    <li>• 出版社情報（出版社名、住所など）</li>
                                    <li>• 注文情報（注文日、注文金額、配送状況など）</li>
                                    <li>• レビュー情報（評価、コメント、投稿日など）</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 8.4 -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.4 ステップ1：エンティティの抽出
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        業務要件から、管理すべき「もの」や「こと」を抽出します。
                        名詞に注目すると見つけやすくなります。
                    </p>

                    <div class="bg-slate-100 border border-slate-200 rounded-xl p-6 mb-4">
                        <h3 class="font-semibold text-slate-800 mb-4 flex items-center gap-2">
                            <i class="fas fa-search text-slate-500"></i>
                            要件文から名詞を抽出
                        </h3>
                        <p class="text-slate-600 text-sm mb-3">
                            「<strong class="text-purple-700">顧客</strong>は会員登録を行い、ログインして<strong class="text-purple-700">書籍</strong>を購入できる」
                            「<strong class="text-purple-700">書籍</strong>は<strong class="text-purple-700">著者</strong>によって執筆され、<strong class="text-purple-700">出版社</strong>から出版される」
                            「<strong class="text-purple-700">顧客</strong>は一度の<strong class="text-purple-700">注文</strong>で複数の<strong class="text-purple-700">書籍</strong>を購入できる」
                            「<strong class="text-purple-700">顧客</strong>は購入した<strong class="text-purple-700">書籍</strong>に<strong class="text-purple-700">レビュー</strong>を投稿できる」
                        </p>
                    </div>

                    <div class="bg-gradient-to-r from-slate-50 to-blue-50 border border-slate-200 rounded-xl p-6 mb-4">
                        <h3 class="font-semibold text-slate-800 mb-4">抽出されたエンティティ候補</h3>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                            <div class="bg-white rounded-lg p-3 border border-blue-200 text-center">
                                <i class="fas fa-user text-blue-500 mb-1"></i>
                                <p class="font-medium text-slate-800">顧客</p>
                            </div>
                            <div class="bg-white rounded-lg p-3 border border-blue-200 text-center">
                                <i class="fas fa-book text-blue-500 mb-1"></i>
                                <p class="font-medium text-slate-800">書籍</p>
                            </div>
                            <div class="bg-white rounded-lg p-3 border border-blue-200 text-center">
                                <i class="fas fa-pen text-blue-500 mb-1"></i>
                                <p class="font-medium text-slate-800">著者</p>
                            </div>
                            <div class="bg-white rounded-lg p-3 border border-blue-200 text-center">
                                <i class="fas fa-building text-blue-500 mb-1"></i>
                                <p class="font-medium text-slate-800">出版社</p>
                            </div>
                            <div class="bg-white rounded-lg p-3 border border-blue-200 text-center">
                                <i class="fas fa-shopping-cart text-blue-500 mb-1"></i>
                                <p class="font-medium text-slate-800">注文</p>
                            </div>
                            <div class="bg-white rounded-lg p-3 border border-blue-200 text-center">
                                <i class="fas fa-star text-blue-500 mb-1"></i>
                                <p class="font-medium text-slate-800">レビュー</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-6 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-lightbulb text-blue-600 mt-1"></i>
                            <div>
                                <p class="text-blue-900 font-medium">エンティティ抽出のヒント</p>
                                <ul class="text-blue-800 text-sm mt-2 space-y-1">
                                    <li>• 業務で繰り返し扱う「もの」や「こと」に注目</li>
                                    <li>• 複数のデータ項目（属性）を持つものをエンティティにする</li>
                                    <li>• 単一の値（例：注文日、価格など）は属性であり、エンティティではない</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 8.5 -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.5 ステップ2：リレーションシップの特定
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        次に、エンティティ同士がどのように関連しているかを明確にします。
                        業務フローや要件文の動詞（「購入する」「執筆する」「投稿する」など）に注目します。
                    </p>

                    <div class="bg-slate-100 border border-slate-200 rounded-xl p-6 mb-4">
                        <h3 class="font-semibold text-slate-800 mb-4">主なリレーションシップ</h3>
                        <div class="space-y-3">
                            <div class="bg-white rounded-lg p-4 border border-slate-300">
                                <div class="flex items-center gap-3 mb-2">
                                    <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold text-sm">1</div>
                                    <p class="font-medium text-slate-800">顧客 ↔ 注文</p>
                                </div>
                                <p class="text-slate-600 text-sm pl-11">「顧客が注文を行う」：一人の顧客は複数の注文ができる（1対多）</p>
                            </div>
                            <div class="bg-white rounded-lg p-4 border border-slate-300">
                                <div class="flex items-center gap-3 mb-2">
                                    <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold text-sm">2</div>
                                    <p class="font-medium text-slate-800">注文 ↔ 書籍</p>
                                </div>
                                <p class="text-slate-600 text-sm pl-11">「注文に書籍が含まれる」：一つの注文に複数の書籍、一つの書籍は複数の注文に含まれる（多対多）</p>
                            </div>
                            <div class="bg-white rounded-lg p-4 border border-slate-300">
                                <div class="flex items-center gap-3 mb-2">
                                    <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold text-sm">3</div>
                                    <p class="font-medium text-slate-800">書籍 ↔ 著者</p>
                                </div>
                                <p class="text-slate-600 text-sm pl-11">「著者が書籍を執筆する」：一人の著者は複数の書籍を執筆、一つの書籍は複数の著者が執筆可能（多対多）</p>
                            </div>
                            <div class="bg-white rounded-lg p-4 border border-slate-300">
                                <div class="flex items-center gap-3 mb-2">
                                    <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold text-sm">4</div>
                                    <p class="font-medium text-slate-800">書籍 ↔ 出版社</p>
                                </div>
                                <p class="text-slate-600 text-sm pl-11">「出版社が書籍を出版する」：一つの出版社は複数の書籍を出版、一つの書籍は一つの出版社から出版（1対多）</p>
                            </div>
                            <div class="bg-white rounded-lg p-4 border border-slate-300">
                                <div class="flex items-center gap-3 mb-2">
                                    <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold text-sm">5</div>
                                    <p class="font-medium text-slate-800">顧客 ↔ レビュー ↔ 書籍</p>
                                </div>
                                <p class="text-slate-600 text-sm pl-11">「顧客が書籍にレビューを投稿する」：一人の顧客は複数のレビューを投稿、一つの書籍は複数のレビューを持つ</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 8.6 -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.6 ステップ3：概念ER図の作成（実習）
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        抽出したエンティティとリレーションシップを使って、draw.ioで概念ER図を描いてみましょう。
                    </p>

                    <div class="bg-gradient-to-r from-purple-50 to-fuchsia-50 border border-purple-200 rounded-xl p-5 mb-4 overflow-hidden">
                        <div class="flex items-start gap-4">
                            <div class="flex-shrink-0 w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                                <i class="fas fa-pencil-alt text-white"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <h3 class="text-lg font-semibold text-purple-800 mb-3">実習 8-1: 概念ER図を描く</h3>
                                <p class="text-purple-900 mb-4">draw.ioを使って、オンライン書店システムの概念ER図を作成します。</p>
                                <h4 class="font-medium text-purple-800 mb-2">手順</h4>
                                <ol class="space-y-3 mb-4">
                                    <li class="flex items-start gap-3 text-purple-900">
                                        <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">1</span>
                                        <span class="flex-1 min-w-0">draw.ioを開き、新しい図を作成します</span>
                                    </li>
                                    <li class="flex items-start gap-3 text-purple-900">
                                        <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">2</span>
                                        <span class="flex-1 min-w-0">6つのエンティティ（顧客、書籍、著者、出版社、注文、レビュー）を長方形で配置します</span>
                                    </li>
                                    <li class="flex items-start gap-3 text-purple-900">
                                        <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">3</span>
                                        <span class="flex-1 min-w-0">エンティティ間を線で結び、リレーションシップを表現します</span>
                                    </li>
                                    <li class="flex items-start gap-3 text-purple-900">
                                        <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">4</span>
                                        <span class="flex-1 min-w-0">カーディナリティ（1対多、多対多）を鳥の足記法で表現します</span>
                                    </li>
                                    <li class="flex items-start gap-3 text-purple-900">
                                        <span class="flex-shrink-0 w-6 h-6 bg-purple-200 rounded-full flex items-center justify-center text-sm font-medium">5</span>
                                        <span class="flex-1 min-w-0">リレーションシップの名前（「注文する」「執筆する」など）をラベルとして追加します</span>
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-6 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-lightbulb text-blue-600 mt-1"></i>
                            <div>
                                <p class="text-blue-900 font-medium">描画のポイント</p>
                                <ul class="text-blue-800 text-sm mt-2 space-y-1">
                                    <li>• 概念ER図では属性の詳細は省略してもOK（エンティティ名だけでも可）</li>
                                    <li>• エンティティの配置は見やすさを重視（中心に主要なエンティティを配置）</li>
                                    <li>• 線が交差しすぎないように、レイアウトを工夫する</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 8.7 -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.7 概念ER図の完成例
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        オンライン書店システムの概念ER図の完成例を見てみましょう。
                    </p>

                    <div class="bg-slate-100 border border-slate-200 rounded-xl p-6 mb-4">
                        <h3 class="font-semibold text-slate-800 mb-4 flex items-center gap-2">
                            <i class="fas fa-diagram-project text-primary-500"></i>
                            オンライン書店システムの概念ER図
                        </h3>
                        <div class="mermaid">
erDiagram
    CUSTOMER ||--o{ ORDER : "注文する"
    CUSTOMER ||--o{ REVIEW : "投稿する"
    ORDER ||--|{ ORDER_LINE : "含む"
    BOOK ||--o{ ORDER_LINE : "含まれる"
    BOOK ||--o{ REVIEW : "対象となる"
    BOOK }o--|| PUBLISHER : "出版される"
    BOOK }o--o{ AUTHOR : "執筆する"

    CUSTOMER {
        string customer_id PK
        string name
        string email
        string address
    }

    BOOK {
        string book_id PK
        string title
        string isbn
        decimal price
        int stock
    }

    AUTHOR {
        string author_id PK
        string author_name
        string profile
    }

    PUBLISHER {
        string publisher_id PK
        string publisher_name
        string address
    }

    ORDER {
        string order_id PK
        date order_date
        decimal total_amount
        string delivery_status
    }

    ORDER_LINE {
        string order_line_id PK
        int quantity
        decimal unit_price
    }

    REVIEW {
        string review_id PK
        int rating
        string comment
        date post_date
    }
</div>
                        <p class="text-slate-600 text-sm mt-4">
                            <i class="fas fa-info-circle text-blue-500 mr-1"></i>
                            この図では、7つのエンティティとそれらの関係性を表現しています。注文と書籍の多対多関係は、中間エンティティ「ORDER_LINE（注文明細）」を使って解消しています。
                        </p>
                    </div>

                    <div class="bg-emerald-50 border-l-4 border-emerald-500 p-4 my-6 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-star text-emerald-600 mt-1"></i>
                            <div>
                                <p class="text-emerald-900 font-medium">多対多リレーションシップの扱い</p>
                                <p class="text-emerald-800 text-sm mt-1">
                                    「注文 ↔ 書籍」の多対多関係は、実装時に問題になるため、概念ER図の段階で<strong>中間エンティティ（ORDER_LINE）</strong>を導入しています。
                                    これにより「一つの注文に複数の書籍、各書籍の数量も管理できる」というビジネスロジックが明確になります。
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- セクション 8.8 -->
                <section class="prose prose-slate max-w-none mb-8">
                    <h2 class="flex items-center gap-3 text-xl font-semibold text-slate-800
                               border-l-4 border-primary-500 pl-4 mb-4">
                        8.8 概念ER図のレビューポイント
                    </h2>
                    <p class="text-slate-600 leading-relaxed mb-4">
                        作成した概念ER図を、業務担当者やチームメンバーとレビューする際のチェックポイントです。
                    </p>

                    <div class="bg-gradient-to-r from-slate-50 to-blue-50 border border-slate-200 rounded-xl p-6 mb-4">
                        <h3 class="font-semibold text-slate-800 mb-4">レビューチェックリスト</h3>
                        <div class="space-y-3">
                            <div class="flex items-start gap-3">
                                <input type="checkbox" class="mt-1 w-5 h-5 rounded border-blue-300 text-blue-500">
                                <label class="text-slate-700">必要なエンティティはすべて含まれているか？</label>
                            </div>
                            <div class="flex items-start gap-3">
                                <input type="checkbox" class="mt-1 w-5 h-5 rounded border-blue-300 text-blue-500">
                                <label class="text-slate-700">エンティティ名は業務用語として適切か？（業務担当者が理解できるか）</label>
                            </div>
                            <div class="flex items-start gap-3">
                                <input type="checkbox" class="mt-1 w-5 h-5 rounded border-blue-300 text-blue-500">
                                <label class="text-slate-700">リレーションシップは業務フローと一致しているか？</label>
                            </div>
                            <div class="flex items-start gap-3">
                                <input type="checkbox" class="mt-1 w-5 h-5 rounded border-blue-300 text-blue-500">
                                <label class="text-slate-700">カーディナリティ（1対多、多対多）は正しいか？</label>
                            </div>
                            <div class="flex items-start gap-3">
                                <input type="checkbox" class="mt-1 w-5 h-5 rounded border-blue-300 text-blue-500">
                                <label class="text-slate-700">多対多リレーションシップは中間エンティティで解消されているか？</label>
                            </div>
                            <div class="flex items-start gap-3">
                                <input type="checkbox" class="mt-1 w-5 h-5 rounded border-blue-300 text-blue-500">
                                <label class="text-slate-700">将来的な業務拡張を考慮した設計になっているか？</label>
                            </div>
                        </div>
                    </div>

                    <div class="bg-red-50 border-l-4 border-red-500 p-4 my-6 rounded-r-lg">
                        <div class="flex items-start gap-3">
                            <i class="fas fa-exclamation-triangle text-red-600 mt-1"></i>
                            <div>
                                <p class="text-red-900 font-medium">よくある間違い</p>
                                <ul class="text-red-800 text-sm mt-2 space-y-1">
                                    <li>• エンティティに単一の属性しかない（例：「価格」をエンティティにしてしまう）</li>
                                    <li>• リレーションシップの方向性が逆（例：「書籍が顧客を注文する」など）</li>
                                    <li>• カーディナリティが業務実態と合わない</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 理解度確認クイズ -->
                <div class="bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200
                            rounded-xl p-5 my-6 overflow-hidden">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-10 h-10 bg-blue-500 rounded-lg
                                    flex items-center justify-center">
                            <i class="fas fa-question text-white"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <h3 class="text-lg font-semibold text-blue-800 mb-4">理解度確認クイズ</h3>
                            <ol class="space-y-4">
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2">Q1. 概念ER図の主な目的は何ですか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700">
                                            回答を表示
                                        </summary>
                                        <div class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3">
                                            <p><strong>ビジネスの視点でデータ構造と関係性を明確にすること</strong>です。</p>
                                            <p class="mt-1">技術的な詳細は省き、業務担当者も含めた関係者全員が理解できる形で、「どんな情報を管理するか」「情報同士がどう関連するか」を表現します。これにより、業務要件とシステム設計の合意形成を図ります。</p>
                                        </div>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2">Q2. 業務要件からエンティティを抽出する際、何に注目すると良いですか？</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700">
                                            回答を表示
                                        </summary>
                                        <div class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3">
                                            <p><strong>要件文に登場する「名詞」</strong>に注目します。</p>
                                            <p class="mt-1">特に、業務で繰り返し扱われる「もの」や「こと」で、複数のデータ項目（属性）を持つものをエンティティにします。例：顧客、商品、注文など。単一の値（例：注文日、価格）は属性であり、エンティティではありません。</p>
                                        </div>
                                    </details>
                                </li>
                                <li class="text-blue-900">
                                    <p class="font-medium mb-2">Q3. オンライン書店システムで、「注文」と「書籍」の関係が多対多になる理由を説明してください。</p>
                                    <details class="mt-2">
                                        <summary class="cursor-pointer text-blue-600 hover:text-blue-700">
                                            回答を表示
                                        </summary>
                                        <div class="mt-2 pl-4 text-blue-800 bg-blue-100 rounded-lg p-3">
                                            <p>以下の2つの理由から多対多関係になります：</p>
                                            <ul class="list-disc list-inside mt-2 space-y-1">
                                                <li><strong>一つの注文に複数の書籍が含まれる</strong>：顧客は一度の注文で複数の書籍を購入できる</li>
                                                <li><strong>一つの書籍は複数の注文に含まれる</strong>：同じ書籍が異なる顧客の異なる注文で購入される</li>
                                            </ul>
                                            <p class="mt-2">この多対多関係は、実装時には「注文明細（ORDER_LINE）」という中間エンティティを使って解消します。</p>
                                        </div>
                                    </details>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>

                <!-- 章のまとめ -->
                <div class="bg-gradient-to-r from-slate-50 to-blue-50 border border-slate-200 rounded-xl p-6 my-8">
                    <h3 class="text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2">
                        <i class="fas fa-bookmark text-primary-500"></i>
                        第8章のまとめ
                    </h3>
                    <ul class="space-y-2 text-slate-700">
                        <li class="flex items-start gap-2">
                            <i class="fas fa-check text-primary-500 mt-1"></i>
                            <span><strong>概念ER図</strong>は、技術詳細を省いたビジネス視点でのデータ構造表現である</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-check text-primary-500 mt-1"></i>
                            <span>ER図設計は、<strong>概念ER図 → 論理ER図 → 物理ER図</strong>の3段階で進める</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-check text-primary-500 mt-1"></i>
                            <span>業務要件から<strong>エンティティを抽出</strong>する際は、要件文の名詞に注目する</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-check text-primary-500 mt-1"></i>
                            <span><strong>リレーションシップの特定</strong>には、業務フローや動詞（注文する、執筆する等）が手がかりになる</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-check text-primary-500 mt-1"></i>
                            <span>多対多リレーションシップは<strong>中間エンティティ</strong>を使って解消する</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-check text-primary-500 mt-1"></i>
                            <span>完成した概念ER図は、業務担当者とレビューして合意形成を図ることが重要</span>
                        </li>
                    </ul>
                </div>

                <!-- 章間ナビゲーション -->
                <nav class="flex items-center justify-between pt-6 mt-6 border-t border-slate-200">
                    <a href="er-diagram-learning-material-07.html"
                       class="group flex items-center gap-3 px-4 py-3 rounded-xl
                              bg-slate-100 hover:bg-slate-200 transition-colors">
                        <i class="fas fa-arrow-left text-slate-400 group-hover:text-slate-600 transition-transform group-hover:-translate-x-1"></i>
                        <div>
                            <span class="text-xs text-slate-500 block">前の章</span>
                            <span class="text-slate-700 font-medium">第7章: 主キーと外部キー</span>
                        </div>
                    </a>
                    <a href="er-diagram-learning-material-09.html"
                       class="group flex items-center gap-3 px-4 py-3 rounded-xl
                              bg-primary-500 hover:bg-primary-600 text-white transition-colors">
                        <div class="text-right">
                            <span class="text-xs text-primary-100 block">次の章</span>
                            <span class="font-medium">第9章: 論理ER図への展開</span>
                        </div>
                        <i class="fas fa-arrow-right transition-transform group-hover:translate-x-1"></i>
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <!-- フッター -->
    <footer class="bg-slate-800 text-slate-300">
        <div class="max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <p class="text-sm text-center md:text-left">
                    &copy; 2025 F-Circle. All rights reserved.<br>
                    本資料はAIツールを活用し、人間による編集・監修のもと作成されています。
                </p>
                <div class="flex items-center gap-4">
                    <a href="#" class="hover:text-white transition-colors">
                        <i class="fab fa-github text-xl"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- スクロールトップボタン -->
    <button id="scroll-top-btn"
            class="fixed bottom-6 right-6 w-12 h-12 bg-primary-500 text-white rounded-full
                   shadow-lg hover:bg-primary-600 transition-all duration-300
                   opacity-0 invisible translate-y-4"
            onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- サイドバー生成 -->
    <script src="sidebar-content.js"></script>

    <!-- 共通JavaScript -->
    <script src="main.js"></script>

    <!-- 描画ツール -->
    <script src="drawing-tool.js"></script>
</body>
</html>
