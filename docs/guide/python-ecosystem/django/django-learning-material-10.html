<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Djangoå­¦ç¿’æ•™æ ç¬¬10ç«  - é«˜åº¦ãªæ©Ÿèƒ½ã¨æœ€é©åŒ–</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <!-- ã‚«ã‚¹ã‚¿ãƒ CSS -->
    <style>
        /* ãƒ™ãƒ¼ã‚¹ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .navbar {
            background-color: #2e7d32;
        }

        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
            background-color: #f8f9fa;
        }

        /* ã‚¿ã‚¤ãƒˆãƒ« */
        .chapter-title {
            color: #2e7d32;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #2e7d32;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #388e3c;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒœãƒƒã‚¯ã‚¹ */
        .quiz-container {
            background-color: #e8f5e9;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #2e7d32;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        /* ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ©ã‚¤ãƒˆ */
        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .nav-link.active {
            background-color: #2e7d32 !important;
            color: white !important;
        }
    </style>
</head>
<body>
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand">
                <strong>Djangoå­¦ç¿’æ•™æ</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>å­¦ç¿’ç« </span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="django-learning-material-1.html">
                                ç¬¬1ç« : Djangoå…¥é–€ã¨ç’°å¢ƒæ§‹ç¯‰
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="django-learning-material-2.html">
                                ç¬¬2ç« : ãƒ¢ãƒ‡ãƒ«ã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="django-learning-material-3.html">
                                ç¬¬3ç« : ãƒ“ãƒ¥ãƒ¼ã¨URLãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="django-learning-material-4.html">
                                ç¬¬4ç« : ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰çµ±åˆ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="django-learning-material-5.html">
                                ç¬¬5ç« : ãƒ•ã‚©ãƒ¼ãƒ ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›å‡¦ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="django-learning-material-6.html">
                                ç¬¬6ç« : èªè¨¼ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="django-learning-material-7.html">
                                ç¬¬7ç« : Django REST Frameworkå…¥é–€
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="django-learning-material-8.html">
                                ç¬¬8ç« : ãƒ†ã‚¹ãƒˆã¨ãƒ‡ãƒãƒƒã‚°
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="django-learning-material-9.html">
                                ç¬¬9ç« : ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã¨æœ¬ç•ªç’°å¢ƒè¨­å®š
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="django-learning-material-10.html">
                                ç¬¬10ç« : é«˜åº¦ãªæ©Ÿèƒ½ã¨æœ€é©åŒ–
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- ç« ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">ç¬¬10ç« : é«˜åº¦ãªæ©Ÿèƒ½ã¨æœ€é©åŒ–</h1>
                </div>

                <div id="chapter10">
                    <!-- ç« ã‚¿ã‚¤ãƒˆãƒ« -->
                    <h2 class="chapter-title">ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãƒ¬ãƒ™ãƒ«ã®Djangoé–‹ç™º</h2>
                    
                    <!-- å­¦ç¿’ç›®æ¨™ -->
                    <div class="highlight">
                        <h5>ã“ã®ç« ã§å­¦ã¶ã“ã¨</h5>
                        <ul>
                            <li>ã‚«ã‚¹ã‚¿ãƒ ç®¡ç†ã‚³ãƒãƒ³ãƒ‰ã®ä½œæˆã¨æ´»ç”¨</li>
                            <li>ã‚·ã‚°ãƒŠãƒ«ã«ã‚ˆã‚‹ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</li>
                            <li>ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã«ã‚ˆã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</li>
                            <li>ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–</li>
                            <li>éåŒæœŸå‡¦ç†ã¨Celeryã«ã‚ˆã‚‹ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼</li>
                            <li>å›½éš›åŒ–ï¼ˆi18nï¼‰ã¨å¤šè¨€èªå¯¾å¿œ</li>
                        </ul>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³1: ã‚«ã‚¹ã‚¿ãƒ ç®¡ç†ã‚³ãƒãƒ³ãƒ‰ -->
                    <h3 class="section-title">10.1 ã‚«ã‚¹ã‚¿ãƒ ç®¡ç†ã‚³ãƒãƒ³ãƒ‰ã®ä½œæˆ</h3>
                    
                    <p>Djangoç®¡ç†ã‚³ãƒãƒ³ãƒ‰ã¯ã€ãƒãƒƒãƒå‡¦ç†ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã€å®šæœŸå®Ÿè¡Œã‚¿ã‚¹ã‚¯ãªã©ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã®å¼·åŠ›ãªæ©Ÿèƒ½ã§ã™ã€‚<code>manage.py</code>ã‚’é€šã˜ã¦å®Ÿè¡Œã§ãã€Djangoã®ç’°å¢ƒè¨­å®šã¨ORMæ©Ÿèƒ½ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚</p>

                    <h4>ç®¡ç†ã‚³ãƒãƒ³ãƒ‰ã®æ§‹é€ ã¨ä½œæˆæ–¹æ³•</h4>
                    <div class="mermaid">
                        graph TD
                            A[ã‚«ã‚¹ã‚¿ãƒ ç®¡ç†ã‚³ãƒãƒ³ãƒ‰] --> B[BaseCommandç¶™æ‰¿]
                            A --> C[add_arguments]
                            A --> D[handle]
                            
                            B --> B1[django.core.management.base.BaseCommand<br/>ã‚³ãƒãƒ³ãƒ‰ã®åŸºåº•ã‚¯ãƒ©ã‚¹]
                            C --> C1[ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®å®šç¾©<br/>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è¨­å®š]
                            D --> D1[å®Ÿéš›ã®å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯<br/>ä¾‹å¤–å‡¦ç†ãƒ»ãƒ­ã‚°å‡ºåŠ›]
                    </div>

                    <pre class="code-block"><code class="language-python"># management/commands/cleanup_old_data.py
from django.core.management.base import BaseCommand, CommandError
from django.db import transaction
from django.utils import timezone
from datetime import timedelta
import logging
from blog.models import Article, Comment

logger = logging.getLogger('django.command')

class Command(BaseCommand):
    """å¤ã„ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã™ã‚‹ç®¡ç†ã‚³ãƒãƒ³ãƒ‰"""
    help = 'æŒ‡å®šæ—¥æ•°ã‚ˆã‚Šå¤ã„ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™'
    
    def add_arguments(self, parser):
        """ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®å®šç¾©"""
        parser.add_argument(
            '--days',
            type=int,
            default=365,
            help='å‰Šé™¤å¯¾è±¡ã¨ãªã‚‹æ—¥æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 365æ—¥ï¼‰'
        )
        
        parser.add_argument(
            '--dry-run',
            action='store_true',
            help='å®Ÿéš›ã®å‰Šé™¤ã¯è¡Œã‚ãšã€å‰Šé™¤å¯¾è±¡ã®ã¿ã‚’è¡¨ç¤º'
        )
        
        parser.add_argument(
            '--model',
            choices=['article', 'comment', 'all'],
            default='all',
            help='å‰Šé™¤å¯¾è±¡ã®ãƒ¢ãƒ‡ãƒ«'
        )
        
        parser.add_argument(
            '--batch-size',
            type=int,
            default=1000,
            help='ä¸€åº¦ã«å‡¦ç†ã™ã‚‹ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°'
        )
    
    def handle(self, *args, **options):
        """ãƒ¡ã‚¤ãƒ³å‡¦ç†"""
        days = options['days']
        dry_run = options['dry_run']
        model = options['model']
        batch_size = options['batch_size']
        
        # å‰Šé™¤å¯¾è±¡æ—¥ä»˜ã®è¨ˆç®—
        cutoff_date = timezone.now() - timedelta(days=days)
        
        self.stdout.write(
            self.style.SUCCESS(f'å¤ã„ãƒ‡ãƒ¼ã‚¿å‰Šé™¤å‡¦ç†ã‚’é–‹å§‹ã—ã¾ã™')
        )
        self.stdout.write(f'å¯¾è±¡æ—¥ä»˜: {cutoff_date.strftime("%Y-%m-%d")} ã‚ˆã‚Šå‰')
        self.stdout.write(f'ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³: {dry_run}')
        
        try:
            with transaction.atomic():
                if model in ['article', 'all']:
                    self._cleanup_articles(cutoff_date, dry_run, batch_size)
                
                if model in ['comment', 'all']:
                    self._cleanup_comments(cutoff_date, dry_run, batch_size)
                
                if dry_run:
                    # ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ã®å ´åˆã¯ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
                    transaction.set_rollback(True)
                    
        except Exception as e:
            logger.error(f'ãƒ‡ãƒ¼ã‚¿å‰Šé™¤å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ: {str(e)}')
            raise CommandError(f'å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸ: {str(e)}')
        
        self.stdout.write(
            self.style.SUCCESS('ãƒ‡ãƒ¼ã‚¿å‰Šé™¤å‡¦ç†ãŒå®Œäº†ã—ã¾ã—ãŸ')
        )
    
    def _cleanup_articles(self, cutoff_date, dry_run, batch_size):
        """å¤ã„è¨˜äº‹ã®å‰Šé™¤"""
        articles = Article.objects.filter(
            created_at__lt=cutoff_date,
            is_published=False  # éå…¬é–‹è¨˜äº‹ã®ã¿
        )
        
        total_count = articles.count()
        if total_count == 0:
            self.stdout.write('å‰Šé™¤å¯¾è±¡ã®è¨˜äº‹ã¯ã‚ã‚Šã¾ã›ã‚“')
            return
        
        self.stdout.write(f'å‰Šé™¤å¯¾è±¡è¨˜äº‹æ•°: {total_count}')
        
        if not dry_run:
            deleted_count = 0
            while deleted_count < total_count:
                batch = articles[:batch_size]
                batch_ids = list(batch.values_list('id', flat=True))
                
                if not batch_ids:
                    break
                
                Article.objects.filter(id__in=batch_ids).delete()
                deleted_count += len(batch_ids)
                
                self.stdout.write(f'é€²æ—: {deleted_count}/{total_count}')
            
            logger.info(f'è¨˜äº‹ã‚’{deleted_count}ä»¶å‰Šé™¤ã—ã¾ã—ãŸ')
    
    def _cleanup_comments(self, cutoff_date, dry_run, batch_size):
        """å¤ã„ã‚³ãƒ¡ãƒ³ãƒˆã®å‰Šé™¤"""
        comments = Comment.objects.filter(created_at__lt=cutoff_date)
        total_count = comments.count()
        
        if total_count == 0:
            self.stdout.write('å‰Šé™¤å¯¾è±¡ã®ã‚³ãƒ¡ãƒ³ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“')
            return
        
        self.stdout.write(f'å‰Šé™¤å¯¾è±¡ã‚³ãƒ¡ãƒ³ãƒˆæ•°: {total_count}')
        
        if not dry_run:
            deleted_count = 0
            while deleted_count < total_count:
                batch = comments[:batch_size]
                batch_ids = list(batch.values_list('id', flat=True))
                
                if not batch_ids:
                    break
                
                Comment.objects.filter(id__in=batch_ids).delete()
                deleted_count += len(batch_ids)
                
                self.stdout.write(f'é€²æ—: {deleted_count}/{total_count}')
            
            logger.info(f'ã‚³ãƒ¡ãƒ³ãƒˆã‚’{deleted_count}ä»¶å‰Šé™¤ã—ã¾ã—ãŸ')

# ä½¿ç”¨ä¾‹
# python manage.py cleanup_old_data --days=90 --dry-run
# python manage.py cleanup_old_data --model=article --batch-size=500</code></pre>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³2: Djangoã‚·ã‚°ãƒŠãƒ« -->
                    <h3 class="section-title">10.2 ã‚·ã‚°ãƒŠãƒ«ã«ã‚ˆã‚‹ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</h3>
                    
                    <p>Djangoã‚·ã‚°ãƒŠãƒ«ã¯ã€ç‰¹å®šã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆãƒ¢ãƒ‡ãƒ«ã®ä¿å­˜ã€å‰Šé™¤ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³ãªã©ï¼‰ãŒç™ºç”Ÿã—ãŸæ™‚ã«è‡ªå‹•çš„ã«å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã§ã™ã€‚ç–çµåˆãªã‚³ãƒ¼ãƒ‰ã®è¨­è¨ˆã¨ã‚³ãƒ¼ãƒ‰ã®å†åˆ©ç”¨æ€§å‘ä¸Šã«å¯„ä¸ã—ã¾ã™ã€‚</p>

                    <h4>ä¸»è¦ãªDjangoçµ„ã¿è¾¼ã¿ã‚·ã‚°ãƒŠãƒ«</h4>
                    <div class="mermaid">
                        graph TD
                            A[Djangoã‚·ã‚°ãƒŠãƒ«] --> B[ãƒ¢ãƒ‡ãƒ«ã‚·ã‚°ãƒŠãƒ«]
                            A --> C[èªè¨¼ã‚·ã‚°ãƒŠãƒ«]
                            A --> D[ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚·ã‚°ãƒŠãƒ«]
                            
                            B --> B1[pre_save / post_save<br/>pre_delete / post_delete<br/>m2m_changed]
                            C --> C1[user_logged_in<br/>user_logged_out<br/>user_login_failed]
                            D --> D1[request_started<br/>request_finished<br/>got_request_exception]
                    </div>

                    <pre class="code-block"><code class="language-python"># signals.py
from django.db.models.signals import post_save, pre_delete, m2m_changed
from django.contrib.auth.signals import user_logged_in, user_logged_out
from django.dispatch import receiver
from django.contrib.auth.models import User
from django.core.mail import send_mail
from django.utils import timezone
import logging
from .models import Article, UserProfile, Tag

logger = logging.getLogger('blog.signals')

@receiver(post_save, sender=User)
def create_user_profile(sender, instance, created, **kwargs):
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆæ™‚ã«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’è‡ªå‹•ä½œæˆ"""
    if created:
        UserProfile.objects.create(user=instance)
        logger.info(f'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸ: {instance.username}')

@receiver(post_save, sender=User)
def save_user_profile(sender, instance, **kwargs):
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¿å­˜æ™‚ã«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚‚ä¿å­˜"""
    try:
        instance.userprofile.save()
    except UserProfile.DoesNotExist:
        # ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ä½œæˆ
        UserProfile.objects.create(user=instance)

@receiver(post_save, sender=Article)
def article_published_notification(sender, instance, created, **kwargs):
    """è¨˜äº‹å…¬é–‹æ™‚ã®é€šçŸ¥å‡¦ç†"""
    if not created and instance.is_published:
        # å‰ã®çŠ¶æ…‹ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å†å–å¾—
        try:
            old_instance = Article.objects.get(pk=instance.pk)
            if hasattr(old_instance, '_state') and old_instance._state.adding:
                return  # æ–°è¦ä½œæˆã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
        except Article.DoesNotExist:
            return
        
        # ç®¡ç†è€…ã¸ã®é€šçŸ¥ãƒ¡ãƒ¼ãƒ«
        subject = f'æ–°ã—ã„è¨˜äº‹ãŒå…¬é–‹ã•ã‚Œã¾ã—ãŸ: {instance.title}'
        message = f'''
        è¨˜äº‹ã€Œ{instance.title}ã€ãŒå…¬é–‹ã•ã‚Œã¾ã—ãŸã€‚
        
        è‘—è€…: {instance.author.get_full_name() or instance.author.username}
        ã‚«ãƒ†ã‚´ãƒª: {instance.category.name}
        å…¬é–‹æ—¥æ™‚: {instance.updated_at.strftime("%Yå¹´%mæœˆ%dæ—¥ %Hæ™‚%Måˆ†")}
        
        è¨˜äº‹ã‚’ç¢ºèªã™ã‚‹: http://yourdomain.com{instance.get_absolute_url()}
        '''
        
        try:
            send_mail(
                subject,
                message,
                'noreply@yourdomain.com',
                ['admin@yourdomain.com'],
                fail_silently=False,
            )
            logger.info(f'è¨˜äº‹å…¬é–‹é€šçŸ¥ã‚’é€ä¿¡ã—ã¾ã—ãŸ: {instance.title}')
        except Exception as e:
            logger.error(f'è¨˜äº‹å…¬é–‹é€šçŸ¥ã®é€ä¿¡ã«å¤±æ•—: {str(e)}')

@receiver(pre_delete, sender=Article)
def article_delete_log(sender, instance, **kwargs):
    """è¨˜äº‹å‰Šé™¤æ™‚ã®ãƒ­ã‚°è¨˜éŒ²"""
    logger.warning(
        f'è¨˜äº‹ãŒå‰Šé™¤ã•ã‚Œã¾ã™: {instance.title} (ID: {instance.id}, è‘—è€…: {instance.author.username})'
    )

@receiver(m2m_changed, sender=Article.tags.through)
def article_tags_changed(sender, instance, action, pk_set, **kwargs):
    """è¨˜äº‹ã®ã‚¿ã‚°å¤‰æ›´æ™‚ã®å‡¦ç†"""
    if action == "post_add":
        added_tags = Tag.objects.filter(pk__in=pk_set)
        logger.info(
            f'è¨˜äº‹ã€Œ{instance.title}ã€ã«ã‚¿ã‚°ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸ: {[tag.name for tag in added_tags]}'
        )
    elif action == "post_remove":
        removed_tags = Tag.objects.filter(pk__in=pk_set)
        logger.info(
            f'è¨˜äº‹ã€Œ{instance.title}ã€ã‹ã‚‰ã‚¿ã‚°ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸ: {[tag.name for tag in removed_tags]}'
        )

@receiver(user_logged_in)
def user_login_handler(sender, request, user, **kwargs):
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®å‡¦ç†"""
    # æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ™‚åˆ»ã‚’æ›´æ–°ï¼ˆDjangoã§è‡ªå‹•çš„ã«è¡Œã‚ã‚Œã‚‹ãŒã€ã‚«ã‚¹ã‚¿ãƒ å‡¦ç†ã‚‚å¯èƒ½ï¼‰
    user.last_login = timezone.now()
    user.save()
    
    # ãƒ­ã‚°ã‚¤ãƒ³è¨˜éŒ²
    logger.info(f'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸ: {user.username} (IP: {request.META.get("REMOTE_ADDR")})')
    
    # åˆå›ãƒ­ã‚°ã‚¤ãƒ³ã®å ´åˆã®å‡¦ç†
    if user.last_login is None:
        # ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€ä¿¡ãªã©
        pass

@receiver(user_logged_out)
def user_logout_handler(sender, request, user, **kwargs):
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ™‚ã®å‡¦ç†"""
    if user:
        logger.info(f'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ: {user.username}')

# ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚°ãƒŠãƒ«ã®å®šç¾©
from django.dispatch import Signal

# è¨˜äº‹ã®ãƒ“ãƒ¥ãƒ¼æ•°å¢—åŠ ã‚·ã‚°ãƒŠãƒ«
article_viewed = Signal()

@receiver(article_viewed)
def increment_article_views(sender, article, user, **kwargs):
    """è¨˜äº‹é–²è¦§æ™‚ã®ãƒ“ãƒ¥ãƒ¼æ•°å¢—åŠ """
    # ãƒ“ãƒ¥ãƒ¼æ•°ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ç®¡ç†ï¼ˆRedisç­‰ã‚’ä½¿ç”¨ï¼‰
    from django.core.cache import cache
    
    cache_key = f'article_views:{article.id}'
    current_views = cache.get(cache_key, 0)
    cache.set(cache_key, current_views + 1, timeout=3600)  # 1æ™‚é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥
    
    logger.debug(f'è¨˜äº‹ã€Œ{article.title}ã€ã®é–²è¦§æ•°: {current_views + 1}')

# apps.py ã§ ã‚·ã‚°ãƒŠãƒ«ã‚’ç™»éŒ²
class BlogConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'blog'
    
    def ready(self):
        import blog.signals  # ã‚·ã‚°ãƒŠãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</code></pre>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³3: ã‚«ã‚¹ã‚¿ãƒ ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ -->
                    <h3 class="section-title">10.3 ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã«ã‚ˆã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†</h3>
                    
                    <p>ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¯ã€Djangoã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«ç‹¬è‡ªã®å‡¦ç†ã‚’æŒŸã¿è¾¼ã‚€å¼·åŠ›ãªä»•çµ„ã¿ã§ã™ã€‚èªè¨¼ã€ãƒ­ã‚°å‡ºåŠ›ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ãªã©ã‚’å®Ÿè£…ã§ãã¾ã™ã€‚</p>

                    <pre class="code-block"><code class="language-python"># middleware.py
import time
import logging
from django.utils.deprecation import MiddlewareMixin
from django.http import HttpResponseForbidden
from django.core.cache import cache
from django.utils import timezone
from django.contrib.auth.models import AnonymousUser

logger = logging.getLogger('blog.middleware')

class RequestLoggingMiddleware:
    """ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ­ã‚°ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢"""
    
    def __init__(self, get_response):
        self.get_response = get_response
    
    def __call__(self, request):
        # ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‰å‡¦ç†
        start_time = time.time()
        request.start_time = start_time
        
        # ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‡¦ç†
        response = self.get_response(request)
        
        # ãƒªã‚¯ã‚¨ã‚¹ãƒˆå¾Œå‡¦ç†
        duration = time.time() - start_time
        
        # ãƒ­ã‚°å‡ºåŠ›
        logger.info(
            f'{request.method} {request.path} '
            f'Status: {response.status_code} '
            f'Duration: {duration:.3f}s '
            f'User: {request.user if not isinstance(request.user, AnonymousUser) else "Anonymous"} '
            f'IP: {request.META.get("REMOTE_ADDR", "Unknown")}'
        )
        
        return response

class RateLimitMiddleware:
    """ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢"""
    
    def __init__(self, get_response):
        self.get_response = get_response
        self.max_requests = 100  # 1æ™‚é–“ã‚ãŸã‚Šã®æœ€å¤§ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°
        self.window = 3600  # 1æ™‚é–“ï¼ˆç§’ï¼‰
    
    def __call__(self, request):
        # IPã‚¢ãƒ‰ãƒ¬ã‚¹å–å¾—
        ip_address = self.get_client_ip(request)
        cache_key = f'rate_limit:{ip_address}'
        
        # ç¾åœ¨ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã‚’å–å¾—
        current_requests = cache.get(cache_key, 0)
        
        if current_requests >= self.max_requests:
            logger.warning(f'ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«é”ã—ã¾ã—ãŸ: IP {ip_address}')
            return HttpResponseForbidden('Rate limit exceeded. Try again later.')
        
        # ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã‚’å¢—åŠ 
        cache.set(cache_key, current_requests + 1, timeout=self.window)
        
        response = self.get_response(request)
        return response
    
    def get_client_ip(self, request):
        """ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—"""
        x_forwarded_for = request.META.get('HTTP_X_FORWARDED_FOR')
        if x_forwarded_for:
            ip = x_forwarded_for.split(',')[0].strip()
        else:
            ip = request.META.get('REMOTE_ADDR')
        return ip

class SecurityHeadersMiddleware:
    """ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢"""
    
    def __init__(self, get_response):
        self.get_response = get_response
    
    def __call__(self, request):
        response = self.get_response(request)
        
        # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ã®è¿½åŠ 
        response['X-Content-Type-Options'] = 'nosniff'
        response['X-Frame-Options'] = 'DENY'
        response['X-XSS-Protection'] = '1; mode=block'
        response['Referrer-Policy'] = 'strict-origin-when-cross-origin'
        response['Content-Security-Policy'] = (
            "default-src 'self'; "
            "script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; "
            "style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; "
            "font-src 'self' https://fonts.gstatic.com; "
            "img-src 'self' data: https:;"
        )
        
        return response

class MaintenanceModeMiddleware:
    """ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢"""
    
    def __init__(self, get_response):
        self.get_response = get_response
    
    def __call__(self, request):
        # ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰ã®ç¢ºèª
        maintenance_mode = cache.get('maintenance_mode', False)
        
        if maintenance_mode:
            # ç®¡ç†è€…ã¯é™¤å¤–
            if not (request.user.is_authenticated and request.user.is_staff):
                from django.template.response import TemplateResponse
                return TemplateResponse(
                    request, 
                    'maintenance.html', 
                    status=503
                )
        
        return self.get_response(request)

# settings.py ã§ã®è¨­å®š
MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'blog.middleware.SecurityHeadersMiddleware',
    'blog.middleware.MaintenanceModeMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'blog.middleware.RateLimitMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
    'blog.middleware.RequestLoggingMiddleware',
]</code></pre>

                    <!-- å®Ÿç¿’1 -->
                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 10-1: ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰</h5>
                        <p>ã“ã®å®Ÿç¿’ã§ã¯ã€ã‚·ã‚°ãƒŠãƒ«ã¨ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’æ´»ç”¨ã—ãŸã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚</p>
                        
                        <h6>æ‰‹é †</h6>
                        <ol>
                            <li>ãƒ‡ãƒ¼ã‚¿ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ç”¨ã®ã‚«ã‚¹ã‚¿ãƒ ç®¡ç†ã‚³ãƒãƒ³ãƒ‰ã‚’ä½œæˆã™ã‚‹</li>
                            <li>ãƒ¢ãƒ‡ãƒ«æ“ä½œã«é€£å‹•ã—ãŸã‚·ã‚°ãƒŠãƒ«å‡¦ç†ã‚’å®Ÿè£…ã™ã‚‹</li>
                            <li>ãƒªã‚¯ã‚¨ã‚¹ãƒˆç›£è¦–ç”¨ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’å®Ÿè£…ã™ã‚‹</li>
                            <li>ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’è¿½åŠ ã™ã‚‹</li>
                            <li>ãƒ­ã‚°å‡ºåŠ›ã¨ã‚¨ãƒ©ãƒ¼é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ã‚’çµ±åˆã™ã‚‹</li>
                        </ol>

                        <h6>æœŸå¾…ã•ã‚Œã‚‹çµæœ</h6>
                        <p>ã‚¤ãƒ™ãƒ³ãƒˆãƒ‰ãƒªãƒ–ãƒ³ãªå‡¦ç†ãŒæ­£å¸¸ã«å‹•ä½œã—ã€é©åˆ‡ãªãƒ­ã‚°å‡ºåŠ›ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ãŒæ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³4: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ -->
                    <h3 class="section-title">10.4 ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–</h3>
                    
                    <p>ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯ã€Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’åŠ‡çš„ã«å‘ä¸Šã•ã›ã‚‹é‡è¦ãªæœ€é©åŒ–æ‰‹æ³•ã§ã™ã€‚Djangoã§ã¯ã€è¤‡æ•°ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ¬ãƒ™ãƒ«ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒæä¾›ã•ã‚Œã¦ãŠã‚Šã€ç”¨é€”ã«å¿œã˜ãŸæœ€é©ãªæˆ¦ç•¥ã‚’é¸æŠã§ãã¾ã™ã€‚</p>

                    <h4>ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã®ç¨®é¡</h4>
                    <div class="mermaid">
                        graph TD
                            A[Djangoã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥] --> B[ã‚µã‚¤ãƒˆå…¨ä½“ã‚­ãƒ£ãƒƒã‚·ãƒ¥]
                            A --> C[ãƒ“ãƒ¥ãƒ¼ãƒ¬ãƒ™ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥]
                            A --> D[ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥]
                            A --> E[ä½ãƒ¬ãƒ™ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥API]
                            
                            B --> B1[å…¨ãƒšãƒ¼ã‚¸ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥<br/>é«˜é€Ÿã ãŒæŸ”è»Ÿæ€§ä½]
                            C --> C1[å€‹åˆ¥ãƒ“ãƒ¥ãƒ¼ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥<br/>ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã§ç°¡å˜å®Ÿè£…]
                            D --> D1[ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä¸€éƒ¨ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥<br/>å‹•çš„éƒ¨åˆ†ã¨é™çš„éƒ¨åˆ†ã‚’åˆ†é›¢]
                            E --> E1[ãƒ—ãƒ­ã‚°ãƒ©ãƒ å†…ã§ä»»æ„ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥<br/>æœ€å¤§ã®æŸ”è»Ÿæ€§]
                    </div>

                    <pre class="code-block"><code class="language-python"># settings.py - Redis ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®š
CACHES = {
    'default': {
        'BACKEND': 'django_redis.cache.RedisCache',
        'LOCATION': 'redis://127.0.0.1:6379/1',
        'OPTIONS': {
            'CLIENT_CLASS': 'django_redis.client.DefaultClient',
            'CONNECTION_POOL_KWARGS': {
                'max_connections': 100,
                'retry_on_timeout': True,
            },
            'COMPRESSOR': 'django_redis.compressors.zlib.ZlibCompressor',
            'IGNORE_EXCEPTIONS': True,
        }
    },
    'session': {
        'BACKEND': 'django_redis.cache.RedisCache',
        'LOCATION': 'redis://127.0.0.1:6379/2',
        'OPTIONS': {
            'CLIENT_CLASS': 'django_redis.client.DefaultClient',
        }
    }
}

# ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ä½¿ç”¨
SESSION_ENGINE = 'django.contrib.sessions.backends.cache'
SESSION_CACHE_ALIAS = 'session'

# views.py - å„ç¨®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å®Ÿè£…ä¾‹
from django.views.decorators.cache import cache_page, cache_control
from django.views.decorators.vary import vary_on_headers
from django.core.cache import cache
from django.utils.cache import get_cache_key
import hashlib

# ãƒ“ãƒ¥ãƒ¼ãƒ¬ãƒ™ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆ15åˆ†ï¼‰
@cache_page(60 * 15)
@vary_on_headers('User-Agent', 'Accept-Language')
def article_list(request):
    """è¨˜äº‹ä¸€è¦§ãƒšãƒ¼ã‚¸ï¼ˆå…¨ä½“ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰"""
    articles = Article.objects.select_related('author', 'category').filter(
        is_published=True
    ).order_by('-created_at')[:20]
    
    return render(request, 'blog/article_list.html', {
        'articles': articles
    })

# æ¡ä»¶ä»˜ãã‚­ãƒ£ãƒƒã‚·ãƒ¥
def article_detail(request, slug):
    """è¨˜äº‹è©³ç´°ãƒšãƒ¼ã‚¸ï¼ˆèªè¨¼çŠ¶æ…‹ã«å¿œã˜ãŸã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰"""
    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼ã®ç”Ÿæˆ
    cache_key = f'article_detail:{slug}:{request.user.is_authenticated}'
    cached_data = cache.get(cache_key)
    
    if cached_data:
        return cached_data
    
    try:
        article = Article.objects.select_related('author', 'category').get(
            slug=slug, is_published=True
        )
    except Article.DoesNotExist:
        raise Http404("è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
    
    # é–¢é€£è¨˜äº‹ã®å–å¾—ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ä½¿ç”¨ï¼‰
    related_articles = get_related_articles(article)
    
    context = {
        'article': article,
        'related_articles': related_articles,
    }
    
    response = render(request, 'blog/article_detail.html', context)
    
    # ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆ5åˆ†é–“ï¼‰
    cache.set(cache_key, response, timeout=300)
    
    return response

def get_related_articles(article):
    """é–¢é€£è¨˜äº‹å–å¾—ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ä»˜ãï¼‰"""
    cache_key = f'related_articles:{article.id}'
    related = cache.get(cache_key)
    
    if related is None:
        # åŒã˜ã‚«ãƒ†ã‚´ãƒªã®è¨˜äº‹ã‚’å–å¾—
        related = list(Article.objects.filter(
            category=article.category,
            is_published=True
        ).exclude(
            id=article.id
        ).select_related('author')[:5])
        
        # 30åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥
        cache.set(cache_key, related, timeout=1800)
    
    return related

# ä½ãƒ¬ãƒ™ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥APIä½¿ç”¨ä¾‹
class ArticleService:
    """è¨˜äº‹é–¢é€£ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯"""
    
    @staticmethod
    def get_popular_articles(limit=10):
        """äººæ°—è¨˜äº‹å–å¾—ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ä»˜ãï¼‰"""
        cache_key = f'popular_articles:{limit}'
        articles = cache.get(cache_key)
        
        if articles is None:
            # ãƒ“ãƒ¥ãƒ¼æ•°ã§ã‚½ãƒ¼ãƒˆï¼ˆå®Ÿéš›ã®å®Ÿè£…ã§ã¯åˆ¥ãƒ†ãƒ¼ãƒ–ãƒ«ã§ç®¡ç†ï¼‰
            articles = list(Article.objects.filter(
                is_published=True
            ).select_related('author', 'category').order_by(
                '-created_at'  # å®Ÿéš›ã¯ãƒ“ãƒ¥ãƒ¼æ•°ã§ã‚½ãƒ¼ãƒˆ
            )[:limit])
            
            # 1æ™‚é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥
            cache.set(cache_key, articles, timeout=3600)
        
        return articles
    
    @staticmethod
    def invalidate_article_cache(article):
        """è¨˜äº‹é–¢é€£ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡åŠ¹åŒ–"""
        # å€‹åˆ¥è¨˜äº‹ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤
        cache.delete_many([
            f'article_detail:{article.slug}:True',
            f'article_detail:{article.slug}:False',
            f'related_articles:{article.id}',
        ])
        
        # ä¸€è¦§ç³»ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚‚å‰Šé™¤
        cache.delete('popular_articles:10')
        
        # ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã§å‰Šé™¤ï¼ˆdjango-redisä½¿ç”¨æ™‚ï¼‰
        from django_redis import get_redis_connection
        conn = get_redis_connection('default')
        keys = conn.keys(f'article_list:*')
        if keys:
            conn.delete(*keys)

# models.py - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–ã‚’ã‚·ã‚°ãƒŠãƒ«ã§è‡ªå‹•åŒ–
from django.db.models.signals import post_save, post_delete
from django.dispatch import receiver

@receiver(post_save, sender=Article)
def invalidate_cache_on_save(sender, instance, **kwargs):
    ArticleService.invalidate_article_cache(instance)

@receiver(post_delete, sender=Article)
def invalidate_cache_on_delete(sender, instance, **kwargs):
    ArticleService.invalidate_article_cache(instance)</code></pre>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³5: éåŒæœŸå‡¦ç†ã¨Celery -->
                    <h3 class="section-title">10.5 Celeryã«ã‚ˆã‚‹éåŒæœŸã‚¿ã‚¹ã‚¯å‡¦ç†</h3>
                    
                    <p>Celeryã¯ã€æ™‚é–“ã®ã‹ã‹ã‚‹å‡¦ç†ã‚„ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†ã‚’éåŒæœŸã§å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã€ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã€ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãªã©ã‚’Webãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰åˆ‡ã‚Šé›¢ã—ã¦å®Ÿè¡Œã§ãã¾ã™ã€‚</p>

                    <pre class="code-block"><code class="language-python"># celery.py - Celeryè¨­å®š
import os
from celery import Celery
from django.conf import settings

# Djangoè¨­å®šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æŒ‡å®š
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'myproject.settings')

app = Celery('myproject')

# Djangoè¨­å®šã‹ã‚‰Celeryè¨­å®šã‚’èª­ã¿è¾¼ã¿
app.config_from_object('django.conf:settings', namespace='CELERY')

# ç™»éŒ²ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ã‚¿ã‚¹ã‚¯ã‚’è‡ªå‹•ç™ºè¦‹
app.autodiscover_tasks()

# settings.py - Celeryè¨­å®š
# Redis ã‚’ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ã¨ã—ã¦ä½¿ç”¨
CELERY_BROKER_URL = 'redis://localhost:6379/0'
CELERY_RESULT_BACKEND = 'redis://localhost:6379/0'

# ã‚¿ã‚¹ã‚¯ã®è¨­å®š
CELERY_TASK_SERIALIZER = 'json'
CELERY_RESULT_SERIALIZER = 'json'
CELERY_ACCEPT_CONTENT = ['json']
CELERY_TIMEZONE = 'Asia/Tokyo'
CELERY_ENABLE_UTC = True

# ã‚¿ã‚¹ã‚¯å®Ÿè¡Œè¨­å®š
CELERY_TASK_ALWAYS_EAGER = False  # æœ¬ç•ªç’°å¢ƒã§ã¯False
CELERY_TASK_EAGER_PROPAGATES = True
CELERY_TASK_ROUTES = {
    'blog.tasks.send_email': {'queue': 'email'},
    'blog.tasks.generate_report': {'queue': 'reports'},
    'blog.tasks.process_image': {'queue': 'media'},
}

# å®šæœŸã‚¿ã‚¹ã‚¯ã®è¨­å®š
from celery.schedules import crontab

CELERY_BEAT_SCHEDULE = {
    'daily-cleanup': {
        'task': 'blog.tasks.daily_cleanup',
        'schedule': crontab(hour=2, minute=0),  # æ¯æ—¥åˆå‰2æ™‚
    },
    'weekly-report': {
        'task': 'blog.tasks.generate_weekly_report',
        'schedule': crontab(hour=9, minute=0, day_of_week=1),  # æ¯é€±æœˆæ›œæ—¥9æ™‚
    },
}

# tasks.py - ã‚¿ã‚¹ã‚¯ã®å®šç¾©
from celery import shared_task
from django.core.mail import send_mail
from django.template.loader import render_to_string
from django.utils import timezone
from datetime import timedelta
import logging
from .models import Article, User

logger = logging.getLogger('celery.task')

@shared_task(bind=True, autoretry_for=(Exception,), retry_kwargs={'max_retries': 3})
def send_notification_email(self, user_id, article_id, notification_type):
    """é€šçŸ¥ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚¿ã‚¹ã‚¯"""
    try:
        user = User.objects.get(id=user_id)
        article = Article.objects.get(id=article_id)
        
        subject = f'æ–°ã—ã„è¨˜äº‹ãŒæŠ•ç¨¿ã•ã‚Œã¾ã—ãŸ: {article.title}'
        message = render_to_string('emails/article_notification.html', {
            'user': user,
            'article': article,
            'notification_type': notification_type,
        })
        
        send_mail(
            subject,
            message,
            'noreply@yourdomain.com',
            [user.email],
            fail_silently=False,
            html_message=message
        )
        
        logger.info(f'é€šçŸ¥ãƒ¡ãƒ¼ãƒ«é€ä¿¡å®Œäº†: {user.email} - {article.title}')
        return f'Email sent to {user.email}'
        
    except Exception as exc:
        logger.error(f'ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚¨ãƒ©ãƒ¼: {str(exc)}')
        raise self.retry(exc=exc, countdown=60)

@shared_task
def process_image_upload(image_path, article_id):
    """ç”»åƒå‡¦ç†ã‚¿ã‚¹ã‚¯ï¼ˆãƒªã‚µã‚¤ã‚ºã€æœ€é©åŒ–ï¼‰"""
    try:
        from PIL import Image
        import os
        
        article = Article.objects.get(id=article_id)
        
        # ç”»åƒã‚’é–‹ã
        with Image.open(image_path) as img:
            # ã‚µãƒ ãƒã‚¤ãƒ«ä½œæˆ
            thumbnail_size = (300, 300)
            img.thumbnail(thumbnail_size, Image.Resampling.LANCZOS)
            
            # ã‚µãƒ ãƒã‚¤ãƒ«ä¿å­˜
            thumbnail_path = image_path.replace('.jpg', '_thumb.jpg')
            img.save(thumbnail_path, 'JPEG', quality=85, optimize=True)
        
        logger.info(f'ç”»åƒå‡¦ç†å®Œäº†: {image_path}')
        return f'Image processed: {image_path}'
        
    except Exception as exc:
        logger.error(f'ç”»åƒå‡¦ç†ã‚¨ãƒ©ãƒ¼: {str(exc)}')
        raise exc

@shared_task
def daily_cleanup():
    """æ—¥æ¬¡ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚¿ã‚¹ã‚¯"""
    try:
        # å¤ã„ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
        import tempfile
        import os
        from pathlib import Path
        
        temp_dir = Path(tempfile.gettempdir())
        old_files = []
        
        for file_path in temp_dir.glob('django_*'):
            if file_path.is_file():
                # 24æ™‚é–“ä»¥ä¸Šå¤ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
                if file_path.stat().st_mtime < (timezone.now() - timedelta(hours=24)).timestamp():
                    file_path.unlink()
                    old_files.append(str(file_path))
        
        # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
        from django.core.cache import cache
        cache.clear()
        
        logger.info(f'æ—¥æ¬¡ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†: {len(old_files)}å€‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤')
        return f'Cleaned up {len(old_files)} files'
        
    except Exception as exc:
        logger.error(f'æ—¥æ¬¡ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚¨ãƒ©ãƒ¼: {str(exc)}')
        raise exc

@shared_task
def generate_weekly_report():
    """é€±æ¬¡ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã‚¿ã‚¹ã‚¯"""
    try:
        # éå»1é€±é–“ã®çµ±è¨ˆã‚’å–å¾—
        week_ago = timezone.now() - timedelta(days=7)
        
        stats = {
            'new_articles': Article.objects.filter(created_at__gte=week_ago).count(),
            'published_articles': Article.objects.filter(
                is_published=True,
                updated_at__gte=week_ago
            ).count(),
            'total_articles': Article.objects.count(),
        }
        
        # ãƒ¬ãƒãƒ¼ãƒˆãƒ¡ãƒ¼ãƒ«é€ä¿¡
        subject = f'é€±æ¬¡ãƒ¬ãƒãƒ¼ãƒˆ - {timezone.now().strftime("%Yå¹´%mæœˆ%dæ—¥")}'
        message = f'''
        éå»1é€±é–“ã®çµ±è¨ˆ:
        
        - æ–°è¦è¨˜äº‹: {stats["new_articles"]}ä»¶
        - å…¬é–‹è¨˜äº‹: {stats["published_articles"]}ä»¶
        - ç·è¨˜äº‹æ•°: {stats["total_articles"]}ä»¶
        
        ç”Ÿæˆæ—¥æ™‚: {timezone.now().strftime("%Yå¹´%mæœˆ%dæ—¥ %Hæ™‚%Måˆ†")}
        '''
        
        send_mail(
            subject,
            message,
            'reports@yourdomain.com',
            ['admin@yourdomain.com'],
            fail_silently=False,
        )
        
        logger.info('é€±æ¬¡ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ»é€ä¿¡å®Œäº†')
        return 'Weekly report generated and sent'
        
    except Exception as exc:
        logger.error(f'é€±æ¬¡ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã‚¨ãƒ©ãƒ¼: {str(exc)}')
        raise exc

# views.py - ã‚¿ã‚¹ã‚¯ã®å®Ÿè¡Œä¾‹
from .tasks import send_notification_email, process_image_upload

def publish_article(request, article_id):
    """è¨˜äº‹å…¬é–‹æ™‚ã®éåŒæœŸå‡¦ç†"""
    article = get_object_or_404(Article, id=article_id)
    
    if request.method == 'POST':
        article.is_published = True
        article.save()
        
        # éåŒæœŸã§é€šçŸ¥ãƒ¡ãƒ¼ãƒ«é€ä¿¡
        subscribers = User.objects.filter(
            userprofile__email_notifications=True
        ).values_list('id', flat=True)
        
        for user_id in subscribers:
            send_notification_email.delay(user_id, article.id, 'new_article')
        
        messages.success(request, 'è¨˜äº‹ã‚’å…¬é–‹ã—ã¾ã—ãŸã€‚é€šçŸ¥ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ä¸­ã§ã™ã€‚')
        return redirect('article_detail', slug=article.slug)
    
    return render(request, 'blog/publish_article.html', {'article': article})</code></pre>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³6: å›½éš›åŒ–å¯¾å¿œ -->
                    <h3 class="section-title">10.6 å›½éš›åŒ–ï¼ˆi18nï¼‰ã¨å¤šè¨€èªå¯¾å¿œ</h3>
                    
                    <p>Django ã®å›½éš›åŒ–æ©Ÿèƒ½ã«ã‚ˆã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¤‡æ•°ã®è¨€èªã§æä¾›ã§ãã¾ã™ã€‚ãƒ†ã‚­ã‚¹ãƒˆã®ç¿»è¨³ã€æ—¥ä»˜ãƒ»æ•°å€¤ã®åœ°åŸŸåŒ–ã€ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å¯¾å¿œã‚’çµ±åˆçš„ã«ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚</p>

                    <pre class="code-block"><code class="language-python"># settings.py - å›½éš›åŒ–è¨­å®š
from django.utils.translation import gettext_lazy as _

# è¨€èªè¨­å®š
LANGUAGE_CODE = 'ja'
TIME_ZONE = 'Asia/Tokyo'
USE_I18N = True  # å›½éš›åŒ–ã‚’æœ‰åŠ¹åŒ–
USE_L10N = True  # åœ°åŸŸåŒ–ã‚’æœ‰åŠ¹åŒ–
USE_TZ = True    # ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æœ‰åŠ¹åŒ–

# åˆ©ç”¨å¯èƒ½è¨€èªã®è¨­å®š
LANGUAGES = [
    ('ja', _('Japanese')),
    ('en', _('English')),
    ('zh', _('Chinese')),
]

# ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€
LOCALE_PATHS = [
    BASE_DIR / 'locale',
]

# ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã«è¨€èªé¸æŠã‚’è¿½åŠ 
MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.locale.LocaleMiddleware',  # è¨€èªé¸æŠãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
    'django.middleware.common.CommonMiddleware',
    # ãã®ä»–ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢...
]

# views.py - ç¿»è¨³å¯¾å¿œã®ãƒ“ãƒ¥ãƒ¼
from django.utils.translation import gettext as _
from django.utils.translation import ngettext
from django.shortcuts import render
from django.http import JsonResponse
from django.views.decorators.http import require_POST

def article_list(request):
    """å¤šè¨€èªå¯¾å¿œè¨˜äº‹ä¸€è¦§"""
    articles = Article.objects.filter(is_published=True)
    
    # è¨˜äº‹æ•°ã«ã‚ˆã‚‹è¤‡æ•°å½¢å¯¾å¿œ
    count = articles.count()
    message = ngettext(
        'There is %(count)d article.',
        'There are %(count)d articles.',
        count,
    ) % {'count': count}
    
    context = {
        'articles': articles,
        'page_title': _('Article List'),
        'message': message,
        'no_articles_message': _('No articles found.'),
    }
    
    return render(request, 'blog/article_list.html', context)

@require_POST
def set_language(request):
    """è¨€èªåˆ‡ã‚Šæ›¿ãˆAPI"""
    from django.conf import settings
    from django.http import HttpResponseRedirect
    from django.utils.translation import activate
    from django.urls import translate_url
    
    language = request.POST.get('language')
    
    if language and language in [lang[0] for lang in settings.LANGUAGES]:
        # ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«è¨€èªã‚’ä¿å­˜
        request.session['django_language'] = language
        activate(language)
        
        # ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå…ˆURLã‚‚ç¿»è¨³
        redirect_url = request.POST.get('next', '/')
        redirect_url = translate_url(redirect_url, language)
        
        return JsonResponse({
            'success': True,
            'language': language,
            'redirect_url': redirect_url
        })
    
    return JsonResponse({'success': False, 'error': _('Invalid language')})

# models.py - å¤šè¨€èªå¯¾å¿œãƒ¢ãƒ‡ãƒ«
from django.utils.translation import gettext_lazy as _

class Category(models.Model):
    name = models.CharField(_('name'), max_length=100)
    description = models.TextField(_('description'), blank=True)
    created_at = models.DateTimeField(_('created at'), auto_now_add=True)
    
    class Meta:
        verbose_name = _('category')
        verbose_name_plural = _('categories')
        ordering = ['name']
    
    def __str__(self):
        return self.name

# å¤šè¨€èªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŒã¤ãƒ¢ãƒ‡ãƒ«ï¼ˆdjango-modeltranslationä½¿ç”¨ï¼‰
# pip install django-modeltranslation

# translation.py
from modeltranslation.translator import register, TranslationOptions
from .models import Article

@register(Article)
class ArticleTranslationOptions(TranslationOptions):
    fields = ('title', 'content')

# è¨­å®šå¾Œã€ä»¥ä¸‹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹
# title_ja, title_en, title_zh
# content_ja, content_en, content_zh</code></pre>

                    <!-- å®Ÿç¿’2 -->
                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 10-2: ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºæ©Ÿèƒ½ã®çµ±åˆå®Ÿè£…</h5>
                        <p>ã“ã®å®Ÿç¿’ã§ã¯ã€Celeryã‚’ä½¿ç”¨ã—ãŸéåŒæœŸå‡¦ç†ã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ€é©åŒ–ã€å›½éš›åŒ–å¯¾å¿œã‚’çµ±åˆå®Ÿè£…ã—ã¾ã™ã€‚</p>
                        
                        <h6>æ‰‹é †</h6>
                        <ol>
                            <li>Redis ã‚’ä½¿ç”¨ã—ãŸã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹</li>
                            <li>Celery ã«ã‚ˆã‚‹éåŒæœŸã‚¿ã‚¹ã‚¯å‡¦ç†ã‚’å®Ÿè£…ã™ã‚‹</li>
                            <li>å®šæœŸå®Ÿè¡Œã‚¿ã‚¹ã‚¯ã§ãƒ‡ãƒ¼ã‚¿ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’è‡ªå‹•åŒ–ã™ã‚‹</li>
                            <li>å¤šè¨€èªå¯¾å¿œã‚·ã‚¹ãƒ†ãƒ ã‚’å®Ÿè£…ã™ã‚‹</li>
                            <li>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–æˆ¦ç•¥ã‚’æ§‹ç¯‰ã™ã‚‹</li>
                        </ol>

                        <h6>æœŸå¾…ã•ã‚Œã‚‹çµæœ</h6>
                        <p>éåŒæœŸå‡¦ç†ãŒæ­£å¸¸ã«å‹•ä½œã—ã€é©åˆ‡ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹æœã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã€å¤šè¨€èªæ©Ÿèƒ½ãŒç¢ºèªã§ãã‚‹ã“ã¨ã‚’æ¤œè¨¼ã—ã¦ãã ã•ã„ã€‚</p>
                    </div>

                    <!-- ç†è§£åº¦ç¢ºèª -->
                    <div class="quiz-container">
                        <h5>ç†è§£åº¦ç¢ºèªã‚¯ã‚¤ã‚º</h5>
                        <ol>
                            <li>Djangoç®¡ç†ã‚³ãƒãƒ³ãƒ‰ã€ã‚·ã‚°ãƒŠãƒ«ã€ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®ä½¿ç”¨å ´é¢ã‚’ãã‚Œãã‚Œå…·ä½“ä¾‹ã§èª¬æ˜ã—ã¦ãã ã•ã„ã€‚</li>
                            <li>ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®4ã¤ã®ãƒ¬ãƒ™ãƒ«ï¼ˆã‚µã‚¤ãƒˆå…¨ä½“ã€ãƒ“ãƒ¥ãƒ¼ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆã€ä½ãƒ¬ãƒ™ãƒ«APIï¼‰ã®ç‰¹å¾´ã¨é©ç”¨å ´é¢ã‚’èª¬æ˜ã—ã¦ãã ã•ã„ã€‚</li>
                            <li>Celeryã‚’ä½¿ç”¨ã™ã‚‹åˆ©ç‚¹ã¨ã€åŒæœŸå‡¦ç†ã¨æ¯”è¼ƒã—ãŸå ´åˆã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’èª¬æ˜ã—ã¦ãã ã•ã„ã€‚</li>
                            <li>Django ã®å›½éš›åŒ–æ©Ÿèƒ½ã§å¯¾å¿œã§ãã‚‹åœ°åŸŸåŒ–è¦ç´ ã‚’5ã¤æŒ™ã’ã¦ãã ã•ã„ã€‚</li>
                            <li>æœ¬ç« ã§å­¦ã‚“ã é«˜åº¦ãªæ©Ÿèƒ½ã‚’çµ„ã¿åˆã‚ã›ã¦ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­è¨ˆã™ã‚‹éš›ã®è€ƒæ…®ç‚¹ã‚’èª¬æ˜ã—ã¦ãã ã•ã„ã€‚</li>
                        </ol>
                    </div>

                    <!-- ç« é–“ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="django-learning-material-9.html" class="btn btn-secondary">â† å‰ã®ç« </a>
                        <span class="btn btn-success">å­¦ç¿’å®Œäº†ï¼</span>
                    </div>

                    <!-- å­¦ç¿’å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
                    <div class="alert alert-success mt-4" role="alert">
                        <h4 class="alert-heading">ğŸ‰ Djangoå­¦ç¿’æ•™æå®Œäº†ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</h4>
                        <p>ã“ã®10ç« ã‚’é€šã˜ã¦ã€Djangoãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®åŸºç¤ã‹ã‚‰é«˜åº¦ãªæ©Ÿèƒ½ã¾ã§åŒ…æ‹¬çš„ã«å­¦ç¿’ã—ã¾ã—ãŸã€‚</p>
                        <hr>
                        <p class="mb-0">
                            æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¨ã—ã¦ã€å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã“ã‚Œã‚‰ã®çŸ¥è­˜ã‚’æ´»ç”¨ã—ã€
                            <a href="../fastapi/README.html">FastAPIå­¦ç¿’æ•™æ</a>ã‚„
                            <a href="../../../cheatsheet/web/web-app-design-cheatsheet.html">Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ</a>
                            ã§ã®å­¦ç¿’ã‚’ç¶šã‘ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚
                        </p>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">&copy; 2025 F-Circle All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js åˆæœŸåŒ– -->
    <script>hljs.highlightAll();</script>
    
    <!-- Mermaid.js åˆæœŸåŒ– -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>