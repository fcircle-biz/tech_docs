<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python SQLAlchemy学習教材 第8章 - 実践的なアプリケーション開発</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; padding-top: 56px; }
        .navbar { background-color: #306998; }
        .sidebar { position: sticky; top: 70px; height: calc(100vh - 70px); overflow-y: auto; background-color: #f8f9fa; border-right: 1px solid #dee2e6; }
        .chapter-title { color: #306998; margin-top: 1.5rem; margin-bottom: 1rem; border-bottom: 2px solid #306998; padding-bottom: 0.5rem; }
        .section-title { color: #4b8bbe; margin-top: 1.2rem; margin-bottom: 0.8rem; }
        .quiz-container { background-color: #e8f4fd; border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; border-left: 4px solid #306998; }
        .exercise-container { background-color: #f3e5f5; border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; border-left: 4px solid #9c27b0; }
        .highlight { background-color: #ffecb3; border-radius: 8px; padding: 1rem; margin: 1rem 0; border-left: 4px solid #ffc107; }
        .warning { background-color: #ffebee; border-radius: 8px; padding: 1rem; margin: 1rem 0; border-left: 4px solid #f44336; }
        .code-block { background-color: #1e1e1e; border-radius: 5px; padding: 1rem; margin: 1rem 0; }
        .nav-link.active { background-color: #306998 !important; color: white !important; }
        .nav-link { color: #495057; }
        .nav-link:hover { background-color: #e9ecef; }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Python SQLAlchemy 学習教材</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="../README.md">学習ガイドに戻る</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <nav class="col-md-3 col-lg-2 d-md-block sidebar">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item"><a class="nav-link" href="python-sqlalchemy-learning-material-1.html">第1章</a></li>
                        <li class="nav-item"><a class="nav-link" href="python-sqlalchemy-learning-material-2.html">第2章</a></li>
                        <li class="nav-item"><a class="nav-link" href="python-sqlalchemy-learning-material-3.html">第3章</a></li>
                        <li class="nav-item"><a class="nav-link" href="python-sqlalchemy-learning-material-4.html">第4章</a></li>
                        <li class="nav-item"><a class="nav-link" href="python-sqlalchemy-learning-material-5.html">第5章</a></li>
                        <li class="nav-item"><a class="nav-link" href="python-sqlalchemy-learning-material-6.html">第6章</a></li>
                        <li class="nav-item"><a class="nav-link" href="python-sqlalchemy-learning-material-7.html">第7章</a></li>
                        <li class="nav-item"><a class="nav-link active" href="#chapter8">第8章: 実践的なアプリケーション開発</a></li>
                    </ul>
                </div>
            </nav>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第8章: 実践的なアプリケーション開発</h1>
                </div>

                <div id="chapter8">
                    <h2 class="chapter-title">実践的なアプリケーション開発</h2>
                    
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>Flask/FastAPIとSQLAlchemyの統合</li>
                            <li>コネクションプールの設定と管理</li>
                            <li>セキュリティ対策とベストプラクティス</li>
                            <li>パフォーマンスモニタリングとログ出力</li>
                            <li>本番環境での配置と運用</li>
                        </ul>
                    </div>

                    <h3 class="section-title">8.1 Flask/FastAPIとの統合</h3>
                    <p>WebアプリケーションフレームワークとSQLAlchemyを統合した実践的なアプリケーション開発を学習します。</p>

                    <div class="exercise-container">
                        <h5>実習 8-1: FastAPIとSQLAlchemyの統合</h5>
                        <h6>実装例</h6>
                        <pre class="code-block"><code class="language-python"># FastAPIとSQLAlchemyの統合例
from fastapi import FastAPI, Depends, HTTPException
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker, Session

app = FastAPI()

# データベース設定
DATABASE_URL = "postgresql://user:password@localhost/dbname"
engine = create_engine(DATABASE_URL)
SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)

# 依存性注入
def get_db():
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close()

@app.get("/users/{user_id}")
def read_user(user_id: int, db: Session = Depends(get_db)):
    user = db.query(User).filter(User.id == user_id).first()
    if user is None:
        raise HTTPException(status_code=404, detail="User not found")
    return user</code></pre>
                    </div>

                    <h3 class="section-title">8.2 コネクションプールの最適化</h3>
                    <p>本番環境でのパフォーマンスを向上させるためのコネクションプール設定を学習します。</p>
                    
                    <pre class="code-block"><code class="language-python"># コネクションプールの設定
engine = create_engine(
    DATABASE_URL,
    pool_size=20,          # コネクションプールサイズ
    max_overflow=30,       # 最大オーバーフロー
    pool_timeout=30,       # タイムアウト（秒）
    pool_recycle=3600,     # コネクションのリサイクル間隔
    pool_pre_ping=True,    # コネクションの有効性チェック
    echo=False             # SQLログの出力（本番ではFalse）
)</code></pre>

                    <h3 class="section-title">8.3 セキュリティ対策</h3>
                    <p>SQLAlchemyアプリケーションにおけるセキュリティベストプラクティスを学習します。</p>

                    <div class="warning">
                        <h5>セキュリティベストプラクティス</h5>
                        <ul>
                            <li>SQLインジェクション対策：パラメータ化クエリの使用</li>
                            <li>機密情報の管理：データベース接続情報の暗号化</li>
                            <li>アクセス制御：適切な権限設定とロールベースアクセス</li>
                            <li>ログ監視：不正アクセスの検出と監視</li>
                        </ul>
                    </div>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>FastAPIやFlaskとSQLAlchemyを統合する際のセッション管理のベストプラクティスを説明してください。</li>
                            <li>コネクションプールのpool_sizeとmax_overflowパラメータの違いと設定指針を説明してください。</li>
                            <li>SQLインジェクション攻撃を防ぐためのSQLAlchemyの機能を3つ挙げ、実装例を示してください。</li>
                        </ol>
                    </div>

                    <div class="highlight">
                        <h5>学習完了おめでとうございます！</h5>
                        <p>このコースを通じて、SQLAlchemyの基本から実践的なアプリケーション開発までを学習しました。学んだ知識を活かして、実際のプロジェクトでSQLAlchemyを活用してください。</p>
                        <p><strong>次のステップ:</strong></p>
                        <ul>
                            <li>実際のプロジェクトでSQLAlchemyを使用してみる</li>
                            <li>Django ORMや他のORMフレームワークとの比較学習</li>
                            <li>データベース設計やSQL最適化の深い学習</li>
                        </ul>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="python-sqlalchemy-learning-material-7.html" class="btn btn-secondary">← 前の章</a>
                        <a href="../README.md" class="btn btn-primary">学習ガイドに戻る</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>