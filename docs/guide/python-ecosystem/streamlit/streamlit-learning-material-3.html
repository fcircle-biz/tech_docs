<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Streamlitå­¦ç¿’æ•™æ ç¬¬3ç«  - ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã¨å¯è¦–åŒ–</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* ãƒ™ãƒ¼ã‚¹ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .navbar {
            background-color: #4caf50;
        }

        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
            background-color: #f8f9fa;
        }

        /* ã‚¿ã‚¤ãƒˆãƒ« */
        .chapter-title {
            color: #4caf50;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #4caf50;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #66bb6a;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒœãƒƒã‚¯ã‚¹ */
        .quiz-container {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #4caf50;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        .info-box {
            background-color: #e1f5fe;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #2196F3;
        }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .nav-link.active {
            background-color: #4caf50 !important;
            color: white !important;
        }

        .nav-link {
            color: #666;
        }

        .nav-link:hover {
            background-color: #e8f5e8;
            color: #4caf50;
        }

        pre {
            background-color: #f5f5f5;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
        }

        code {
            background-color: #f5f5f5;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Streamlitå­¦ç¿’æ•™æ</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link text-white" href="../README.md">å­¦ç¿’ã‚¬ã‚¤ãƒ‰ã«æˆ»ã‚‹</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
            <nav class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        ç« ã®ä¸€è¦§
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="streamlit-learning-material-1.html">ç¬¬1ç« : å…¥é–€ã¨ç’°å¢ƒæ§‹ç¯‰</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="streamlit-learning-material-2.html">ç¬¬2ç« : åŸºæœ¬çš„ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="#chapter3">ç¬¬3ç« : ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã¨å¯è¦–åŒ–</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="streamlit-learning-material-4.html">ç¬¬4ç« : ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã¨ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="streamlit-learning-material-5.html">ç¬¬5ç« : ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ç®¡ç†</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="streamlit-learning-material-6.html">ç¬¬6ç« : ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã¨ãƒ‡ãƒ¼ã‚¿å‡¦ç†</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="streamlit-learning-material-7.html">ç¬¬7ç« : ãƒãƒ«ãƒãƒšãƒ¼ã‚¸ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="streamlit-learning-material-8.html">ç¬¬8ç« : ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€£æºã¨APIçµ±åˆ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="streamlit-learning-material-9.html">ç¬¬9ç« : ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã¨æœ¬ç•ªç’°å¢ƒ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="streamlit-learning-material-10.html">ç¬¬10ç« : å®Ÿè·µçš„ãªãƒ‡ãƒ¼ã‚¿åˆ†æã‚¢ãƒ—ãƒªé–‹ç™º</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- ç« ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">ç¬¬3ç« : ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã¨å¯è¦–åŒ–</h1>
                </div>

                <div id="chapter3">
                    <!-- ç« ã‚¿ã‚¤ãƒˆãƒ« -->
                    <h2 class="chapter-title">ãƒ‡ãƒ¼ã‚¿ã‚’é­…åŠ›çš„ã«è¡¨ç¤ºã™ã‚‹</h2>
                    
                    <!-- å­¦ç¿’ç›®æ¨™ -->
                    <div class="highlight">
                        <h5>ã“ã®ç« ã§å­¦ã¶ã“ã¨</h5>
                        <ul>
                            <li>DataFrameã¨ãƒ†ãƒ¼ãƒ–ãƒ«ã®åŠ¹æœçš„ãªè¡¨ç¤ºæ–¹æ³•</li>
                            <li>Streamlitå†…è”µã®ã‚°ãƒ©ãƒ•ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ´»ç”¨</li>
                            <li>Plotlyãƒ»Matplotlibã¨ã®é€£æºã«ã‚ˆã‚‹ã‚«ã‚¹ã‚¿ãƒ ã‚°ãƒ©ãƒ•ä½œæˆ</li>
                            <li>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨KPIã®è¦–è¦šçš„è¡¨ç¤º</li>
                            <li>ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã¨ã‚¹ãƒ”ãƒŠãƒ¼ã®å®Ÿè£…</li>
                        </ul>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³1: DataFrameè¡¨ç¤º -->
                    <h3 class="section-title">3.1 DataFrameã¨ãƒ†ãƒ¼ãƒ–ãƒ«ã®è¡¨ç¤º</h3>
                    <p>Streamlitã¯pandasã¨å¯†æ¥ã«é€£æºã—ã€DataFrameã‚’ç¾ã—ãè¡¨ç¤ºã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚</p>
                    
                    <h4>DataFrameè¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</h4>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</th>
                                <th>ç‰¹å¾´</th>
                                <th>ç”¨é€”</th>
                                <th>ä¾‹</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>st.dataframe()</code></td>
                                <td>ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–</td>
                                <td>å¤§ããªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ</td>
                                <td>ã‚½ãƒ¼ãƒˆãƒ»ãƒ•ã‚£ãƒ«ã‚¿å¯èƒ½</td>
                            </tr>
                            <tr>
                                <td><code>st.table()</code></td>
                                <td>é™çš„è¡¨ç¤º</td>
                                <td>å°ã•ãªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ</td>
                                <td>ãƒ¬ãƒãƒ¼ãƒˆå½¢å¼</td>
                            </tr>
                            <tr>
                                <td><code>st.data_editor()</code></td>
                                <td>ç·¨é›†å¯èƒ½</td>
                                <td>ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ãƒ»ç·¨é›†</td>
                                <td>ãƒ•ã‚©ãƒ¼ãƒ ä»£æ›¿</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 3-1: DataFrameè¡¨ç¤ºã®åŸºæœ¬</h5>
                        <p>æ§˜ã€…ãªæ–¹æ³•ã§DataFrameã‚’è¡¨ç¤ºã—ã€ãã®é•ã„ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
                        
                        <h6>dataframe_demo.py ã‚’ä½œæˆ</h6>
                        <pre><code>import streamlit as st
import pandas as pd
import numpy as np

# ãƒšãƒ¼ã‚¸è¨­å®š
st.set_page_config(
    page_title="DataFrameè¡¨ç¤ºãƒ‡ãƒ¢",
    page_icon="ğŸ“Š",
    layout="wide"
)

st.title("ğŸ“Š DataFrameè¡¨ç¤ºã®æ¯”è¼ƒ")

# ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆ
@st.cache_data
def load_sample_data():
    np.random.seed(42)
    data = {
        'å•†å“å': ['å•†å“A', 'å•†å“B', 'å•†å“C', 'å•†å“D', 'å•†å“E'],
        'å£²ä¸Š': np.random.randint(1000, 10000, 5),
        'åˆ©ç›Šç‡': np.random.uniform(0.1, 0.3, 5).round(3),
        'åœ¨åº«': np.random.randint(10, 100, 5),
        'è©•ä¾¡': np.random.uniform(3.5, 5.0, 5).round(1)
    }
    return pd.DataFrame(data)

df = load_sample_data()

# ãƒ‡ãƒ¼ã‚¿ã®æ¦‚è¦
st.header("ğŸ“‹ ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿")
st.write("5ã¤ã®å•†å“ã®å£²ä¸Šãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚")

# è¡¨ç¤ºæ–¹æ³•ã®æ¯”è¼ƒ
col1, col2 = st.columns(2)

with col1:
    st.subheader("st.dataframe() - ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–")
    st.write("ã‚½ãƒ¼ãƒˆãƒ»æ¤œç´¢ãƒ»åˆ—å¹…å¤‰æ›´ãŒå¯èƒ½")
    st.dataframe(
        df,
        use_container_width=True,
        hide_index=True
    )

with col2:
    st.subheader("st.table() - é™çš„è¡¨ç¤º")
    st.write("ã‚·ãƒ³ãƒ—ãƒ«ãªé™çš„ãƒ†ãƒ¼ãƒ–ãƒ«")
    st.table(df)

# ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ‡ã‚£ã‚¿
st.divider()
st.subheader("st.data_editor() - ç·¨é›†å¯èƒ½")
st.write("ã‚»ãƒ«å€¤ã‚’ç›´æ¥ç·¨é›†ã§ãã¾ã™ï¼ˆå¤‰æ›´ã¯ä¸€æ™‚çš„ï¼‰")

edited_df = st.data_editor(
    df,
    use_container_width=True,
    hide_index=True,
    num_rows="dynamic"  # è¡Œã®è¿½åŠ ãƒ»å‰Šé™¤ã‚’è¨±å¯
)

# å¤‰æ›´ã®ç¢ºèª
if not df.equals(edited_df):
    st.success("ãƒ‡ãƒ¼ã‚¿ãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸï¼")
    st.write("å¤‰æ›´å¾Œã®ãƒ‡ãƒ¼ã‚¿:")
    st.dataframe(edited_df, use_container_width=True)

# ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
st.divider()
st.subheader("ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ")

# åˆ—ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æŒ‡å®š
formatted_df = df.copy()
formatted_df['å£²ä¸Š'] = formatted_df['å£²ä¸Š'].apply(lambda x: f"Â¥{x:,}")
formatted_df['åˆ©ç›Šç‡'] = formatted_df['åˆ©ç›Šç‡'].apply(lambda x: f"{x:.1%}")

st.dataframe(
    formatted_df,
    use_container_width=True,
    hide_index=True,
    column_config={
        "è©•ä¾¡": st.column_config.ProgressColumn(
            "è©•ä¾¡",
            help="å•†å“ã®è©•ä¾¡ï¼ˆ5ç‚¹æº€ç‚¹ï¼‰",
            min_value=0,
            max_value=5,
        ),
        "åœ¨åº«": st.column_config.NumberColumn(
            "åœ¨åº«æ•°",
            help="ç¾åœ¨ã®åœ¨åº«æ•°",
            format="%d å€‹",
        )
    }
)
</code></pre>
                        
                        <h6>å®Ÿè¡Œã¨ç¢ºèª</h6>
                        <pre><code>streamlit run dataframe_demo.py</code></pre>
                        
                        <h6>æœŸå¾…ã•ã‚Œã‚‹çµæœ</h6>
                        <p>ç•°ãªã‚‹DataFrameè¡¨ç¤ºæ–¹æ³•ã¨ã€ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ‡ã‚£ã‚¿ã®ç·¨é›†æ©Ÿèƒ½ãŒç¢ºèªã§ãã¾ã™ã€‚</p>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³2: åŸºæœ¬ã‚°ãƒ©ãƒ• -->
                    <h3 class="section-title">3.2 Streamlitå†…è”µã‚°ãƒ©ãƒ•ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</h3>
                    <p>Streamlitã«ã¯ã€ç°¡å˜ã«ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã§ãã‚‹å†…è”µã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>

                    <h4>å†…è”µã‚°ãƒ©ãƒ•ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</h4>
                    <div class="info-box">
                        <h6>ä¸»è¦ãªã‚°ãƒ©ãƒ•ã‚¿ã‚¤ãƒ—</h6>
                        <ul>
                            <li><strong>st.line_chart()</strong>: ç·šã‚°ãƒ©ãƒ•ï¼ˆæ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ï¼‰</li>
                            <li><strong>st.area_chart()</strong>: é¢ã‚°ãƒ©ãƒ•ï¼ˆç´¯ç©ãƒ‡ãƒ¼ã‚¿ï¼‰</li>
                            <li><strong>st.bar_chart()</strong>: æ£’ã‚°ãƒ©ãƒ•ï¼ˆã‚«ãƒ†ã‚´ãƒªæ¯”è¼ƒï¼‰</li>
                            <li><strong>st.scatter_chart()</strong>: æ•£å¸ƒå›³ï¼ˆç›¸é–¢é–¢ä¿‚ï¼‰</li>
                            <li><strong>st.map()</strong>: åœ°å›³ä¸Šã«ãƒã‚¤ãƒ³ãƒˆè¡¨ç¤º</li>
                        </ul>
                    </div>

                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 3-2: å†…è”µã‚°ãƒ©ãƒ•ã®ä½œæˆ</h5>
                        <p>Streamlitã®å†…è”µã‚°ãƒ©ãƒ•ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ã€æ§˜ã€…ãªã‚°ãƒ©ãƒ•ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
                        
                        <h6>builtin_charts.py ã‚’ä½œæˆ</h6>
                        <pre><code>import streamlit as st
import pandas as pd
import numpy as np
from datetime import datetime, timedelta

# ãƒšãƒ¼ã‚¸è¨­å®š
st.set_page_config(
    page_title="å†…è”µã‚°ãƒ©ãƒ•ãƒ‡ãƒ¢",
    page_icon="ğŸ“ˆ",
    layout="wide"
)

st.title("ğŸ“ˆ Streamlitå†…è”µã‚°ãƒ©ãƒ•ãƒ‡ãƒ¢")

# ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆ
@st.cache_data
def generate_chart_data():
    # æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿
    dates = pd.date_range(start='2024-01-01', end='2024-12-31', freq='D')
    time_series = pd.DataFrame({
        'date': dates,
        'å£²ä¸Š': np.random.randint(1000, 5000, len(dates)) + 
                np.sin(np.arange(len(dates)) * 2 * np.pi / 365) * 500,
        'åˆ©ç›Š': np.random.randint(200, 1000, len(dates)) + 
                np.sin(np.arange(len(dates)) * 2 * np.pi / 365) * 100
    }).set_index('date')
    
    # ã‚«ãƒ†ã‚´ãƒªãƒ‡ãƒ¼ã‚¿
    categories = pd.DataFrame({
        'ã‚«ãƒ†ã‚´ãƒª': ['é›»å­æ©Ÿå™¨', 'è¡£é¡', 'é£Ÿå“', 'æ›¸ç±', 'ã‚¹ãƒãƒ¼ãƒ„'],
        'å£²ä¸Š': [15000, 12000, 8000, 5000, 7000]
    }).set_index('ã‚«ãƒ†ã‚´ãƒª')
    
    # æ•£å¸ƒå›³ãƒ‡ãƒ¼ã‚¿
    scatter_data = pd.DataFrame({
        'åºƒå‘Šè²»': np.random.randint(100, 1000, 50),
        'å£²ä¸Š': np.random.randint(1000, 10000, 50)
    })
    # ç›¸é–¢é–¢ä¿‚ã‚’è¿½åŠ 
    scatter_data['å£²ä¸Š'] += scatter_data['åºƒå‘Šè²»'] * 2 + np.random.normal(0, 500, 50)
    
    # åœ°å›³ãƒ‡ãƒ¼ã‚¿ï¼ˆæ±äº¬å‘¨è¾ºï¼‰
    map_data = pd.DataFrame({
        'lat': [35.6762 + np.random.normal(0, 0.01, 10)],
        'lon': [139.6503 + np.random.normal(0, 0.01, 10)]
    })
    
    return time_series, categories, scatter_data, map_data

time_series, categories, scatter_data, map_data = generate_chart_data()

# ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
tab1, tab2, tab3, tab4 = st.tabs(["ğŸ“Š æ™‚ç³»åˆ—", "ğŸ“Š ã‚«ãƒ†ã‚´ãƒª", "ğŸ”— ç›¸é–¢", "ğŸ—ºï¸ åœ°å›³"])

with tab1:
    st.subheader("æ™‚ç³»åˆ—ã‚°ãƒ©ãƒ•")
    
    # ç·šã‚°ãƒ©ãƒ•
    st.write("**ç·šã‚°ãƒ©ãƒ•ï¼ˆst.line_chartï¼‰**")
    st.line_chart(time_series)
    
    # é¢ã‚°ãƒ©ãƒ•
    st.write("**é¢ã‚°ãƒ©ãƒ•ï¼ˆst.area_chartï¼‰**")
    st.area_chart(time_series)
    
    # æœŸé–“é¸æŠ
    col1, col2 = st.columns(2)
    with col1:
        start_date = st.date_input("é–‹å§‹æ—¥", datetime(2024, 1, 1))
    with col2:
        end_date = st.date_input("çµ‚äº†æ—¥", datetime(2024, 3, 31))
    
    # ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿
    filtered_data = time_series[start_date:end_date]
    st.write("**æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿é©ç”¨å¾Œ**")
    st.line_chart(filtered_data)

with tab2:
    st.subheader("ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ‡ãƒ¼ã‚¿")
    
    # æ£’ã‚°ãƒ©ãƒ•
    st.write("**æ£’ã‚°ãƒ©ãƒ•ï¼ˆst.bar_chartï¼‰**")
    st.bar_chart(categories)
    
    # ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«
    st.write("**ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«**")
    st.dataframe(categories, use_container_width=True)

with tab3:
    st.subheader("æ•£å¸ƒå›³")
    
    # æ•£å¸ƒå›³
    st.write("**æ•£å¸ƒå›³ï¼ˆst.scatter_chartï¼‰**")
    st.scatter_chart(
        scatter_data,
        x='åºƒå‘Šè²»',
        y='å£²ä¸Š',
        size=20
    )
    
    # ç›¸é–¢ä¿‚æ•°ã®è¨ˆç®—
    correlation = scatter_data['åºƒå‘Šè²»'].corr(scatter_data['å£²ä¸Š'])
    st.metric("ç›¸é–¢ä¿‚æ•°", f"{correlation:.3f}")

with tab4:
    st.subheader("åœ°å›³è¡¨ç¤º")
    
    # åœ°å›³
    st.write("**åœ°å›³ï¼ˆst.mapï¼‰**")
    st.map(map_data)
    
    # åœ°å›³ãƒ‡ãƒ¼ã‚¿
    st.write("**åº§æ¨™ãƒ‡ãƒ¼ã‚¿**")
    st.dataframe(map_data)

# ã‚°ãƒ©ãƒ•ä½œæˆã®ãƒã‚¤ãƒ³ãƒˆ
st.divider()
st.subheader("ğŸ“ å†…è”µã‚°ãƒ©ãƒ•ã®ãƒã‚¤ãƒ³ãƒˆ")

col1, col2 = st.columns(2)

with col1:
    st.markdown("""
    **ãƒ¡ãƒªãƒƒãƒˆ**
    - ç°¡å˜ãªè¨˜è¿°ã§ã‚°ãƒ©ãƒ•ä½œæˆ
    - pandasã¨ã®è¦ªå’Œæ€§ãŒé«˜ã„
    - ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
    - åŸºæœ¬çš„ãªã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½
    """)

with col2:
    st.markdown("""
    **åˆ¶ç´„**
    - ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ€§ãŒé™å®šçš„
    - ãƒ‡ã‚¶ã‚¤ãƒ³ã®ç´°ã‹ã„èª¿æ•´ä¸å¯
    - è¤‡é›‘ãªã‚°ãƒ©ãƒ•ã¯ä½œæˆå›°é›£
    - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ãªã—
    """)
</code></pre>
                        
                        <h6>å®Ÿè¡Œã¨ç¢ºèª</h6>
                        <pre><code>streamlit run builtin_charts.py</code></pre>
                        
                        <h6>æœŸå¾…ã•ã‚Œã‚‹çµæœ</h6>
                        <p>4ã¤ã®ã‚¿ãƒ–ã§ç•°ãªã‚‹ã‚¿ã‚¤ãƒ—ã®ã‚°ãƒ©ãƒ•ã¨ã€æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ãŒç¢ºèªã§ãã¾ã™ã€‚</p>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³3: ã‚«ã‚¹ã‚¿ãƒ ã‚°ãƒ©ãƒ• -->
                    <h3 class="section-title">3.3 Plotlyã¨Matplotlibã®é€£æº</h3>
                    <p>ã‚ˆã‚Šé«˜åº¦ãªã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦ãªå ´åˆã¯ã€å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨é€£æºã—ã¾ã™ã€‚</p>

                    <div class="info-box">
                        <h6>å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç‰¹å¾´</h6>
                        <ul>
                            <li><strong>Plotly</strong>: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã€ç¾ã—ã„ãƒ‡ã‚¶ã‚¤ãƒ³ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ</li>
                            <li><strong>Matplotlib</strong>: é«˜åº¦ãªã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€å­¦è¡“çš„ãªã‚°ãƒ©ãƒ•</li>
                            <li><strong>Seaborn</strong>: çµ±è¨ˆçš„å¯è¦–åŒ–ã€ç¾ã—ã„ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚¿ã‚¤ãƒ«</li>
                            <li><strong>Altair</strong>: å®£è¨€çš„ãªæ–‡æ³•ã€ç°¡æ½”ãªã‚³ãƒ¼ãƒ‰</li>
                        </ul>
                    </div>

                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 3-3: ã‚«ã‚¹ã‚¿ãƒ ã‚°ãƒ©ãƒ•ã®ä½œæˆ</h5>
                        <p>Plotlyã¨Matplotlibã‚’ä½¿ç”¨ã—ã¦ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸã‚°ãƒ©ãƒ•ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
                        
                        <h6>å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h6>
                        <pre><code>pip install plotly matplotlib seaborn</code></pre>
                        
                        <h6>custom_charts.py ã‚’ä½œæˆ</h6>
                        <pre><code>import streamlit as st
import pandas as pd
import numpy as np
import plotly.express as px
import plotly.graph_objects as go
import matplotlib.pyplot as plt
import seaborn as sns

# ãƒšãƒ¼ã‚¸è¨­å®š
st.set_page_config(
    page_title="ã‚«ã‚¹ã‚¿ãƒ ã‚°ãƒ©ãƒ•ãƒ‡ãƒ¢",
    page_icon="ğŸ¨",
    layout="wide"
)

st.title("ğŸ¨ ã‚«ã‚¹ã‚¿ãƒ ã‚°ãƒ©ãƒ•ãƒ‡ãƒ¢")

# ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
@st.cache_data
def load_data():
    # å£²ä¸Šãƒ‡ãƒ¼ã‚¿
    np.random.seed(42)
    dates = pd.date_range('2024-01-01', '2024-12-31', freq='M')
    sales_data = pd.DataFrame({
        'date': dates,
        'æ±äº¬': np.random.randint(1000, 5000, len(dates)),
        'å¤§é˜ª': np.random.randint(800, 4000, len(dates)),
        'åå¤å±‹': np.random.randint(600, 3000, len(dates))
    })
    
    # æ•£å¸ƒå›³ãƒ‡ãƒ¼ã‚¿
    scatter_data = pd.DataFrame({
        'x': np.random.randn(100),
        'y': np.random.randn(100),
        'size': np.random.randint(10, 100, 100),
        'color': np.random.choice(['A', 'B', 'C'], 100)
    })
    
    return sales_data, scatter_data

sales_data, scatter_data = load_data()

# ã‚¿ãƒ–ã§æ•´ç†
tab1, tab2, tab3 = st.tabs(["ğŸ“Š Plotly", "ğŸ“ˆ Matplotlib", "ğŸ¯ è¤‡åˆã‚°ãƒ©ãƒ•"])

with tab1:
    st.subheader("Plotlyã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚°ãƒ©ãƒ•")
    
    # ç·šã‚°ãƒ©ãƒ•
    fig_line = px.line(
        sales_data.melt(id_vars='date', var_name='éƒ½å¸‚', value_name='å£²ä¸Š'),
        x='date', y='å£²ä¸Š', color='éƒ½å¸‚',
        title="æœˆåˆ¥å£²ä¸Šæ¨ç§»ï¼ˆã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ï¼‰"
    )
    fig_line.update_layout(
        xaxis_title="æœˆ",
        yaxis_title="å£²ä¸Š (ä¸‡å††)",
        hovermode='x unified'
    )
    st.plotly_chart(fig_line, use_container_width=True)
    
    # ãƒãƒ–ãƒ«ãƒãƒ£ãƒ¼ãƒˆ
    fig_bubble = px.scatter(
        scatter_data, x='x', y='y', size='size', color='color',
        title="ãƒãƒ–ãƒ«ãƒãƒ£ãƒ¼ãƒˆ",
        size_max=30
    )
    st.plotly_chart(fig_bubble, use_container_width=True)
    
    # 3Dãƒ—ãƒ­ãƒƒãƒˆ
    fig_3d = go.Figure(data=[go.Scatter3d(
        x=scatter_data['x'],
        y=scatter_data['y'],
        z=scatter_data['size'],
        mode='markers',
        marker=dict(
            size=scatter_data['size']/5,
            color=scatter_data['size'],
            colorscale='Viridis',
            opacity=0.8
        )
    )])
    fig_3d.update_layout(title="3Dãƒ—ãƒ­ãƒƒãƒˆ", scene=dict(
        xaxis_title='Xè»¸',
        yaxis_title='Yè»¸',
        zaxis_title='Zè»¸'
    ))
    st.plotly_chart(fig_3d, use_container_width=True)

with tab2:
    st.subheader("Matplotlibã«ã‚ˆã‚‹çµ±è¨ˆã‚°ãƒ©ãƒ•")
    
    # ã‚¹ã‚¿ã‚¤ãƒ«é¸æŠ
    style = st.selectbox(
        "Matplotlibã‚¹ã‚¿ã‚¤ãƒ«ã‚’é¸æŠ",
        ['default', 'seaborn-v0_8', 'ggplot', 'classic']
    )
    
    # ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ 
    fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 5))
    
    # ã‚¹ã‚¿ã‚¤ãƒ«é©ç”¨
    plt.style.use(style)
    
    # ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ 
    ax1.hist(scatter_data['x'], bins=20, alpha=0.7, color='skyblue', edgecolor='black')
    ax1.set_title('ãƒ‡ãƒ¼ã‚¿åˆ†å¸ƒï¼ˆãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ï¼‰')
    ax1.set_xlabel('å€¤')
    ax1.set_ylabel('é »åº¦')
    ax1.grid(True, alpha=0.3)
    
    # ãƒœãƒƒã‚¯ã‚¹ãƒ—ãƒ­ãƒƒãƒˆ
    cities_data = [sales_data['æ±äº¬'], sales_data['å¤§é˜ª'], sales_data['åå¤å±‹']]
    ax2.boxplot(cities_data, labels=['æ±äº¬', 'å¤§é˜ª', 'åå¤å±‹'])
    ax2.set_title('éƒ½å¸‚åˆ¥å£²ä¸Šåˆ†å¸ƒï¼ˆãƒœãƒƒã‚¯ã‚¹ãƒ—ãƒ­ãƒƒãƒˆï¼‰')
    ax2.set_ylabel('å£²ä¸Š (ä¸‡å††)')
    ax2.grid(True, alpha=0.3)
    
    plt.tight_layout()
    st.pyplot(fig)
    
    # Seabornã«ã‚ˆã‚‹ç›¸é–¢è¡Œåˆ—
    fig_corr, ax_corr = plt.subplots(figsize=(8, 6))
    correlation_matrix = sales_data[['æ±äº¬', 'å¤§é˜ª', 'åå¤å±‹']].corr()
    sns.heatmap(correlation_matrix, annot=True, cmap='coolwarm', center=0, ax=ax_corr)
    ax_corr.set_title('éƒ½å¸‚é–“å£²ä¸Šã®ç›¸é–¢é–¢ä¿‚')
    st.pyplot(fig_corr)

with tab3:
    st.subheader("è¤‡åˆã‚°ãƒ©ãƒ•ã¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰")
    
    # ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¡¨ç¤º
    col1, col2, col3 = st.columns(3)
    
    with col1:
        total_tokyo = sales_data['æ±äº¬'].sum()
        avg_tokyo = sales_data['æ±äº¬'].mean()
        st.metric(
            label="æ±äº¬ ç·å£²ä¸Š",
            value=f"Â¥{total_tokyo:,}ä¸‡",
            delta=f"å¹³å‡ Â¥{avg_tokyo:.0f}ä¸‡"
        )
    
    with col2:
        total_osaka = sales_data['å¤§é˜ª'].sum()
        avg_osaka = sales_data['å¤§é˜ª'].mean()
        st.metric(
            label="å¤§é˜ª ç·å£²ä¸Š",
            value=f"Â¥{total_osaka:,}ä¸‡",
            delta=f"å¹³å‡ Â¥{avg_osaka:.0f}ä¸‡"
        )
    
    with col3:
        total_nagoya = sales_data['åå¤å±‹'].sum()
        avg_nagoya = sales_data['åå¤å±‹'].mean()
        st.metric(
            label="åå¤å±‹ ç·å£²ä¸Š",
            value=f"Â¥{total_nagoya:,}ä¸‡",
            delta=f"å¹³å‡ Â¥{avg_nagoya:.0f}ä¸‡"
        )
    
    # å‹•çš„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
    st.subheader("ğŸ“… æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿")
    selected_months = st.slider(
        "è¡¨ç¤ºã™ã‚‹æœˆã‚’é¸æŠ",
        min_value=1,
        max_value=12,
        value=(1, 12),
        format="æœˆ"
    )
    
    # ãƒ•ã‚£ãƒ«ã‚¿é©ç”¨
    filtered_sales = sales_data[
        (sales_data['date'].dt.month >= selected_months[0]) &
        (sales_data['date'].dt.month <= selected_months[1])
    ]
    
    # ãƒ•ã‚£ãƒ«ã‚¿å¾Œã®ã‚°ãƒ©ãƒ•
    fig_filtered = px.bar(
        filtered_sales.melt(id_vars='date', var_name='éƒ½å¸‚', value_name='å£²ä¸Š'),
        x='date', y='å£²ä¸Š', color='éƒ½å¸‚',
        title=f"{selected_months[0]}æœˆã€œ{selected_months[1]}æœˆã®å£²ä¸Š"
    )
    st.plotly_chart(fig_filtered, use_container_width=True)

# ã‚°ãƒ©ãƒ•ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ¯”è¼ƒ
st.divider()
st.subheader("ğŸ“Š ã‚°ãƒ©ãƒ•ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä½¿ã„åˆ†ã‘")

comparison_data = {
    'ãƒ©ã‚¤ãƒ–ãƒ©ãƒª': ['Streamlitå†…è”µ', 'Plotly', 'Matplotlib', 'Seaborn'],
    'å­¦ç¿’ã‚³ã‚¹ãƒˆ': ['ä½', 'ä¸­', 'é«˜', 'ä¸­'],
    'ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–': ['â–³', 'â—', 'Ã—', 'â–³'],
    'ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ€§': ['â–³', 'â—', 'â—', 'â—‹'],
    'ç¾ã—ã•': ['â—‹', 'â—', 'â–³', 'â—'],
    'é©ç”¨å ´é¢': ['ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—', 'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰', 'å­¦è¡“è«–æ–‡', 'çµ±è¨ˆåˆ†æ']
}

st.table(pd.DataFrame(comparison_data))
</code></pre>
                        
                        <h6>å®Ÿè¡Œã¨ç¢ºèª</h6>
                        <pre><code>streamlit run custom_charts.py</code></pre>
                        
                        <h6>æœŸå¾…ã•ã‚Œã‚‹çµæœ</h6>
                        <p>Plotlyã€Matplotlibã€è¤‡åˆã‚°ãƒ©ãƒ•ã®å„ã‚¿ãƒ–ã§é«˜åº¦ãªã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³4: ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨KPI -->
                    <h3 class="section-title">3.4 ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨KPIã®è¡¨ç¤º</h3>
                    <p>ãƒ“ã‚¸ãƒã‚¹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã¯ã€é‡è¦ãªæŒ‡æ¨™ã‚’åˆ†ã‹ã‚Šã‚„ã™ãè¡¨ç¤ºã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚</p>

                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 3-4: KPIãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h5>
                        <p>ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã€ã‚²ãƒ¼ã‚¸ãƒãƒ£ãƒ¼ãƒˆã‚’çµ„ã¿åˆã‚ã›ãŸKPIãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
                        
                        <h6>kpi_dashboard.py ã‚’ä½œæˆ</h6>
                        <pre><code>import streamlit as st
import pandas as pd
import numpy as np
import plotly.graph_objects as go
import time

# ãƒšãƒ¼ã‚¸è¨­å®š
st.set_page_config(
    page_title="KPIãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰",
    page_icon="ğŸ“Š",
    layout="wide"
)

st.title("ğŸ“Š KPIãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰")

# ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
@st.cache_data
def generate_kpi_data():
    current_month = {
        'sales': 150000,
        'target': 200000,
        'customers': 1250,
        'conversion': 0.125,
        'satisfaction': 4.2
    }
    
    previous_month = {
        'sales': 140000,
        'target': 180000,
        'customers': 1100,
        'conversion': 0.110,
        'satisfaction': 4.0
    }
    
    return current_month, previous_month

current, previous = generate_kpi_data()

# ãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±
st.markdown("### ğŸ“… 2024å¹´3æœˆ æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆ")
st.markdown("---")

# KPIãƒ¡ãƒˆãƒªã‚¯ã‚¹
col1, col2, col3, col4 = st.columns(4)

with col1:
    sales_delta = current['sales'] - previous['sales']
    sales_delta_pct = (sales_delta / previous['sales']) * 100
    st.metric(
        label="ğŸ’° å£²ä¸Š",
        value=f"Â¥{current['sales']:,}",
        delta=f"{sales_delta_pct:+.1f}%"
    )

with col2:
    customer_delta = current['customers'] - previous['customers']
    customer_delta_pct = (customer_delta / previous['customers']) * 100
    st.metric(
        label="ğŸ‘¥ é¡§å®¢æ•°",
        value=f"{current['customers']:,}äºº",
        delta=f"{customer_delta_pct:+.1f}%"
    )

with col3:
    conv_delta = current['conversion'] - previous['conversion']
    conv_delta_pct = (conv_delta / previous['conversion']) * 100
    st.metric(
        label="ğŸ“ˆ ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç‡",
        value=f"{current['conversion']:.1%}",
        delta=f"{conv_delta_pct:+.1f}%"
    )

with col4:
    sat_delta = current['satisfaction'] - previous['satisfaction']
    st.metric(
        label="â­ é¡§å®¢æº€è¶³åº¦",
        value=f"{current['satisfaction']:.1f}/5.0",
        delta=f"{sat_delta:+.1f}"
    )

# ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ã¨é”æˆç‡
st.markdown("### ğŸ“Š ç›®æ¨™é”æˆçŠ¶æ³")

col1, col2 = st.columns(2)

with col1:
    # å£²ä¸Šç›®æ¨™ã®é€²æ—
    progress = current['sales'] / current['target']
    st.write("**å£²ä¸Šç›®æ¨™é”æˆç‡**")
    st.progress(progress)
    st.write(f"{progress:.1%} é”æˆ ({current['sales']:,} / {current['target']:,})")
    
    if progress >= 1.0:
        st.success("ğŸ‰ ç›®æ¨™é”æˆï¼")
    elif progress >= 0.8:
        st.warning("âš ï¸ ã‚‚ã†å°‘ã—ã§é”æˆ")
    else:
        st.error("ğŸ”¥ åŠªåŠ›ãŒå¿…è¦")

with col2:
    # æº€è¶³åº¦ã‚²ãƒ¼ã‚¸
    fig_gauge = go.Figure(go.Indicator(
        mode = "gauge+number+delta",
        value = current['satisfaction'],
        domain = {'x': [0, 1], 'y': [0, 1]},
        title = {'text': "é¡§å®¢æº€è¶³åº¦"},
        delta = {'reference': previous['satisfaction']},
        gauge = {
            'axis': {'range': [None, 5]},
            'bar': {'color': "darkblue"},
            'steps': [
                {'range': [0, 2], 'color': "lightgray"},
                {'range': [2, 3], 'color': "gray"},
                {'range': [3, 4], 'color': "lightgreen"},
                {'range': [4, 5], 'color': "green"}
            ],
            'threshold': {
                'line': {'color': "red", 'width': 4},
                'thickness': 0.75,
                'value': 4.5
            }
        }
    ))
    fig_gauge.update_layout(height=300)
    st.plotly_chart(fig_gauge, use_container_width=True)

# è©³ç´°åˆ†æ
st.markdown("### ğŸ“ˆ è©³ç´°åˆ†æ")

tab1, tab2, tab3 = st.tabs(["ğŸ“Š ãƒˆãƒ¬ãƒ³ãƒ‰", "ğŸ¯ ç›®æ¨™åˆ†æ", "ğŸ“‹ è©³ç´°ãƒ‡ãƒ¼ã‚¿"])

with tab1:
    # æœˆæ¬¡ãƒˆãƒ¬ãƒ³ãƒ‰ï¼ˆã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼‰
    months = ['1æœˆ', '2æœˆ', '3æœˆ']
    sales_trend = [120000, 140000, 150000]
    target_trend = [150000, 180000, 200000]
    
    trend_df = pd.DataFrame({
        'æœˆ': months,
        'å®Ÿç¸¾': sales_trend,
        'ç›®æ¨™': target_trend
    })
    
    st.write("**æœˆæ¬¡å£²ä¸Šãƒˆãƒ¬ãƒ³ãƒ‰**")
    st.line_chart(trend_df.set_index('æœˆ'))

with tab2:
    # ç›®æ¨™åˆ†æ
    st.write("**ç›®æ¨™é”æˆè¦å› åˆ†æ**")
    
    factors = ['æ–°è¦é¡§å®¢', 'æ—¢å­˜é¡§å®¢', 'ã‚¢ãƒƒãƒ—ã‚»ãƒ«', 'ã‚¯ãƒ­ã‚¹ã‚»ãƒ«']
    contributions = [30, 45, 15, 10]
    
    fig_pie = go.Figure(data=[go.Pie(
        labels=factors,
        values=contributions,
        hole=.3
    )])
    fig_pie.update_layout(title="å£²ä¸Šè²¢çŒ®è¦å› ")
    st.plotly_chart(fig_pie, use_container_width=True)

with tab3:
    # è©³ç´°ãƒ‡ãƒ¼ã‚¿
    st.write("**æœˆæ¬¡æ¯”è¼ƒè¡¨**")
    
    comparison_df = pd.DataFrame({
        'æŒ‡æ¨™': ['å£²ä¸Š', 'é¡§å®¢æ•°', 'ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç‡', 'æº€è¶³åº¦'],
        'ä»Šæœˆ': [f"Â¥{current['sales']:,}", f"{current['customers']:,}äºº", 
                f"{current['conversion']:.1%}", f"{current['satisfaction']:.1f}"],
        'å‰æœˆ': [f"Â¥{previous['sales']:,}", f"{previous['customers']:,}äºº", 
                f"{previous['conversion']:.1%}", f"{previous['satisfaction']:.1f}"],
        'å¤‰åŒ–': [f"{((current['sales']/previous['sales']-1)*100):+.1f}%",
                f"{((current['customers']/previous['customers']-1)*100):+.1f}%",
                f"{((current['conversion']/previous['conversion']-1)*100):+.1f}%",
                f"{(current['satisfaction']-previous['satisfaction']):+.1f}"]
    })
    
    st.dataframe(comparison_df, use_container_width=True, hide_index=True)

# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ãƒ‡ãƒ¢
st.markdown("### âš¡ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°")

if st.button("ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°"):
    # ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã¨ã‚¹ãƒ”ãƒŠãƒ¼
    progress_bar = st.progress(0)
    status_text = st.empty()
    
    for i in range(100):
        progress_bar.progress(i + 1)
        status_text.text(f'æ›´æ–°ä¸­... {i+1}%')
        time.sleep(0.01)
    
    status_text.text('æ›´æ–°å®Œäº†!')
    st.success("ãƒ‡ãƒ¼ã‚¿ãŒæ­£å¸¸ã«æ›´æ–°ã•ã‚Œã¾ã—ãŸã€‚")
    st.balloons()  # ãŠç¥ã„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
</code></pre>
                        
                        <h6>å®Ÿè¡Œã¨ç¢ºèª</h6>
                        <pre><code>streamlit run kpi_dashboard.py</code></pre>
                        
                        <h6>æœŸå¾…ã•ã‚Œã‚‹çµæœ</h6>
                        <p>KPIãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã€ã‚²ãƒ¼ã‚¸ãƒãƒ£ãƒ¼ãƒˆã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°æ©Ÿèƒ½ã‚’å«ã‚€æœ¬æ ¼çš„ãªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
                    </div>

                    <!-- ç†è§£åº¦ç¢ºèª -->
                    <div class="quiz-container">
                        <h5>ç†è§£åº¦ç¢ºèªã‚¯ã‚¤ã‚º</h5>
                        <ol>
                            <li>
                                <strong>DataFrameã®è¡¨ç¤ºã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ‡ãƒ¼ã‚¿ã‚’ç·¨é›†ã§ãã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ</strong>
                                <ul style="list-style-type: none;">
                                    <li>a) st.dataframe()</li>
                                    <li>b) st.table()</li>
                                    <li>c) st.data_editor()</li>
                                    <li>d) st.write()</li>
                                </ul>
                                <details style="margin-top: 0.5rem;">
                                    <summary>è§£ç­”ã‚’è¦‹ã‚‹</summary>
                                    <p><strong>ç­”ãˆ: c)</strong> st.data_editor() ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚»ãƒ«å€¤ã‚’ç›´æ¥ç·¨é›†ã§ãã¾ã™ã€‚</p>
                                </details>
                            </li>
                            
                            <li>
                                <strong>Streamlitã§åœ°å›³ä¸Šã«ãƒã‚¤ãƒ³ãƒˆã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ä½•ã§ã™ã‹ï¼Ÿ</strong>
                                <ul style="list-style-type: none;">
                                    <li>a) st.map()</li>
                                    <li>b) st.geo()</li>
                                    <li>c) st.location()</li>
                                    <li>d) st.coordinates()</li>
                                </ul>
                                <details style="margin-top: 0.5rem;">
                                    <summary>è§£ç­”ã‚’è¦‹ã‚‹</summary>
                                    <p><strong>ç­”ãˆ: a)</strong> st.map() ã§ç·¯åº¦ãƒ»çµŒåº¦ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åœ°å›³ä¸Šã«ãƒã‚¤ãƒ³ãƒˆã‚’è¡¨ç¤ºã§ãã¾ã™ã€‚</p>
                                </details>
                            </li>
                            
                            <li>
                                <strong>å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆPlotlyã€Matplotlibï¼‰ã‚’ä½¿ã†åˆ©ç‚¹ã‚’3ã¤æŒ™ã’ã¦ãã ã•ã„</strong>
                                <details style="margin-top: 0.5rem;">
                                    <summary>è§£ç­”ã‚’è¦‹ã‚‹</summary>
                                    <p><strong>ç­”ãˆä¾‹:</strong><br>
                                    1. é«˜åº¦ãªã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¯èƒ½<br>
                                    2. ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ãŒè±Šå¯Œ<br>
                                    3. ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ<br>
                                    4. è¤‡é›‘ãªã‚°ãƒ©ãƒ•ã‚¿ã‚¤ãƒ—ã«å¯¾å¿œ<br>
                                    5. ç¾ã—ã„ãƒ‡ã‚¶ã‚¤ãƒ³</p>
                                </details>
                            </li>
                            
                            <li>
                                <strong>KPIãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§é‡è¦ãªè¦ç´ ã‚’3ã¤ç­”ãˆã¦ãã ã•ã„</strong>
                                <details style="margin-top: 0.5rem;">
                                    <summary>è§£ç­”ã‚’è¦‹ã‚‹</summary>
                                    <p><strong>ç­”ãˆä¾‹:</strong><br>
                                    1. åˆ†ã‹ã‚Šã‚„ã™ã„ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¡¨ç¤º<br>
                                    2. å‰æœŸæ¯”è¼ƒãƒ»å¤‰åŒ–ç‡ã®è¡¨ç¤º<br>
                                    3. ç›®æ¨™é”æˆçŠ¶æ³ã®è¦–è¦šåŒ–<br>
                                    4. é©åˆ‡ãªè‰²ä½¿ã„ã¨ã‚¢ãƒ©ãƒ¼ãƒˆ<br>
                                    5. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°æ©Ÿèƒ½</p>
                                </details>
                            </li>
                        </ol>
                    </div>

                    <!-- ç« é–“ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="streamlit-learning-material-2.html" class="btn btn-secondary">â† å‰ã®ç« : åŸºæœ¬çš„ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</a>
                        <a href="streamlit-learning-material-4.html" class="btn btn-primary">æ¬¡ã®ç« : ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã¨ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ â†’</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>