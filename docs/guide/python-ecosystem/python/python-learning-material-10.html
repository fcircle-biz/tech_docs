<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python学習教材 第10章 - 実践プロジェクト開発</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <style>
        /* Python専用カラーテーマ */
        :root {
            --python-primary: #3776ab;
            --python-secondary: #ffd43b;
            --python-accent: #4b8bbe;
            --python-bg-light: #f0f6fc;
            --python-bg-yellow: #fffbf0;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        .navbar {
            background-color: var(--python-primary);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
            background-color: #f8f9fa;
            border-right: 1px solid #dee2e6;
        }

        .chapter-title {
            color: var(--python-primary);
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 3px solid var(--python-primary);
            padding-bottom: 0.5rem;
            font-weight: 600;
        }

        .section-title {
            color: var(--python-accent);
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
            font-weight: 500;
        }

        .quiz-container {
            background-color: var(--python-bg-light);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid var(--python-primary);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .highlight {
            background-color: var(--python-bg-yellow);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid var(--python-secondary);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .nav-link.active {
            background-color: var(--python-primary) !important;
            color: white !important;
        }

        .nav-link {
            color: #6c757d;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background-color: var(--python-bg-light);
            color: var(--python-primary);
        }

        pre {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 1rem;
            overflow-x: auto;
        }

        code {
            background-color: #f8f9fa;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            color: var(--python-primary);
            font-weight: 500;
        }

        .btn-primary {
            background-color: var(--python-primary);
            border-color: var(--python-primary);
        }

        .btn-primary:hover {
            background-color: var(--python-accent);
            border-color: var(--python-accent);
        }

        .project-card {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            background-color: #ffffff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="../README.html">
                <strong>Python学習教材</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../README.html">学習ガイド</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../../../../cheatsheet/python/python-basics-cheatsheet.html">チートシート</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>学習章</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="python-learning-material-1.html">
                                第1章: Python入門と開発環境構築
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="python-learning-material-2.html">
                                第2章: 基本的な文法と変数
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="python-learning-material-3.html">
                                第3章: 制御構造の基礎
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="python-learning-material-4.html">
                                第4章: 関数とモジュール
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="python-learning-material-5.html">
                                第5章: データ構造の基礎
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="python-learning-material-6.html">
                                第6章: ファイル操作と例外処理
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="python-learning-material-7.html">
                                第7章: オブジェクト指向プログラミング入門
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="python-learning-material-8.html">
                                第8章: 標準ライブラリの活用
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="python-learning-material-9.html">
                                第9章: 外部ライブラリとパッケージ管理
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="python-learning-material-10.html">
                                第10章: 実践プロジェクト開発
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第10章: 実践プロジェクト開発</h1>
                </div>

                <div id="chapter10">
                    <h2 class="chapter-title">実践プロジェクト開発</h2>
                    
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>これまで学んだPythonの知識を統合し、実用的なアプリケーションを開発する</li>
                            <li>プロジェクト設計とコード構成の実践的なスキルを身につける</li>
                            <li>ユーザーインターフェース（CLI、GUI）の基本的な実装方法を学ぶ</li>
                            <li>エラーハンドリングとテストを含む品質の高いコードを書けるようになる</li>
                            <li>プロジェクトのドキュメント化と配布の基礎を理解する</li>
                        </ul>
                    </div>

                    <h3 class="section-title">10.1 プロジェクト設計の基本原則</h3>
                    <p>実用的なアプリケーション開発では、要件分析、設計、実装、テスト、ドキュメント化という段階的なアプローチが重要です。</p>
                    
                    <div class="project-card">
                        <h4>設計原則（SOLID原則）</h4>
                        <ul>
                            <li><strong>単一責任原則</strong>：1つのクラスは1つの責任のみを持つ</li>
                            <li><strong>開放閉鎖原則</strong>：拡張に対して開放的、修正に対して閉鎖的</li>
                            <li><strong>リスコフ置換原則</strong>：派生クラスは基底クラスと置換可能</li>
                            <li><strong>インターフェース分離原則</strong>：利用しないインターフェースに依存しない</li>
                            <li><strong>依存性逆転原則</strong>：抽象に依存し、具体に依存しない</li>
                        </ul>
                    </div>

                    <h3 class="section-title">10.2 プロジェクト1: データ分析・可視化ツール</h3>
                    <p>CSVデータの読み込み、分析、グラフ化を行う総合的なツールを作成します。</p>
                    
                    <div class="exercise-container">
                        <h5>実習 10-1: 売上データ分析システム</h5>
                        <p>企業の売上データを分析し、可視化するシステムを構築しましょう。</p>
                        
                        <h6>プロジェクト構成</h6>
                        <pre><code>sales_analyzer/
├── main.py                 # メインエントリーポイント
├── config.py              # 設定ファイル
├── requirements.txt       # 依存関係
├── data/
│   ├── sales_data.csv     # サンプルデータ
│   └── product_master.csv # 商品マスター
├── src/
│   ├── __init__.py
│   ├── data_loader.py     # データ読み込み
│   ├── analyzer.py        # 分析エンジン
│   ├── visualizer.py      # 可視化
│   └── reporter.py        # レポート生成
├── tests/
│   ├── test_analyzer.py
│   └── test_data_loader.py
└── output/                # 出力ファイル</code></pre>

                        <h6>メインモジュール (main.py)</h6>
                        <pre><code>#!/usr/bin/env python3
"""
売上データ分析システム
使用方法: python main.py [options]
"""

import argparse
import sys
import logging
from pathlib import Path
from datetime import datetime

from src.data_loader import DataLoader
from src.analyzer import SalesAnalyzer
from src.visualizer import SalesVisualizer
from src.reporter import ReportGenerator
import config

# ログ設定
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('sales_analyzer.log'),
        logging.StreamHandler(sys.stdout)
    ]
)
logger = logging.getLogger(__name__)

class SalesAnalysisApp:
    """売上分析アプリケーションのメインクラス"""
    
    def __init__(self):
        self.data_loader = DataLoader()
        self.analyzer = SalesAnalyzer()
        self.visualizer = SalesVisualizer()
        self.reporter = ReportGenerator()
        
    def run_analysis(self, data_file, output_dir="output"):
        """分析を実行"""
        try:
            logger.info(f"分析開始: {data_file}")
            
            # 1. データ読み込み
            logger.info("データを読み込み中...")
            sales_data = self.data_loader.load_sales_data(data_file)
            
            if sales_data is None or sales_data.empty:
                logger.error("データが空です")
                return False
            
            logger.info(f"データ読み込み完了: {len(sales_data)}件")
            
            # 2. データ分析
            logger.info("データ分析中...")
            analysis_results = self.analyzer.analyze(sales_data)
            
            # 3. 可視化
            logger.info("グラフ作成中...")
            charts = self.visualizer.create_charts(sales_data, output_dir)
            
            # 4. レポート生成
            logger.info("レポート生成中...")
            report_path = self.reporter.generate_report(
                analysis_results, charts, output_dir
            )
            
            logger.info(f"分析完了: {report_path}")
            return True
            
        except Exception as e:
            logger.error(f"分析エラー: {e}")
            return False

def main():
    """メイン関数"""
    parser = argparse.ArgumentParser(description="売上データ分析システム")
    parser.add_argument("data_file", help="分析対象のCSVファイル")
    parser.add_argument("--output", "-o", default="output", 
                       help="出力ディレクトリ (default: output)")
    parser.add_argument("--verbose", "-v", action="store_true",
                       help="詳細ログを表示")
    
    args = parser.parse_args()
    
    if args.verbose:
        logging.getLogger().setLevel(logging.DEBUG)
    
    # 出力ディレクトリの作成
    Path(args.output).mkdir(exist_ok=True)
    
    # アプリケーション実行
    app = SalesAnalysisApp()
    success = app.run_analysis(args.data_file, args.output)
    
    sys.exit(0 if success else 1)

if __name__ == "__main__":
    main()</code></pre>

                        <h6>データ分析モジュール (src/analyzer.py)</h6>
                        <pre><code>import pandas as pd
import numpy as np
from datetime import datetime, timedelta
import logging

logger = logging.getLogger(__name__)

class SalesAnalyzer:
    """売上データ分析クラス"""
    
    def __init__(self):
        self.results = {}
    
    def analyze(self, sales_data):
        """包括的な売上分析を実行"""
        logger.info("売上分析を開始します")
        
        # データの前処理
        df = self._preprocess_data(sales_data)
        
        # 各種分析の実行
        self.results = {
            'basic_stats': self._calculate_basic_stats(df),
            'time_series': self._time_series_analysis(df),
            'product_analysis': self._product_analysis(df),
            'customer_analysis': self._customer_analysis(df),
            'trend_analysis': self._trend_analysis(df)
        }
        
        logger.info("売上分析が完了しました")
        return self.results
    
    def _preprocess_data(self, df):
        """データの前処理"""
        # 日付列の変換
        if 'date' in df.columns:
            df['date'] = pd.to_datetime(df['date'])
        
        # 売上金額の計算（数量 × 単価）
        if 'quantity' in df.columns and 'unit_price' in df.columns:
            df['sales_amount'] = df['quantity'] * df['unit_price']
        
        # 月・曜日の追加
        if 'date' in df.columns:
            df['year_month'] = df['date'].dt.to_period('M')
            df['weekday'] = df['date'].dt.day_name()
        
        return df
    
    def _calculate_basic_stats(self, df):
        """基本統計の計算"""
        stats = {
            'total_sales': df['sales_amount'].sum(),
            'total_transactions': len(df),
            'average_transaction': df['sales_amount'].mean(),
            'median_transaction': df['sales_amount'].median(),
            'max_transaction': df['sales_amount'].max(),
            'min_transaction': df['sales_amount'].min(),
            'std_transaction': df['sales_amount'].std()
        }
        
        # 期間の分析
        if 'date' in df.columns:
            stats['date_range'] = {
                'start': df['date'].min(),
                'end': df['date'].max(),
                'days': (df['date'].max() - df['date'].min()).days
            }
        
        return stats
    
    def _time_series_analysis(self, df):
        """時系列分析"""
        if 'date' not in df.columns:
            return {}
        
        # 日次売上
        daily_sales = df.groupby('date')['sales_amount'].sum()
        
        # 月次売上
        monthly_sales = df.groupby('year_month')['sales_amount'].sum()
        
        # 曜日別売上
        weekday_sales = df.groupby('weekday')['sales_amount'].sum()
        
        return {
            'daily_sales': daily_sales.to_dict(),
            'monthly_sales': {str(k): v for k, v in monthly_sales.to_dict().items()},
            'weekday_sales': weekday_sales.to_dict(),
            'growth_rate': self._calculate_growth_rate(monthly_sales)
        }
    
    def _product_analysis(self, df):
        """商品分析"""
        if 'product_name' not in df.columns:
            return {}
        
        product_stats = df.groupby('product_name').agg({
            'sales_amount': ['sum', 'count', 'mean'],
            'quantity': 'sum'
        }).round(2)
        
        # カラム名の平坦化
        product_stats.columns = [f"{col[1]}_{col[0]}" for col in product_stats.columns]
        
        # 売上トップ10
        top_products = product_stats.sort_values('sum_sales_amount', ascending=False).head(10)
        
        return {
            'product_stats': product_stats.to_dict('index'),
            'top_products': top_products.to_dict('index')
        }
    
    def _customer_analysis(self, df):
        """顧客分析"""
        if 'customer_id' not in df.columns:
            return {}
        
        customer_stats = df.groupby('customer_id').agg({
            'sales_amount': ['sum', 'count', 'mean'],
            'date': ['min', 'max']
        }).round(2)
        
        # リピート率の計算
        repeat_customers = (customer_stats[('sales_amount', 'count')] > 1).sum()
        total_customers = len(customer_stats)
        repeat_rate = repeat_customers / total_customers * 100
        
        return {
            'total_customers': total_customers,
            'repeat_customers': repeat_customers,
            'repeat_rate': repeat_rate,
            'avg_customer_value': customer_stats[('sales_amount', 'sum')].mean()
        }
    
    def _trend_analysis(self, df):
        """トレンド分析"""
        if 'date' not in df.columns:
            return {}
        
        # 移動平均の計算
        daily_sales = df.groupby('date')['sales_amount'].sum().sort_index()
        ma_7 = daily_sales.rolling(window=7).mean()
        ma_30 = daily_sales.rolling(window=30).mean()
        
        # トレンドの判定
        recent_trend = "増加" if ma_7.iloc[-1] > ma_7.iloc[-8] else "減少"
        
        return {
            'moving_averages': {
                '7_day': ma_7.dropna().to_dict(),
                '30_day': ma_30.dropna().to_dict()
            },
            'recent_trend': recent_trend
        }
    
    def _calculate_growth_rate(self, monthly_sales):
        """成長率の計算"""
        if len(monthly_sales) < 2:
            return 0
        
        growth_rates = monthly_sales.pct_change().dropna() * 100
        return growth_rates.mean()</code></pre>

                        <h6>設定ファイル (config.py)</h6>
                        <pre><code>"""アプリケーション設定"""

import os
from pathlib import Path

# プロジェクトのルートディレクトリ
PROJECT_ROOT = Path(__file__).parent

# データディレクトリ
DATA_DIR = PROJECT_ROOT / "data"
OUTPUT_DIR = PROJECT_ROOT / "output"

# ファイル設定
DEFAULT_DATA_FILE = DATA_DIR / "sales_data.csv"
LOG_FILE = PROJECT_ROOT / "sales_analyzer.log"

# チャート設定
CHART_CONFIG = {
    'figsize': (12, 8),
    'dpi': 300,
    'style': 'seaborn-v0_8',
    'color_palette': ['#3776ab', '#ffd43b', '#4b8bbe', '#ff6b6b', '#4ecdc4']
}

# レポート設定
REPORT_CONFIG = {
    'title': '売上分析レポート',
    'author': 'Sales Analysis System',
    'company': 'Your Company Name'
}

# データベース設定（将来の拡張用）
DATABASE_CONFIG = {
    'host': os.getenv('DB_HOST', 'localhost'),
    'port': os.getenv('DB_PORT', 5432),
    'database': os.getenv('DB_NAME', 'sales_db'),
    'username': os.getenv('DB_USER', 'user'),
    'password': os.getenv('DB_PASSWORD', 'password')
}</code></pre>
                    </div>

                    <h3 class="section-title">10.3 プロジェクト2: Webスクレイピング・ニュース収集ツール</h3>
                    <p>複数のニュースサイトから情報を自動収集し、構造化データとして保存するツールを開発します。</p>
                    
                    <div class="exercise-container">
                        <h5>実習 10-2: ニュースアグリゲーター</h5>
                        <p>複数のニュースサイトから記事を収集し、分析するシステムを作成しましょう。</p>
                        
                        <h6>コード例 (news_scraper.py)</h6>
                        <pre><code>import requests
from bs4 import BeautifulSoup
import pandas as pd
import json
import time
import logging
from datetime import datetime, timedelta
from urllib.parse import urljoin, urlparse
import re
from dataclasses import dataclass
from typing import List, Optional

# ログ設定
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

@dataclass
class NewsArticle:
    """ニュース記事のデータクラス"""
    title: str
    content: str
    url: str
    published_date: Optional[datetime]
    source: str
    category: Optional[str] = None
    tags: List[str] = None
    
    def to_dict(self):
        """辞書形式に変換"""
        return {
            'title': self.title,
            'content': self.content,
            'url': self.url,
            'published_date': self.published_date.isoformat() if self.published_date else None,
            'source': self.source,
            'category': self.category,
            'tags': self.tags or []
        }

class NewsScraperBase:
    """ニュース スクレイパーの基底クラス"""
    
    def __init__(self, base_url: str, name: str):
        self.base_url = base_url
        self.name = name
        self.session = requests.Session()
        self.session.headers.update({
            'User-Agent': 'Educational News Scraper 1.0'
        })
    
    def fetch_page(self, url: str, delay: float = 1.0) -> Optional[BeautifulSoup]:
        """ページを取得してBeautifulSoupオブジェクトを返す"""
        try:
            response = self.session.get(url, timeout=10)
            response.raise_for_status()
            
            # レート制限
            time.sleep(delay)
            
            return BeautifulSoup(response.content, 'html.parser')
            
        except requests.exceptions.RequestException as e:
            logger.error(f"ページ取得エラー {url}: {e}")
            return None
    
    def extract_articles(self, soup: BeautifulSoup) -> List[NewsArticle]:
        """記事を抽出（サブクラスで実装）"""
        raise NotImplementedError
    
    def scrape(self, max_articles: int = 10) -> List[NewsArticle]:
        """ニュースを収集"""
        articles = []
        soup = self.fetch_page(self.base_url)
        
        if soup:
            articles = self.extract_articles(soup)
            articles = articles[:max_articles]
            
        logger.info(f"{self.name}: {len(articles)}記事を収集")
        return articles

class TechNewsAggregator:
    """技術ニュース収集システム"""
    
    def __init__(self):
        self.scrapers = []
        self.articles = []
    
    def add_scraper(self, scraper: NewsScraperBase):
        """スクレイパーを追加"""
        self.scrapers.append(scraper)
    
    def collect_news(self, max_articles_per_source: int = 10) -> List[NewsArticle]:
        """全ソースからニュースを収集"""
        self.articles = []
        
        for scraper in self.scrapers:
            try:
                articles = scraper.scrape(max_articles_per_source)
                self.articles.extend(articles)
                
                # スクレイパー間の間隔
                time.sleep(2)
                
            except Exception as e:
                logger.error(f"{scraper.name} でエラー: {e}")
        
        # 重複記事の除去
        self.articles = self._remove_duplicates(self.articles)
        
        logger.info(f"総計 {len(self.articles)} 記事を収集")
        return self.articles
    
    def _remove_duplicates(self, articles: List[NewsArticle]) -> List[NewsArticle]:
        """重複記事を除去"""
        seen_titles = set()
        unique_articles = []
        
        for article in articles:
            # タイトルの正規化
            normalized_title = re.sub(r'\s+', ' ', article.title.lower().strip())
            
            if normalized_title not in seen_titles:
                seen_titles.add(normalized_title)
                unique_articles.append(article)
        
        logger.info(f"重複除去: {len(articles)} -> {len(unique_articles)} 記事")
        return unique_articles
    
    def save_to_csv(self, filename: str = None):
        """CSVファイルに保存"""
        if not filename:
            timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
            filename = f"news_articles_{timestamp}.csv"
        
        df = pd.DataFrame([article.to_dict() for article in self.articles])
        df.to_csv(filename, index=False, encoding='utf-8')
        
        logger.info(f"CSVファイルに保存: {filename}")
    
    def save_to_json(self, filename: str = None):
        """JSONファイルに保存"""
        if not filename:
            timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
            filename = f"news_articles_{timestamp}.json"
        
        data = {
            'collected_at': datetime.now().isoformat(),
            'total_articles': len(self.articles),
            'sources': list(set(article.source for article in self.articles)),
            'articles': [article.to_dict() for article in self.articles]
        }
        
        with open(filename, 'w', encoding='utf-8') as f:
            json.dump(data, f, ensure_ascii=False, indent=2)
        
        logger.info(f"JSONファイルに保存: {filename}")
    
    def analyze_articles(self):
        """記事の簡単な分析"""
        if not self.articles:
            logger.info("分析する記事がありません")
            return
        
        # ソース別記事数
        source_counts = {}
        for article in self.articles:
            source_counts[article.source] = source_counts.get(article.source, 0) + 1
        
        # キーワード分析（簡易版）
        all_text = ' '.join([article.title + ' ' + article.content for article in self.articles])
        keywords = self._extract_keywords(all_text)
        
        print("\n=== 記事分析結果 ===")
        print(f"総記事数: {len(self.articles)}")
        print(f"\nソース別記事数:")
        for source, count in sorted(source_counts.items()):
            print(f"  {source}: {count}記事")
        
        print(f"\n頻出キーワード（上位10）:")
        for keyword, count in keywords[:10]:
            print(f"  {keyword}: {count}回")
    
    def _extract_keywords(self, text: str, min_length: int = 3) -> List[tuple]:
        """簡易キーワード抽出"""
        # 英数字のみの単語を抽出
        words = re.findall(r'\b[a-zA-Z]{' + str(min_length) + ',}\b', text.lower())
        
        # ストップワードの除去
        stop_words = {'the', 'and', 'for', 'are', 'but', 'not', 'you', 'all', 'can', 'had', 'her', 'was', 'one', 'our', 'has', 'use', 'its', 'now', 'his', 'how', 'man', 'new', 'may', 'say', 'she', 'two', 'way', 'who', 'boy', 'did', 'get', 'has', 'him', 'old', 'see', 'too', 'any', 'day', 'end', 'why', 'let', 'put', 'say', 'she', 'try', 'ask', 'men', 'run', 'own'}
        words = [word for word in words if word not in stop_words]
        
        # 頻度をカウント
        word_counts = {}
        for word in words:
            word_counts[word] = word_counts.get(word, 0) + 1
        
        # 頻度順にソート
        return sorted(word_counts.items(), key=lambda x: x[1], reverse=True)

# 使用例とデモンストレーション
def create_demo_scraper():
    """デモ用スクレイパーの作成"""
    
    class DemoTechScraper(NewsScraperBase):
        """デモ用技術ニュース スクレイパー"""
        
        def extract_articles(self, soup):
            # 実際のサイトでは適切なセレクターを使用
            articles = []
            
            # デモ用のサンプルデータ
            demo_articles = [
                {
                    'title': 'Python 3.12の新機能が発表',
                    'content': 'Python 3.12では、新しい型ヒントの機能と性能改善が含まれています。',
                    'url': 'https://example.com/python-3-12',
                    'category': 'Programming'
                },
                {
                    'title': 'AI技術の最新トレンド',
                    'content': '機械学習とディープラーニングの最新動向について解説します。',
                    'url': 'https://example.com/ai-trends',
                    'category': 'AI'
                },
                {
                    'title': 'Webセキュリティの重要性',
                    'content': 'サイバーセキュリティの脅威と対策について説明します。',
                    'url': 'https://example.com/web-security',
                    'category': 'Security'
                }
            ]
            
            for item in demo_articles:
                article = NewsArticle(
                    title=item['title'],
                    content=item['content'],
                    url=item['url'],
                    published_date=datetime.now(),
                    source=self.name,
                    category=item['category']
                )
                articles.append(article)
            
            return articles
    
    return DemoTechScraper("https://example.com", "Tech Demo Site")

# メイン実行例
if __name__ == "__main__":
    # ニュースアグリゲーターの作成
    aggregator = TechNewsAggregator()
    
    # デモ用スクレイパーを追加
    demo_scraper = create_demo_scraper()
    aggregator.add_scraper(demo_scraper)
    
    # ニュース収集
    articles = aggregator.collect_news(max_articles_per_source=5)
    
    # 分析
    aggregator.analyze_articles()
    
    # ファイルに保存
    aggregator.save_to_csv()
    aggregator.save_to_json()
    
    print(f"\n収集完了: {len(articles)} 記事")</code></pre>
                    </div>

                    <h3 class="section-title">10.4 プロジェクト3: タスク管理CLIアプリケーション</h3>
                    <p>コマンドラインでのタスク管理システムを作成し、実用的なCLIアプリケーションの開発手法を学びます。</p>
                    
                    <div class="exercise-container">
                        <h5>実習 10-3: TaskMaster CLI</h5>
                        <p>高機能なコマンドライン タスク管理システムを開発しましょう。</p>
                        
                        <h6>主な機能</h6>
                        <ul>
                            <li>タスクの追加・削除・更新・一覧表示</li>
                            <li>優先度と期限の設定</li>
                            <li>カテゴリとタグによる分類</li>
                            <li>検索とフィルタリング</li>
                            <li>進捗の可視化</li>
                            <li>データのバックアップと復元</li>
                        </ul>
                        
                        <h6>使用方法</h6>
                        <pre><code># タスクの追加
python taskmaster.py add "Pythonの勉強" --priority high --due "2024-08-15" --category "学習"

# タスクの一覧表示
python taskmaster.py list --status pending --priority high

# タスクの完了
python taskmaster.py complete 1

# 統計情報の表示
python taskmaster.py stats</code></pre>
                    </div>

                    <h3 class="section-title">10.5 コード品質とテスト</h3>
                    <p>実用的なアプリケーションには、適切なテストとコード品質の管理が不可欠です。</p>
                    
                    <h4>単体テストの実装</h4>
                    <pre><code>import unittest
from unittest.mock import patch, MagicMock
import pandas as pd
from datetime import datetime

from src.analyzer import SalesAnalyzer

class TestSalesAnalyzer(unittest.TestCase):
    """SalesAnalyzerクラスのテスト"""
    
    def setUp(self):
        """テスト用のセットアップ"""
        self.analyzer = SalesAnalyzer()
        self.sample_data = pd.DataFrame({
            'date': ['2024-01-01', '2024-01-02', '2024-01-03'],
            'product_name': ['商品A', '商品B', '商品A'],
            'quantity': [2, 1, 3],
            'unit_price': [1000, 2000, 1000],
            'customer_id': ['C001', 'C002', 'C001']
        })
    
    def test_preprocess_data(self):
        """データ前処理のテスト"""
        processed = self.analyzer._preprocess_data(self.sample_data.copy())
        
        # 日付の変換確認
        self.assertEqual(processed['date'].dtype, 'datetime64[ns]')
        
        # 売上金額の計算確認
        self.assertTrue('sales_amount' in processed.columns)
        self.assertEqual(processed['sales_amount'].iloc[0], 2000)
    
    def test_basic_stats(self):
        """基本統計のテスト"""
        processed_data = self.analyzer._preprocess_data(self.sample_data.copy())
        stats = self.analyzer._calculate_basic_stats(processed_data)
        
        # 総売上の確認
        self.assertEqual(stats['total_sales'], 7000)  # 2000 + 2000 + 3000
        
        # 取引数の確認
        self.assertEqual(stats['total_transactions'], 3)
    
    def test_product_analysis(self):
        """商品分析のテスト"""
        processed_data = self.analyzer._preprocess_data(self.sample_data.copy())
        product_stats = self.analyzer._product_analysis(processed_data)
        
        # 商品統計の確認
        self.assertTrue('product_stats' in product_stats)
        self.assertTrue('商品A' in product_stats['product_stats'])
    
    @patch('src.analyzer.logger')
    def test_analyze_with_logging(self, mock_logger):
        """ログ出力のテスト"""
        self.analyzer.analyze(self.sample_data)
        
        # ログが呼ばれたことを確認
        self.assertTrue(mock_logger.info.called)

class TestDataIntegrity(unittest.TestCase):
    """データ整合性のテスト"""
    
    def test_empty_dataframe(self):
        """空のデータフレームの処理"""
        analyzer = SalesAnalyzer()
        empty_df = pd.DataFrame()
        
        # 例外が発生しないことを確認
        try:
            result = analyzer.analyze(empty_df)
            self.assertIsInstance(result, dict)
        except Exception as e:
            self.fail(f"空のデータフレームで例外が発生: {e}")
    
    def test_missing_columns(self):
        """必要な列が不足している場合のテスト"""
        analyzer = SalesAnalyzer()
        incomplete_df = pd.DataFrame({
            'date': ['2024-01-01'],
            'amount': [1000]
        })
        
        # 適切に処理されることを確認
        result = analyzer.analyze(incomplete_df)
        self.assertIsInstance(result, dict)

if __name__ == '__main__':
    # テストの実行
    unittest.main(verbosity=2)</code></pre>

                    <div class="quiz-container">
                        <h5>最終確認クイズ</h5>
                        <ol>
                            <li><strong>問題1:</strong> プロジェクト設計でSOLID原則の「S」は何を表しますか？</li>
                            <li><strong>問題2:</strong> Webスクレイピングで重要な配慮事項は何ですか？</li>
                            <li><strong>問題3:</strong> 単体テストで使用する標準ライブラリは？</li>
                            <li><strong>問題4:</strong> コマンドライン引数を処理するライブラリは？</li>
                        </ol>
                        
                        <details style="margin-top: 1rem;">
                            <summary>解答を見る</summary>
                            <div style="margin-top: 0.5rem;">
                                <p><strong>解答:</strong></p>
                                <ol>
                                    <li>単一責任原則（Single Responsibility Principle）</li>
                                    <li>レート制限、robots.txt の確認、著作権とプライバシーの尊重</li>
                                    <li>unittest</li>
                                    <li>argparse</li>
                                </ol>
                            </div>
                        </details>
                    </div>

                    <h3 class="section-title">10.6 まとめと今後の学習</h3>
                    <p>この章では、実践的なプロジェクト開発を通じて、これまで学んだPythonの知識を統合する方法を学びました。</p>

                    <div class="highlight">
                        <h6>習得したスキル</h6>
                        <ul>
                            <li>実用的なアプリケーションの設計と実装</li>
                            <li>複数の技術要素の統合</li>
                            <li>エラーハンドリングとログ管理</li>
                            <li>テストとコード品質の管理</li>
                            <li>プロジェクト構成とドキュメント化</li>
                        </ul>
                    </div>

                    <div class="project-card">
                        <h4>次のステップ - 発展的な学習への道筋</h4>
                        <ul>
                            <li><strong>Webアプリケーション開発</strong>：Flask や Django を使ったWebアプリ作成</li>
                            <li><strong>データサイエンス・機械学習</strong>：NumPy、scikit-learn、TensorFlow の活用</li>
                            <li><strong>自動化・DevOps</strong>：Ansible、Docker を使ったインフラ自動化</li>
                            <li><strong>アプリケーション配布</strong>：PyInstaller、Docker を使った配布</li>
                            <li><strong>API開発</strong>：FastAPI や Flask-RESTful を使ったAPI作成</li>
                            <li><strong>非同期プログラミング</strong>：asyncio を使った高性能アプリ開発</li>
                        </ul>
                    </div>

                    <div class="highlight">
                        <h6>継続的な学習のために</h6>
                        <ul>
                            <li>オープンソースプロジェクトへの貢献</li>
                            <li>技術コミュニティへの参加</li>
                            <li>個人プロジェクトの継続的な改善</li>
                            <li>最新技術動向のキャッチアップ</li>
                            <li>コードレビューと フィードバックの積極的な活用</li>
                        </ul>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="python-learning-material-9.html" class="btn btn-secondary">← 前の章: 外部ライブラリとパッケージ管理</a>
                        <a href="../README.html" class="btn btn-primary">学習ガイドに戻る</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
</body>
</html>