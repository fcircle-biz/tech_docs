<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Django + PostgreSQL チュートリアル Step 3 - Djangoプロジェクトの初期化と基本設定</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        
        .navbar {
            background-color: #2e7d33;
        }
        
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        
        .chapter-title {
            color: #2e7d33;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #2e7d33;
            padding-bottom: 0.5rem;
        }
        
        .section-title {
            color: #4caf50;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        
        .quiz-container {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #2e7d33;
        }
        
        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }
        
        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }
        
        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }
        
        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .nav-link.active {
            background-color: #2e7d33 !important;
            color: white !important;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Django + PostgreSQL チュートリアル</a>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="step1-environment-setup.html">
                                Step 1: 環境構築
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step2-docker-postgresql.html">
                                Step 2: PostgreSQL環境
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="step3-django-project-init.html">
                                Step 3: プロジェクト初期化
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step4-models-migration.html">
                                Step 4: モデル設計
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step5-views-templates-urls.html">
                                Step 5: ビュー・テンプレート
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step6-admin-interface.html">
                                Step 6: 管理サイト
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step7-crud-operations.html">
                                Step 7: CRUD操作
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step8-validation-security.html">
                                Step 8: バリデーション・セキュリティ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step9-testing-debugging.html">
                                Step 9: テスト・デバッグ
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">Step 3: Djangoプロジェクトの初期化と基本設定</h1>
                </div>

                <div id="step3">
                    <h2 class="chapter-title">プロジェクト構造の理解と設定の最適化</h2>
                    
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>Djangoプロジェクトの全体構造とディレクトリ構成の理解</li>
                            <li>settings.pyファイルの詳細設定と環境別設定管理</li>
                            <li>静的ファイル（CSS、JavaScript、画像）とメディアファイルの設定</li>
                            <li>日本語・日本時間に対応した国際化設定</li>
                            <li>セキュリティ設定の基本的な強化</li>
                            <li>開発サーバーとデバッグモードの活用</li>
                        </ul>
                    </div>

                    <h3 class="section-title">3.1 Djangoプロジェクト構造の詳細理解</h3>
                    <p>Djangoの「プロジェクト」と「アプリケーション」の概念を理解し、適切なディレクトリ構成を学習します。</p>

                    <div class="exercise-container">
                        <h5>実習 3-1: プロジェクト構造の分析と理解</h5>
                        <p>作成したプロジェクトの各ファイルとディレクトリの役割を詳しく学習します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>現在のプロジェクト構造を確認</li>
                            <li>各ファイルの役割を理解</li>
                            <li>推奨されるディレクトリ構成を実装</li>
                            <li>設定ファイルの分割を検討</li>
                        </ol>
                        <h6>現在のプロジェクト構造</h6>
                        <pre class="code-block"><code class="language-bash"># プロジェクト構造の詳細確認
tree /F /A

# 期待される出力:
django-tutorial/
│   .env                    # 環境変数設定ファイル
│   .gitignore             # Git除外設定
│   docker-compose.yml     # Docker Compose設定
│   manage.py              # Django管理コマンド
│   requirements.txt       # Python依存関係
├───hello/                 # Helloアプリケーション
│   │   admin.py           # 管理サイト設定
│   │   apps.py            # アプリケーション設定
│   │   models.py          # データモデル定義
│   │   tests.py           # テストコード
│   │   urls.py            # URL設定
│   │   views.py           # ビュー関数
│   │   __init__.py
│   └───migrations/        # データベースマイグレーション
└───myproject/             # プロジェクト設定
    │   asgi.py            # ASGI設定（非同期Web サーバー）
    │   settings.py        # Django基本設定
    │   urls.py            # ルートURL設定
    │   wsgi.py            # WSGI設定（Webサーバー）
    └───__init__.py</code></pre>
                        
                        <h6>各ファイルの役割詳解</h6>
                        <div style="border: 1px solid #ddd; padding: 1rem; margin: 1rem 0;">
                            <ul>
                                <li><strong>manage.py</strong>: Django管理コマンドの実行エントリーポイント</li>
                                <li><strong>settings.py</strong>: Django全体の設定ファイル</li>
                                <li><strong>urls.py</strong>: URLルーティング設定</li>
                                <li><strong>wsgi.py</strong>: 本番環境用のWebサーバーインターフェース</li>
                                <li><strong>asgi.py</strong>: 非同期処理用のWebサーバーインターフェース</li>
                            </ul>
                        </div>
                    </div>

                    <h3 class="section-title">3.2 settings.pyの詳細設定</h3>
                    <p>Djangoの動作を制御するsettings.pyファイルの各設定項目を理解し、適切に設定します。</p>

                    <div class="exercise-container">
                        <h5>実習 3-2: 開発環境用settings.pyの最適化</h5>
                        <p>本格的なWebアプリケーション開発に適したsettings.pyファイルを作成します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>現在のsettings.pyファイルをバックアップ</li>
                            <li>環境変数を活用した設定に更新</li>
                            <li>開発環境に特化した設定を追加</li>
                            <li>セキュリティ設定を強化</li>
                        </ol>
                        <h6>最適化されたsettings.py</h6>
                        <pre class="code-block"><code class="language-python">"""
Django settings for myproject project.

Generated by 'django-admin startproject' using Django 5.0.

For more information on this file, see
https://docs.djangoproject.com/en/5.0/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/5.0/ref/settings/
"""

import os
from pathlib import Path
from decouple import config, Csv

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = config('SECRET_KEY', default='django-insecure-change-this-in-production')

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = config('DEBUG', default=True, cast=bool)

ALLOWED_HOSTS = config('ALLOWED_HOSTS', default='localhost,127.0.0.1', cast=Csv())

# Application definition
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    
    # Local applications
    'hello.apps.HelloConfig',  # Hello アプリケーション
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'myproject.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [BASE_DIR / 'templates'],  # プロジェクト共通テンプレート
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'myproject.wsgi.application'

# Database
# https://docs.djangoproject.com/en/5.0/ref/settings/#databases

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': config('DB_NAME', default='django_db'),
        'USER': config('DB_USER', default='django_user'),
        'PASSWORD': config('DB_PASSWORD', default='django_password'),
        'HOST': config('DB_HOST', default='localhost'),
        'PORT': config('DB_PORT', default='5432', cast=int),
        'OPTIONS': {
            'charset': 'utf8',
        },
    }
}

# Password validation
# https://docs.djangoproject.com/en/5.0/ref/settings/#auth-password-validators

AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
        'OPTIONS': {
            'min_length': 8,
        }
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]

# Internationalization
# https://docs.djangoproject.com/en/5.0/topics/i18n/

LANGUAGE_CODE = 'ja'
TIME_ZONE = 'Asia/Tokyo'
USE_I18N = True
USE_TZ = True

# Static files (CSS, JavaScript, Images)
# https://docs.djangoproject.com/en/5.0/howto/static-files/

STATIC_URL = '/static/'
STATIC_ROOT = BASE_DIR / 'staticfiles'  # 本番用静的ファイル収集先
STATICFILES_DIRS = [
    BASE_DIR / 'static',  # 開発用静的ファイル
]

# Media files (User uploaded content)
MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'

# Default primary key field type
# https://docs.djangoproject.com/en/5.0/ref/settings/#default-auto-field

DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

# Security Settings (開発環境用)
if DEBUG:
    # 開発環境でのみ有効な設定
    INTERNAL_IPS = [
        "127.0.0.1",
    ]

# Logging configuration
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'file': {
            'level': 'INFO',
            'class': 'logging.FileHandler',
            'filename': BASE_DIR / 'django.log',
        },
        'console': {
            'level': 'DEBUG',
            'class': 'logging.StreamHandler',
        },
    },
    'loggers': {
        'django': {
            'handlers': ['file', 'console'],
            'level': 'INFO',
            'propagate': True,
        },
    },
}</code></pre>
                    </div>

                    <h3 class="section-title">3.3 静的ファイルとメディアファイルの設定</h3>
                    <p>CSS、JavaScript、画像などの静的ファイルと、ユーザーアップロードファイルの管理設定を行います。</p>

                    <div class="exercise-container">
                        <h5>実習 3-3: 静的ファイルディレクトリの作成と設定</h5>
                        <p>Webアプリケーションで使用する静的ファイル（CSS、JS、画像）の管理システムをセットアップします。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>静的ファイル用のディレクトリを作成</li>
                            <li>テンプレート用のディレクトリを作成</li>
                            <li>メディアファイル用のディレクトリを作成</li>
                            <li>基本的なCSS・JSファイルを作成</li>
                        </ol>
                        <h6>ディレクトリ作成</h6>
                        <pre class="code-block"><code class="language-bash"># 必要なディレクトリを作成
mkdir templates
mkdir static
mkdir static\css
mkdir static\js
mkdir static\images
mkdir media

# ディレクトリ構造の確認
tree /F static
tree /F templates</code></pre>
                        
                        <h6>基本CSS作成（static/css/style.css）</h6>
                        <pre class="code-block"><code class="language-css">/* Django Tutorial 基本CSS */

/* ベーススタイル */
body {
    font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
    font-size: 14px;
    line-height: 1.6;
    color: #333;
    background-color: #f5f5f5;
}

/* ヘッダー */
.header {
    background-color: #2e7d32;
    color: white;
    padding: 1rem 0;
    margin-bottom: 2rem;
}

.header h1 {
    margin: 0;
    text-align: center;
}

/* メインコンテンツ */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
}

.content {
    background-color: white;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* ボタン */
.btn {
    display: inline-block;
    padding: 0.5rem 1rem;
    background-color: #2e7d32;
    color: white;
    text-decoration: none;
    border-radius: 4px;
    transition: background-color 0.3s;
}

.btn:hover {
    background-color: #1b5e20;
    color: white;
    text-decoration: none;
}

/* フォーム */
.form-group {
    margin-bottom: 1rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: bold;
}

.form-group input,
.form-group textarea,
.form-group select {
    width: 100%;
    padding: 0.5rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
}

/* テーブル */
.table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 1rem;
}

.table th,
.table td {
    padding: 0.75rem;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

.table th {
    background-color: #f8f9fa;
    font-weight: bold;
}

/* メッセージ */
.messages {
    list-style: none;
    padding: 0;
    margin-bottom: 1rem;
}

.messages li {
    padding: 0.75rem 1rem;
    margin-bottom: 0.5rem;
    border-radius: 4px;
}

.messages .success {
    background-color: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.messages .error {
    background-color: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

.messages .info {
    background-color: #d1ecf1;
    color: #0c5460;
    border: 1px solid #bee5eb;
}</code></pre>

                        <h6>基本JavaScript作成（static/js/main.js）</h6>
                        <pre class="code-block"><code class="language-javascript">// Django Tutorial 基本JavaScript

document.addEventListener('DOMContentLoaded', function() {
    console.log('Django Tutorial JavaScript loaded');
    
    // メッセージの自動非表示
    const messages = document.querySelectorAll('.messages li');
    messages.forEach(function(message) {
        setTimeout(function() {
            message.style.transition = 'opacity 0.5s';
            message.style.opacity = '0';
            setTimeout(function() {
                message.remove();
            }, 500);
        }, 5000);
    });
    
    // フォーム送信時の確認ダイアログ
    const deleteLinks = document.querySelectorAll('a[href*="delete"]');
    deleteLinks.forEach(function(link) {
        link.addEventListener('click', function(e) {
            if (!confirm('本当に削除しますか？')) {
                e.preventDefault();
            }
        });
    });
});</code></pre>
                    </div>

                    <h3 class="section-title">3.4 URLs.pyルーティング設定の最適化</h3>
                    <p>URLルーティング設定を整理し、アプリケーションの拡張に対応できる構造を構築します。</p>

                    <div class="exercise-container">
                        <h5>実習 3-4: プロジェクトレベルURLルーティングの最適化</h5>
                        <p>メインのURL設定ファイルを更新し、静的ファイルとメディアファイルの配信設定を追加します。</p>
                        <h6>プロジェクトURL設定（myproject/urls.py）</h6>
                        <pre class="code-block"><code class="language-python">"""
myproject URL Configuration

The `urlpatterns` list routes URLs to views. For more information please see:
    https://docs.djangoproject.com/en/5.0/topics/http/urls/

Examples:
Function views
    1. Add an import:  from my_app import views
    2. Add a URL to urlpatterns:  path('', views.home, name='home')
Class-based views
    1. Add an import:  from other_app.views import Home
    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')
Including another URLconf
    1. Import the include() function: from django.urls import include, path
    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))
"""
from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static
from django.views.generic import RedirectView

urlpatterns = [
    # Django管理サイト
    path('admin/', admin.site.urls),
    
    # アプリケーション URL設定
    path('hello/', include('hello.urls')),
    
    # ルート URL のリダイレクト設定（helloアプリにリダイレクト）
    path('', RedirectView.as_view(url='/hello/', permanent=True)),
    
    # 今後追加予定のアプリケーション用のURL設定
    # path('users/', include('users.urls')),  # ユーザー管理アプリ
    # path('api/', include('api.urls')),      # API アプリ
]

# 開発環境でのメディアファイル配信設定
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
    urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)

# Django管理サイトのカスタマイズ
admin.site.site_header = "Django Tutorial 管理サイト"
admin.site.site_title = "Django Tutorial Admin"
admin.site.index_title = "管理サイトホーム"</code></pre>
                    </div>

                    <h3 class="section-title">3.5 ベーステンプレートの作成</h3>
                    <p>すべてのHTMLページで共通利用するベーステンプレートを作成し、テンプレート継承システムを構築します。</p>

                    <div class="exercise-container">
                        <h5>実習 3-5: 基本テンプレートシステムの構築</h5>
                        <p>テンプレート継承を活用した効率的なHTMLテンプレートシステムを作成します。</p>
                        <h6>ベーステンプレート作成（templates/base.html）</h6>
                        <pre class="code-block"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;{% block title %}Django Tutorial{% endblock %}&lt;/title&gt;
    
    {% load static %}
    &lt;link rel="stylesheet" href="{% static 'css/style.css' %}"&gt;
    
    {% block extra_css %}{% endblock %}
&lt;/head&gt;
&lt;body&gt;
    &lt;header class="header"&gt;
        &lt;div class="container"&gt;
            &lt;h1&gt;&lt;a href="{% url 'hello:hello_world' %}" style="color: white; text-decoration: none;"&gt;Django Tutorial&lt;/a&gt;&lt;/h1&gt;
        &lt;/div&gt;
    &lt;/header&gt;

    &lt;main class="container"&gt;
        &lt;div class="content"&gt;
            {% if messages %}
                &lt;ul class="messages"&gt;
                    {% for message in messages %}
                        &lt;li class="{% if message.tags %}{{ message.tags }}{% endif %}"&gt;
                            {{ message }}
                        &lt;/li&gt;
                    {% endfor %}
                &lt;/ul&gt;
            {% endif %}

            {% block content %}
            {% endblock %}
        &lt;/div&gt;
    &lt;/main&gt;

    &lt;footer&gt;
        &lt;div class="container"&gt;
            &lt;p style="text-align: center; margin-top: 2rem; color: #666;"&gt;
                &amp;copy; 2025 Django Tutorial. Built with Django {{ request.META.SERVER_SOFTWARE }}
            &lt;/p&gt;
        &lt;/div&gt;
    &lt;/footer&gt;

    {% load static %}
    &lt;script src="{% static 'js/main.js' %}"&gt;&lt;/script&gt;
    {% block extra_js %}{% endblock %}
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                        <h6>Helloアプリテンプレート更新（hello/templates/hello/index.html）</h6>
                        <pre class="code-block"><code class="language-bash"># テンプレートディレクトリ作成
mkdir hello\templates
mkdir hello\templates\hello</code></pre>

                        <pre class="code-block"><code class="language-html">{% extends 'base.html' %}

{% block title %}Hello World - Django Tutorial{% endblock %}

{% block content %}
    &lt;div style="text-align: center; padding: 2rem 0;"&gt;
        &lt;h2&gt;{{ title }}&lt;/h2&gt;
        &lt;p style="font-size: 1.2rem; margin: 2rem 0;"&gt;{{ message }}&lt;/p&gt;
        
        &lt;div style="margin-top: 3rem;"&gt;
            &lt;h3&gt;Django チュートリアルの進行状況&lt;/h3&gt;
            &lt;div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin-top: 1rem;"&gt;
                &lt;div style="border: 1px solid #ddd; padding: 1rem; border-radius: 8px;"&gt;
                    &lt;h4&gt;✅ Step 1: 環境構築&lt;/h4&gt;
                    &lt;p&gt;Python、Django、VS Code&lt;/p&gt;
                &lt;/div&gt;
                &lt;div style="border: 1px solid #ddd; padding: 1rem; border-radius: 8px;"&gt;
                    &lt;h4&gt;✅ Step 2: PostgreSQL環境&lt;/h4&gt;
                    &lt;p&gt;Docker、データベース接続&lt;/p&gt;
                &lt;/div&gt;
                &lt;div style="border: 1px solid #2e7d32; padding: 1rem; border-radius: 8px; background-color: #e8f5e8;"&gt;
                    &lt;h4&gt;🔄 Step 3: プロジェクト初期化&lt;/h4&gt;
                    &lt;p&gt;設定ファイル、テンプレート&lt;/p&gt;
                &lt;/div&gt;
                &lt;div style="border: 1px solid #ddd; padding: 1rem; border-radius: 8px;"&gt;
                    &lt;h4&gt;⏳ Step 4: モデル設計&lt;/h4&gt;
                    &lt;p&gt;データベースモデル&lt;/p&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        
        &lt;p style="margin-top: 2rem;"&gt;
            &lt;a href="/admin/" class="btn"&gt;Django管理サイト&lt;/a&gt;
        &lt;/p&gt;
    &lt;/div&gt;
{% endblock %}</code></pre>
                    </div>

                    <h3 class="section-title">3.6 開発用ツールとデバッグ設定</h3>
                    <p>効率的な開発を行うための追加ツールとデバッグ設定を追加します。</p>

                    <div class="exercise-container">
                        <h5>実習 3-6: Django Debug Toolbarの設定（オプション）</h5>
                        <p>開発効率向上のためのデバッグツールバーを設定します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>django-debug-toolbarパッケージをインストール</li>
                            <li>settings.pyに設定を追加</li>
                            <li>URLルーティングに設定を追加</li>
                            <li>動作確認</li>
                        </ol>
                        <h6>パッケージインストール</h6>
                        <pre class="code-block"><code class="language-bash"># 仮想環境内でパッケージをインストール
pip install django-debug-toolbar

# requirements.txtファイルの更新
pip freeze > requirements.txt</code></pre>

                        <h6>settings.pyへの追加設定</h6>
                        <pre class="code-block"><code class="language-python"># settings.py に追加

# Debug Toolbar (開発環境のみ)
if DEBUG:
    INSTALLED_APPS += [
        'debug_toolbar',
    ]
    
    MIDDLEWARE += [
        'debug_toolbar.middleware.DebugToolbarMiddleware',
    ]
    
    # Debug Toolbar設定
    DEBUG_TOOLBAR_CONFIG = {
        'SHOW_TOOLBAR_CALLBACK': lambda request: DEBUG,
    }</code></pre>

                        <h6>URLルーティングへの追加（myproject/urls.py）</h6>
                        <pre class="code-block"><code class="language-python"># myproject/urls.py に追加

# デバッグツールバー（開発環境のみ）
if settings.DEBUG:
    import debug_toolbar
    urlpatterns += [
        path('__debug__/', include(debug_toolbar.urls)),
    ]
    # 既存の静的ファイル設定の後に追加</code></pre>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 3-7: プロジェクト全体の動作確認</h5>
                        <p>すべての設定が正しく動作していることを確認し、基本的なテストを実行します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>静的ファイルの収集テスト</li>
                            <li>開発サーバーの起動</li>
                            <li>各ページへのアクセス確認</li>
                            <li>管理サイトへのアクセス確認</li>
                        </ol>
                        <h6>実行例</h6>
                        <pre class="code-block"><code class="language-bash"># 静的ファイルの収集（本番環境シミュレーション）
python manage.py collectstatic --noinput

# Django設定の確認
python manage.py check

# 開発サーバーの起動
python manage.py runserver</code></pre>

                        <h6>アクセス確認URL</h6>
                        <ul>
                            <li><strong>メインページ</strong>: http://127.0.0.1:8000/</li>
                            <li><strong>Hello World</strong>: http://127.0.0.1:8000/hello/</li>
                            <li><strong>テンプレート版</strong>: http://127.0.0.1:8000/hello/template/</li>
                            <li><strong>管理サイト</strong>: http://127.0.0.1:8000/admin/</li>
                            <li><strong>デバッグツールバー</strong>: 上記ページでツールバーが表示される</li>
                        </ul>
                    </div>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li><strong>settings.pyの役割</strong>: 
                                <p>Q. settings.pyファイルで管理される主要な設定項目を3つ挙げてください。</p>
                                <p>A. データベース接続設定（DATABASES）、インストールされたアプリ（INSTALLED_APPS）、静的ファイル設定（STATIC_URL、STATIC_ROOT）など</p>
                            </li>
                            <li><strong>テンプレート継承</strong>:
                                <p>Q. Djangoテンプレート継承の利点は何ですか？</p>
                                <p>A. 共通のレイアウトを基底テンプレートで定義し、個別ページで必要な部分のみをオーバーライドできるため、コードの重複を避けられる</p>
                            </li>
                            <li><strong>静的ファイル管理</strong>:
                                <p>Q. 開発環境と本番環境での静的ファイル管理の違いを説明してください。</p>
                                <p>A. 開発環境では Django開発サーバーが自動配信、本番環境では collectstatic コマンドでファイルを収集し、Web サーバー（Nginx等）が直接配信</p>
                            </li>
                        </ol>
                    </div>

                    <div class="highlight">
                        <h5>次のステップの準備</h5>
                        <p>Step 3が完了しました！次のStep 4では、データベースモデルの設計とマイグレーションを行います。以下を確認してから進んでください：</p>
                        <ul>
                            <li>settings.pyが適切に設定され、環境変数が正しく読み込まれている</li>
                            <li>静的ファイルとメディアファイルの設定が完了している</li>
                            <li>ベーステンプレートが作成され、テンプレート継承が動作している</li>
                            <li>日本語・日本時間設定が適用されている</li>
                            <li>開発サーバーでコンテンツが正常に表示されている</li>
                        </ul>
                    </div>

                    <!-- Navigation -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="step2-docker-postgresql.html" class="btn btn-secondary">← 前の章: PostgreSQL環境</a>
                        <a href="step4-models-migration.html" class="btn btn-primary">次の章: モデル設計 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
</body>
</html>