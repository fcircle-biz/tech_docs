<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Streamlit + SQLModel ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« Step 3 - StreamlitåŸºç¤ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿèƒ½</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* ãƒ™ãƒ¼ã‚¹ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .navbar {
            background-color: #0066cc;
        }

        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }

        /* ã‚¿ã‚¤ãƒˆãƒ« */
        .chapter-title {
            color: #0066cc;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #0066cc;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #3399ff;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒœãƒƒã‚¯ã‚¹ */
        .quiz-container {
            background-color: #e6f2ff;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #0066cc;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        .info {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #4caf50;
        }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .nav-link.active {
            background-color: #0066cc !important;
            color: white !important;
        }

        .nav-link {
            color: #495057;
        }

        .nav-link:hover {
            background-color: #e6f2ff;
        }

        /* ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ */
        pre {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 1rem;
            overflow-x: auto;
        }

        code {
            background-color: #f8f9fa;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-size: 0.875em;
        }

        .img-preview {
            max-width: 100%;
            height: auto;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            margin: 1rem 0;
        }

        /* ãƒ†ãƒ¼ãƒ–ãƒ«ã‚¹ã‚¿ã‚¤ãƒ« */
        .table-responsive {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* ãƒœã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ« */
        .btn-outline-primary {
            border-color: #0066cc;
            color: #0066cc;
        }

        .btn-outline-primary:hover {
            background-color: #0066cc;
            border-color: #0066cc;
        }
    </style>
</head>
<body>
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="../../../index.html">Tech Docs</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../../../index.html">ãƒ›ãƒ¼ãƒ </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="../streamlit-sqlmodel/README.html">Streamlit + SQLModel</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
            <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading px-3 mt-4 mb-1 text-muted">
                        Streamlit + SQLModel ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="step1-environment-setup.html">Step 1: ç’°å¢ƒæ§‹ç¯‰</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step2-database-design.html">Step 2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="#step3">Step 3: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿèƒ½</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step4-user-list-display.html">Step 4: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§è¡¨ç¤º</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step5-user-crud-operations.html">Step 5: CRUDæ“ä½œ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step6-security-deployment.html">Step 6: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ‡ãƒ—ãƒ­ã‚¤</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- ç« ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">Step 3: StreamlitåŸºç¤ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿèƒ½</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group me-2">
                            <span class="badge bg-info">æ‰€è¦æ™‚é–“: 2.5æ™‚é–“</span>
                        </div>
                    </div>
                </div>

                <div id="step3">
                    <!-- ç« ã‚¿ã‚¤ãƒˆãƒ« -->
                    <h2 class="chapter-title">ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªUIæ§‹ç¯‰ã¨ãƒ•ã‚©ãƒ¼ãƒ å‡¦ç†</h2>
                    
                    <!-- å­¦ç¿’ç›®æ¨™ -->
                    <div class="highlight">
                        <h5>ã“ã®ç« ã§å­¦ã¶ã“ã¨</h5>
                        <ul>
                            <li>Streamlitã®åŸºæœ¬ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½¿ç”¨æ–¹æ³•</li>
                            <li>ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè£…</li>
                            <li>SQLModelã¨é€£æºã—ãŸãƒ‡ãƒ¼ã‚¿ä¿å­˜æ©Ÿèƒ½</li>
                            <li>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</li>
                            <li>ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒ†ãƒ¼ãƒˆã«ã‚ˆã‚‹çŠ¶æ…‹ç®¡ç†</li>
                            <li>ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­è¨ˆ</li>
                        </ul>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³1: StreamlitåŸºæœ¬æ¦‚å¿µ -->
                    <h3 class="section-title">3.1 Streamlitã®åŸºæœ¬æ¦‚å¿µ</h3>
                    <p>Streamlitã¯ã€Pythonã§ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç°¡å˜ã«ä½œæˆã§ãã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚å¾“æ¥ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã¨ã¯ç•°ãªã‚Šã€HTMLã‚„CSSã€JavaScriptã‚’æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>

                    <div class="info">
                        <h6>Streamlitã®ç‰¹å¾´</h6>
                        <ul>
                            <li><strong>Pythonic</strong>: ç´”ç²‹ãªPythonã‚³ãƒ¼ãƒ‰ã§Webã‚¢ãƒ—ãƒªã‚’ä½œæˆ</li>
                            <li><strong>ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–</strong>: ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´ã§å³åº§ã«ã‚¢ãƒ—ãƒªãŒæ›´æ–°</li>
                            <li><strong>è±Šå¯Œãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</strong>: ã‚°ãƒ©ãƒ•ã€è¡¨ã€ãƒ•ã‚©ãƒ¼ãƒ ãªã©å¤šæ§˜ãªè¦ç´ </li>
                            <li><strong>ç°¡å˜ãªãƒ‡ãƒ—ãƒ­ã‚¤</strong>: Streamlit Cloudã‚„ãã®ä»–ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ç°¡å˜ã«å…¬é–‹</li>
                            <li><strong>ãƒ‡ãƒ¼ã‚¿ç§‘å­¦ç‰¹åŒ–</strong>: Pandasã€Plotlyã€Matplotlibã¨ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªçµ±åˆ</li>
                        </ul>
                    </div>

                    <h4>ä¸»è¦ãªStreamlitã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</h4>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead class="table-dark">
                                <tr>
                                    <th>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</th>
                                    <th>é–¢æ•°</th>
                                    <th>ç”¨é€”</th>
                                    <th>ä¾‹</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤º</td>
                                    <td>st.title(), st.header(), st.write()</td>
                                    <td>ã‚¿ã‚¤ãƒˆãƒ«ã€è¦‹å‡ºã—ã€ä¸€èˆ¬ãƒ†ã‚­ã‚¹ãƒˆ</td>
                                    <td>st.title("ã‚¢ãƒ—ãƒªã‚¿ã‚¤ãƒˆãƒ«")</td>
                                </tr>
                                <tr>
                                    <td>å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ </td>
                                    <td>st.text_input(), st.number_input()</td>
                                    <td>ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®å—ã‘å–ã‚Š</td>
                                    <td>name = st.text_input("åå‰")</td>
                                </tr>
                                <tr>
                                    <td>é¸æŠ</td>
                                    <td>st.selectbox(), st.radio(), st.checkbox()</td>
                                    <td>ã‚ªãƒ—ã‚·ãƒ§ãƒ³é¸æŠ</td>
                                    <td>option = st.selectbox("é¸æŠ", ["A", "B"])</td>
                                </tr>
                                <tr>
                                    <td>ãƒœã‚¿ãƒ³</td>
                                    <td>st.button(), st.form_submit_button()</td>
                                    <td>ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ</td>
                                    <td>if st.button("å®Ÿè¡Œ"):</td>
                                </tr>
                                <tr>
                                    <td>ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º</td>
                                    <td>st.dataframe(), st.table()</td>
                                    <td>è¡¨å½¢å¼ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤º</td>
                                    <td>st.dataframe(df)</td>
                                </tr>
                                <tr>
                                    <td>ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</td>
                                    <td>st.columns(), st.sidebar()</td>
                                    <td>ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</td>
                                    <td>col1, col2 = st.columns(2)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³2: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ -->
                    <h3 class="section-title">3.2 å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã®å®Ÿè£…</h3>
                    
                    <p>ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®æ¤œè¨¼ã‚’è¡Œã†ãŸã‚ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã€‚</p>

                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 3-1: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã®ä½œæˆ</h5>
                        <p>ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ã®æ¤œè¨¼ã‚’è¡Œã†validators.pyãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
                        
                        <h6>æ‰‹é †</h6>
                        <ol>
                            <li>app/utils/validators.pyãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ</li>
                            <li>å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°ã‚’å®Ÿè£…</li>
                            <li>ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç®¡ç†</li>
                            <li>çµ±åˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã®å®Ÿè£…</li>
                            <li>Streamlitç”¨ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ä½œæˆ</li>
                        </ol>

                        <h6>app/utils/validators.pyä½œæˆ</h6>
                        <pre><code>"""
å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ã®æ¤œè¨¼ã¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç®¡ç†
"""

import re
from typing import List, Optional, Tuple, Dict, Any
from email_validator import validate_email, EmailNotValidError

class ValidationError(Exception):
    """ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼"""
    def __init__(self, field: str, message: str):
        self.field = field
        self.message = message
        super().__init__(f"{field}: {message}")

class UserValidator:
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹"""
    
    # äºˆç´„èªãƒªã‚¹ãƒˆ
    RESERVED_USERNAMES = {
        'admin', 'root', 'system', 'user', 'test', 'demo',
        'null', 'undefined', 'anonymous', 'guest', 'public'
    }
    
    # éƒ¨ç½²ãƒªã‚¹ãƒˆï¼ˆä¾‹ï¼‰
    VALID_DEPARTMENTS = {
        'Engineering', 'Marketing', 'Sales', 'HR', 'Finance',
        'Operations', 'Data Science', 'Product', 'Design', 'Legal'
    }
    
    @staticmethod
    def validate_username(username: str) -> Tuple[bool, Optional[str]]:
        """
        ãƒ¦ãƒ¼ã‚¶ãƒ¼åã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        
        Args:
            username: ãƒ¦ãƒ¼ã‚¶ãƒ¼å
            
        Returns:
            (is_valid, error_message)
        """
        if not username:
            return False, "ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯å¿…é ˆã§ã™"
        
        username = username.strip()
        
        # é•·ã•ãƒã‚§ãƒƒã‚¯
        if len(username) < 3:
            return False, "ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯3æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„"
        
        if len(username) > 50:
            return False, "ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯50æ–‡å­—ä»¥ä¸‹ã§å…¥åŠ›ã—ã¦ãã ã•ã„"
        
        # æ–‡å­—ç¨®ãƒã‚§ãƒƒã‚¯ï¼ˆè‹±æ•°å­—ã€ãƒã‚¤ãƒ•ãƒ³ã€ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã®ã¿ï¼‰
        if not re.match(r'^[a-zA-Z0-9_-]+$', username):
            return False, "ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯è‹±æ•°å­—ã€ãƒã‚¤ãƒ•ãƒ³ï¼ˆ-ï¼‰ã€ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ï¼ˆ_ï¼‰ã®ã¿ä½¿ç”¨ã§ãã¾ã™"
        
        # å…ˆé ­æ–‡å­—ãƒã‚§ãƒƒã‚¯ï¼ˆæ•°å­—ã‚„ãƒã‚¤ãƒ•ãƒ³ã§å§‹ã¾ã‚‰ãªã„ï¼‰
        if username[0] in '-_' or username[0].isdigit():
            return False, "ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯è‹±å­—ã§å§‹ã¾ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™"
        
        # äºˆç´„èªãƒã‚§ãƒƒã‚¯
        if username.lower() in UserValidator.RESERVED_USERNAMES:
            return False, f"'{username}' ã¯äºˆç´„èªã®ãŸã‚ä½¿ç”¨ã§ãã¾ã›ã‚“"
        
        # é€£ç¶šã™ã‚‹ç‰¹æ®Šæ–‡å­—ãƒã‚§ãƒƒã‚¯
        if '--' in username or '__' in username or '-_' in username or '_-' in username:
            return False, "ç‰¹æ®Šæ–‡å­—ã‚’é€£ç¶šã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“"
        
        return True, None
    
    @staticmethod
    def validate_email(email: str) -> Tuple[bool, Optional[str]]:
        """
        ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        
        Args:
            email: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
            
        Returns:
            (is_valid, error_message)
        """
        if not email:
            return False, "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å¿…é ˆã§ã™"
        
        email = email.strip().lower()
        
        try:
            # email-validatorãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨
            valid = validate_email(email)
            return True, None
        except EmailNotValidError as e:
            return False, "æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
    
    @staticmethod
    def validate_full_name(full_name: str) -> Tuple[bool, Optional[str]]:
        """
        æ°åã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        
        Args:
            full_name: æ°å
            
        Returns:
            (is_valid, error_message)
        """
        if not full_name:
            return False, "æ°åã¯å¿…é ˆã§ã™"
        
        full_name = full_name.strip()
        
        # é•·ã•ãƒã‚§ãƒƒã‚¯
        if len(full_name) < 1:
            return False, "æ°åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
        
        if len(full_name) > 100:
            return False, "æ°åã¯100æ–‡å­—ä»¥ä¸‹ã§å…¥åŠ›ã—ã¦ãã ã•ã„"
        
        # ç©ºç™½ã®ã¿ãƒã‚§ãƒƒã‚¯
        if not full_name.strip():
            return False, "æ°åã«æœ‰åŠ¹ãªæ–‡å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
        
        return True, None
    
    @staticmethod
    def validate_age(age: Optional[int]) -> Tuple[bool, Optional[str]]:
        """
        å¹´é½¢ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        
        Args:
            age: å¹´é½¢
            
        Returns:
            (is_valid, error_message)
        """
        if age is None:
            return True, None  # å¹´é½¢ã¯ä»»æ„é …ç›®
        
        if age < 0:
            return False, "å¹´é½¢ã¯0ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„"
        
        if age > 150:
            return False, "å¹´é½¢ã¯150ä»¥ä¸‹ã§å…¥åŠ›ã—ã¦ãã ã•ã„"
        
        return True, None
    
    @staticmethod
    def validate_department(department: Optional[str]) -> Tuple[bool, Optional[str]]:
        """
        éƒ¨ç½²ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        
        Args:
            department: éƒ¨ç½²å
            
        Returns:
            (is_valid, error_message)
        """
        if not department:
            return True, None  # éƒ¨ç½²ã¯ä»»æ„é …ç›®
        
        department = department.strip()
        
        # é•·ã•ãƒã‚§ãƒƒã‚¯
        if len(department) > 100:
            return False, "éƒ¨ç½²åã¯100æ–‡å­—ä»¥ä¸‹ã§å…¥åŠ›ã—ã¦ãã ã•ã„"
        
        return True, None
    
    @classmethod
    def validate_user_data(cls, user_data: Dict[str, Any]) -> Dict[str, List[str]]:
        """
        ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®çµ±åˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        
        Args:
            user_data: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿è¾æ›¸
            
        Returns:
            ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åˆ¥ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¾æ›¸
        """
        errors = {}
        
        # å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        validations = [
            ('username', cls.validate_username, user_data.get('username', '')),
            ('email', cls.validate_email, user_data.get('email', '')),
            ('full_name', cls.validate_full_name, user_data.get('full_name', '')),
            ('age', cls.validate_age, user_data.get('age')),
            ('department', cls.validate_department, user_data.get('department', ''))
        ]
        
        for field, validator, value in validations:
            is_valid, error_message = validator(value)
            if not is_valid:
                if field not in errors:
                    errors[field] = []
                errors[field].append(error_message)
        
        return errors

class StreamlitValidationHelper:
    """Streamlitç”¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ˜ãƒ«ãƒ‘ãƒ¼"""
    
    @staticmethod
    def display_field_errors(errors: Dict[str, List[str]], field: str) -> bool:
        """
        ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
        
        Args:
            errors: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¾æ›¸
            field: ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å
            
        Returns:
            ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹ã‹ã©ã†ã‹
        """
        import streamlit as st
        
        if field in errors:
            for error in errors[field]:
                st.error(f"âš ï¸ {error}")
            return True
        return False
    
    @staticmethod
    def display_all_errors(errors: Dict[str, List[str]]) -> bool:
        """
        å…¨ã¦ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
        
        Args:
            errors: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¾æ›¸
            
        Returns:
            ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹ã‹ã©ã†ã‹
        """
        import streamlit as st
        
        if errors:
            st.error("âš ï¸ å…¥åŠ›å†…å®¹ã«å•é¡ŒãŒã‚ã‚Šã¾ã™:")
            for field, error_list in errors.items():
                for error in error_list:
                    st.error(f"â€¢ **{field}**: {error}")
            return True
        return False
    
    @staticmethod
    def validate_and_show_errors(user_data: Dict[str, Any]) -> bool:
        """
        ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã€ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Œã°è¡¨ç¤º
        
        Args:
            user_data: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿
            
        Returns:
            ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æˆåŠŸã‹ã©ã†ã‹
        """
        errors = UserValidator.validate_user_data(user_data)
        has_errors = StreamlitValidationHelper.display_all_errors(errors)
        return not has_errors

# ä¾¿åˆ©ãªé–¢æ•°
def get_valid_departments() -> List[str]:
    """æœ‰åŠ¹ãªéƒ¨ç½²ãƒªã‚¹ãƒˆã‚’å–å¾—"""
    return sorted(list(UserValidator.VALID_DEPARTMENTS))

def is_valid_user_data(user_data: Dict[str, Any]) -> bool:
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒæœ‰åŠ¹ã‹ãƒã‚§ãƒƒã‚¯"""
    errors = UserValidator.validate_user_data(user_data)
    return len(errors) == 0</code></pre>

                        <h6>ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ</h6>
                        <pre><code># test_validators.py
from app.utils.validators import UserValidator

def test_validators():
    """ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ"""
    
    print("=== ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ ===")
    
    # æ­£å¸¸ãªã‚±ãƒ¼ã‚¹
    valid, error = UserValidator.validate_username("john_doe")
    print(f"john_doe: {valid}, {error}")
    
    # ç•°å¸¸ãªã‚±ãƒ¼ã‚¹
    test_cases = [
        "",  # ç©ºæ–‡å­—
        "ab",  # çŸ­ã™ãã‚‹
        "admin",  # äºˆç´„èª
        "123user",  # æ•°å­—ã§å§‹ã¾ã‚‹
        "user@name",  # ç„¡åŠ¹ãªæ–‡å­—
        "user--name",  # é€£ç¶šã™ã‚‹ç‰¹æ®Šæ–‡å­—
    ]
    
    for case in test_cases:
        valid, error = UserValidator.validate_username(case)
        print(f"'{case}': {valid}, {error}")
    
    print("\n=== ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ ===")
    
    email_cases = [
        "test@example.com",  # æ­£å¸¸
        "",  # ç©ºæ–‡å­—
        "invalid-email",  # ç„¡åŠ¹
        "test@",  # ä¸å®Œå…¨
    ]
    
    for case in email_cases:
        valid, error = UserValidator.validate_email(case)
        print(f"'{case}': {valid}, {error}")

if __name__ == "__main__":
    test_validators()</code></pre>

                        <h6>æœŸå¾…ã•ã‚Œã‚‹çµæœ</h6>
                        <p>ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ãŒæ­£å¸¸ã«å‹•ä½œã—ã€é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³3: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ  -->
                    <h3 class="section-title">3.3 ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã®å®Ÿè£…</h3>
                    
                    <p>Streamlitã®ãƒ•ã‚©ãƒ¼ãƒ æ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ç”»é¢ã‚’ä½œæˆã—ã¾ã™ã€‚</p>

                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 3-2: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã®ä½œæˆ</h5>
                        <p>ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™ã€‚</p>
                        
                        <h6>æ‰‹é †</h6>
                        <ol>
                            <li>app/main.pyã‚’æ›´æ–°ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿèƒ½ã‚’è¿½åŠ </li>
                            <li>ãƒ•ã‚©ãƒ¼ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®è¨­è¨ˆ</li>
                            <li>å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å®Ÿè£…</li>
                            <li>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®è¿½åŠ </li>
                            <li>ãƒ‡ãƒ¼ã‚¿ä¿å­˜æ©Ÿèƒ½ã®çµ±åˆ</li>
                        </ol>

                        <h6>app/main.pyæ›´æ–°</h6>
                        <pre><code>"""
Modern User Management Dashboard
ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ« - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿèƒ½ä»˜ã
"""

import streamlit as st
from datetime import datetime
import sys
import os

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‚’Pythonãƒ‘ã‚¹ã«è¿½åŠ 
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from config import settings
from database.connection import db_manager, get_db_session, init_database
from database.crud import user_crud
from models.user import UserCreate
from utils.validators import (
    UserValidator, StreamlitValidationHelper, get_valid_departments
)

def initialize_app():
    """ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åˆæœŸåŒ–"""
    if 'app_initialized' not in st.session_state:
        try:
            # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
            init_database()
            st.session_state.app_initialized = True
            st.session_state.initialization_success = True
        except Exception as e:
            st.session_state.app_initialized = True
            st.session_state.initialization_success = False
            st.session_state.initialization_error = str(e)

def show_user_registration_form():
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤º"""
    
    st.header("ğŸ‘¤ æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²")
    st.markdown("æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚")
    
    # ãƒ•ã‚©ãƒ¼ãƒ ä½œæˆ
    with st.form("user_registration_form", clear_on_submit=True):
        st.subheader("ğŸ“ ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å…¥åŠ›")
        
        # 2ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
        col1, col2 = st.columns(2)
        
        with col1:
            # åŸºæœ¬æƒ…å ±
            st.markdown("**åŸºæœ¬æƒ…å ±**")
            username = st.text_input(
                "ãƒ¦ãƒ¼ã‚¶ãƒ¼å *",
                placeholder="ä¾‹: john_doe",
                help="3-50æ–‡å­—ã€è‹±æ•°å­—ã¨ãƒã‚¤ãƒ•ãƒ³ãƒ»ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã®ã¿"
            )
            
            email = st.text_input(
                "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ *",
                placeholder="ä¾‹: john@example.com",
                help="æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
            )
            
            full_name = st.text_input(
                "æ°å *",
                placeholder="ä¾‹: ç”°ä¸­ å¤ªéƒ",
                help="ãƒ•ãƒ«ãƒãƒ¼ãƒ ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
            )
        
        with col2:
            # è¿½åŠ æƒ…å ±
            st.markdown("**è¿½åŠ æƒ…å ±**")
            age = st.number_input(
                "å¹´é½¢",
                min_value=0,
                max_value=150,
                value=None,
                help="å¹´é½¢ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä»»æ„ï¼‰"
            )
            
            department = st.selectbox(
                "éƒ¨ç½²",
                options=[""] + get_valid_departments(),
                help="æ‰€å±éƒ¨ç½²ã‚’é¸æŠã—ã¦ãã ã•ã„ï¼ˆä»»æ„ï¼‰"
            )
            
            is_active = st.checkbox(
                "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹",
                value=True,
                help="ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹"
            )
        
        # é€ä¿¡ãƒœã‚¿ãƒ³
        st.markdown("---")
        col_left, col_center, col_right = st.columns([1, 2, 1])
        
        with col_center:
            submitted = st.form_submit_button(
                "ğŸš€ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç™»éŒ²",
                use_container_width=True,
                type="primary"
            )
    
    # ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å‡¦ç†
    if submitted:
        # å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™
        user_data = {
            'username': username.strip() if username else '',
            'email': email.strip().lower() if email else '',
            'full_name': full_name.strip() if full_name else '',
            'age': age if age is not None and age > 0 else None,
            'department': department.strip() if department else None,
            'is_active': is_active
        }
        
        # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
        if StreamlitValidationHelper.validate_and_show_errors(user_data):
            # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜
            try:
                # ã‚»ãƒƒã‚·ãƒ§ãƒ³å–å¾—
                session_gen = get_db_session()
                session = next(session_gen)
                
                # ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
                user_create = UserCreate(**user_data)
                created_user = user_crud.create_user(session, user_create)
                
                # æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                st.success(f"âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ '{created_user.username}' ã‚’æ­£å¸¸ã«ç™»éŒ²ã—ã¾ã—ãŸï¼")
                st.balloons()  # ãŠç¥ã„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                
                # ç™»éŒ²æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’è¡¨ç¤º
                with st.expander("ğŸ“‹ ç™»éŒ²ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±", expanded=True):
                    col1, col2 = st.columns(2)
                    
                    with col1:
                        st.write(f"**ãƒ¦ãƒ¼ã‚¶ãƒ¼ID**: {created_user.id}")
                        st.write(f"**ãƒ¦ãƒ¼ã‚¶ãƒ¼å**: {created_user.username}")
                        st.write(f"**ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹**: {created_user.email}")
                        st.write(f"**æ°å**: {created_user.full_name}")
                    
                    with col2:
                        st.write(f"**å¹´é½¢**: {created_user.age or 'æœªè¨­å®š'}")
                        st.write(f"**éƒ¨ç½²**: {created_user.department or 'æœªè¨­å®š'}")
                        st.write(f"**çŠ¶æ…‹**: {'ã‚¢ã‚¯ãƒ†ã‚£ãƒ–' if created_user.is_active else 'éã‚¢ã‚¯ãƒ†ã‚£ãƒ–'}")
                        st.write(f"**ç™»éŒ²æ—¥æ™‚**: {created_user.created_at.strftime('%Y-%m-%d %H:%M:%S')}")
                
                # ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹æ›´æ–°
                if 'registered_users_count' not in st.session_state:
                    st.session_state.registered_users_count = 0
                st.session_state.registered_users_count += 1
                
                session.close()
                
            except ValueError as e:
                st.error(f"âŒ ç™»éŒ²ã‚¨ãƒ©ãƒ¼: {e}")
            except Exception as e:
                st.error(f"âŒ äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")
                if settings.DEBUG:
                    st.exception(e)

def show_registration_stats():
    """ç™»éŒ²çµ±è¨ˆæƒ…å ±ã‚’è¡¨ç¤º"""
    try:
        session_gen = get_db_session()
        session = next(session_gen)
        
        stats = user_crud.get_user_stats(session)
        
        st.subheader("ğŸ“Š ç™»éŒ²çµ±è¨ˆ")
        
        # ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¡¨ç¤º
        col1, col2, col3, col4 = st.columns(4)
        
        with col1:
            st.metric("ç·ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°", stats.total_users)
        
        with col2:
            st.metric("ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼", stats.active_users)
        
        with col3:
            st.metric("éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼", stats.inactive_users)
        
        with col4:
            avg_age_display = f"{stats.average_age:.1f}æ­³" if stats.average_age else "æœªè¨­å®š"
            st.metric("å¹³å‡å¹´é½¢", avg_age_display)
        
        # éƒ¨ç½²æƒ…å ±
        if stats.departments:
            st.markdown("**ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹éƒ¨ç½²:**")
            for dept in stats.departments:
                st.badge(dept, outline=True)
        
        session.close()
        
    except Exception as e:
        st.error(f"âŒ çµ±è¨ˆæƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ: {e}")

def show_quick_tips():
    """ä½¿ç”¨æ–¹æ³•ã®ãƒ’ãƒ³ãƒˆè¡¨ç¤º"""
    with st.expander("ğŸ’¡ ä½¿ç”¨æ–¹æ³•ã®ãƒ’ãƒ³ãƒˆ"):
        st.markdown("""
        **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã®ãƒã‚¤ãƒ³ãƒˆ:**
        
        1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼å**: 
           - 3-50æ–‡å­—ã§å…¥åŠ›
           - è‹±æ•°å­—ã€ãƒã‚¤ãƒ•ãƒ³ï¼ˆ-ï¼‰ã€ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ï¼ˆ_ï¼‰ã®ã¿ä½¿ç”¨å¯èƒ½
           - è‹±å­—ã§å§‹ã¾ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
        
        2. **ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹**: 
           - æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ã§å…¥åŠ›
           - é‡è¤‡ã¯ä¸å¯
        
        3. **æ°å**: 
           - å¿…é ˆé …ç›®
           - 100æ–‡å­—ä»¥ä¸‹
        
        4. **å¹´é½¢ãƒ»éƒ¨ç½²**: 
           - ä»»æ„é …ç›®
           - å¹´é½¢ã¯0-150æ­³ã®ç¯„å›²
        """)

def main():
    """ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³"""
    
    # ãƒšãƒ¼ã‚¸è¨­å®š
    st.set_page_config(
        page_title=settings.APP_NAME,
        page_icon="ğŸ‘¥",
        layout="wide",
        initial_sidebar_state="expanded"
    )
    
    # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–
    initialize_app()
    
    # åˆæœŸåŒ–å¤±æ•—æ™‚ã®ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
    if not st.session_state.get('initialization_success', False):
        st.error("âŒ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ")
        if 'initialization_error' in st.session_state:
            st.error(f"ã‚¨ãƒ©ãƒ¼è©³ç´°: {st.session_state.initialization_error}")
        st.stop()
    
    # ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«
    st.title(f"ğŸ‘¥ {settings.APP_NAME}")
    st.markdown(f"**Version:** {settings.APP_VERSION}")
    
    # ã‚µã‚¤ãƒ‰ãƒãƒ¼
    with st.sidebar:
        st.header("ğŸ“‹ ãƒ¡ãƒ‹ãƒ¥ãƒ¼")
        
        # ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
        page = st.radio(
            "ãƒšãƒ¼ã‚¸ã‚’é¸æŠ:",
            ["ğŸ  ãƒ›ãƒ¼ãƒ ", "ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²", "ğŸ“Š çµ±è¨ˆæƒ…å ±"],
            index=1  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã‚’é¸æŠ
        )
        
        st.markdown("---")
        
        # ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±
        st.subheader("ğŸ› ï¸ ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±")
        st.write(f"**Database**: PostgreSQL")
        st.write(f"**Debug Mode**: {settings.DEBUG}")
        
        # æ¥ç¶šãƒ†ã‚¹ãƒˆ
        if st.button("ğŸ”Œ æ¥ç¶šãƒ†ã‚¹ãƒˆ"):
            if db_manager.test_connection():
                st.success("âœ… æ¥ç¶šæˆåŠŸ")
            else:
                st.error("âŒ æ¥ç¶šå¤±æ•—")
    
    # ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
    if page == "ğŸ  ãƒ›ãƒ¼ãƒ ":
        st.header("ğŸ  ãƒ›ãƒ¼ãƒ ")
        
        col1, col2 = st.columns([2, 1])
        
        with col1:
            st.markdown("""
            ## ğŸ¯ Streamlit + SQLModel ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«
            
            ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€**Streamlit** ã¨ **SQLModel** ã‚’ä½¿ç”¨ã—ãŸ
            ãƒ¢ãƒ€ãƒ³ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚
            
            ### ä¸»ãªæ©Ÿèƒ½:
            - âœ… **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²**: ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãã®æ–°è¦ç™»éŒ²
            - ğŸ“‹ **ãƒ‡ãƒ¼ã‚¿ç®¡ç†**: PostgreSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã®æ°¸ç¶šåŒ–
            - ğŸ”’ **å…¥åŠ›æ¤œè¨¼**: åŒ…æ‹¬çš„ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
            - ğŸ“Š **çµ±è¨ˆè¡¨ç¤º**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãªçµ±è¨ˆæƒ…å ±
            """)
            
            show_quick_tips()
        
        with col2:
            st.subheader("ğŸ“ˆ é€²è¡ŒçŠ¶æ³")
            
            progress_steps = [
                ("âœ… Step 1: ç’°å¢ƒæ§‹ç¯‰", True),
                ("âœ… Step 2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ", True),
                ("âœ… Step 3: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿèƒ½", True),
                ("â³ Step 4: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§è¡¨ç¤º", False),
                ("â³ Step 5: CRUDæ“ä½œ", False),
                ("â³ Step 6: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ‡ãƒ—ãƒ­ã‚¤", False)
            ]
            
            for step, completed in progress_steps:
                if completed:
                    st.success(step)
                else:
                    st.info(step)
    
    elif page == "ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²":
        show_user_registration_form()
        
    elif page == "ğŸ“Š çµ±è¨ˆæƒ…å ±":
        show_registration_stats()
    
    # ãƒ•ãƒƒã‚¿ãƒ¼
    st.markdown("---")
    st.markdown(
        "<div style='text-align: center; color: gray;'>"
        "Streamlit + SQLModel ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« | Step 3: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿèƒ½å®Ÿè£…å®Œäº† âœ…"
        "</div>", 
        unsafe_allow_html=True
    )

if __name__ == "__main__":
    main()</code></pre>

                        <h6>å¿…è¦ãªä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ </h6>
                        <pre><code># requirements.txtã«è¿½åŠ 
email-validator>=2.0.0</code></pre>

                        <h6>è¿½åŠ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h6>
                        <pre><code># ä»®æƒ³ç’°å¢ƒãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
pip install email-validator

# ã¾ãŸã¯ requirements.txtã‹ã‚‰å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt</code></pre>

                        <h6>æœŸå¾…ã•ã‚Œã‚‹çµæœ</h6>
                        <p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ãŒè¡¨ç¤ºã•ã‚Œã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³4: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ -->
                    <h3 class="section-title">3.4 ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œã¨ãƒ†ã‚¹ãƒˆ</h3>
                    
                    <p>ä½œæˆã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿèƒ½ã‚’å®Ÿéš›ã«å‹•ä½œã•ã›ã¦ã€å…¨ã¦ã®æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚</p>

                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 3-3: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å‹•ä½œç¢ºèª</h5>
                        <p>å®Ÿéš›ã«Streamlitã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚</p>
                        
                        <h6>æ‰‹é †</h6>
                        <ol>
                            <li>PostgreSQLã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•ç¢ºèª</li>
                            <li>Streamlitã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•</li>
                            <li>å„ç¨®å…¥åŠ›ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ†ã‚¹ãƒˆ</li>
                            <li>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ç¢ºèª</li>
                            <li>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã®ä¿å­˜ç¢ºèª</li>
                        </ol>

                        <h6>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•</h6>
                        <pre><code># 1. PostgreSQLã‚³ãƒ³ãƒ†ãƒŠã®ç¢ºèª
docker-compose ps

# ã‚³ãƒ³ãƒ†ãƒŠãŒåœæ­¢ã—ã¦ã„ã‚‹å ´åˆã¯èµ·å‹•
docker-compose up -d

# 2. Streamlitã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰å®Ÿè¡Œ
streamlit run app/main.py

# WSL2ç’°å¢ƒã®å ´åˆ
streamlit run app/main.py --server.address 0.0.0.0

# ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ãƒˆã§èµ·å‹•ã™ã‚‹å ´åˆ
streamlit run app/main.py --server.port 8502</code></pre>

                        <h6>æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ</h6>
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead class="table-dark">
                                    <tr>
                                        <th>ãƒ†ã‚¹ãƒˆé …ç›®</th>
                                        <th>å…¥åŠ›å€¤</th>
                                        <th>æœŸå¾…ã•ã‚Œã‚‹çµæœ</th>
                                        <th>ç¢ºèªãƒã‚¤ãƒ³ãƒˆ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>æ­£å¸¸ç™»éŒ²</td>
                                        <td>æœ‰åŠ¹ãªå…¨é …ç›®</td>
                                        <td>ç™»éŒ²æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</td>
                                        <td>ãƒãƒ«ãƒ¼ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤º</td>
                                    </tr>
                                    <tr>
                                        <td>ãƒ¦ãƒ¼ã‚¶ãƒ¼åé‡è¤‡</td>
                                        <td>æ—¢å­˜ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å</td>
                                        <td>é‡è¤‡ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</td>
                                        <td>æ˜ç¢ºãªã‚¨ãƒ©ãƒ¼è¡¨ç¤º</td>
                                    </tr>
                                    <tr>
                                        <td>ç„¡åŠ¹ãƒ¡ãƒ¼ãƒ«</td>
                                        <td>invalid-email</td>
                                        <td>ãƒ¡ãƒ¼ãƒ«å½¢å¼ã‚¨ãƒ©ãƒ¼</td>
                                        <td>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼è¡¨ç¤º</td>
                                    </tr>
                                    <tr>
                                        <td>äºˆç´„èªãƒ¦ãƒ¼ã‚¶ãƒ¼å</td>
                                        <td>admin</td>
                                        <td>äºˆç´„èªã‚¨ãƒ©ãƒ¼</td>
                                        <td>æ˜ç¢ºãªç¦æ­¢ç†ç”±</td>
                                    </tr>
                                    <tr>
                                        <td>ä»»æ„é …ç›®</td>
                                        <td>å¹´é½¢ãƒ»éƒ¨ç½²ã‚’ç©ºç™½</td>
                                        <td>ç™»éŒ²æˆåŠŸ</td>
                                        <td>å¿…é ˆé …ç›®ã®ã¿ã§ç™»éŒ²å¯èƒ½</td>
                                    </tr>
                                    <tr>
                                        <td>çµ±è¨ˆæƒ…å ±</td>
                                        <td>è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²å¾Œ</td>
                                        <td>æ­£ç¢ºãªçµ±è¨ˆè¡¨ç¤º</td>
                                        <td>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h6>å…·ä½“çš„ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹</h6>
                        <pre><code># ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ 1: æ­£å¸¸ãªç™»éŒ²
ãƒ¦ãƒ¼ã‚¶ãƒ¼å: test_user_01
ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: test01@example.com
æ°å: ãƒ†ã‚¹ãƒˆ ãƒ¦ãƒ¼ã‚¶ãƒ¼1
å¹´é½¢: 25
éƒ¨ç½²: Engineering
æœŸå¾…çµæœ: ç™»éŒ²æˆåŠŸã€ãƒãƒ«ãƒ¼ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤º

# ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ 2: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
ãƒ¦ãƒ¼ã‚¶ãƒ¼å: ab (çŸ­ã™ãã‚‹)
ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: invalid-email
æ°å: (ç©ºç™½)
æœŸå¾…çµæœ: è¤‡æ•°ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤º

# ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ 3: é‡è¤‡ã‚¨ãƒ©ãƒ¼
ãƒ¦ãƒ¼ã‚¶ãƒ¼å: test_user_01 (æ—¢å­˜)
ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: new@example.com
æ°å: æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼
æœŸå¾…çµæœ: "ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™"ã‚¨ãƒ©ãƒ¼

# ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ 4: ä»»æ„é …ç›®ã®ãƒ†ã‚¹ãƒˆ
ãƒ¦ãƒ¼ã‚¶ãƒ¼å: minimal_user
ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: minimal@example.com
æ°å: æœ€å°ãƒ¦ãƒ¼ã‚¶ãƒ¼
å¹´é½¢: (æœªå…¥åŠ›)
éƒ¨ç½²: (æœªé¸æŠ)
æœŸå¾…çµæœ: ç™»éŒ²æˆåŠŸã€ä»»æ„é …ç›®ã¯ç©ºã¨ã—ã¦ä¿å­˜</code></pre>

                        <h6>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã®ç¢ºèª</h6>
                        <pre><code># Adminerã§ã®ç¢ºèª (http://localhost:8080)
# 1. ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±:
#    ã‚·ã‚¹ãƒ†ãƒ : PostgreSQL
#    ã‚µãƒ¼ãƒ: postgres
#    ãƒ¦ãƒ¼ã‚¶å: postgres
#    ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: password
#    ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: userdb

# 2. SQLã‚¯ã‚¨ãƒªã§ç¢ºèª
SELECT 
    id, username, email, full_name, age, department, 
    is_active, created_at, updated_at 
FROM users 
ORDER BY created_at DESC;

# 3. çµ±è¨ˆç¢ºèª
SELECT 
    COUNT(*) as total_users,
    COUNT(CASE WHEN is_active THEN 1 END) as active_users,
    AVG(age) as average_age
FROM users;</code></pre>

                        <h6>æœŸå¾…ã•ã‚Œã‚‹çµæœ</h6>
                        <p>ä»¥ä¸‹ã®æ©Ÿèƒ½ãŒå…¨ã¦æ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š</p>
                        <ul>
                            <li>ãƒ•ã‚©ãƒ¼ãƒ ã®è¡¨ç¤ºã¨å…¥åŠ›</li>
                            <li>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</li>
                            <li>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®ä¿å­˜</li>
                            <li>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</li>
                            <li>çµ±è¨ˆæƒ…å ±ã®è¡¨ç¤º</li>
                            <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆæˆåŠŸãƒ»ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰</li>
                        </ul>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³5: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç† -->
                    <h3 class="section-title">3.5 ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ç®¡ç†ã®å®Ÿè£…</h3>
                    
                    <p>Streamlitã®ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’æ´»ç”¨ã—ã¦ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ã‚’ç®¡ç†ã—ã¾ã™ã€‚</p>

                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 3-4: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†æ©Ÿèƒ½ã®è¿½åŠ </h5>
                        <p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã€‚</p>
                        
                        <h6>æ‰‹é †</h6>
                        <ol>
                            <li>ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ç®¡ç†ç”¨ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ä½œæˆ</li>
                            <li>ç™»éŒ²å±¥æ­´ã®ç®¡ç†</li>
                            <li>ãƒ•ã‚©ãƒ¼ãƒ çŠ¶æ…‹ã®ä¿æŒ</li>
                            <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®æ”¹å–„</li>
                        </ol>

                        <h6>app/utils/helpers.pyä½œæˆ</h6>
                        <pre><code>"""
ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã€UIè£œåŠ©æ©Ÿèƒ½ãªã©
"""

import streamlit as st
from datetime import datetime
from typing import Dict, Any, List, Optional

class SessionManager:
    """Streamlitã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ç®¡ç†ã‚¯ãƒ©ã‚¹"""
    
    @staticmethod
    def initialize_session():
        """ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’åˆæœŸåŒ–"""
        if 'registration_history' not in st.session_state:
            st.session_state.registration_history = []
        
        if 'form_data' not in st.session_state:
            st.session_state.form_data = {}
        
        if 'last_registration_time' not in st.session_state:
            st.session_state.last_registration_time = None
        
        if 'notification_queue' not in st.session_state:
            st.session_state.notification_queue = []
    
    @staticmethod
    def add_registration_record(user_data: Dict[str, Any], user_id: int):
        """ç™»éŒ²è¨˜éŒ²ã‚’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«è¿½åŠ """
        record = {
            'id': user_id,
            'username': user_data.get('username'),
            'email': user_data.get('email'),
            'full_name': user_data.get('full_name'),
            'timestamp': datetime.now(),
            'session_id': id(st.session_state)
        }
        
        st.session_state.registration_history.append(record)
        st.session_state.last_registration_time = datetime.now()
        
        # å±¥æ­´ã¯æœ€æ–°10ä»¶ã¾ã§ä¿æŒ
        if len(st.session_state.registration_history) > 10:
            st.session_state.registration_history = st.session_state.registration_history[-10:]
    
    @staticmethod
    def get_registration_history() -> List[Dict[str, Any]]:
        """ç™»éŒ²å±¥æ­´ã‚’å–å¾—"""
        return st.session_state.get('registration_history', [])
    
    @staticmethod
    def clear_form_data():
        """ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªã‚¢"""
        st.session_state.form_data = {}
    
    @staticmethod
    def save_form_data(data: Dict[str, Any]):
        """ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜"""
        st.session_state.form_data.update(data)
    
    @staticmethod
    def get_form_data(key: str, default: Any = None) -> Any:
        """ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—"""
        return st.session_state.form_data.get(key, default)

class NotificationManager:
    """é€šçŸ¥ç®¡ç†ã‚¯ãƒ©ã‚¹"""
    
    @staticmethod
    def add_success(message: str):
        """æˆåŠŸé€šçŸ¥ã‚’è¿½åŠ """
        st.session_state.notification_queue.append({
            'type': 'success',
            'message': message,
            'timestamp': datetime.now()
        })
    
    @staticmethod
    def add_error(message: str):
        """ã‚¨ãƒ©ãƒ¼é€šçŸ¥ã‚’è¿½åŠ """
        st.session_state.notification_queue.append({
            'type': 'error',
            'message': message,
            'timestamp': datetime.now()
        })
    
    @staticmethod
    def add_info(message: str):
        """æƒ…å ±é€šçŸ¥ã‚’è¿½åŠ """
        st.session_state.notification_queue.append({
            'type': 'info',
            'message': message,
            'timestamp': datetime.now()
        })
    
    @staticmethod
    def show_notifications():
        """é€šçŸ¥ã‚’è¡¨ç¤º"""
        if st.session_state.notification_queue:
            for notification in st.session_state.notification_queue:
                if notification['type'] == 'success':
                    st.success(notification['message'])
                elif notification['type'] == 'error':
                    st.error(notification['message'])
                elif notification['type'] == 'info':
                    st.info(notification['message'])
            
            # é€šçŸ¥ã‚’ã‚¯ãƒªã‚¢
            st.session_state.notification_queue = []

class UIHelper:
    """UIè£œåŠ©æ©Ÿèƒ½ã‚¯ãƒ©ã‚¹"""
    
    @staticmethod
    def show_registration_history():
        """ç™»éŒ²å±¥æ­´ã‚’è¡¨ç¤º"""
        history = SessionManager.get_registration_history()
        
        if not history:
            st.info("ğŸ“ ç™»éŒ²å±¥æ­´ã¯ã‚ã‚Šã¾ã›ã‚“")
            return
        
        st.subheader("ğŸ“‹ ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­ã®ç™»éŒ²å±¥æ­´")
        
        for i, record in enumerate(reversed(history)):
            with st.expander(
                f"ğŸ‘¤ {record['username']} ({record['timestamp'].strftime('%H:%M:%S')})",
                expanded=(i == 0)
            ):
                col1, col2 = st.columns(2)
                
                with col1:
                    st.write(f"**ID**: {record['id']}")
                    st.write(f"**ãƒ¦ãƒ¼ã‚¶ãƒ¼å**: {record['username']}")
                    st.write(f"**ãƒ¡ãƒ¼ãƒ«**: {record['email']}")
                
                with col2:
                    st.write(f"**æ°å**: {record['full_name']}")
                    st.write(f"**ç™»éŒ²æ™‚åˆ»**: {record['timestamp'].strftime('%Y-%m-%d %H:%M:%S')}")
    
    @staticmethod
    def show_session_info():
        """ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ã‚’è¡¨ç¤º"""
        with st.expander("ğŸ” ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±"):
            col1, col2 = st.columns(2)
            
            with col1:
                st.write(f"**ã‚»ãƒƒã‚·ãƒ§ãƒ³ID**: {id(st.session_state)}")
                st.write(f"**ç™»éŒ²ä»¶æ•°**: {len(SessionManager.get_registration_history())}")
            
            with col2:
                last_time = st.session_state.get('last_registration_time')
                if last_time:
                    st.write(f"**æœ€çµ‚ç™»éŒ²**: {last_time.strftime('%H:%M:%S')}")
                else:
                    st.write("**æœ€çµ‚ç™»éŒ²**: ãªã—")
    
    @staticmethod
    def create_user_card(user_data: Dict[str, Any]) -> str:
        """ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚«ãƒ¼ãƒ‰ã®HTMLã‚’ç”Ÿæˆ"""
        return f"""
        <div style="
            padding: 1rem; 
            border: 1px solid #ddd; 
            border-radius: 8px; 
            background-color: #f9f9f9;
            margin: 0.5rem 0;
        ">
            <h4>ğŸ‘¤ {user_data.get('full_name', 'Unknown')}</h4>
            <p><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼å:</strong> {user_data.get('username', 'N/A')}</p>
            <p><strong>ãƒ¡ãƒ¼ãƒ«:</strong> {user_data.get('email', 'N/A')}</p>
            <p><strong>éƒ¨ç½²:</strong> {user_data.get('department', 'æœªè¨­å®š')}</p>
        </div>
        """
    
    @staticmethod
    def show_progress_indicator(current_step: int, total_steps: int = 6):
        """é€²è¡ŒçŠ¶æ³ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’è¡¨ç¤º"""
        progress = current_step / total_steps
        st.progress(progress)
        st.caption(f"Step {current_step} / {total_steps} å®Œäº†")

def format_datetime(dt: datetime) -> str:
    """æ—¥æ™‚ã‚’èª­ã¿ã‚„ã™ã„å½¢å¼ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ"""
    return dt.strftime("%Yå¹´%mæœˆ%dæ—¥ %H:%M:%S")

def truncate_text(text: str, max_length: int = 50) -> str:
    """ãƒ†ã‚­ã‚¹ãƒˆã‚’æŒ‡å®šã—ãŸé•·ã•ã§åˆ‡ã‚Šè©°ã‚"""
    if len(text) <= max_length:
        return text
    return text[:max_length - 3] + "..."

def get_user_display_name(user_data: Dict[str, Any]) -> str:
    """ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¡¨ç¤ºåã‚’å–å¾—"""
    full_name = user_data.get('full_name')
    username = user_data.get('username')
    
    if full_name:
        return f"{full_name} ({username})"
    return username or "Unknown User"</code></pre>

                        <h6>main.pyã«ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†æ©Ÿèƒ½ã‚’çµ±åˆ</h6>
                        <pre><code># app/main.pyã®å†’é ­ã«è¿½åŠ 
from utils.helpers import SessionManager, NotificationManager, UIHelper

# main()é–¢æ•°ã®æœ€åˆã«è¿½åŠ 
def main():
    # ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆæœŸåŒ–
    SessionManager.initialize_session()
    
    # æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰...
    
    # ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ã‚’è¿½åŠ 
    with st.sidebar:
        # æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰...
        
        st.markdown("---")
        UIHelper.show_session_info()
        
        # å±¥æ­´è¡¨ç¤ºãƒœã‚¿ãƒ³
        if st.button("ğŸ“‹ ç™»éŒ²å±¥æ­´è¡¨ç¤º"):
            st.session_state.show_history = True

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æˆåŠŸæ™‚ã®å‡¦ç†ã‚’æ›´æ–°
# show_user_registration_form()å†…ã®æˆåŠŸå‡¦ç†éƒ¨åˆ†ã‚’ä»¥ä¸‹ã«ç½®ãæ›ãˆ:

if submitted and StreamlitValidationHelper.validate_and_show_errors(user_data):
    try:
        # ... æ—¢å­˜ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆã‚³ãƒ¼ãƒ‰ ...
        
        # ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«è¨˜éŒ²è¿½åŠ 
        SessionManager.add_registration_record(user_data, created_user.id)
        
        # é€šçŸ¥è¿½åŠ 
        NotificationManager.add_success(
            f"âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ '{created_user.username}' ã‚’æ­£å¸¸ã«ç™»éŒ²ã—ã¾ã—ãŸï¼"
        )
        
        # ... æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ ...
        
    except ValueError as e:
        NotificationManager.add_error(f"âŒ ç™»éŒ²ã‚¨ãƒ©ãƒ¼: {e}")
    except Exception as e:
        NotificationManager.add_error(f"âŒ äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")

# ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æœ€å¾Œã«å±¥æ­´è¡¨ç¤ºã‚’è¿½åŠ 
if page == "ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²":
    show_user_registration_form()
    
    # é€šçŸ¥è¡¨ç¤º
    NotificationManager.show_notifications()
    
    # å±¥æ­´è¡¨ç¤º
    if st.session_state.get('show_history', False):
        UIHelper.show_registration_history()
        
        if st.button("å±¥æ­´ã‚’é–‰ã˜ã‚‹"):
            st.session_state.show_history = False</code></pre>

                        <h6>æœŸå¾…ã•ã‚Œã‚‹çµæœ</h6>
                        <p>ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã€ç™»éŒ²å±¥æ­´ã®è¡¨ç¤ºã€é€šçŸ¥ç®¡ç†ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ã®è¡¨ç¤ºãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>
                    </div>

                    <!-- ç†è§£åº¦ç¢ºèªã‚¯ã‚¤ã‚º -->
                    <div class="quiz-container">
                        <h5>ç†è§£åº¦ç¢ºèªã‚¯ã‚¤ã‚º</h5>
                        <ol>
                            <li><strong>st.form()</strong>ã‚’ä½¿ç”¨ã™ã‚‹åˆ©ç‚¹ã‚’3ã¤æŒ™ã’ã¦ãã ã•ã„ã€‚</li>
                            <li><strong>ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ï¼ˆst.session_stateï¼‰</strong>ã®ä¸»ãªç”¨é€”ã‚’3ã¤æŒ™ã’ã¦ãã ã•ã„ã€‚</li>
                            <li><strong>Streamlitã®ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ€§</strong>ã¨ã¯ä½•ã§ã™ã‹ï¼Ÿ</li>
                            <li><strong>st.columns()</strong>ã‚’ä½¿ç”¨ã™ã‚‹ç›®çš„ã¯ä½•ã§ã™ã‹ï¼Ÿ</li>
                            <li><strong>ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</strong>ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§è¡Œã†åˆ©ç‚¹ã¯ä½•ã§ã™ã‹ï¼Ÿ</li>
                            <li><strong>st.balloons()</strong>ã‚„<strong>st.success()</strong>ãªã©ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ©Ÿèƒ½ã®é‡è¦æ€§ã¯ä½•ã§ã™ã‹ï¼Ÿ</li>
                            <li><strong>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</strong>ã§try-exceptæ–‡ã‚’ä½¿ç”¨ã™ã‚‹éš›ã®æ³¨æ„ç‚¹ã‚’2ã¤æŒ™ã’ã¦ãã ã•ã„ã€‚</li>
                            <li><strong>Streamlitã‚¢ãƒ—ãƒª</strong>ã¨<strong>å¾“æ¥ã®Webã‚¢ãƒ—ãƒª</strong>ã®ä¸»ãªé•ã„ã‚’3ã¤æŒ™ã’ã¦ãã ã•ã„ã€‚</li>
                        </ol>
                        
                        <details>
                            <summary>è§£ç­”ä¾‹</summary>
                            <ol>
                                <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã®ä¸€æ‹¬é€ä¿¡ã€ãƒšãƒ¼ã‚¸å†èª­ã¿è¾¼ã¿ã®åˆ¶å¾¡ã€è¤‡æ•°å…¥åŠ›ã®åŒæœŸå‡¦ç†</li>
                                <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼çŠ¶æ…‹ã®ä¿æŒã€ç”»é¢é–“ã§ã®ãƒ‡ãƒ¼ã‚¿å…±æœ‰ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šã®ç®¡ç†</li>
                                <li>ã‚³ãƒ¼ãƒ‰ãŒå¤‰æ›´ã•ã‚Œã‚‹ã¨è‡ªå‹•çš„ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå†å®Ÿè¡Œã•ã‚Œã€UIãŒæ›´æ–°ã•ã‚Œã‚‹ä»•çµ„ã¿</li>
                                <li>ç”»é¢ã‚’è¤‡æ•°ã®åˆ—ã«åˆ†å‰²ã—ã€ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ä½œæˆã™ã‚‹ãŸã‚</li>
                                <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å‘ä¸Šã€ã‚µãƒ¼ãƒãƒ¼è² è·ã®è»½æ¸›ã€å³åº§ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æä¾›</li>
                                <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆã®å‘ä¸Šã€æ“ä½œçµæœã®æ˜ç¢ºåŒ–ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½¿ã„ã‚„ã™ã•å‘ä¸Š</li>
                                <li>å…·ä½“çš„ãªä¾‹å¤–ã®ç¨®é¡ã‚’åˆ†ã‘ã¦å‡¦ç†ã™ã‚‹ã€ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã¨æœ¬ç•ªæƒ…å ±ã‚’ä½¿ã„åˆ†ã‘ã‚‹</li>
                                <li>HTMLã‚„CSSã®çŸ¥è­˜ä¸è¦ã€Pythonã®ã¿ã§é–‹ç™ºå¯èƒ½ã€ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªæ›´æ–°æ©Ÿèƒ½</li>
                            </ol>
                        </details>
                    </div>

                    <!-- ã¾ã¨ã‚ -->
                    <h3 class="section-title">3.6 Step 3ã®ã¾ã¨ã‚</h3>
                    
                    <div class="highlight">
                        <h5>Step 3ã§ç¿’å¾—ã—ãŸã‚¹ã‚­ãƒ«</h5>
                        <ul>
                            <li>Streamlitãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ´»ç”¨</li>
                            <li>åŒ…æ‹¬çš„ãªå…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½</li>
                            <li>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã®é€£æºã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–</li>
                            <li>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</li>
                            <li>ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ç®¡ç†ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹</li>
                            <li>ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãªUIãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­è¨ˆ</li>
                            <li>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµ±è¨ˆæƒ…å ±ã®è¡¨ç¤º</li>
                        </ul>
                    </div>

                    <div class="warning">
                        <h6>æ¬¡ã®Stepã«é€²ã‚€å‰ã«ç¢ºèªã™ã‚‹ã“ã¨</h6>
                        <ul>
                            <li>âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ãŒæ­£å¸¸ã«è¡¨ç¤ºã•ã‚Œã‚‹</li>
                            <li>âœ… å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒé©åˆ‡ã«å‹•ä½œã™ã‚‹</li>
                            <li>âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã‚‹</li>
                            <li>âœ… ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé©åˆ‡ã«è¡¨ç¤ºã•ã‚Œã‚‹</li>
                            <li>âœ… çµ±è¨ˆæƒ…å ±ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ›´æ–°ã•ã‚Œã‚‹</li>
                            <li>âœ… ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ãŒæ­£ã—ãç®¡ç†ã•ã‚Œã‚‹</li>
                            <li>âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒæ©Ÿèƒ½ã™ã‚‹</li>
                        </ul>
                    </div>

                    <div class="info">
                        <h6>ç™ºå±•çš„ãªå­¦ç¿’ã®ãƒ’ãƒ³ãƒˆ</h6>
                        <ul>
                            <li><strong>ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</strong>: Streamlitã®æ‹¡å¼µã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ</li>
                            <li><strong>ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</strong>: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½</li>
                            <li><strong>ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–</strong>: Plotlyã€Matplotlibã¨ã®çµ±åˆ</li>
                            <li><strong>èªè¨¼æ©Ÿèƒ½</strong>: streamlit-authenticatorãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ´»ç”¨</li>
                            <li><strong>ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½</strong>: @st.cacheãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã«ã‚ˆã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š</li>
                        </ul>
                    </div>

                    <!-- ç« é–“ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="step2-database-design.html" class="btn btn-secondary">â† Step 2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ</a>
                        <a href="step4-user-list-display.html" class="btn btn-primary">Step 4: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§è¡¨ç¤º â†’</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>