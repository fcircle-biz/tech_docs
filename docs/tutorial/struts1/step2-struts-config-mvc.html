<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Struts 1.x超入門 第2章 - Struts設定とMVCの基礎（Windows + Eclipse対応）</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* ベースレイアウト */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        /* ナビゲーション - Java生態系テーマ */
        .navbar {
            background-color: #f57c00;
        }

        .navbar-brand, .navbar-nav .nav-link {
            color: white !important;
        }

        .navbar-nav .nav-link:hover {
            color: #fff3e0 !important;
        }

        /* サイドバー */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
            background-color: white;
            border-right: 1px solid #dee2e6;
        }

        .sidebar .nav-link {
            color: #495057;
            font-weight: 500;
        }

        .sidebar .nav-link:hover {
            background-color: #fff3e0;
            color: #f57c00;
        }

        .sidebar .nav-link.active {
            background-color: #f57c00 !important;
            color: white !important;
        }

        /* タイトル */
        .chapter-title {
            color: #f57c00;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #f57c00;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #ff9800;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        /* コンテンツボックス */
        .quiz-container {
            background-color: #fff3e0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #f57c00;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        /* ナビゲーション */
        .nav-link.active {
            background-color: #f57c00 !important;
            color: white !important;
        }

        /* コードブロック */
        pre {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 1rem;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">Struts 1.x 超入門チュートリアル</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="https://fcircle-biz.github.io/tech_docs/">ホーム</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">チュートリアル概要</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#section2-1">2.1 Struts MVCアーキテクチャ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#section2-2">2.2 struts-config.xml設定</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#section2-3">2.3 Actionクラスの実装</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#section2-4">2.4 ActionForm活用</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#section2-5">2.5 JSPビューの作成</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#quiz">理解度確認</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">第2章: Struts設定とMVCの基礎（初心者向け）</h1>
                </div>

                <div id="chapter2">
                    <!-- 章タイトル -->
                    <h2 class="chapter-title">Struts 1.x MVCアーキテクチャとフレームワーク設定</h2>
                    
                    <div class="highlight">
                        <h5>👋 初心者の方へ</h5>
                        <p>この章では、「<strong>MVC」というWebアプリの基本的な作り方を学びます。難しく聞こえるかもしれませんが、<strong>Eclipseで実際にファイルを作りながら</strong>一つずつ理解していきましょう！</p>
                        <p><strong>分からないことがあったら、いつでも質問してくださいね！</strong></p>
                    </div>
                    
                    <!-- 学習目標（必須） -->
                    <div class="highlight">
                        <h5>🎯 この章で学ぶこと</h5>
                        <ul>
                            <li><strong>MVCパターン</strong>って何？ - Webアプリを整理して作る方法</li>
                            <li><strong>struts-config.xml</strong> - Strutsの「設定ファイル」をEclipseで作成</li>
                            <li><strong>Actionクラス</strong> - ボタンが押された時の処理を書くJavaファイル</li>
                            <li><strong>ActionForm</strong> - フォームの入力値を受け取るJavaクラス</li>
                            <li><strong>JSPファイル</strong> - ユーザーが見る画面を作るファイル</li>
                            <li><strong>リクエストの流れ</strong> - ユーザーがボタンを押してから結果が表示されるまで</li>
                        </ul>
                        <p><em>メモ: Eclipseで実際にファイルを作りながら進めるので、体験しながら学べます！</em></p>
                    </div>

                    <!-- セクション2.1 -->
                    <h3 class="section-title" id="section2-1">2.1 🏠 MVCって何？初心者にも分かりやすく説明</h3>
                    <p>Webアプリを作るときの「整理の仕方」です。ファイルがごちゃごちゃにならないように、役割を分けて整理します。</p>

                    <div class="highlight">
                        <h5>📝 MVCって何の略？</h5>
                        <p><strong>M</strong>odel（モデル）、<strong>V</strong>iew（ビュー）、<strong>C</strong>ontroller（コントローラー）の3つの頭文字です。</p>
                    </div>

                    <h4>🎭 学校の演劇で例えてみよう</h4>
                    <div class="highlight">
                        <ul>
                            <li><strong>🎬 Director（監督）= Controller</strong>: 「どんな場面で、何をするか」を決める人</li>
                            <li><strong>🎭 Actor（俳優）= View</strong>: 「観客に見える部分」を演じる人</li>
                            <li><strong>📄 Script（台本）= Model</strong>: 「情報やデータ」を保管するもの</li>
                        </ul>
                    </div>

                    <h4>💻 StrutsではMVCはこんなファイルです</h4>
                    <div style="background-color: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
                        <ul>
                            <li><strong>🎬 Controller（監督）</strong>: 
                                <ul>
                                    <li><code>Actionクラス</code> - ボタンが押されたら何をするかを決める</li>
                                    <li><code>struts-config.xml</code> - 「どのURLが来たらどのActionを使うか」の設定</li>
                                </ul>
                            </li>
                            <li><strong>🎭 View（俳優）</strong>: 
                                <ul>
                                    <li><code>JSPファイル</code> - ユーザーが見る画面（HTML）</li>
                                </ul>
                            </li>
                            <li><strong>📄 Model（台本）</strong>: 
                                <ul>
                                    <li><code>ActionForm</code> - フォームの入力値を保存</li>
                                    <li><code>ビジネスロジック</code> - 実際の処理（例:ログインチェック）</li>
                                </ul>
                            </li>
                        </ul>
                    </div>

                    <div class="highlight">
                        <h5>🔄 ユーザーがボタンを押してから結果が表示されるまでの流れ</h5>
                        <p>「ログインボタン」を押した場合を例に説明します：</p>
                        <ol>
                            <li>👆 <strong>ユーザーがボタンクリック</strong><br>
                                <em>「login.do」というURLがサーバーに送られます</em></li>
                            <li>📬 <strong>Strutsが受け取り</strong><br>
                                <em>ActionServletが「あ、login.doが来たな」と気づきます</em></li>
                            <li>📁 <strong>設定ファイルをチェック</strong><br>
                                <em>struts-config.xmlで「login.doはどのActionクラスを使うか」を調べます</em></li>
                            <li>📄 <strong>入力値を取得</strong><br>
                                <em>ActionFormにユーザーが入力した値（ID、パスワード）を保存</em></li>
                            <li>⚙️ <strong>実際の処理を実行</strong><br>
                                <em>Actionクラスのexecuteメソッドでログインチェック</em></li>
                            <li>🧭 <strong>次の画面を決める</strong><br>
                                <em>成功ならhome.jsp、失敗ならlogin.jspに遷移</em></li>
                            <li>📺 <strong>結果を表示</strong><br>
                                <em>JSPファイルがHTMLを生成してユーザーに表示</em></li>
                        </ol>
                        <p><strong>📝 メモ:</strong> 「.do」で終わるURLがStrutsの特徴です！</p>
                    </div>

                    <!-- セクション2.2 -->
                    <h3 class="section-title" id="section2-2">2.2 📁 struts-config.xmlって何？</h3>
                    <p>Strutsの「設定ファイル」です。「どのURLが来たら、どのJavaクラスを使うか」を教えてくれる大切なファイルです。</p>
                    
                    <div class="highlight">
                        <h5>💡 簡単に言うと...</h5>
                        <p>struts-config.xmlは「<strong>道案内板</strong>」みたいなものです。</p>
                        <ul>
                            <li>「<code>/login.do</code>にアクセスされたら → <code>LoginAction</code>クラスを使ってね」</li>
                            <li>「<code>/userList.do</code>にアクセスされたら → <code>UserListAction</code>クラスを使ってね」</li>
                        </ul>
                        <p>こんな感じで、URLとJavaクラスを結び付ける役割です。</p>
                    </div>

                    <!-- 実習（必須） -->
                    <div class="exercise-container">
                        <h5>📋 実習 2-1: Eclipseでstruts-config.xmlを更新しよう</h5>
                        <p>第1章で作った簡単なstruts-config.xmlを、もっと詳しい内容にアップグレードします！</p>
                        
                        <h6>📋 Eclipseでの手順</h6>
                        <ol>
                            <li><strong>Project Explorer</strong>で「struts-tutorial」プロジェクトを展開</li>
                            <li><strong>src/main/webapp/WEB-INF/struts-config.xml</strong>をダブルクリックで開く</li>
                            <li>以下の内容で<strong>全てを置き換え</strong>します：</li>
                        </ol>
                        
                        <h6>📄 新しいstruts-config.xmlの中身</h6>
                        <p><em>以下をコピーして、Eclipseのstruts-config.xmlに貼り付けてください：</em></p>
                        <pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE struts-config PUBLIC
  "-//Apache Software Foundation//DTD Struts Configuration 1.3//EN"
  "http://struts.apache.org/dtds/struts-config_1_3.dtd"&gt;

&lt;struts-config&gt;
    
    &lt;!-- フォームBean定義 --&gt;
    &lt;form-beans&gt;
        &lt;form-bean name="loginForm" 
                   type="com.example.struts.form.LoginForm"/&gt;
        &lt;form-bean name="userForm"
                   type="com.example.struts.form.UserForm"/&gt;
    &lt;/form-beans&gt;

    &lt;!-- グローバル設定 --&gt;
    &lt;global-exceptions&gt;
        &lt;exception key="global.error.system"
                   type="java.lang.Exception"
                   path="/error.jsp"/&gt;
    &lt;/global-exceptions&gt;

    &lt;global-forwards&gt;
        &lt;forward name="login" path="/login.jsp"/&gt;
        &lt;forward name="home" path="/home.jsp"/&gt;
        &lt;forward name="error" path="/error.jsp"/&gt;
    &lt;/global-forwards&gt;

    &lt;!-- アクションマッピング --&gt;
    &lt;action-mappings&gt;
        &lt;!-- ログインフォーム表示 --&gt;
        &lt;action path="/loginForm"
                forward="/login.jsp"/&gt;
        
        &lt;!-- ログイン処理 --&gt;
        &lt;action path="/login"
                type="com.example.struts.action.LoginAction"
                name="loginForm"
                scope="request"
                validate="true"
                input="/login.jsp"&gt;
            &lt;forward name="success" path="/home.jsp"/&gt;
            &lt;forward name="failure" path="/login.jsp"/&gt;
        &lt;/action&gt;
        
        &lt;!-- ユーザー一覧 --&gt;
        &lt;action path="/userList"
                type="com.example.struts.action.UserListAction"
                scope="request"&gt;
            &lt;forward name="success" path="/userList.jsp"/&gt;
        &lt;/action&gt;
        
        &lt;!-- ユーザー登録フォーム --&gt;
        &lt;action path="/userForm"
                type="com.example.struts.action.UserFormAction"
                name="userForm"
                scope="request"&gt;
            &lt;forward name="success" path="/userForm.jsp"/&gt;
        &lt;/action&gt;
    &lt;/action-mappings&gt;

    &lt;!-- メッセージリソース --&gt;
    &lt;message-resources parameter="ApplicationResources"/&gt;
    
&lt;/struts-config&gt;</code></pre>

                        <h6>🔍 各セクションの意味を初心者向けに説明</h6>
                        <div class="highlight">
                            <ul>
                                <li><strong>📄 form-beans</strong>: 「フォームの入力値を受け取るJavaクラス」の名前を登録</li>
                                <li><strong>🗺️ action-mappings</strong>: 「URLとJavaクラスの対応表」。一番大事な部分！</li>
                                <li><strong>🌐 global-forwards</strong>: 「どのページでも使える共通のリンク集」</li>
                                <li><strong>⚠️ global-exceptions</strong>: 「エラーが起きたときの対処方法」</li>
                                <li><strong>💬 message-resources</strong>: 「メッセージをまとめたファイルの場所」</li>
                            </ul>
                        </div>
                        
                        <div class="warning">
                            <h6>⚠️ 保存後の確認</h6>
                            <ol>
                                <li>Eclipseでファイルを保存（Ctrl + S）</li>
                                <li>Problemsビューでエラーが出ていないか確認</li>
                                <li>エラーがある場合は、XMLのタグの閉じ忘れなどをチェック</li>
                            </ol>
                        </div>
                    </div>

                    <!-- セクション2.3 -->
                    <h3 class="section-title" id="section2-3">2.3 ⚙️ Actionクラスって何？</h3>
                    <p>「ボタンが押されたら何をするか」を書くJavaクラスです。例えばログインボタンが押されたら、IDとパスワードをチェックする、という処理を書きます。</p>
                    
                    <div class="highlight">
                        <h5>💡 Actionクラスは「料理人」みたいなもの</h5>
                        <ul>
                            <li>🍽️ 料理人は「注文（リクエスト）」を受けて、料理（処理）を作ります</li>
                            <li>🍲 Actionクラスは「ユーザーの操作」を受けて、必要な処理をします</li>
                            <li>🍽️ 料理ができたら、お客さんに料理を提供します</li>
                            <li>📺 Actionクラスは処理が終わったら、結果を表示するページを決めます</li>
                        </ul>
                    </div>

                    <div class="exercise-container">
                        <h5>📋 実習 2-2: EclipseでLoginActionクラスを作ってみよう</h5>
                        <p>ユーザーがログインボタンを押したときの処理を書くJavaクラスを作成します。</p>
                        
                        <h6>📋 Eclipseでの作成手順</h6>
                        <ol>
                            <li><strong>src/main/java</strong>フォルダを右クリック</li>
                            <li>「<strong>New</strong>」 → 「<strong>Package</strong>」を選択</li>
                            <li>パッケージ名に「<strong>com.example.struts.action</strong>」と入力 → 「Finish」</li>
                            <li>作成されたパッケージを右クリック → 「<strong>New</strong>」 → 「<strong>Class</strong>」</li>
                            <li>クラス名に「<strong>LoginAction</strong>」と入力 → 「Finish」</li>
                            <li>作成されたファイルの中身を<strong>全て消して</strong>、以下を貼り付け：</li>
                        </ol>
                        
                        <h6>📄 LoginAction.javaの中身</h6>
                        <p><em>以下をコピーして、EclipseのLoginAction.javaに貼り付けてください：</em></p>
                        <pre><code>package com.example.struts.action;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.apache.struts.action.Action;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;
import org.apache.struts.action.ActionMessage;
import org.apache.struts.action.ActionMessages;

import com.example.struts.form.LoginForm;
import com.example.struts.service.UserService;

public class LoginAction extends Action {
    
    private UserService userService = new UserService();
    
    @Override
    public ActionForward execute(ActionMapping mapping,
                                ActionForm form,
                                HttpServletRequest request,
                                HttpServletResponse response) {
        
        // ActionFormのキャスト
        LoginForm loginForm = (LoginForm) form;
        
        // フォームからデータを取得
        String username = loginForm.getUsername();
        String password = loginForm.getPassword();
        
        try {
            // ユーザー認証処理
            if (userService.authenticate(username, password)) {
                // 認証成功時
                HttpSession session = request.getSession();
                session.setAttribute("username", username);
                
                // 成功メッセージ設定
                ActionMessages messages = new ActionMessages();
                messages.add(ActionMessages.GLOBAL_MESSAGE,
                    new ActionMessage("login.success", username));
                saveMessages(request, messages);
                
                return mapping.findForward("success");
            } else {
                // 認証失敗時
                ActionMessages errors = new ActionMessages();
                errors.add(ActionMessages.GLOBAL_MESSAGE,
                    new ActionMessage("login.error.invalid"));
                saveErrors(request, errors);
                
                return mapping.findForward("failure");
            }
        } catch (Exception e) {
            // システムエラー
            ActionMessages errors = new ActionMessages();
            errors.add(ActionMessages.GLOBAL_MESSAGE,
                new ActionMessage("login.error.system"));
            saveErrors(request, errors);
            
            return mapping.findForward("failure");
        }
    }
}</code></pre>

                        <h6>📝 Actionクラスの作り方のポイント（初心者向け）</h6>
                        <div class="highlight">
                            <ol>
                                <li><strong>📜 親クラスを継承</strong>: <code>org.apache.struts.action.Action</code>を継承する</li>
                                <li><strong>⚙️ メインメソッドを作る</strong>: <code>execute</code>メソッドをオーバーライド</li>
                                <li><strong>📄 入力値を取得</strong>: ActionFormをキャストしてユーザーの入力を取得</li>
                                <li><strong>🧠 実際の処理</strong>: ログインチェックなどのビジネスロジックを実行</li>
                                <li><strong>🧭 次のページを決める</strong>: ActionForwardで遷移先を指定</li>
                                <li><strong>⚠️ エラー対応</strong>: エラーが起きたときの適切な処理</li>
                            </ol>
                        </div>
                        
                        <div class="warning">
                            <h6>⚠️ コンパイルエラーが出たら...</h6>
                            <ul>
                                <li><strong>import文が足りない</strong>: Eclipseでエラーの上にマウスを置いて「Import」をクリック</li>
                                <li><strong>UserServiceがない</strong>: 今はまだ作っていないので、エラーは正常です</li>
                            </ul>
                        </div>
                    </div>

                    <!-- セクション2.4 -->
                    <h3 class="section-title" id="section2-4">2.4 📄 ActionFormって何？</h3>
                    <p>ユーザーがフォームに入力した値（ユーザー名、パスワードなど）を受け取るJavaクラスです。「データを一時的に保管する箱」みたいなものです。</p>
                    
                    <div class="highlight">
                        <h5>💡 ActionFormは「メモ用紙」みたいなもの</h5>
                        <ul>
                            <li>📝 ユーザーが入力した値を「メモ」しておく</li>
                            <li>✅ 入力値が正しいかチェックする（バリデーション）</li>
                            <li>📦 Actionクラスにデータを渡す</li>
                        </ul>
                        <p><strong>例:</strong> ログインフォームなら、ユーザー名とパスワードを保管します。</p>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 2-3: LoginForm実装</h5>
                        <p>ログインフォームのデータをバインディングするActionFormを作成します。</p>
                        
                        <h6>LoginForm.java</h6>
                        <pre><code>package com.example.struts.form;

import javax.servlet.http.HttpServletRequest;

import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionMapping;
import org.apache.struts.action.ActionErrors;
import org.apache.struts.action.ActionError;

public class LoginForm extends ActionForm {
    
    private String username;
    private String password;
    private boolean rememberMe;
    
    // getter/setterメソッド
    public String getUsername() {
        return username;
    }
    
    public void setUsername(String username) {
        this.username = username;
    }
    
    public String getPassword() {
        return password;
    }
    
    public void setPassword(String password) {
        this.password = password;
    }
    
    public boolean isRememberMe() {
        return rememberMe;
    }
    
    public void setRememberMe(boolean rememberMe) {
        this.rememberMe = rememberMe;
    }
    
    // バリデーション
    @Override
    public ActionErrors validate(ActionMapping mapping,
                                HttpServletRequest request) {
        
        ActionErrors errors = new ActionErrors();
        
        // ユーザー名の検証
        if (username == null || username.trim().isEmpty()) {
            errors.add("username", 
                new ActionError("error.username.required"));
        } else if (username.length() &lt; 3 || username.length() &gt; 20) {
            errors.add("username",
                new ActionError("error.username.length"));
        }
        
        // パスワードの検証
        if (password == null || password.trim().isEmpty()) {
            errors.add("password",
                new ActionError("error.password.required"));
        } else if (password.length() &lt; 6) {
            errors.add("password",
                new ActionError("error.password.minlength"));
        }
        
        return errors;
    }
    
    // フォームのリセット
    @Override
    public void reset(ActionMapping mapping,
                     HttpServletRequest request) {
        username = "";
        password = "";
        rememberMe = false;
    }
}</code></pre>

                        <h6>ActionFormの重要メソッド</h6>
                        <ul>
                            <li><strong>validate()</strong>: フォームデータの検証</li>
                            <li><strong>reset()</strong>: フォームフィールドの初期化</li>
                            <li><strong>getter/setter</strong>: HTMLフィールドとのデータバインディング</li>
                        </ul>
                    </div>

                    <!-- セクション2.5 -->
                    <h3 class="section-title" id="section2-5">2.5 JSPビューの作成</h3>
                    <p>Strutsタグライブラリを使用したJSPビューの作成方法を学習します。</p>

                    <div class="exercise-container">
                        <h5>実習 2-4: login.jsp作成</h5>
                        <p>Strutsタグライブラリを使用してログインフォームを作成します。</p>
                        
                        <h6>login.jsp</h6>
                        <pre><code>&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %&gt;
&lt;%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %&gt;

&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;&lt;bean:message key="login.title"/&gt;&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 50px; }
        .form-container { max-width: 400px; margin: 0 auto; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; }
        input[type="text"], input[type="password"] { 
            width: 100%; padding: 8px; border: 1px solid #ccc; 
        }
        .error { color: red; font-size: 12px; }
        .message { color: green; font-weight: bold; }
        .submit-btn { 
            background-color: #f57c00; color: white; 
            padding: 10px 20px; border: none; cursor: pointer;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="form-container"&gt;
        &lt;h2&gt;&lt;bean:message key="login.title"/&gt;&lt;/h2&gt;
        
        &lt;!-- エラーメッセージ表示 --&gt;
        &lt;html:errors/&gt;
        
        &lt;!-- 成功メッセージ表示 --&gt;
        &lt;html:messages id="message" message="true"&gt;
            &lt;div class="message"&gt;
                &lt;bean:write name="message"/&gt;
            &lt;/div&gt;
        &lt;/html:messages&gt;
        
        &lt;!-- ログインフォーム --&gt;
        &lt;html:form action="/login"&gt;
            &lt;div class="form-group"&gt;
                &lt;label for="username"&gt;
                    &lt;bean:message key="login.username"/&gt;:
                &lt;/label&gt;
                &lt;html:text property="username" styleId="username"/&gt;
                &lt;html:errors property="username" 
                           styleClass="error"/&gt;
            &lt;/div&gt;
            
            &lt;div class="form-group"&gt;
                &lt;label for="password"&gt;
                    &lt;bean:message key="login.password"/&gt;:
                &lt;/label&gt;
                &lt;html:password property="password" styleId="password"/&gt;
                &lt;html:errors property="password" 
                           styleClass="error"/&gt;
            &lt;/div&gt;
            
            &lt;div class="form-group"&gt;
                &lt;html:checkbox property="rememberMe"/&gt;
                &lt;bean:message key="login.remember.me"/&gt;
            &lt;/div&gt;
            
            &lt;div class="form-group"&gt;
                &lt;html:submit styleClass="submit-btn"&gt;
                    &lt;bean:message key="login.submit"/&gt;
                &lt;/html:submit&gt;
            &lt;/div&gt;
        &lt;/html:form&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                        <h6>主要なStrutsタグ</h6>
                        <ul>
                            <li><strong>&lt;html:form&gt;</strong>: フォームタグ</li>
                            <li><strong>&lt;html:text&gt;</strong>: テキスト入力フィールド</li>
                            <li><strong>&lt;html:password&gt;</strong>: パスワード入力フィールド</li>
                            <li><strong>&lt;html:checkbox&gt;</strong>: チェックボックス</li>
                            <li><strong>&lt;html:errors&gt;</strong>: エラーメッセージ表示</li>
                            <li><strong>&lt;bean:message&gt;</strong>: プロパティファイルからメッセージ表示</li>
                        </ul>

                        <h6>ApplicationResources.properties</h6>
                        <p>src/main/resources/ApplicationResources.properties:</p>
                        <pre><code># ログイン画面
login.title=ログイン
login.username=ユーザー名
login.password=パスワード
login.remember.me=ログイン状態を記憶する
login.submit=ログイン
login.success=ようこそ、{0}さん
login.error.invalid=ユーザー名またはパスワードが間違っています
login.error.system=システムエラーが発生しました

# エラーメッセージ
error.username.required=ユーザー名を入力してください
error.username.length=ユーザー名は3文字以上20文字以下で入力してください
error.password.required=パスワードを入力してください
error.password.minlength=パスワードは6文字以上で入力してください</code></pre>
                    </div>

                    <!-- 注意点 -->
                    <div class="warning">
                        <h5>⚠️ 重要なポイント</h5>
                        <ul>
                            <li>ActionFormのプロパティ名とJSPのフィールド名は一致させる必要があります</li>
                            <li>validate="true" 設定時、バリデーションエラーがあるとinput属性で指定されたJSPに戻ります</li>
                            <li>メッセージリソースファイルはクラスパス直下に配置します</li>
                            <li>Strutsタグライブラリの宣言を忘れずにJSPに記載してください</li>
                        </ul>
                    </div>

                    <!-- 理解度確認（必須） -->
                    <div class="quiz-container" id="quiz">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>Struts MVCパターンで、Controllerにあたるコンポーネントはどれですか？</li>
                            <li>struts-config.xmlでActionFormを定義するタグは何ですか？</li>
                            <li>Actionクラスでビジネスロジックを実装するメソッドの引数は何個ですか？</li>
                            <li>ActionFormでフォームデータの検証を行うメソッド名は何ですか？</li>
                            <li>JSPでStrutsのテキスト入力フィールドを作成するタグは何ですか？</li>
                            <li>エラーメッセージを表示するStrutsタグは何ですか？</li>
                        </ol>
                        
                        <details class="mt-3">
                            <summary>解答を確認</summary>
                            <ol>
                                <li>ActionServlet と Action クラス</li>
                                <li>&lt;form-bean&gt;</li>
                                <li>4個（mapping, form, request, response）</li>
                                <li>validate()</li>
                                <li>&lt;html:text&gt;</li>
                                <li>&lt;html:errors&gt;</li>
                            </ol>
                        </details>
                    </div>

                    <!-- 章間ナビゲーション（必須） -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="step1-environment-setup.html" class="btn btn-secondary">← 前の章: 環境構築</a>
                        <a href="step3-database-dao.html" class="btn btn-primary">次の章: データベース接続とDAO設計 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // スムーススクロール
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // サイドバーのアクティブリンク更新
        window.addEventListener('scroll', function() {
            let current = '';
            const sections = document.querySelectorAll('h3[id], div[id]');
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (pageYOffset >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }
            });

            document.querySelectorAll('.sidebar .nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>