<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PHPå®Ÿè·µãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« ç¬¬6ç«  - å‹•ä½œç¢ºèªã¨ãƒ‡ãƒãƒƒã‚°æ‰‹æ³•</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* ãƒ™ãƒ¼ã‚¹ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ - PHP/JavaScriptç³»ãƒ†ãƒ¼ãƒ */
        .navbar {
            background-color: #ffc107;
        }

        .navbar-brand, .navbar-nav .nav-link {
            color: #212529 !important;
            font-weight: 500;
        }

        .navbar-nav .nav-link:hover {
            color: #495057 !important;
        }

        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
            background-color: white;
            border-right: 1px solid #dee2e6;
        }

        .sidebar .nav-link {
            color: #495057;
            font-weight: 500;
        }

        .sidebar .nav-link:hover {
            background-color: #fffde7;
            color: #ffc107;
        }

        .sidebar .nav-link.active {
            background-color: #ffc107 !important;
            color: #212529 !important;
        }

        /* ã‚¿ã‚¤ãƒˆãƒ« */
        .chapter-title {
            color: #ffc107;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #ffc107;
            padding-bottom: 0.5rem;
        }

        .section-title {
            color: #ffca28;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }

        /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒœãƒƒã‚¯ã‚¹ */
        .quiz-container {
            background-color: #fffde7;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #ffc107;
        }

        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }

        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ff9800;
        }

        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }

        .info {
            background-color: #e3f2fd;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #2196f3;
        }

        .success {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #4caf50;
        }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .nav-link.active {
            background-color: #ffc107 !important;
            color: #212529 !important;
        }

        /* ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ */
        pre {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 1rem;
        }
    </style>
</head>
<body>
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">PHP å®Ÿè·µãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="https://fcircle-biz.github.io/tech_docs/">ãƒ›ãƒ¼ãƒ </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«æ¦‚è¦</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
            <nav class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#section6-1">6.1 çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#section6-2">6.2 ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°åˆ†æ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#section6-3">6.3 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#section6-4">6.4 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºèª</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#section6-5">6.5 ãƒ‡ãƒãƒƒã‚°æŠ€æ³•</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#quiz">ç†è§£åº¦ç¢ºèª</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">ç¬¬6ç« : å‹•ä½œç¢ºèªã¨ãƒ‡ãƒãƒƒã‚°æ‰‹æ³•</h1>
                </div>

                <div id="chapter6">
                    <!-- ç« ã‚¿ã‚¤ãƒˆãƒ« -->
                    <h2 class="chapter-title">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‹•ä½œç¢ºèªã¨ãƒ‡ãƒãƒƒã‚°æŠ€æ³•</h2>
                    
                    <div class="highlight">
                        <h5>ã“ã®ç« ã§å­¦ã¶ã“ã¨</h5>
                        <ul>
                            <li><strong>çµ±åˆãƒ†ã‚¹ãƒˆ</strong>ã®å®Ÿè¡Œã¨ç¢ºèªæ‰‹æ³•</li>
                            <li><strong>ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°</strong>ã®åˆ†æã¨æ´»ç”¨æ–¹æ³•</li>
                            <li><strong>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š</strong>ã¨ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ç™ºè¦‹</li>
                            <li><strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºèª</strong>ã¨è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯</li>
                            <li><strong>Eclipse IDEãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½</strong>ã®æ´»ç”¨</li>
                        </ul>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³6.1 -->
                    <h3 class="section-title" id="section6-1">6.1 ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®çµ±åˆãƒ†ã‚¹ãƒˆ</h3>
                    <p>é–‹ç™ºã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®å…¨æ©Ÿèƒ½ã‚’é€šã—ã§ãƒ†ã‚¹ãƒˆã—ã€ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ã¨æ©Ÿèƒ½ã®å‹•ä½œã‚’ç¢ºèªã—ã¾ã™ã€‚</p>

                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 6-1: çµ±åˆãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½œæˆ</h5>
                        <p>å…¨ã¦ã®æ©Ÿèƒ½ã‚’ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«ã«ãƒ†ã‚¹ãƒˆã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®çŠ¶æ…‹å¤‰åŒ–ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
                        
                        <h6>test_integration.phpä½œæˆ</h6>
                        <p>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«ä»¥ä¸‹ã®å†…å®¹ã§ä½œæˆï¼š</p>
                        <pre><code>&lt;?php
// çµ±åˆãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
require_once 'config/database.php';

class IntegrationTester {
    private $pdo;
    private $test_results = [];
    
    public function __construct() {
        $this->pdo = getDatabase();
    }
    
    /**
     * å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
     */
    public function runAllTests() {
        echo "&lt;h3&gt;çµ±åˆãƒ†ã‚¹ãƒˆé–‹å§‹&lt;/h3&gt;\n";
        
        $this->testDatabaseConnection();
        $this->testUserRegistration();
        $this->testUserListing();
        $this->testUserUpdate();
        $this->testUserDeletion();
        $this->testSearchFunctionality();
        
        $this->displayResults();
    }
    
    /**
     * ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ†ã‚¹ãƒˆ
     */
    private function testDatabaseConnection() {
        try {
            $stmt = $this->pdo->query("SELECT COUNT(*) as count FROM users");
            $result = $stmt->fetch();
            $this->addResult('ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š', true, "ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°: {$result['count']}");
        } catch (Exception $e) {
            $this->addResult('ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š', false, $e->getMessage());
        }
    }
    
    /**
     * ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ†Ø³Øª
     */
    private function testUserRegistration() {
        try {
            // ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿
            $test_username = 'test_user_' . date('YmdHis');
            $test_email = $test_username . '@test.example.com';
            
            $sql = "INSERT INTO users (username, email, full_name, birth_date) VALUES (?, ?, ?, ?)";
            $stmt = $this->pdo->prepare($sql);
            $result = $stmt->execute([
                $test_username,
                $test_email,
                'ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±åˆ',
                '1990-01-01'
            ]);
            
            if ($result) {
                $this->test_user_id = $this->pdo->lastInsertId();
                $this->addResult('ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²', true, "ID: {$this->test_user_id}");
            } else {
                $this->addResult('ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²', false, 'ç™»éŒ²å¤±æ•—');
            }
        } catch (Exception $e) {
            $this->addResult('ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²', false, $e->getMessage());
        }
    }
    
    /**
     * ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—ãƒ†ã‚¹ãƒˆ
     */
    private function testUserListing() {
        try {
            $stmt = $this->pdo->query("SELECT * FROM users ORDER BY id DESC LIMIT 5");
            $users = $stmt->fetchAll();
            
            if (count($users) > 0) {
                $this->addResult('ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§', true, count($users) . "ä»¶å–å¾—");
            } else {
                $this->addResult('ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§', false, 'ãƒ‡ãƒ¼ã‚¿ãªã—');
            }
        } catch (Exception $e) {
            $this->addResult('ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§', false, $e->getMessage());
        }
    }
    
    /**
     * ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°ãƒ†ã‚¹ãƒˆ
     */
    private function testUserUpdate() {
        if (!isset($this->test_user_id)) {
            $this->addResult('ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°', false, 'ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãªã—');
            return;
        }
        
        try {
            $sql = "UPDATE users SET full_name = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?";
            $stmt = $this->pdo->prepare($sql);
            $result = $stmt->execute(['æ›´æ–°ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼', $this->test_user_id]);
            
            if ($result && $stmt->rowCount() > 0) {
                $this->addResult('ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°', true, "ID: {$this->test_user_id}");
            } else {
                $this->addResult('ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°', false, 'æ›´æ–°ã•ã‚Œãš');
            }
        } catch (Exception $e) {
            $this->addResult('ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°', false, $e->getMessage());
        }
    }
    
    /**
     * æ¤œç´¢æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
     */
    private function testSearchFunctionality() {
        try {
            $sql = "SELECT * FROM users WHERE full_name LIKE ? OR email LIKE ?";
            $stmt = $this->pdo->prepare($sql);
            $stmt->execute(['%ãƒ†ã‚¹ãƒˆ%', '%test%']);
            $results = $stmt->fetchAll();
            
            $this->addResult('æ¤œç´¢æ©Ÿèƒ½', true, count($results) . "ä»¶ãƒ’ãƒƒãƒˆ");
        } catch (Exception $e) {
            $this->addResult('æ¤œç´¢æ©Ÿèƒ½', false, $e->getMessage());
        }
    }
    
    /**
     * ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤ãƒ†ã‚¹ãƒˆ
     */
    private function testUserDeletion() {
        if (!isset($this->test_user_id)) {
            $this->addResult('ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤', false, 'ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãªã—');
            return;
        }
        
        try {
            $sql = "DELETE FROM users WHERE id = ?";
            $stmt = $this->pdo->prepare($sql);
            $result = $stmt->execute([$this->test_user_id]);
            
            if ($result && $stmt->rowCount() > 0) {
                $this->addResult('ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤', true, "ID: {$this->test_user_id}");
            } else {
                $this->addResult('ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤', false, 'å‰Šé™¤ã•ã‚Œãš');
            }
        } catch (Exception $e) {
            $this->addResult('ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤', false, $e->getMessage());
        }
    }
    
    /**
     * ãƒ†ã‚¹ãƒˆçµæœè¿½åŠ 
     */
    private function addResult($test_name, $success, $message) {
        $this->test_results[] = [
            'name' => $test_name,
            'success' => $success,
            'message' => $message,
            'time' => microtime(true)
        ];
    }
    
    /**
     * ãƒ†ã‚¹ãƒˆçµæœè¡¨ç¤º
     */
    private function displayResults() {
        $total = count($this->test_results);
        $passed = array_filter($this->test_results, function($r) { return $r['success']; });
        $pass_count = count($passed);
        
        echo "&lt;div class=\"mt-4\"&gt;";
        echo "&lt;h4&gt;ãƒ†ã‚¹ãƒˆçµæœ: {$pass_count}/{$total} é€šé&lt;/h4&gt;";
        
        foreach ($this->test_results as $result) {
            $status_class = $result['success'] ? 'success' : 'danger';
            $status_text = $result['success'] ? 'âœ“ æˆåŠŸ' : 'âœ— å¤±æ•—';
            
            echo "&lt;div class=\"alert alert-{$status_class}\"&gt;";
            echo "&lt;strong&gt;{$result['name']}&lt;/strong&gt;: {$status_text} - {$result['message']}";
            echo "&lt;/div&gt;";
        }
        echo "&lt;/div&gt;";
    }
}

// ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
$tester = new IntegrationTester();
?&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;çµ±åˆãƒ†ã‚¹ãƒˆ&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container mt-5"&gt;
        &lt;div class="card"&gt;
            &lt;div class="card-header bg-warning"&gt;
                &lt;h3 class="card-title mb-0"&gt;ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  çµ±åˆãƒ†ã‚¹ãƒˆ&lt;/h3&gt;
            &lt;/div&gt;
            &lt;div class="card-body"&gt;
                &lt;?php $tester->runAllTests(); ?&gt;
                
                &lt;hr&gt;
                &lt;div class="d-flex gap-2"&gt;
                    &lt;a href="users/list.php" class="btn btn-primary"&gt;ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§&lt;/a&gt;
                    &lt;a href="users/create.php" class="btn btn-success"&gt;æ–°è¦ç™»éŒ²&lt;/a&gt;
                    &lt;a href="index.php" class="btn btn-secondary"&gt;ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸&lt;/a&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                        <h6>å®Ÿè¡Œç¢ºèª</h6>
                        <ol>
                            <li><strong>ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜</strong>: test_integration.phpã‚’ä¿å­˜</li>
                            <li><strong>ãƒ–ãƒ©ã‚¦ã‚¶ã‚¢ã‚¯ã‚»ã‚¹</strong>: http://localhost/user-management/test_integration.php</li>
                            <li><strong>ãƒ†ã‚¹ãƒˆçµæœç¢ºèª</strong>: å…¨ã¦ã®æ©Ÿèƒ½ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª</li>
                        </ol>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³6.2 -->
                    <h3 class="section-title" id="section6-2">6.2 ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®åˆ†æã¨æ´»ç”¨</h3>
                    <p>PHPã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®è¨­å®šã¨åˆ†ææ–¹æ³•ã‚’å­¦ç¿’ã—ã€å•é¡Œã®æ—©æœŸç™ºè¦‹ã¨è§£æ±ºã«æ´»ç”¨ã—ã¾ã™ã€‚</p>

                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 6-2: ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰</h5>
                        <p>ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®è¨­å®šã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã€‚</p>
                        
                        <h6>error_monitor.phpä½œæˆ</h6>
                        <pre><code>&lt;?php
/**
 * ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 
 */

class ErrorMonitor {
    private $log_file;
    private $max_lines = 100;
    
    public function __construct() {
        // PHPã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹
        $this->log_file = ini_get('error_log') ?: '/tmp/php_errors.log';
        
        // ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼è¨­å®š
        set_error_handler([$this, 'customErrorHandler']);
        set_exception_handler([$this, 'customExceptionHandler']);
    }
    
    /**
     * ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
     */
    public function customErrorHandler($severity, $message, $file, $line) {
        $error_types = [
            E_ERROR => 'ERROR',
            E_WARNING => 'WARNING',
            E_PARSE => 'PARSE',
            E_NOTICE => 'NOTICE'
        ];
        
        $type = $error_types[$severity] ?? 'UNKNOWN';
        $log_message = "[{$type}] {$message} in {$file} on line {$line}";
        
        error_log($log_message);
        return true;
    }
    
    /**
     * ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
     */
    public function customExceptionHandler($exception) {
        $log_message = "[EXCEPTION] " . $exception->getMessage() . 
                      " in " . $exception->getFile() . 
                      " on line " . $exception->getLine();
        
        error_log($log_message);
    }
    
    /**
     * ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°èª­ã¿å–ã‚Š
     */
    public function getRecentErrors() {
        if (!file_exists($this->log_file)) {
            return ["ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: {$this->log_file}"];
        }
        
        $lines = file($this->log_file, FILE_IGNORE_NEW_LINES);
        if ($lines === false) {
            return ["ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’èª­ã¿å–ã‚Œã¾ã›ã‚“"];
        }
        
        return array_slice($lines, -$this->max_lines);
    }
    
    /**
     * ã‚¨ãƒ©ãƒ¼çµ±è¨ˆå–å¾—
     */
    public function getErrorStats() {
        $errors = $this->getRecentErrors();
        $stats = [
            'total' => count($errors),
            'errors' => 0,
            'warnings' => 0,
            'notices' => 0,
            'exceptions' => 0
        ];
        
        foreach ($errors as $error) {
            if (strpos($error, '[ERROR]') !== false) $stats['errors']++;
            elseif (strpos($error, '[WARNING]') !== false) $stats['warnings']++;
            elseif (strpos($error, '[NOTICE]') !== false) $stats['notices']++;
            elseif (strpos($error, '[EXCEPTION]') !== false) $stats['exceptions']++;
        }
        
        return $stats;
    }
    
    /**
     * ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ
     */
    public function generateTestErrors() {
        // æ„å›³çš„ãªWarning
        $undefined_var = $non_existent_variable;
        
        // æ„å›³çš„ãªNotice  
        echo $undefined_array['key'];
        
        // æ„å›³çš„ãªException
        try {
            throw new Exception("ãƒ†ã‚¹ãƒˆä¾‹å¤–ã§ã™");
        } catch (Exception $e) {
            $this->customExceptionHandler($e);
        }
    }
}

$monitor = new ErrorMonitor();

// ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼ç”Ÿæˆï¼ˆGET ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§åˆ¶å¾¡ï¼‰
if (isset($_GET['generate_errors'])) {
    $monitor->generateTestErrors();
}

$recent_errors = $monitor->getRecentErrors();
$error_stats = $monitor->getErrorStats();
?&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç›£è¦–&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
    &lt;style&gt;
        .error-log {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            max-height: 400px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.9em;
        }
        .error-line {
            padding: 2px 8px;
            border-bottom: 1px solid #eee;
        }
        .error-line.error { background-color: #ffebee; }
        .error-line.warning { background-color: #fff3e0; }
        .error-line.notice { background-color: #e3f2fd; }
        .error-line.exception { background-color: #f3e5f5; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container mt-5"&gt;
        &lt;div class="row"&gt;
            &lt;div class="col-12"&gt;
                &lt;div class="card"&gt;
                    &lt;div class="card-header bg-warning d-flex justify-content-between align-items-center"&gt;
                        &lt;h3 class="card-title mb-0"&gt;ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ &lt;/h3&gt;
                        &lt;div&gt;
                            &lt;a href="?generate_errors=1" class="btn btn-sm btn-danger"&gt;ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼ç”Ÿæˆ&lt;/a&gt;
                            &lt;a href="?" class="btn btn-sm btn-secondary"&gt;æ›´æ–°&lt;/a&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class="card-body"&gt;
                        &lt;!-- ã‚¨ãƒ©ãƒ¼çµ±è¨ˆ --&gt;
                        &lt;div class="row mb-4"&gt;
                            &lt;div class="col-md-3"&gt;
                                &lt;div class="card bg-light"&gt;
                                    &lt;div class="card-body text-center"&gt;
                                        &lt;h5 class="text-info"&gt;&lt;?php echo $error_stats['total']; ?&gt;&lt;/h5&gt;
                                        &lt;small&gt;ç·ãƒ­ã‚°æ•°&lt;/small&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div class="col-md-3"&gt;
                                &lt;div class="card bg-light"&gt;
                                    &lt;div class="card-body text-center"&gt;
                                        &lt;h5 class="text-danger"&gt;&lt;?php echo $error_stats['errors']; ?&gt;&lt;/h5&gt;
                                        &lt;small&gt;ã‚¨ãƒ©ãƒ¼&lt;/small&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div class="col-md-3"&gt;
                                &lt;div class="card bg-light"&gt;
                                    &lt;div class="card-body text-center"&gt;
                                        &lt;h5 class="text-warning"&gt;&lt;?php echo $error_stats['warnings']; ?&gt;&lt;/h5&gt;
                                        &lt;small&gt;è­¦å‘Š&lt;/small&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div class="col-md-3"&gt;
                                &lt;div class="card bg-light"&gt;
                                    &lt;div class="card-body text-center"&gt;
                                        &lt;h5 class="text-primary"&gt;&lt;?php echo $error_stats['notices']; ?&gt;&lt;/h5&gt;
                                        &lt;small&gt;é€šçŸ¥&lt;/small&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                        
                        &lt;!-- ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°è¡¨ç¤º --&gt;
                        &lt;h5&gt;æœ€æ–°ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ï¼ˆæœ€å¤§100ä»¶ï¼‰&lt;/h5&gt;
                        &lt;div class="error-log"&gt;
                            &lt;?php if (empty($recent_errors)): ?&gt;
                                &lt;div class="text-center p-3 text-muted"&gt;ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã¯ã‚ã‚Šã¾ã›ã‚“&lt;/div&gt;
                            &lt;?php else: ?&gt;
                                &lt;?php foreach (array_reverse($recent_errors) as $error): ?&gt;
                                    &lt;?php
                                    $class = '';
                                    if (strpos($error, '[ERROR]') !== false) $class = 'error';
                                    elseif (strpos($error, '[WARNING]') !== false) $class = 'warning';
                                    elseif (strpos($error, '[NOTICE]') !== false) $class = 'notice';
                                    elseif (strpos($error, '[EXCEPTION]') !== false) $class = 'exception';
                                    ?&gt;
                                    &lt;div class="error-line &lt;?php echo $class; ?&gt;"&gt;
                                        &lt;?php echo htmlspecialchars($error); ?&gt;
                                    &lt;/div&gt;
                                &lt;?php endforeach; ?&gt;
                            &lt;?php endif; ?&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                        <div class="info">
                            <h6>ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°è¨­å®šã®ãƒã‚¤ãƒ³ãƒˆ</h6>
                            <ul>
                                <li><strong>php.iniè¨­å®š</strong>: log_errors = On, error_log = ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹</li>
                                <li><strong>ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ³ãƒ‰ãƒ©ãƒ¼</strong>: set_error_handler()ã§ã‚ˆã‚Šè©³ç´°ãªæƒ…å ±åé›†</li>
                                <li><strong>ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒ©ãƒ¼</strong>: set_exception_handler()ã§æœªæ•æ‰ä¾‹å¤–ã‚’ãƒ­ã‚°è¨˜éŒ²</li>
                                <li><strong>ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³</strong>: ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™ã¨å¤ã„ãƒ­ã‚°ã®å‰Šé™¤</li>
                            </ul>
                        </div>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³6.3 -->
                    <h3 class="section-title" id="section6-3">6.3 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šã¨ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°</h3>
                    <p>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œæ™‚é–“ã‚„ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’æ¸¬å®šã—ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã‚’ç‰¹å®šã—ã¾ã™ã€‚</p>

                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 6-3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šãƒ„ãƒ¼ãƒ«ã®ä½œæˆ</h5>
                        <p>å®Ÿè¡Œæ™‚é–“ã€ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªå®Ÿè¡Œæ™‚é–“ã‚’æ¸¬å®šã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè£…ã—ã¾ã™ã€‚</p>
                        
                        <h6>performance_monitor.phpä½œæˆ</h6>
                        <pre><code>&lt;?php
/**
 * ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šãƒ„ãƒ¼ãƒ«
 */
require_once 'config/database.php';

class PerformanceMonitor {
    private $start_time;
    private $start_memory;
    private $benchmarks = [];
    
    public function __construct() {
        $this->start_time = microtime(true);
        $this->start_memory = memory_get_usage(true);
    }
    
    /**
     * ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯é–‹å§‹
     */
    public function startBenchmark($name) {
        $this->benchmarks[$name] = [
            'start_time' => microtime(true),
            'start_memory' => memory_get_usage(true)
        ];
    }
    
    /**
     * ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯çµ‚äº†
     */
    public function endBenchmark($name) {
        if (!isset($this->benchmarks[$name])) {
            return null;
        }
        
        $end_time = microtime(true);
        $end_memory = memory_get_usage(true);
        
        $this->benchmarks[$name]['end_time'] = $end_time;
        $this->benchmarks[$name]['end_memory'] = $end_memory;
        $this->benchmarks[$name]['execution_time'] = $end_time - $this->benchmarks[$name]['start_time'];
        $this->benchmarks[$name]['memory_used'] = $end_memory - $this->benchmarks[$name]['start_memory'];
        
        return $this->benchmarks[$name];
    }
    
    /**
     * ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªæ€§èƒ½ãƒ†ã‚¹ãƒˆ
     */
    public function testDatabasePerformance() {
        $pdo = getDatabase();
        $results = [];
        
        // 1. å…¨ä»¶å–å¾—ãƒ†ã‚¹ãƒˆ
        $this->startBenchmark('select_all');
        $stmt = $pdo->query("SELECT * FROM users");
        $all_users = $stmt->fetchAll();
        $this->endBenchmark('select_all');
        $results['select_all'] = $this->benchmarks['select_all'];
        $results['select_all']['count'] = count($all_users);
        
        // 2. COUNT ã‚¯ã‚¨ãƒªãƒ†ã‚¹ãƒˆ
        $this->startBenchmark('count_query');
        $stmt = $pdo->query("SELECT COUNT(*) as count FROM users");
        $count_result = $stmt->fetch();
        $this->endBenchmark('count_query');
        $results['count_query'] = $this->benchmarks['count_query'];
        $results['count_query']['result'] = $count_result['count'];
        
        // 3. æ¤œç´¢ã‚¯ã‚¨ãƒªãƒ†ã‚¹ãƒˆ
        $this->startBenchmark('search_query');
        $stmt = $pdo->prepare("SELECT * FROM users WHERE full_name LIKE ? OR email LIKE ?");
        $stmt->execute(['%ãƒ†ã‚¹ãƒˆ%', '%test%']);
        $search_results = $stmt->fetchAll();
        $this->endBenchmark('search_query');
        $results['search_query'] = $this->benchmarks['search_query'];
        $results['search_query']['count'] = count($search_results);
        
        // 4. è¤‡é›‘ãªæ¤œç´¢ãƒ†ã‚¹ãƒˆ
        $this->startBenchmark('complex_query');
        $stmt = $pdo->prepare("
            SELECT *, 
                   EXTRACT(YEAR FROM AGE(birth_date)) as age,
                   EXTRACT(DAY FROM (CURRENT_TIMESTAMP - created_at)) as days_since_registration
            FROM users 
            WHERE birth_date IS NOT NULL 
            ORDER BY created_at DESC 
            LIMIT 10
        ");
        $stmt->execute();
        $complex_results = $stmt->fetchAll();
        $this->endBenchmark('complex_query');
        $results['complex_query'] = $this->benchmarks['complex_query'];
        $results['complex_query']['count'] = count($complex_results);
        
        return $results;
    }
    
    /**
     * å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ†ã‚¹ãƒˆ
     */
    public function testLargeDataProcessing() {
        $this->startBenchmark('large_data_processing');
        
        // å¤§é‡ã®é…åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆãƒ»å‡¦ç†
        $large_array = range(1, 10000);
        $processed_array = array_map(function($n) {
            return $n * $n + sqrt($n);
        }, $large_array);
        
        // æ–‡å­—åˆ—å‡¦ç†
        $large_string = str_repeat("ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿", 1000);
        $processed_string = mb_strtoupper($large_string);
        
        $this->endBenchmark('large_data_processing');
        
        return [
            'array_size' => count($processed_array),
            'string_length' => mb_strlen($processed_string),
            'benchmark' => $this->benchmarks['large_data_processing']
        ];
    }
    
    /**
     * ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±å–å¾—
     */
    public function getSystemInfo() {
        return [
            'php_version' => phpversion(),
            'memory_limit' => ini_get('memory_limit'),
            'max_execution_time' => ini_get('max_execution_time'),
            'current_memory_usage' => $this->formatBytes(memory_get_usage(true)),
            'peak_memory_usage' => $this->formatBytes(memory_get_peak_usage(true)),
            'total_execution_time' => number_format((microtime(true) - $this->start_time) * 1000, 2) . 'ms'
        ];
    }
    
    /**
     * ãƒã‚¤ãƒˆæ•°ã‚’èª­ã¿ã‚„ã™ã„å½¢å¼ã«å¤‰æ›
     */
    private function formatBytes($bytes) {
        $units = ['B', 'KB', 'MB', 'GB'];
        for ($i = 0; $bytes > 1024 && $i < count($units) - 1; $i++) {
            $bytes /= 1024;
        }
        return round($bytes, 2) . ' ' . $units[$i];
    }
    
    /**
     * å®Ÿè¡Œæ™‚é–“ã‚’èª­ã¿ã‚„ã™ã„å½¢å¼ã«å¤‰æ›
     */
    private function formatTime($seconds) {
        if ($seconds < 0.001) {
            return number_format($seconds * 1000000, 2) . 'Î¼s';
        } elseif ($seconds < 1) {
            return number_format($seconds * 1000, 2) . 'ms';
        } else {
            return number_format($seconds, 3) . 's';
        }
    }
}

$monitor = new PerformanceMonitor();

// ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
$db_performance = $monitor->testDatabasePerformance();
$data_processing = $monitor->testLargeDataProcessing();
$system_info = $monitor->getSystemInfo();
?&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container mt-5"&gt;
        &lt;div class="row"&gt;
            &lt;div class="col-12"&gt;
                &lt;div class="card"&gt;
                    &lt;div class="card-header bg-warning"&gt;
                        &lt;h3 class="card-title mb-0"&gt;ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šçµæœ&lt;/h3&gt;
                    &lt;/div&gt;
                    &lt;div class="card-body"&gt;
                        &lt;!-- ã‚·ã‚¹ãƒ†ãƒ æƒ…å ± --&gt;
                        &lt;h5&gt;ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±&lt;/h5&gt;
                        &lt;div class="row mb-4"&gt;
                            &lt;?php foreach ($system_info as $key =&gt; $value): ?&gt;
                                &lt;div class="col-md-4 mb-2"&gt;
                                    &lt;div class="card bg-light"&gt;
                                        &lt;div class="card-body text-center"&gt;
                                            &lt;h6&gt;&lt;?php echo $value; ?&gt;&lt;/h6&gt;
                                            &lt;small&gt;&lt;?php echo str_replace('_', ' ', ucfirst($key)); ?&gt;&lt;/small&gt;
                                        &lt;/div&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;?php endforeach; ?&gt;
                        &lt;/div&gt;
                        
                        &lt;!-- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ€§èƒ½ --&gt;
                        &lt;h5&gt;ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªæ€§èƒ½&lt;/h5&gt;
                        &lt;div class="table-responsive mb-4"&gt;
                            &lt;table class="table table-striped"&gt;
                                &lt;thead&gt;
                                    &lt;tr&gt;
                                        &lt;th&gt;ãƒ†ã‚¹ãƒˆå&lt;/th&gt;
                                        &lt;th&gt;å®Ÿè¡Œæ™‚é–“&lt;/th&gt;
                                        &lt;th&gt;ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡&lt;/th&gt;
                                        &lt;th&gt;çµæœä»¶æ•°&lt;/th&gt;
                                    &lt;/tr&gt;
                                &lt;/thead&gt;
                                &lt;tbody&gt;
                                    &lt;?php foreach ($db_performance as $test_name =&gt; $result): ?&gt;
                                        &lt;tr&gt;
                                            &lt;td&gt;&lt;strong&gt;&lt;?php echo str_replace('_', ' ', ucfirst($test_name)); ?&gt;&lt;/strong&gt;&lt;/td&gt;
                                            &lt;td&gt;&lt;?php echo $monitor-&gt;formatTime($result['execution_time']); ?&gt;&lt;/td&gt;
                                            &lt;td&gt;&lt;?php echo $monitor-&gt;formatBytes($result['memory_used']); ?&gt;&lt;/td&gt;
                                            &lt;td&gt;&lt;?php echo $result['count'] ?? $result['result'] ?? '-'; ?&gt;&lt;/td&gt;
                                        &lt;/tr&gt;
                                    &lt;?php endforeach; ?&gt;
                                &lt;/tbody&gt;
                            &lt;/table&gt;
                        &lt;/div&gt;
                        
                        &lt;!-- ãƒ‡ãƒ¼ã‚¿å‡¦ç†æ€§èƒ½ --&gt;
                        &lt;h5&gt;å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç†æ€§èƒ½&lt;/h5&gt;
                        &lt;div class="row"&gt;
                            &lt;div class="col-md-4"&gt;
                                &lt;div class="card bg-light"&gt;
                                    &lt;div class="card-body text-center"&gt;
                                        &lt;h6&gt;&lt;?php echo $monitor-&gt;formatTime($data_processing['benchmark']['execution_time']); ?&gt;&lt;/h6&gt;
                                        &lt;small&gt;å®Ÿè¡Œæ™‚é–“&lt;/small&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div class="col-md-4"&gt;
                                &lt;div class="card bg-light"&gt;
                                    &lt;div class="card-body text-center"&gt;
                                        &lt;h6&gt;&lt;?php echo $monitor-&gt;formatBytes($data_processing['benchmark']['memory_used']); ?&gt;&lt;/h6&gt;
                                        &lt;small&gt;ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡&lt;/small&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                            &lt;div class="col-md-4"&gt;
                                &lt;div class="card bg-light"&gt;
                                    &lt;div class="card-body text-center"&gt;
                                        &lt;h6&gt;&lt;?php echo number_format($data_processing['array_size']); ?&gt;&lt;/h6&gt;
                                        &lt;small&gt;å‡¦ç†ãƒ‡ãƒ¼ã‚¿æ•°&lt;/small&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                        
                        &lt;hr&gt;
                        &lt;div class="d-flex gap-2"&gt;
                            &lt;a href="?" class="btn btn-warning"&gt;å†æ¸¬å®š&lt;/a&gt;
                            &lt;a href="error_monitor.php" class="btn btn-info"&gt;ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç›£è¦–&lt;/a&gt;
                            &lt;a href="test_integration.php" class="btn btn-success"&gt;çµ±åˆãƒ†ã‚¹ãƒˆ&lt;/a&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³6.4 -->
                    <h3 class="section-title" id="section6-4">6.4 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºèªã¨ã‚³ãƒ¼ãƒ‰è¨ºæ–­</h3>
                    <p>é–‹ç™ºã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ›ãƒ¼ãƒ«ã‚„è„†å¼±æ€§ã‚’æ¤œå‡ºã—ã€å¯¾ç­–ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>

                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 6-4: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒ„ãƒ¼ãƒ«ã®å®Ÿè£…</h5>
                        <p>SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã€XSSã€CSRFç­‰ã®è„†å¼±æ€§ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
                        
                        <div class="warning">
                            <h6>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯é …ç›®</h6>
                            <ul>
                                <li><strong>SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–</strong>: ãƒ—ãƒªãƒšã‚¢ãƒ‰ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã®ä½¿ç”¨ç¢ºèª</li>
                                <li><strong>XSSå¯¾ç­–</strong>: htmlspecialchars()ã«ã‚ˆã‚‹å‡ºåŠ›ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ç¢ºèª</li>
                                <li><strong>CSRFå¯¾ç­–</strong>: ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼æ©Ÿèƒ½ã®å®Ÿè£…ç¢ºèª</li>
                                <li><strong>å…¥åŠ›å€¤æ¤œè¨¼</strong>: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†ã®ç¢ºèª</li>
                                <li><strong>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</strong>: ãƒãƒƒã‚·ãƒ¥åŒ–ã®å®Ÿè£…ç¢ºèª</li>
                            </ul>
                        </div>

                        <div class="success">
                            <h6>ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§å®Ÿè£…æ¸ˆã¿ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–</h6>
                            <ul>
                                <li>âœ“ <strong>PDOãƒ—ãƒªãƒšã‚¢ãƒ‰ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ</strong>ã§SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–</li>
                                <li>âœ“ <strong>htmlspecialchars()</strong>ã§XSSå¯¾ç­–</li>
                                <li>âœ“ <strong>å…¥åŠ›å€¤ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</strong>ã§ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ç¢ºä¿</li>
                                <li>âœ“ <strong>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</strong>ã§æƒ…å ±æ¼æ´©é˜²æ­¢</li>
                            </ul>
                        </div>
                    </div>

                    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³6.5 -->
                    <h3 class="section-title" id="section6-5">6.5 Eclipse IDEã‚’æ´»ç”¨ã—ãŸãƒ‡ãƒãƒƒã‚°æŠ€æ³•</h3>
                    <p>Eclipse IDEã®å¼·åŠ›ãªãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ã‚’æ´»ç”¨ã—ã¦ã€åŠ¹ç‡çš„ãªå•é¡Œè§£æ±ºã‚’è¡Œã„ã¾ã™ã€‚</p>

                    <div class="exercise-container">
                        <h5>å®Ÿç¿’ 6-5: Eclipse PHPãƒ‡ãƒãƒƒã‚¬ãƒ¼ã®æ´»ç”¨</h5>
                        <p>Eclipse IDEã®ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã€ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œã€å¤‰æ•°ç›£è¦–æ©Ÿèƒ½ã‚’æ´»ç”¨ã—ãŸãƒ‡ãƒãƒƒã‚°æ‰‹æ³•ã‚’ç¿’å¾—ã—ã¾ã™ã€‚</p>
                        
                        <h6>ãƒ‡ãƒãƒƒã‚°è¨­å®šæ‰‹é †</h6>
                        <ol>
                            <li><strong>Xdebugã®æœ‰åŠ¹åŒ–</strong>: php.iniã§Xdebugæ‹¡å¼µã‚’æœ‰åŠ¹ã«ã™ã‚‹</li>
                            <li><strong>ãƒ‡ãƒãƒƒã‚°è¨­å®š</strong>: Eclipse ã®PHP Debugè¨­å®šã‚’ç¢ºèª</li>
                            <li><strong>ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆè¨­å®š</strong>: ãƒ‡ãƒãƒƒã‚°ã—ãŸã„è¡Œã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯</li>
                            <li><strong>ãƒ‡ãƒãƒƒã‚°å®Ÿè¡Œ</strong>: Run â†’ Debug As â†’ PHP Web Page</li>
                        </ol>

                        <div class="info">
                            <h6>åŠ¹æœçš„ãªãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯</h6>
                            <ul>
                                <li><strong>æ¡ä»¶ä»˜ããƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆ</strong>: ç‰¹å®šã®æ¡ä»¶ã§ã®ã¿åœæ­¢</li>
                                <li><strong>å¤‰æ•°ã‚¦ã‚©ãƒƒãƒ</strong>: å¤‰æ•°ã®å€¤ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–</li>
                                <li><strong>ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³/ã‚¢ã‚¦ãƒˆ</strong>: é–¢æ•°å‘¼ã³å‡ºã—ã‚’è©³ç´°ã«è¿½è·¡</li>
                                <li><strong>ã‚³ãƒ¼ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ç¢ºèª</strong>: å®Ÿè¡ŒçµŒè·¯ã®å±¥æ­´ã‚’ç¢ºèª</li>
                            </ul>
                        </div>

                        <h6>ä»£æ›¿ãƒ‡ãƒãƒƒã‚°æ–¹æ³•</h6>
                        <p>XdebugãŒåˆ©ç”¨ã§ããªã„å ´åˆã®æ‰‹å‹•ãƒ‡ãƒãƒƒã‚°æ‰‹æ³•ï¼š</p>
                        <pre><code>&lt;?php
// 1. var_dump()ã«ã‚ˆã‚‹å¤‰æ•°å†…å®¹ç¢ºèª
var_dump($variable);

// 2. print_r()ã«ã‚ˆã‚‹é…åˆ—ãƒ»ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¡¨ç¤º
print_r($array);

// 3. error_log()ã«ã‚ˆã‚‹ãƒ­ã‚°å‡ºåŠ›
error_log("Debug: " . print_r($data, true));

// 4. å®Ÿè¡Œæ™‚é–“è¨ˆæ¸¬
$start = microtime(true);
// å‡¦ç†
$end = microtime(true);
echo "å®Ÿè¡Œæ™‚é–“: " . ($end - $start) . "ç§’";

// 5. ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ç¢ºèª
echo "ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: " . memory_get_usage(true) . " bytes";
?&gt;</code></pre>
                    </div>

                    <!-- ç†è§£åº¦ç¢ºèªï¼ˆå¿…é ˆï¼‰ -->
                    <div class="quiz-container" id="quiz">
                        <h5>ç†è§£åº¦ç¢ºèªã‚¯ã‚¤ã‚º</h5>
                        <ol>
                            <li>çµ±åˆãƒ†ã‚¹ãƒˆã§ç¢ºèªã™ã¹ãä¸»è¦ãªé …ç›®ã‚’3ã¤æŒ™ã’ã¦ãã ã•ã„ã€‚</li>
                            <li>PHPã§ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã™ã‚‹é–¢æ•°ã¯ï¼Ÿ</li>
                            <li>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šã§é‡è¦ãª2ã¤ã®æŒ‡æ¨™ã¯ï¼Ÿ</li>
                            <li>SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ã¨ã—ã¦æœ€ã‚‚åŠ¹æœçš„ãªæ–¹æ³•ã¯ï¼Ÿ</li>
                            <li>XSSå¯¾ç­–ã§å‡ºåŠ›æ™‚ã«ä½¿ç”¨ã™ã‚‹PHPé–¢æ•°ã¯ï¼Ÿ</li>
                            <li>Eclipse IDEã§ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®šã™ã‚‹æ–¹æ³•ã¯ï¼Ÿ</li>
                        </ol>
                        
                        <details class="mt-3">
                            <summary>è§£ç­”ã‚’ç¢ºèª</summary>
                            <ol>
                                <li>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã€CRUDæ“ä½œã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</li>
                                <li>set_error_handler()</li>
                                <li>å®Ÿè¡Œæ™‚é–“ã€ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡</li>
                                <li>ãƒ—ãƒªãƒšã‚¢ãƒ‰ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã®ä½¿ç”¨</li>
                                <li>htmlspecialchars()</li>
                                <li>å¯¾è±¡è¡Œã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯</li>
                            </ol>
                        </details>
                    </div>

                    <div class="success">
                        <h5>ğŸ‰ PHPå®Ÿè·µãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«å®Œäº†ï¼</h5>
                        <p>ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’é€šã˜ã¦ã€ä»¥ä¸‹ã®ã‚¹ã‚­ãƒ«ã‚’ç¿’å¾—ã—ã¾ã—ãŸï¼š</p>
                        <ul>
                            <li>Eclipse IDE for PHP Developersã«ã‚ˆã‚‹é–‹ç™ºç’°å¢ƒæ§‹ç¯‰</li>
                            <li>PostgreSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨PDOã«ã‚ˆã‚‹å®‰å…¨ãªæ¥ç¶š</li>
                            <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…ï¼ˆCRUDæ“ä½œï¼‰</li>
                            <li>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ï¼ˆSQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã€XSSé˜²æ­¢ï¼‰</li>
                            <li>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒ‡ãƒãƒƒã‚°æŠ€æ³•</li>
                            <li>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šã¨æœ€é©åŒ–</li>
                        </ul>
                        <p>ã“ã‚Œã‚‰ã®åŸºç¤çŸ¥è­˜ã‚’æ´»ç”¨ã—ã¦ã€ã•ã‚‰ã«é«˜åº¦ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã«æŒ‘æˆ¦ã—ã¦ãã ã•ã„ï¼</p>
                    </div>

                    <!-- ç« é–“ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå¿…é ˆï¼‰ -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="step5-user-update-delete.html" class="btn btn-secondary">â† å‰ã®ç« : ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°ãƒ»å‰Šé™¤æ©Ÿèƒ½</a>
                        <a href="index.html" class="btn btn-warning">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«æ¦‚è¦ã«æˆ»ã‚‹</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // ã‚¹ãƒ ãƒ¼ã‚¹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒªãƒ³ã‚¯æ›´æ–°
        window.addEventListener('scroll', function() {
            let current = '';
            const sections = document.querySelectorAll('h3[id], div[id]');
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (pageYOffset >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }
            });

            document.querySelectorAll('.sidebar .nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>