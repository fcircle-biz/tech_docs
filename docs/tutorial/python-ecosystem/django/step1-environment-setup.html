<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Django + PostgreSQL チュートリアル Step 1 - Windows環境での開発環境構築</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        
        .navbar {
            background-color: #2e7d33;
        }
        
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        
        .chapter-title {
            color: #2e7d33;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #2e7d33;
            padding-bottom: 0.5rem;
        }
        
        .section-title {
            color: #4caf50;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        
        .quiz-container {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #2e7d33;
        }
        
        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }
        
        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }
        
        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }
        
        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .nav-link.active {
            background-color: #2e7d33 !important;
            color: white !important;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Django + PostgreSQL チュートリアル</a>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="step1-environment-setup.html">
                                Step 1: 環境構築
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step2-docker-postgresql.html">
                                Step 2: PostgreSQL環境
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step3-django-project-init.html">
                                Step 3: プロジェクト初期化
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step4-models-migration.html">
                                Step 4: モデル設計
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step5-views-templates-urls.html">
                                Step 5: ビュー・テンプレート
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step6-admin-interface.html">
                                Step 6: 管理サイト
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step7-crud-operations.html">
                                Step 7: CRUD操作
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step8-validation-security.html">
                                Step 8: バリデーション・セキュリティ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step9-testing-debugging.html">
                                Step 9: テスト・デバッグ
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">Step 1: Windows環境での開発環境構築</h1>
                </div>

                <div id="step1">
                    <h2 class="chapter-title">Python開発環境とDjango基本セットアップ</h2>
                    
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>Windows環境でのPython 3.12のインストールと環境設定</li>
                            <li>Visual Studio Codeのセットアップと必要な拡張機能の導入</li>
                            <li>仮想環境（venv）の作成と管理方法</li>
                            <li>Djangoのインストールと初期プロジェクト作成</li>
                            <li>Hello Worldアプリケーションの実装</li>
                        </ul>
                    </div>

                    <h3 class="section-title">1.1 Python 3.12のインストール</h3>
                    <p>Django開発を始める前に、まずPython環境を整備します。Windows環境に特化した詳細な手順を説明します。</p>

                    <div class="exercise-container">
                        <h5>実習 1-1: Python 3.12のインストール</h5>
                        <p>Python公式サイトからPython 3.12をダウンロードしてインストールします。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>Python公式サイト（https://www.python.org/downloads/）にアクセス</li>
                            <li>「Download Python 3.12.x」ボタンをクリック</li>
                            <li>ダウンロードしたインストーラーを管理者権限で実行</li>
                            <li>インストール時に以下のオプションを必ず選択：
                                <ul>
                                    <li><strong>「Add Python to PATH」にチェック</strong></li>
                                    <li>「Install for all users」にチェック（推奨）</li>
                                </ul>
                            </li>
                            <li>「Install Now」をクリックしてインストール実行</li>
                            <li>インストール完了後、コマンドプロンプトを開いて確認</li>
                        </ol>
                        <h6>インストール確認</h6>
                        <pre class="code-block"><code class="language-bash"># Pythonバージョン確認
python --version

# pipバージョン確認
pip --version</code></pre>
                        <h6>期待される結果</h6>
                        <pre class="code-block"><code class="language-bash">Python 3.12.x
pip 23.x.x from C:\Users\[ユーザー名]\AppData\Local\Programs\Python\Python312\Lib\site-packages\pip (python 3.12)</code></pre>
                    </div>

                    <div class="warning">
                        <h5>Windows環境での注意点</h5>
                        <ul>
                            <li><strong>文字コード</strong>: Windows標準の文字コードがCP932のため、UTF-8を明示的に指定</li>
                            <li><strong>パス区切り</strong>: Windowsではバックスラッシュ（\）を使用するが、Pythonではスラッシュ（/）も利用可能</li>
                            <li><strong>実行ポリシー</strong>: PowerShellの実行ポリシーでスクリプト実行が制限される場合あり</li>
                        </ul>
                    </div>

                    <h3 class="section-title">1.2 Visual Studio Codeの環境構築</h3>
                    <p>Python開発に最適化されたエディターとしてVS Codeをセットアップし、必要な拡張機能をインストールします。</p>

                    <div class="exercise-container">
                        <h5>実習 1-2: VS Codeとpython拡張機能のセットアップ</h5>
                        <p>効率的なPython開発のためのVS Code環境を構築します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>VS Code公式サイトからダウンロードしてインストール</li>
                            <li>VS Codeを起動し、拡張機能タブ（Ctrl+Shift+X）を開く</li>
                            <li>以下の拡張機能を順番にインストール：
                                <ul>
                                    <li><strong>Python</strong> (Microsoft) - Python開発の基本機能</li>
                                    <li><strong>Django</strong> (Baptiste Darthenay) - Djangoテンプレートのシンタックスハイライト</li>
                                    <li><strong>Django Template</strong> (bibhasdn) - Djangoテンプレートの補完</li>
                                    <li><strong>Japanese Language Pack</strong> (Microsoft) - 日本語化（オプション）</li>
                                </ul>
                            </li>
                            <li>VS Codeを再起動して設定を適用</li>
                        </ol>
                        <h6>Python拡張機能の設定確認</h6>
                        <pre class="code-block"><code class="language-json"># .vscode/settings.json に追加推奨設定
{
    "python.defaultInterpreterPath": "python",
    "python.linting.enabled": true,
    "python.linting.pylintEnabled": true,
    "python.formatting.provider": "autopep8",
    "editor.tabSize": 4,
    "files.encoding": "utf8"
}</code></pre>
                    </div>

                    <h3 class="section-title">1.3 プロジェクト用仮想環境の作成</h3>
                    <p>プロジェクトごとに独立したPython環境を作成し、パッケージの競合を避けます。</p>

                    <div class="exercise-container">
                        <h5>実習 1-3: 仮想環境（venv）の作成と管理</h5>
                        <p>Django開発用の仮想環境を作成し、適切に管理する方法を学びます。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>プロジェクト用のディレクトリを作成</li>
                            <li>コマンドプロンプトでそのディレクトリに移動</li>
                            <li>仮想環境を作成</li>
                            <li>仮想環境を有効化</li>
                            <li>仮想環境内でのパッケージ管理を確認</li>
                        </ol>
                        <h6>実行例</h6>
                        <pre class="code-block"><code class="language-bash"># プロジェクトディレクトリの作成と移動
mkdir C:\projects\django-tutorial
cd C:\projects\django-tutorial

# 仮想環境の作成
python -m venv venv

# 仮想環境の有効化（Windows）
venv\Scripts\activate

# 仮想環境の有効化確認（プロンプトに(venv)が表示される）
(venv) C:\projects\django-tutorial>

# pipのアップグレード
python -m pip install --upgrade pip

# インストール済みパッケージの確認
pip list</code></pre>
                        <h6>期待される結果</h6>
                        <pre class="code-block"><code class="language-bash"># 基本パッケージのみインストールされた状態
Package    Version
---------- -------
pip        23.x.x
setuptools 68.x.x</code></pre>
                    </div>

                    <h3 class="section-title">1.4 Djangoのインストールと初期設定</h3>
                    <p>仮想環境内にDjangoフレームワークをインストールし、最初のプロジェクトを作成します。</p>

                    <div class="exercise-container">
                        <h5>実習 1-4: Django 5.0のインストールとプロジェクト作成</h5>
                        <p>Django最新バージョンをインストールし、基本的なプロジェクト構造を理解します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>仮想環境が有効化されていることを確認</li>
                            <li>DjangoとPostgreSQL関連パッケージをインストール</li>
                            <li>Djangoプロジェクトを作成</li>
                            <li>プロジェクト構造を確認</li>
                            <li>開発サーバーを起動してアクセス確認</li>
                        </ol>
                        <h6>実行例</h6>
                        <pre class="code-block"><code class="language-bash"># 必要なパッケージのインストール
pip install django==5.0
pip install psycopg2-binary  # PostgreSQL接続用
pip install python-decouple  # 環境変数管理用

# インストール確認
django-admin --version

# Djangoプロジェクトの作成
django-admin startproject myproject .

# プロジェクト構造の確認
tree /F
</code></pre>
                        <h6>期待されるディレクトリ構造</h6>
                        <pre class="code-block"><code class="language-bash">C:\PROJECTS\DJANGO-TUTORIAL
│   manage.py
└───myproject
    │   asgi.py
    │   settings.py
    │   urls.py
    │   wsgi.py
    └───__init__.py</code></pre>
                    </div>

                    <h3 class="section-title">1.5 Hello Worldアプリケーションの作成</h3>
                    <p>Djangoアプリケーションの基本構造を理解するため、シンプルなHello Worldアプリを作成します。</p>

                    <div class="exercise-container">
                        <h5>実習 1-5: Hello Worldアプリケーションの実装</h5>
                        <p>Djangoアプリケーションの基本的な流れ（URL → View → Response）を実践します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>新しいDjangoアプリケーションを作成</li>
                            <li>ビュー関数を実装</li>
                            <li>URLルーティングを設定</li>
                            <li>開発サーバーを起動して動作確認</li>
                        </ol>
                        <h6>実行例</h6>
                        <pre class="code-block"><code class="language-bash"># Djangoアプリケーションの作成
python manage.py startapp hello

# アプリケーション構造の確認
tree hello /F</code></pre>
                        
                        <h6>ビュー関数の実装（hello/views.py）</h6>
                        <pre class="code-block"><code class="language-python">from django.http import HttpResponse
from django.shortcuts import render

def hello_world(request):
    """Hello World表示のビュー関数"""
    return HttpResponse("&lt;h1&gt;Hello, Django World!&lt;/h1&gt;&lt;p&gt;Djangoチュートリアルへようこそ！&lt;/p&gt;")

def hello_template(request):
    """テンプレートを使用したビュー関数"""
    context = {
        'title': 'Django Tutorial',
        'message': 'Python Webアプリケーション開発を始めましょう！'
    }
    return render(request, 'hello/index.html', context)</code></pre>

                        <h6>URL設定（myproject/urls.py）</h6>
                        <pre class="code-block"><code class="language-python">from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('hello/', include('hello.urls')),  # helloアプリのURL設定を追加
]</code></pre>

                        <h6>アプリケーションURL設定（hello/urls.py）</h6>
                        <pre class="code-block"><code class="language-python">from django.urls import path
from . import views

app_name = 'hello'

urlpatterns = [
    path('', views.hello_world, name='hello_world'),
    path('template/', views.hello_template, name='hello_template'),
]</code></pre>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 1-6: 開発サーバーの起動と動作確認</h5>
                        <p>Django開発サーバーを起動し、作成したアプリケーションの動作を確認します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>開発サーバーを起動</li>
                            <li>ブラウザでアクセス確認</li>
                            <li>ログ出力を確認</li>
                        </ol>
                        <h6>実行例</h6>
                        <pre class="code-block"><code class="language-bash"># 開発サーバーの起動
python manage.py runserver

# 以下のような出力が表示されます
Watching for file changes with StatReloader
Performing system checks...

System check identified no issues (0 silenced).

You have 18 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, auth, contenttypes, sessions.
Run 'python manage.py migrate' to apply them.

January 06, 2025 - 10:00:00
Django version 5.0.0, using settings 'myproject.settings'
Starting development server at http://127.0.0.1:8000/
Quit the server with CTRL-BREAK.</code></pre>
                        <h6>アクセス確認URL</h6>
                        <ul>
                            <li><strong>Django管理画面</strong>: http://127.0.0.1:8000/admin/</li>
                            <li><strong>Hello World</strong>: http://127.0.0.1:8000/hello/</li>
                            <li><strong>テンプレート版</strong>: http://127.0.0.1:8000/hello/template/</li>
                        </ul>
                    </div>

                    <h3 class="section-title">1.6 VS Code プロジェクト設定の最適化</h3>
                    <p>Django開発を効率化するためのVS Code設定を行います。</p>

                    <div class="exercise-container">
                        <h5>実習 1-7: VS Code Django開発設定</h5>
                        <p>Django開発に特化したVS Code設定ファイルを作成し、開発効率を向上させます。</p>
                        <h6>VS Code設定ファイル（.vscode/settings.json）</h6>
                        <pre class="code-block"><code class="language-json">{
    "python.defaultInterpreterPath": "./venv/Scripts/python.exe",
    "python.linting.enabled": true,
    "python.linting.pylintEnabled": true,
    "python.formatting.provider": "autopep8",
    "python.terminal.activateEnvironment": true,
    "files.associations": {
        "*.html": "django-html"
    },
    "emmet.includeLanguages": {
        "django-html": "html"
    },
    "editor.tabSize": 4,
    "files.encoding": "utf8",
    "files.eol": "\n"
}</code></pre>
                        
                        <h6>デバッグ設定（.vscode/launch.json）</h6>
                        <pre class="code-block"><code class="language-json">{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Django",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/manage.py",
            "args": [
                "runserver"
            ],
            "django": true,
            "justMyCode": true
        }
    ]
}</code></pre>
                    </div>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li><strong>仮想環境について</strong>: 
                                <p>Q. Python仮想環境を使用する主な理由は何ですか？</p>
                                <p>A. プロジェクトごとに独立したパッケージ環境を作成し、パッケージのバージョン競合を避けるため</p>
                            </li>
                            <li><strong>Djangoプロジェクト構造</strong>:
                                <p>Q. 'manage.py'ファイルの役割は何ですか？</p>
                                <p>A. Djangoプロジェクトの管理コマンド（サーバー起動、マイグレーション実行など）を提供するスクリプト</p>
                            </li>
                            <li><strong>MVTパターン</strong>:
                                <p>Q. DjangoのMVTパターンで、URL → View → Responseの流れを説明してください。</p>
                                <p>A. URL設定でリクエストURLをView関数にルーティング → View関数がビジネスロジックを処理 → HttpResponseまたはテンプレートレンダリング結果を返却</p>
                            </li>
                        </ol>
                    </div>

                    <div class="highlight">
                        <h5>次のステップの準備</h5>
                        <p>Step 1が完了しました！次のStep 2では、Docker DesktopとPostgreSQLコンテナ環境を構築します。以下を確認してから進んでください：</p>
                        <ul>
                            <li>Python 3.12が正常にインストールされている</li>
                            <li>仮想環境が作成され、Django 5.0がインストール済み</li>
                            <li>Hello Worldアプリケーションがローカルサーバーで動作している</li>
                            <li>VS Codeの拡張機能とプロジェクト設定が完了している</li>
                        </ul>
                    </div>

                    <!-- Navigation -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="../README.html" class="btn btn-secondary">← チュートリアル概要</a>
                        <a href="step2-docker-postgresql.html" class="btn btn-primary">次の章: PostgreSQL環境構築 →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
</body>
</html>