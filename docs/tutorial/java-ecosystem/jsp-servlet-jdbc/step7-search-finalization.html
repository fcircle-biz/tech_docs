<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSP/Servlet/JDBC 実践チュートリアル Step 7 - 検索機能とアプリケーション仕上げ</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        
        .navbar {
            background-color: #f57c00;
        }
        
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        
        .chapter-title {
            color: #f57c00;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #f57c00;
            padding-bottom: 0.5rem;
        }
        
        .section-title {
            color: #ff9800;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        
        .quiz-container {
            background-color: #fff3e0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #f57c00;
        }
        
        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }
        
        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }
        
        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }
        
        .code-block {
            background-color: #1e1e1e !important;
            color: #ffffff;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .nav-link.active {
            background-color: #f57c00 !important;
            color: white !important;
        }

        .search-flow {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 2rem;
            margin: 1.5rem 0;
            text-align: center;
        }

        .search-step {
            border: 2px solid #4caf50;
            border-radius: 10px;
            padding: 15px;
            margin: 10px;
            background-color: #e8f5e8;
            display: inline-block;
            min-width: 120px;
        }

        .flow-arrow {
            font-size: 1.5em;
            color: #666;
            margin: 0 10px;
        }

        .completion-summary {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 2rem;
            margin: 1.5rem 0;
            border-left: 4px solid #4caf50;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-card {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }

        .feature-card h6 {
            color: #f57c00;
            margin-bottom: 10px;
        }

        .next-steps {
            background-color: #d1ecf1;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #17a2b8;
        }

        .search-example {
            background-color: #f0f8ff;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #2196f3;
        }

        .final-project {
            background-color: #fff3e0;
            border: 2px solid #ff9800;
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="../../../index.html">JSP/Servlet/JDBC 実践チュートリアル</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-nav-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="../../../index.html">ホーム</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="README.html">JSP/Servlet/JDBC</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>チュートリアル目次</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="step1-environment-setup.html">Step 1: 開発環境構築</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step2-mvc-architecture.html">Step 2: MVC概要</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step3-database-jdbc.html">Step 3: DB・JDBC</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step4-user-registration.html">Step 4: ユーザー登録</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step5-user-list-detail.html">Step 5: 一覧・詳細</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step6-user-update-delete.html">Step 6: 更新・削除</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="step7-search-finalization.html">Step 7: 検索・仕上げ</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">Step 7: 検索機能とアプリケーション仕上げ</h1>
                </div>

                <div id="step7">
                    <h2 class="chapter-title">検索機能とアプリケーション仕上げ</h2>
                    
                    <!-- 学習目標 -->
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>LIKE演算子を使用したあいまい検索の実装</li>
                            <li>UserDAOへの検索メソッド追加</li>
                            <li>検索フォームと結果表示画面の作成</li>
                            <li>共通レイアウト（header、footer）の実装</li>
                            <li>エラーページ（404、500）の作成</li>
                            <li>アプリケーション全体のテストと動作確認</li>
                        </ul>
                    </div>

                    <!-- 検索機能の処理フロー -->
                    <h3 class="section-title">7.1 検索機能の処理フロー</h3>
                    <p>ユーザー名や氏名での部分一致検索機能を実装し、アプリケーションの利便性を向上させます。</p>

                    <div class="search-flow">
                        <h5>ユーザー検索の処理フロー</h5>
                        <div style="display: flex; justify-content: center; align-items: center; flex-wrap: wrap; margin: 20px 0;">
                            <div class="search-step">
                                <strong>1. 検索フォーム</strong><br>
                                <small>キーワード入力</small>
                            </div>
                            <span class="flow-arrow">→</span>
                            <div class="search-step">
                                <strong>2. 検索実行</strong><br>
                                <small>GET /user-search</small>
                            </div>
                            <span class="flow-arrow">→</span>
                            <div class="search-step">
                                <strong>3. LIKE検索</strong><br>
                                <small>DAO.searchUsers()</small>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: center; align-items: center; flex-wrap: wrap; margin: 20px 0;">
                            <div class="search-step">
                                <strong>4. 結果表示</strong><br>
                                <small>検索結果JSP</small>
                            </div>
                            <span class="flow-arrow">←</span>
                            <div class="search-step">
                                <strong>5. データ設定</strong><br>
                                <small>request.setAttribute</small>
                            </div>
                            <span class="flow-arrow">←</span>
                            <div class="search-step">
                                <strong>6. 結果取得</strong><br>
                                <small>検索結果リスト</small>
                            </div>
                        </div>
                    </div>

                    <!-- UserDAOに検索メソッド追加 -->
                    <h3 class="section-title">7.2 UserDAOへの検索メソッド追加</h3>
                    <p>既存のUserDAOクラスに、LIKE演算子を使用した検索メソッドを追加します。</p>

                    <div class="search-example">
                        <h5>LIKE検索のポイント</h5>
                        <ul>
                            <li><strong>部分一致</strong>: <code>%keyword%</code> で前後に任意の文字を許可</li>
                            <li><strong>前方一致</strong>: <code>keyword%</code> で指定文字列で始まる</li>
                            <li><strong>後方一致</strong>: <code>%keyword</code> で指定文字列で終わる</li>
                            <li><strong>大文字小文字</strong>: PostgreSQLでは <code>ILIKE</code> で大文字小文字を無視</li>
                        </ul>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 7-1: UserDAOに検索メソッドの追加</h5>
                        <p>ユーザー名と氏名の両方を対象とした検索メソッドをUserDAOに追加します。</p>
                        
                        <h6>手順</h6>
                        <ol>
                            <li>既存の <code>UserDAO.java</code> ファイルを開く</li>
                            <li>以下の検索メソッドを追加:</li>
                        </ol>

                        <h6>UserDAO.java への追加メソッド</h6>
                        <pre class="code-block"><code class="language-java">    // SQL文の定義に追加
    private static final String SEARCH_USERS = 
        "SELECT id, username, email, full_name, created_at, updated_at FROM users " +
        "WHERE username ILIKE ? OR full_name ILIKE ? ORDER BY id";

    /**
     * ユーザー検索（ユーザー名・氏名での部分一致）
     * @param keyword 検索キーワード
     * @return List&lt;User&gt; 検索結果のユーザーリスト
     * @throws SQLException データベースアクセスエラー
     */
    public List&lt;User&gt; searchUsers(String keyword) throws SQLException {
        List&lt;User&gt; users = new ArrayList&lt;&gt;();
        Connection conn = null;
        PreparedStatement stmt = null;
        ResultSet rs = null;
        
        try {
            conn = DatabaseUtil.getConnection();
            stmt = conn.prepareStatement(SEARCH_USERS);
            
            // LIKE検索用のパターン作成（前後に%を付ける）
            String searchPattern = "%" + keyword + "%";
            stmt.setString(1, searchPattern); // username用
            stmt.setString(2, searchPattern); // full_name用
            
            rs = stmt.executeQuery();
            
            while (rs.next()) {
                User user = createUserFromResultSet(rs);
                users.add(user);
            }
            
            DatabaseUtil.commit(conn);
            
        } catch (ClassNotFoundException | SQLException e) {
            DatabaseUtil.rollback(conn);
            throw new SQLException("ユーザー検索エラー (keyword: " + keyword + "): " + e.getMessage(), e);
        } finally {
            DatabaseUtil.closeResources(conn, stmt, rs);
        }
        
        return users;
    }
    
    /**
     * ユーザー検索（複数条件での検索）
     * @param username ユーザー名（部分一致、nullまたは空文字の場合は条件から除外）
     * @param email メールアドレス（部分一致、nullまたは空文字の場合は条件から除外）
     * @param fullName 氏名（部分一致、nullまたは空文字の場合は条件から除外）
     * @return List&lt;User&gt; 検索結果のユーザーリスト
     * @throws SQLException データベースアクセスエラー
     */
    public List&lt;User&gt; searchUsersByMultipleFields(String username, String email, String fullName) throws SQLException {
        List&lt;User&gt; users = new ArrayList&lt;&gt;();
        Connection conn = null;
        PreparedStatement stmt = null;
        ResultSet rs = null;
        
        try {
            conn = DatabaseUtil.getConnection();
            
            // 動的にSQL文を構築
            StringBuilder sql = new StringBuilder();
            sql.append("SELECT id, username, email, full_name, created_at, updated_at FROM users WHERE 1=1");
            
            List&lt;String&gt; conditions = new ArrayList&lt;&gt;();
            List&lt;String&gt; parameters = new ArrayList&lt;&gt;();
            
            if (username != null && !username.trim().isEmpty()) {
                sql.append(" AND username ILIKE ?");
                parameters.add("%" + username.trim() + "%");
            }
            
            if (email != null && !email.trim().isEmpty()) {
                sql.append(" AND email ILIKE ?");
                parameters.add("%" + email.trim() + "%");
            }
            
            if (fullName != null && !fullName.trim().isEmpty()) {
                sql.append(" AND full_name ILIKE ?");
                parameters.add("%" + fullName.trim() + "%");
            }
            
            sql.append(" ORDER BY id");
            
            stmt = conn.prepareStatement(sql.toString());
            
            // パラメータを設定
            for (int i = 0; i &lt; parameters.size(); i++) {
                stmt.setString(i + 1, parameters.get(i));
            }
            
            rs = stmt.executeQuery();
            
            while (rs.next()) {
                User user = createUserFromResultSet(rs);
                users.add(user);
            }
            
            DatabaseUtil.commit(conn);
            
        } catch (ClassNotFoundException | SQLException e) {
            DatabaseUtil.rollback(conn);
            throw new SQLException("複数条件ユーザー検索エラー: " + e.getMessage(), e);
        } finally {
            DatabaseUtil.closeResources(conn, stmt, rs);
        }
        
        return users;
    }</code></pre>
                    </div>

                    <!-- ユーザー検索Servletの作成 -->
                    <h3 class="section-title">7.3 ユーザー検索Servletの作成</h3>
                    <p>検索フォームの表示と検索実行を処理するServletを作成します。</p>

                    <div class="exercise-container">
                        <h5>実習 7-2: ユーザー検索Servletの作成</h5>
                        <p>検索フォーム表示（GET）と検索実行（GET）を処理するServletを実装します。</p>
                        
                        <h6>手順</h6>
                        <ol>
                            <li><code>controller</code> パッケージに新しいクラス <code>UserSearchServlet</code> を作成</li>
                            <li>以下のコードを入力:</li>
                        </ol>

                        <h6>UserSearchServlet.java</h6>
                        <pre class="code-block"><code class="language-java">package controller;

import java.io.IOException;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import jakarta.servlet.RequestDispatcher;
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import model.User;
import model.UserDAO;

/**
 * ユーザー検索Servlet
 * GET: 検索フォーム表示・検索実行
 * Controller層（MVCパターン）
 */
@WebServlet("/user-search")
public class UserSearchServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    
    private UserDAO userDAO = new UserDAO();

    /**
     * GETリクエスト: 検索フォーム表示・検索実行
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException {
        
        // 検索キーワードの取得
        String keyword = request.getParameter("keyword");
        String searchType = request.getParameter("searchType");
        
        // 複数条件検索用パラメータ
        String searchUsername = request.getParameter("searchUsername");
        String searchEmail = request.getParameter("searchEmail");
        String searchFullName = request.getParameter("searchFullName");
        
        List&lt;User&gt; searchResults = new ArrayList&lt;&gt;();
        String searchMessage = "";
        boolean hasSearched = false;
        
        try {
            // 検索実行判定
            if (keyword != null && !keyword.trim().isEmpty()) {
                // 簡単検索（単一キーワード）
                hasSearched = true;
                keyword = keyword.trim();
                
                searchResults = userDAO.searchUsers(keyword);
                searchMessage = "キーワード「" + keyword + "」での検索結果: " + searchResults.size() + "件";
                
                // 検索キーワードをリクエストスコープに設定（フォーム復元用）
                request.setAttribute("keyword", keyword);
                
            } else if ((searchUsername != null && !searchUsername.trim().isEmpty()) ||
                       (searchEmail != null && !searchEmail.trim().isEmpty()) ||
                       (searchFullName != null && !searchFullName.trim().isEmpty())) {
                // 詳細検索（複数条件）
                hasSearched = true;
                
                searchResults = userDAO.searchUsersByMultipleFields(searchUsername, searchEmail, searchFullName);
                
                // 検索条件の表示用メッセージ作成
                List&lt;String&gt; conditions = new ArrayList&lt;&gt;();
                if (searchUsername != null && !searchUsername.trim().isEmpty()) {
                    conditions.add("ユーザー名: " + searchUsername.trim());
                }
                if (searchEmail != null && !searchEmail.trim().isEmpty()) {
                    conditions.add("メール: " + searchEmail.trim());
                }
                if (searchFullName != null && !searchFullName.trim().isEmpty()) {
                    conditions.add("氏名: " + searchFullName.trim());
                }
                
                searchMessage = "詳細検索（" + String.join(", ", conditions) + "）の結果: " + searchResults.size() + "件";
                
                // 検索条件をリクエストスコープに設定（フォーム復元用）
                request.setAttribute("searchUsername", searchUsername);
                request.setAttribute("searchEmail", searchEmail);
                request.setAttribute("searchFullName", searchFullName);
            }
            
            // リクエストスコープにデータを設定
            request.setAttribute("searchResults", searchResults);
            request.setAttribute("searchMessage", searchMessage);
            request.setAttribute("hasSearched", hasSearched);
            
            // 検索画面用JSPにフォワード
            RequestDispatcher dispatcher = request.getRequestDispatcher("/jsp/user-search.jsp");
            dispatcher.forward(request, response);
            
        } catch (SQLException e) {
            // データベースエラーの場合
            request.setAttribute("errorMessage", "検索中にデータベースエラーが発生しました: " + e.getMessage());
            request.setAttribute("searchResults", new ArrayList&lt;User&gt;());
            request.setAttribute("hasSearched", false);
            
            RequestDispatcher dispatcher = request.getRequestDispatcher("/jsp/user-search.jsp");
            dispatcher.forward(request, response);
        }
    }
}</code></pre>
                    </div>

                    <!-- ユーザー検索JSPの作成 -->
                    <h3 class="section-title">7.4 ユーザー検索JSPの作成</h3>
                    <p>検索フォームと検索結果を表示するJSPを作成します。</p>

                    <div class="exercise-container">
                        <h5>実習 7-3: ユーザー検索JSPの作成</h5>
                        <p>簡単検索と詳細検索フォーム、および検索結果を表示するJSPを実装します。</p>
                        
                        <h6>手順</h6>
                        <ol>
                            <li><code>src/main/webapp/jsp</code> フォルダに新しいファイル <code>user-search.jsp</code> を作成</li>
                            <li>以下のコードを入力:</li>
                        </ol>

                        <h6>user-search.jsp</h6>
                        <pre class="code-block"><code class="language-jsp">&lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;
&lt;%@ page import="java.util.List" %&gt;
&lt;%@ page import="model.User" %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ユーザー検索 - Simple User Management System&lt;/title&gt;
    &lt;style&gt;
        body {
            font-family: 'Meiryo', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1000px;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin: 0 auto;
        }
        .search-tabs {
            display: flex;
            border-bottom: 2px solid #dee2e6;
            margin-bottom: 20px;
        }
        .tab-button {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-bottom: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
        }
        .tab-button.active {
            background-color: white;
            border-bottom: 2px solid white;
            font-weight: bold;
        }
        .tab-content {
            display: none;
            padding: 20px;
            border: 1px solid #dee2e6;
            border-radius: 0 5px 5px 5px;
            background-color: #f8f9fa;
        }
        .tab-content.active {
            display: block;
        }
        .form-row {
            display: flex;
            gap: 15px;
            align-items: end;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        .form-group {
            flex: 1;
            min-width: 200px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        input[type="text"], input[type="email"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .btn {
            background-color: #007bff;
            color: white;
            padding: 8px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }
        .btn:hover {
            background-color: #0056b3;
        }
        .btn-secondary {
            background-color: #6c757d;
        }
        .btn-secondary:hover {
            background-color: #545b62;
        }
        .search-results {
            margin-top: 30px;
        }
        .result-message {
            background-color: #d1ecf1;
            color: #0c5460;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            border: 1px solid #bee5eb;
        }
        .no-results {
            background-color: #fff3cd;
            color: #856404;
            padding: 20px;
            border-radius: 5px;
            text-align: center;
            border: 1px solid #ffeaa7;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #007bff;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        tr:hover {
            background-color: #e9ecef;
        }
        .error-message {
            background-color: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            border: 1px solid #f5c6cb;
        }
        .actions {
            white-space: nowrap;
        }
        .actions a {
            margin-right: 5px;
            padding: 4px 8px;
            font-size: 12px;
        }
    &lt;/style&gt;
    &lt;script&gt;
        function switchTab(tabName) {
            // すべてのタブコンテンツを非表示
            var contents = document.querySelectorAll('.tab-content');
            contents.forEach(function(content) {
                content.classList.remove('active');
            });
            
            // すべてのタブボタンを非アクティブ
            var buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(function(button) {
                button.classList.remove('active');
            });
            
            // 指定されたタブを表示
            document.getElementById(tabName + '-content').classList.add('active');
            document.getElementById(tabName + '-button').classList.add('active');
        }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;h1&gt;ユーザー検索&lt;/h1&gt;
        
        &lt;%
            // エラーメッセージの表示
            String errorMessage = (String) request.getAttribute("errorMessage");
            if (errorMessage != null && !errorMessage.isEmpty()) {
        %&gt;
        &lt;div class="error-message"&gt;
            &lt;strong&gt;エラー:&lt;/strong&gt; &lt;%= errorMessage %&gt;
        &lt;/div&gt;
        &lt;%
            }
        %&gt;
        
        &lt;!-- 検索タブ --&gt;
        &lt;div class="search-tabs"&gt;
            &lt;div id="simple-button" class="tab-button active" onclick="switchTab('simple')"&gt;簡単検索&lt;/div&gt;
            &lt;div id="advanced-button" class="tab-button" onclick="switchTab('advanced')"&gt;詳細検索&lt;/div&gt;
        &lt;/div&gt;
        
        &lt;!-- 簡単検索フォーム --&gt;
        &lt;div id="simple-content" class="tab-content active"&gt;
            &lt;h4&gt;簡単検索&lt;/h4&gt;
            &lt;p&gt;ユーザー名または氏名にキーワードが含まれるユーザーを検索します。&lt;/p&gt;
            
            &lt;form action="../user-search" method="get"&gt;
                &lt;div class="form-row"&gt;
                    &lt;div class="form-group"&gt;
                        &lt;label for="keyword"&gt;検索キーワード&lt;/label&gt;
                        &lt;input type="text" id="keyword" name="keyword" 
                               value="&lt;%= request.getAttribute("keyword") != null ? request.getAttribute("keyword") : "" %&gt;" 
                               placeholder="ユーザー名または氏名を入力" maxlength="100"&gt;
                    &lt;/div&gt;
                    &lt;div class="form-group"&gt;
                        &lt;button type="submit" class="btn"&gt;🔍 検索&lt;/button&gt;
                        &lt;button type="reset" class="btn btn-secondary"&gt;クリア&lt;/button&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/form&gt;
        &lt;/div&gt;
        
        &lt;!-- 詳細検索フォーム --&gt;
        &lt;div id="advanced-content" class="tab-content"&gt;
            &lt;h4&gt;詳細検索&lt;/h4&gt;
            &lt;p&gt;複数の条件を指定してより詳細な検索を行います。空欄の項目は検索条件から除外されます。&lt;/p&gt;
            
            &lt;form action="../user-search" method="get"&gt;
                &lt;div class="form-row"&gt;
                    &lt;div class="form-group"&gt;
                        &lt;label for="searchUsername"&gt;ユーザー名&lt;/label&gt;
                        &lt;input type="text" id="searchUsername" name="searchUsername" 
                               value="&lt;%= request.getAttribute("searchUsername") != null ? request.getAttribute("searchUsername") : "" %&gt;" 
                               placeholder="例: tanaka" maxlength="50"&gt;
                    &lt;/div&gt;
                    &lt;div class="form-group"&gt;
                        &lt;label for="searchEmail"&gt;メールアドレス&lt;/label&gt;
                        &lt;input type="text" id="searchEmail" name="searchEmail" 
                               value="&lt;%= request.getAttribute("searchEmail") != null ? request.getAttribute("searchEmail") : "" %&gt;" 
                               placeholder="例: example.com" maxlength="100"&gt;
                    &lt;/div&gt;
                    &lt;div class="form-group"&gt;
                        &lt;label for="searchFullName"&gt;氏名&lt;/label&gt;
                        &lt;input type="text" id="searchFullName" name="searchFullName" 
                               value="&lt;%= request.getAttribute("searchFullName") != null ? request.getAttribute("searchFullName") : "" %&gt;" 
                               placeholder="例: 田中" maxlength="100"&gt;
                    &lt;/div&gt;
                    &lt;div class="form-group"&gt;
                        &lt;button type="submit" class="btn"&gt;🔍 詳細検索&lt;/button&gt;
                        &lt;button type="reset" class="btn btn-secondary"&gt;クリア&lt;/button&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/form&gt;
        &lt;/div&gt;
        
        &lt;%
            // 検索結果の表示
            Boolean hasSearched = (Boolean) request.getAttribute("hasSearched");
            String searchMessage = (String) request.getAttribute("searchMessage");
            
            if (hasSearched != null && hasSearched) {
                @SuppressWarnings("unchecked")
                List&lt;User&gt; searchResults = (List&lt;User&gt;) request.getAttribute("searchResults");
        %&gt;
        
        &lt;div class="search-results"&gt;
            &lt;h3&gt;検索結果&lt;/h3&gt;
            
            &lt;%
                if (searchMessage != null && !searchMessage.isEmpty()) {
            %&gt;
            &lt;div class="result-message"&gt;
                &lt;%= searchMessage %&gt;
            &lt;/div&gt;
            &lt;%
                }
                
                if (searchResults != null && !searchResults.isEmpty()) {
            %&gt;
            &lt;table&gt;
                &lt;thead&gt;
                    &lt;tr&gt;
                        &lt;th&gt;ID&lt;/th&gt;
                        &lt;th&gt;ユーザー名&lt;/th&gt;
                        &lt;th&gt;メールアドレス&lt;/th&gt;
                        &lt;th&gt;氏名&lt;/th&gt;
                        &lt;th&gt;登録日時&lt;/th&gt;
                        &lt;th&gt;操作&lt;/th&gt;
                    &lt;/tr&gt;
                &lt;/thead&gt;
                &lt;tbody&gt;
                    &lt;%
                        for (User user : searchResults) {
                    %&gt;
                    &lt;tr&gt;
                        &lt;td&gt;&lt;%= user.getId() %&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;%= user.getUsername() %&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;%= user.getEmail() %&gt;&lt;/td&gt;
                        &lt;td&gt;
                            &lt;%
                                String fullName = user.getFullName();
                                if (fullName != null && !fullName.trim().isEmpty()) {
                            %&gt;
                                &lt;%= fullName %&gt;
                            &lt;%
                                } else {
                            %&gt;
                                &lt;span style="color: #6c757d;"&gt;（未設定）&lt;/span&gt;
                            &lt;%
                                }
                            %&gt;
                        &lt;/td&gt;
                        &lt;td&gt;
                            &lt;%
                                if (user.getCreatedAt() != null) {
                                    java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat("yyyy/MM/dd HH:mm");
                            %&gt;
                                &lt;%= sdf.format(user.getCreatedAt()) %&gt;
                            &lt;%
                                } else {
                            %&gt;
                                &lt;span style="color: #6c757d;"&gt;（不明）&lt;/span&gt;
                            &lt;%
                                }
                            %&gt;
                        &lt;/td&gt;
                        &lt;td class="actions"&gt;
                            &lt;a href="../user-detail?id=&lt;%= user.getId() %&gt;" class="btn"&gt;詳細&lt;/a&gt;
                            &lt;a href="../user-edit?id=&lt;%= user.getId() %&gt;" class="btn" style="background-color: #ffc107; color: #212529;"&gt;編集&lt;/a&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;%
                        }
                    %&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;%
                } else {
            %&gt;
            &lt;div class="no-results"&gt;
                &lt;h4&gt;検索結果が見つかりません&lt;/h4&gt;
                &lt;p&gt;検索条件に一致するユーザーが存在しません。&lt;/p&gt;
                &lt;p&gt;キーワードを変更して再度検索してください。&lt;/p&gt;
            &lt;/div&gt;
            &lt;%
                }
            %&gt;
        &lt;/div&gt;
        
        &lt;%
            }
        %&gt;
        
        &lt;hr&gt;
        &lt;p&gt;
            &lt;a href="../user-list" class="btn"&gt;全ユーザー一覧&lt;/a&gt; | 
            &lt;a href="../user-form" class="btn"&gt;新規ユーザー登録&lt;/a&gt; | 
            &lt;a href="../index.jsp" class="btn"&gt;トップページ&lt;/a&gt;
        &lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>

                    <!-- エラーページの作成 -->
                    <h3 class="section-title">7.5 エラーページの作成</h3>
                    <p>404エラー（ページが見つからない）と500エラー（サーバーエラー）用のエラーページを作成します。</p>

                    <div class="exercise-container">
                        <h5>実習 7-4: エラーページの作成</h5>
                        <p>Webアプリケーションでよく発生するエラーに対応するエラーページを作成します。</p>
                        
                        <h6>手順 1: 404エラーページの作成</h6>
                        <ol>
                            <li><code>src/main/webapp</code> フォルダに新しいファイル <code>404.jsp</code> を作成</li>
                            <li>以下のコードを入力:</li>
                        </ol>

                        <h6>404.jsp</h6>
                        <pre class="code-block"><code class="language-jsp">&lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;
&lt;%@ page isErrorPage="true" %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;404 Page Not Found - Simple User Management System&lt;/title&gt;
    &lt;style&gt;
        body {
            font-family: 'Meiryo', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .error-container {
            background-color: white;
            padding: 50px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            text-align: center;
            max-width: 600px;
        }
        .error-code {
            font-size: 120px;
            font-weight: bold;
            color: #667eea;
            margin: 0;
            line-height: 1;
        }
        .error-title {
            font-size: 36px;
            color: #333;
            margin: 20px 0;
        }
        .error-message {
            font-size: 18px;
            color: #666;
            margin: 20px 0;
            line-height: 1.6;
        }
        .btn {
            background-color: #667eea;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 5px;
            display: inline-block;
            margin: 10px;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        .btn:hover {
            background-color: #5a67d8;
            color: white;
            text-decoration: none;
        }
        .illustration {
            font-size: 100px;
            margin: 20px 0;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="error-container"&gt;
        &lt;div class="illustration"&gt;🔍❌&lt;/div&gt;
        &lt;div class="error-code"&gt;404&lt;/div&gt;
        &lt;h1 class="error-title"&gt;ページが見つかりません&lt;/h1&gt;
        &lt;div class="error-message"&gt;
            &lt;p&gt;申し訳ございません。お探しのページは存在しないか、移動された可能性があります。&lt;/p&gt;
            &lt;p&gt;URLが正しいか確認するか、以下のリンクからアクセスしてください。&lt;/p&gt;
        &lt;/div&gt;
        
        &lt;div&gt;
            &lt;a href="&lt;%= request.getContextPath() %&gt;/user-list" class="btn"&gt;ユーザー一覧&lt;/a&gt;
            &lt;a href="&lt;%= request.getContextPath() %&gt;/user-search" class="btn"&gt;ユーザー検索&lt;/a&gt;
            &lt;a href="&lt;%= request.getContextPath() %&gt;/index.jsp" class="btn"&gt;トップページ&lt;/a&gt;
        &lt;/div&gt;
        
        &lt;div style="margin-top: 30px; font-size: 14px; color: #999;"&gt;
            &lt;p&gt;Simple User Management System&lt;/p&gt;
            &lt;p&gt;JSP/Servlet/JDBC チュートリアル&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                        <h6>手順 2: 500エラーページの作成</h6>
                        <ol>
                            <li><code>src/main/webapp</code> フォルダに新しいファイル <code>500.jsp</code> を作成</li>
                            <li>以下のコードを入力:</li>
                        </ol>

                        <h6>500.jsp</h6>
                        <pre class="code-block"><code class="language-jsp">&lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;
&lt;%@ page isErrorPage="true" %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;500 Internal Server Error - Simple User Management System&lt;/title&gt;
    &lt;style&gt;
        body {
            font-family: 'Meiryo', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .error-container {
            background-color: white;
            padding: 50px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            text-align: center;
            max-width: 600px;
        }
        .error-code {
            font-size: 120px;
            font-weight: bold;
            color: #ff6b6b;
            margin: 0;
            line-height: 1;
        }
        .error-title {
            font-size: 36px;
            color: #333;
            margin: 20px 0;
        }
        .error-message {
            font-size: 18px;
            color: #666;
            margin: 20px 0;
            line-height: 1.6;
        }
        .btn {
            background-color: #ff6b6b;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 5px;
            display: inline-block;
            margin: 10px;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        .btn:hover {
            background-color: #ee5a52;
            color: white;
            text-decoration: none;
        }
        .illustration {
            font-size: 100px;
            margin: 20px 0;
        }
        .error-details {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            text-align: left;
            font-size: 14px;
            display: none;
        }
        .toggle-details {
            color: #007bff;
            cursor: pointer;
            text-decoration: underline;
            font-size: 14px;
        }
    &lt;/style&gt;
    &lt;script&gt;
        function toggleErrorDetails() {
            var details = document.getElementById('errorDetails');
            if (details.style.display === 'none' || details.style.display === '') {
                details.style.display = 'block';
            } else {
                details.style.display = 'none';
            }
        }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="error-container"&gt;
        &lt;div class="illustration"&gt;⚠️💥&lt;/div&gt;
        &lt;div class="error-code"&gt;500&lt;/div&gt;
        &lt;h1 class="error-title"&gt;サーバーエラー&lt;/h1&gt;
        &lt;div class="error-message"&gt;
            &lt;p&gt;申し訳ございません。サーバーで予期しないエラーが発生しました。&lt;/p&gt;
            &lt;p&gt;しばらく時間をおいてから再度お試しください。&lt;/p&gt;
            &lt;p&gt;問題が継続する場合は、システム管理者にお問い合わせください。&lt;/p&gt;
        &lt;/div&gt;
        
        &lt;div&gt;
            &lt;a href="&lt;%= request.getContextPath() %&gt;/user-list" class="btn"&gt;ユーザー一覧&lt;/a&gt;
            &lt;a href="&lt;%= request.getContextPath() %&gt;/index.jsp" class="btn"&gt;トップページ&lt;/a&gt;
        &lt;/div&gt;
        
        &lt;div style="margin-top: 20px;"&gt;
            &lt;span class="toggle-details" onclick="toggleErrorDetails()"&gt;エラー詳細を表示&lt;/span&gt;
        &lt;/div&gt;
        
        &lt;div id="errorDetails" class="error-details"&gt;
            &lt;strong&gt;エラー情報:&lt;/strong&gt;&lt;br&gt;
            &lt;strong&gt;Request URI:&lt;/strong&gt; &lt;%= request.getRequestURI() %&gt;&lt;br&gt;
            &lt;strong&gt;Timestamp:&lt;/strong&gt; &lt;%= new java.util.Date() %&gt;&lt;br&gt;
            &lt;% if (exception != null) { %&gt;
            &lt;strong&gt;Exception:&lt;/strong&gt; &lt;%= exception.getClass().getSimpleName() %&gt;&lt;br&gt;
            &lt;strong&gt;Message:&lt;/strong&gt; &lt;%= exception.getMessage() %&gt;&lt;br&gt;
            &lt;% } %&gt;
        &lt;/div&gt;
        
        &lt;div style="margin-top: 30px; font-size: 14px; color: #999;"&gt;
            &lt;p&gt;Simple User Management System&lt;/p&gt;
            &lt;p&gt;JSP/Servlet/JDBC チュートリアル&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                        <h6>手順 3: web.xmlへのエラーページ設定</h6>
                        <ol>
                            <li>既存の <code>src/main/webapp/WEB-INF/web.xml</code> を開く</li>
                            <li>&lt;/web-app&gt; タグの直前に以下の設定を追加:</li>
                        </ol>

                        <h6>web.xml への追加設定</h6>
                        <pre class="code-block"><code class="language-xml">    &lt;!-- エラーページの設定 --&gt;
    &lt;error-page&gt;
        &lt;error-code&gt;404&lt;/error-code&gt;
        &lt;location&gt;/404.jsp&lt;/location&gt;
    &lt;/error-page&gt;
    
    &lt;error-page&gt;
        &lt;error-code&gt;500&lt;/error-code&gt;
        &lt;location&gt;/500.jsp&lt;/location&gt;
    &lt;/error-page&gt;
    
    &lt;error-page&gt;
        &lt;exception-type&gt;java.lang.Exception&lt;/exception-type&gt;
        &lt;location&gt;/500.jsp&lt;/location&gt;
    &lt;/error-page&gt;</code></pre>
                    </div>

                    <!-- アプリケーション全体のテスト -->
                    <h3 class="section-title">7.6 アプリケーション全体のテスト</h3>
                    <p>これまでに作成した全ての機能が正常に動作することを総合的にテストします。</p>

                    <div class="completion-summary">
                        <h5>完成したアプリケーションの機能一覧</h5>
                        <div class="feature-grid">
                            <div class="feature-card">
                                <h6>✅ ユーザー登録</h6>
                                <p>新規ユーザーの登録<br>バリデーション・重複チェック</p>
                            </div>
                            <div class="feature-card">
                                <h6>✅ ユーザー一覧</h6>
                                <p>全ユーザーの一覧表示<br>テーブル形式・操作ボタン</p>
                            </div>
                            <div class="feature-card">
                                <h6>✅ ユーザー詳細</h6>
                                <p>特定ユーザーの詳細表示<br>日時フォーマット対応</p>
                            </div>
                            <div class="feature-card">
                                <h6>✅ ユーザー編集</h6>
                                <p>既存ユーザー情報の更新<br>現在値の表示・検証</p>
                            </div>
                            <div class="feature-card">
                                <h6>✅ ユーザー削除</h6>
                                <p>確認画面付きの安全な削除<br>物理削除の実装</p>
                            </div>
                            <div class="feature-card">
                                <h6>✅ ユーザー検索</h6>
                                <p>簡単検索・詳細検索<br>LIKE演算子による部分一致</p>
                            </div>
                            <div class="feature-card">
                                <h6>✅ エラー処理</h6>
                                <p>404・500エラーページ<br>適切なエラーメッセージ</p>
                            </div>
                            <div class="feature-card">
                                <h6>✅ MVC設計</h6>
                                <p>役割分離されたアーキテクチャ<br>保守性の高い構造</p>
                            </div>
                        </div>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 7-5: アプリケーション全体のテスト</h5>
                        <p>作成したユーザー管理システムの全機能を体系的にテストします。</p>
                        
                        <h6>総合テストシナリオ</h6>
                        <ol>
                            <li><strong>環境確認テスト</strong>
                                <ul>
                                    <li>PostgreSQLサービスが起動していることを確認</li>
                                    <li>Tomcatサーバーが正常に動作することを確認</li>
                                    <li>ブラウザで <code>http://localhost:8080/SimpleUserManagementSystem/user-list</code> にアクセス</li>
                                </ul>
                            </li>
                            
                            <li><strong>CRUD機能テスト</strong>
                                <ul>
                                    <li><strong>Create</strong>: 新規ユーザーを3人程度登録</li>
                                    <li><strong>Read</strong>: 一覧・詳細表示の確認</li>
                                    <li><strong>Update</strong>: 既存ユーザーの情報を更新</li>
                                    <li><strong>Delete</strong>: 不要なユーザーを削除</li>
                                </ul>
                            </li>
                            
                            <li><strong>検索機能テスト</strong>
                                <ul>
                                    <li>簡単検索: 部分的なキーワードで検索</li>
                                    <li>詳細検索: 複数条件での検索</li>
                                    <li>検索結果なしのケースを確認</li>
                                    <li>空文字での検索動作を確認</li>
                                </ul>
                            </li>
                            
                            <li><strong>エラー処理テスト</strong>
                                <ul>
                                    <li>存在しないURLにアクセス（404エラー）</li>
                                    <li>不正なパラメータでアクセス</li>
                                    <li>バリデーションエラーの表示確認</li>
                                    <li>重複データでの登録・更新を試行</li>
                                </ul>
                            </li>
                            
                            <li><strong>画面遷移テスト</strong>
                                <ul>
                                    <li>全ての画面間のリンクが正常に動作することを確認</li>
                                    <li>戻るボタン・キャンセルボタンの動作確認</li>
                                    <li>成功・エラーメッセージの表示確認</li>
                                </ul>
                            </li>
                        </ol>

                        <h6>期待される結果</h6>
                        <ul>
                            <li>全ての機能が正常に動作する</li>
                            <li>エラー時に適切なメッセージが表示される</li>
                            <li>データの整合性が保たれる</li>
                            <li>画面遷移がスムーズに行われる</li>
                            <li>検索結果が正確に表示される</li>
                        </ul>
                    </div>

                    <!-- 最終プロジェクト完了 -->
                    <div class="final-project">
                        <h3>🎉 チュートリアル完了！</h3>
                        <p><strong>おめでとうございます！</strong></p>
                        <p>JSP/Servlet/JDBCを使用したユーザー管理システムが完成しました。</p>
                        <div class="feature-grid" style="margin-top: 20px;">
                            <div class="feature-card">
                                <h6>習得した技術</h6>
                                <ul style="text-align: left; font-size: 14px;">
                                    <li>Eclipse IDEの使用</li>
                                    <li>Dynamic Web Project</li>
                                    <li>Apache Tomcat設定</li>
                                    <li>PostgreSQL・PgAdmin</li>
                                </ul>
                            </div>
                            <div class="feature-card">
                                <h6>実装した機能</h6>
                                <ul style="text-align: left; font-size: 14px;">
                                    <li>CRUD操作の完全実装</li>
                                    <li>検索機能（簡単・詳細）</li>
                                    <li>エラーページ・例外処理</li>
                                    <li>バリデーション・重複チェック</li>
                                </ul>
                            </div>
                            <div class="feature-card">
                                <h6>学習した概念</h6>
                                <ul style="text-align: left; font-size: 14px;">
                                    <li>MVCアーキテクチャ</li>
                                    <li>DAOパターン</li>
                                    <li>スクリプトレット</li>
                                    <li>トランザクション処理</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- 次のステップ -->
                    <div class="next-steps">
                        <h5>🚀 次のステップ</h5>
                        <p>このチュートリアルを完了した後の学習提案：</p>
                        <div class="row">
                            <div class="col-md-6">
                                <h6>フレームワーク学習</h6>
                                <ul>
                                    <li><strong>Spring Framework</strong>: DIコンテナとMVC</li>
                                    <li><strong>Spring Boot</strong>: 自動設定と迅速開発</li>
                                    <li><strong>Hibernate/JPA</strong>: ORM技術</li>
                                    <li><strong>Thymeleaf</strong>: モダンなテンプレートエンジン</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6>発展的な技術</h6>
                                <ul>
                                    <li><strong>RESTful API</strong>: JSON形式でのデータ交換</li>
                                    <li><strong>Spring Security</strong>: 認証・認可機能</li>
                                    <li><strong>フロントエンド</strong>: React, Vue.js, Angular</li>
                                    <li><strong>マイクロサービス</strong>: クラウドネイティブ開発</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- 理解度確認クイズ -->
                    <div class="quiz-container">
                        <h5>最終理解度確認クイズ</h5>
                        <ol>
                            <li><strong>LIKE演算子でのワイルドカード「%」の役割を説明してください。</strong></li>
                            <li><strong>PostgreSQLのILIKE演算子の特徴は何ですか？</strong></li>
                            <li><strong>このチュートリアルで実装したMVCパターンの各層の責務を説明してください。</strong></li>
                            <li><strong>DAOパターンの利点を3つ挙げてください。</strong></li>
                            <li><strong>エラーページをweb.xmlで設定する理由は何ですか？</strong></li>
                            <li><strong>本番環境で追加すべきセキュリティ対策を5つ挙げてください。</strong></li>
                        </ol>
                        
                        <details style="margin-top: 20px;">
                            <summary>解答例を表示</summary>
                            <div style="margin-top: 10px; padding: 10px; background-color: #f8f9fa; border-radius: 5px;">
                                <ol>
                                    <li>「%」は任意の0文字以上の文字列にマッチするワイルドカード。%keyword%で部分一致検索が可能</li>
                                    <li>ILIKEは大文字小文字を区別しない検索を行う（PostgreSQL独自の拡張）</li>
                                    <li>Model：データとビジネスロジック（User、UserDAO）/ View：画面表示（JSP）/ Controller：リクエスト制御（Servlet）</li>
                                    <li>①データアクセスロジックの分離 ②再利用性の向上 ③テスト容易性の向上</li>
                                    <li>統一的なエラー処理、ユーザビリティ向上、セキュリティ情報の隠蔽のため</li>
                                    <li>①認証・認可 ②HTTPS通信 ③CSRF対策 ④XSS対策 ⑤SQLインジェクション対策</li>
                                </ol>
                            </div>
                        </details>
                    </div>

                    <!-- まとめ -->
                    <h3 class="section-title">7.7 チュートリアル完了</h3>
                    <p>このステップでは、検索機能の追加とアプリケーション全体の仕上げを行いました：</p>
                    <ul>
                        <li><strong>検索機能</strong>: LIKE演算子による簡単検索・詳細検索の実装</li>
                        <li><strong>UserDAO拡張</strong>: searchUsers、searchUsersByMultipleFieldsメソッドの追加</li>
                        <li><strong>検索UI</strong>: タブ切り替え型の検索フォームと結果表示</li>
                        <li><strong>エラーページ</strong>: 404・500エラー用のユーザーフレンドリーなページ</li>
                        <li><strong>総合テスト</strong>: アプリケーション全体の動作確認</li>
                        <li><strong>完成</strong>: 実用的なユーザー管理システムの完成</li>
                    </ul>
                    
                    <p><strong>これで「JSP/Servlet/JDBC実践チュートリアル」が完了しました！</strong>学習した技術を基に、より高度なWebアプリケーション開発に挑戦してください。</p>

                    <!-- ナビゲーション -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="step6-user-update-delete.html" class="btn btn-secondary">← 前の章: ユーザー更新・削除機能</a>
                        <a href="README.html" class="btn btn-primary">チュートリアル概要に戻る →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
</body>
</html>