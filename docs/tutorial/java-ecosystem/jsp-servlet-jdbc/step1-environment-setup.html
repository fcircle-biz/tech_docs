<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSP/Servlet/JDBC 実践チュートリアル Step 1 - 開発環境の構築</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        
        .navbar {
            background-color: #f57c00;
        }
        
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        
        .chapter-title {
            color: #f57c00;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #f57c00;
            padding-bottom: 0.5rem;
        }
        
        .section-title {
            color: #ff9800;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        
        .quiz-container {
            background-color: #fff3e0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #f57c00;
        }
        
        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }
        
        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }
        
        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }
        
        .code-block {
            background-color: #1e1e1e !important;
            color: #ffffff;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .nav-link.active {
            background-color: #f57c00 !important;
            color: white !important;
        }

        .diagram-container {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 2rem;
            margin: 1.5rem 0;
            text-align: center;
        }

        .env-step {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 1rem;
            margin: 0.5rem 0;
            border-left: 4px solid #4caf50;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="../../../index.html">JSP/Servlet/JDBC 実践チュートリアル</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-nav-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="../../../index.html">ホーム</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="README.html">JSP/Servlet/JDBC</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>チュートリアル目次</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="step1-environment-setup.html">Step 1: 開発環境構築</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step2-mvc-architecture.html">Step 2: MVC概要</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step3-database-jdbc.html">Step 3: DB・JDBC</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step4-user-registration.html">Step 4: ユーザー登録</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step5-user-list-detail.html">Step 5: 一覧・詳細</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step6-user-update-delete.html">Step 6: 更新・削除</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step7-search-finalization.html">Step 7: 検索・仕上げ</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">Step 1: 開発環境の構築</h1>
                </div>

                <div id="step1">
                    <h2 class="chapter-title">開発環境の構築</h2>
                    
                    <!-- 学習目標 -->
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>JDKとEclipse IDEの適切なインストール方法</li>
                            <li>Eclipse内でのApache Tomcatサーバーの設定</li>
                            <li>PostgreSQLデータベースの初期設定</li>
                            <li>PgAdminによるデータベース管理の基礎</li>
                            <li>Dynamic Web Projectの作成と設定</li>
                            <li>Hello Worldアプリケーションによる動作確認</li>
                        </ul>
                    </div>

                    <!-- 概要 -->
                    <h3 class="section-title">1.1 環境構築の概要</h3>
                    <p>JSP/Servlet/JDBCを使用したWebアプリケーション開発に必要な環境を構築します。このステップでは、ビルドツール（Maven/Gradle）を使用せず、Eclipse IDEの標準機能のみを使用してシンプルな開発環境を構築します。</p>

                    <div class="diagram-container">
                        <h5>開発環境構成図</h5>
                        <div style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap;">
                            <div style="border: 2px solid #f57c00; border-radius: 8px; padding: 10px; margin: 5px; background-color: white;">
                                <strong>Eclipse IDE</strong><br>
                                統合開発環境
                            </div>
                            <div style="border: 2px solid #4caf50; border-radius: 8px; padding: 10px; margin: 5px; background-color: white;">
                                <strong>Apache Tomcat</strong><br>
                                Webサーバー
                            </div>
                            <div style="border: 2px solid #2196f3; border-radius: 8px; padding: 10px; margin: 5px; background-color: white;">
                                <strong>PostgreSQL</strong><br>
                                データベース
                            </div>
                            <div style="border: 2px solid #9c27b0; border-radius: 8px; padding: 10px; margin: 5px; background-color: white;">
                                <strong>PgAdmin</strong><br>
                                DB管理ツール
                            </div>
                        </div>
                    </div>

                    <!-- JDKのインストール -->
                    <h3 class="section-title">1.2 JDK（Java Development Kit）のインストール</h3>
                    <p>Javaアプリケーションの開発に必要なJDKをインストールします。このチュートリアルでは、Oracle JDK 17またはOpenJDK 17を推奨します。</p>

                    <div class="env-step">
                        <h6>手順 1-1: JDKのダウンロードとインストール</h6>
                        <ol>
                            <li><strong>Oracle JDKの場合</strong>: <a href="https://www.oracle.com/java/technologies/downloads/" target="_blank">Oracle公式サイト</a>からJDK 17をダウンロード</li>
                            <li><strong>OpenJDKの場合</strong>: <a href="https://adoptium.net/" target="_blank">Eclipse Adoptium</a>からTemurin JDK 17をダウンロード</li>
                            <li>ダウンロードしたインストーラーを実行してJDKをインストール</li>
                            <li>環境変数JAVA_HOMEを設定（例: C:\Program Files\Java\jdk-17）</li>
                            <li>環境変数PATHにJDKのbinディレクトリを追加</li>
                        </ol>
                    </div>

                    <div class="env-step">
                        <h6>手順 1-2: JDKインストールの確認</h6>
                        <p>コマンドプロンプトまたはターミナルで以下のコマンドを実行して、JDKが正しくインストールされているか確認します。</p>
                        <pre class="code-block"><code class="language-bash">java -version
javac -version</code></pre>
                        <p><strong>期待される出力例:</strong></p>
                        <pre class="code-block"><code class="language-bash">java 17.0.2 2022-01-18 LTS
Java(TM) SE Runtime Environment (build 17.0.2+8-LTS-86)
Java HotSpot(TM) 64-Bit Server VM (build 17.0.2+8-LTS-86, mixed mode, sharing)

javac 17.0.2</code></pre>
                    </div>

                    <!-- Eclipse IDEのインストール -->
                    <h3 class="section-title">1.3 Eclipse IDE for Enterprise Java and Web Developersのインストール</h3>
                    <p>Java Webアプリケーション開発に特化したEclipse IDEをインストールします。</p>

                    <div class="env-step">
                        <h6>手順 1-3: Eclipse IDEのダウンロードとインストール</h6>
                        <ol>
                            <li><a href="https://www.eclipse.org/downloads/" target="_blank">Eclipse公式サイト</a>からEclipse Installer をダウンロード</li>
                            <li>Eclipse Installerを実行</li>
                            <li>「Eclipse IDE for Enterprise Java and Web Developers」を選択</li>
                            <li>Installation Folderを指定（デフォルトのままでも可）</li>
                            <li>「INSTALL」ボタンをクリックしてインストール開始</li>
                            <li>インストール完了後、「LAUNCH」ボタンでEclipseを起動</li>
                        </ol>
                    </div>

                    <div class="env-step">
                        <h6>手順 1-4: Eclipse Workspaceの設定</h6>
                        <ol>
                            <li>Eclipse起動時にWorkspace Launcherダイアログが表示されます</li>
                            <li>Workspaceディレクトリを指定（例: C:\workspace\jsp-servlet-tutorial）</li>
                            <li>「Launch」をクリックしてEclipseを起動</li>
                            <li>Welcome画面が表示されたら「Hide」ボタンで閉じる</li>
                        </ol>
                    </div>

                    <!-- Apache Tomcatの設定 -->
                    <h3 class="section-title">1.4 Apache Tomcatサーバーの設定</h3>
                    <p>Eclipse内でApache Tomcatサーバーを設定し、Webアプリケーションをローカルでテストできるようにします。</p>

                    <div class="env-step">
                        <h6>手順 1-5: Apache Tomcatのダウンロード</h6>
                        <ol>
                            <li><a href="https://tomcat.apache.org/download-90.cgi" target="_blank">Apache Tomcat公式サイト</a>からTomcat 9.0のCore配布をダウンロード</li>
                            <li>「zip」形式（Windows）または「tar.gz」形式（Linux/Mac）を選択</li>
                            <li>ダウンロードしたファイルを任意のディレクトリに解凍（例: C:\tomcat\apache-tomcat-9.0.xx）</li>
                        </ol>
                    </div>

                    <div class="env-step">
                        <h6>手順 1-6: Eclipse内でのTomcatサーバー設定</h6>
                        <ol>
                            <li>Eclipseの下部パネルで「Servers」タブを選択（表示されていない場合は「Window」→「Show View」→「Servers」）</li>
                            <li>Serversビュー内で右クリック→「New」→「Server」を選択</li>
                            <li>「Apache」→「Tomcat v9.0 Server」を選択して「Next」</li>
                            <li>「Browse」ボタンでTomcatのインストールディレクトリを指定</li>
                            <li>JREをプロジェクトで使用するJDKに設定</li>
                            <li>「Finish」をクリックしてサーバーを作成</li>
                        </ol>
                    </div>

                    <!-- PostgreSQLのインストール -->
                    <h3 class="section-title">1.5 PostgreSQLデータベースのインストール</h3>
                    <p>アプリケーションのデータを保存するためのPostgreSQLデータベースをインストールします。</p>

                    <div class="env-step">
                        <h6>手順 1-7: PostgreSQLのダウンロードとインストール</h6>
                        <ol>
                            <li><a href="https://www.postgresql.org/download/" target="_blank">PostgreSQL公式サイト</a>から最新版（PostgreSQL 15以上推奨）をダウンロード</li>
                            <li>ダウンロードしたインストーラーを実行</li>
                            <li>インストール設定:
                                <ul>
                                    <li>Installation Directory: デフォルト</li>
                                    <li>Components: 全て選択（PostgreSQL Server, pgAdmin 4, Stack Builder, Command Line Tools）</li>
                                    <li>Data Directory: デフォルト</li>
                                    <li>Password: 覚えやすく安全なパスワードを設定（例: postgres123）</li>
                                    <li>Port: 5432（デフォルト）</li>
                                    <li>Locale: Japanese, Japan</li>
                                </ul>
                            </li>
                            <li>「Next」→「Install」でインストール開始</li>
                        </ol>
                    </div>

                    <!-- PgAdminの設定 -->
                    <h3 class="section-title">1.6 PgAdmin 4の初期設定</h3>
                    <p>PostgreSQLの管理ツールであるPgAdmin 4を設定し、データベースの操作ができるようにします。</p>

                    <div class="env-step">
                        <h6>手順 1-8: PgAdmin 4の初期設定</h6>
                        <ol>
                            <li>スタートメニューまたはアプリケーションランチャーから「pgAdmin 4」を起動</li>
                            <li>初回起動時にMaster Passwordの設定を求められます（例: admin123）</li>
                            <li>左側のサーバーツリーで「PostgreSQL 15」を展開</li>
                            <li>パスワード入力ダイアログでPostgreSQLインストール時に設定したパスワードを入力</li>
                            <li>「Save Password」にチェックを入れて「OK」</li>
                            <li>接続が成功すると、サーバー情報が表示されます</li>
                        </ol>
                    </div>

                    <!-- Dynamic Web Projectの作成 -->
                    <h3 class="section-title">1.7 Dynamic Web Projectの作成</h3>
                    <p>EclipseでJavaベースのWebアプリケーション開発用プロジェクトを作成します。</p>

                    <div class="env-step">
                        <h6>手順 1-9: Dynamic Web Projectの作成</h6>
                        <ol>
                            <li>Eclipseで「File」→「New」→「Project」を選択</li>
                            <li>「Web」→「Dynamic Web Project」を選択して「Next」</li>
                            <li>プロジェクト設定:
                                <ul>
                                    <li>Project name: <code>SimpleUserManagementSystem</code></li>
                                    <li>Target runtime: 先ほど設定したTomcat v9.0を選択</li>
                                    <li>Dynamic web module version: 4.0</li>
                                    <li>Configuration: Default configuration for Apache Tomcat v9.0</li>
                                </ul>
                            </li>
                            <li>「Next」を2回クリック</li>
                            <li>Web Module設定:
                                <ul>
                                    <li>Context root: <code>SimpleUserManagementSystem</code></li>
                                    <li>Content directory: <code>src/main/webapp</code></li>
                                    <li>Generate web.xml deployment descriptor: チェックを入れる</li>
                                </ul>
                            </li>
                            <li>「Finish」をクリックしてプロジェクトを作成</li>
                        </ol>
                    </div>

                    <!-- プロジェクト構造の確認 -->
                    <h3 class="section-title">1.8 プロジェクト構造の確認</h3>
                    <p>作成されたDynamic Web Projectの構造を確認し、各ディレクトリの役割を理解します。</p>

                    <div class="diagram-container">
                        <h5>Dynamic Web Projectの構造</h5>
                        <pre class="code-block"><code class="language-text">SimpleUserManagementSystem/
├── src/main/java/              # Javaソースファイル
│   ├── controller/             # Servletクラス
│   ├── model/                  # Entity・DAOクラス
│   └── util/                   # ユーティリティクラス
├── src/main/webapp/            # Webリソース
│   ├── WEB-INF/                # 設定ファイル・ライブラリ
│   │   ├── web.xml             # デプロイメント記述子
│   │   └── lib/                # JARファイル配置場所
│   ├── jsp/                    # JSPファイル
│   ├── css/                    # CSSファイル
│   ├── js/                     # JavaScriptファイル
│   └── index.jsp               # デフォルトページ
└── build/                      # コンパイル済みクラス</code></pre>
                    </div>

                    <!-- Hello Worldアプリケーション -->
                    <h3 class="section-title">1.9 Hello Worldアプリケーションの作成</h3>
                    <p>環境が正しく構築されているかを確認するため、シンプルなHello Worldアプリケーションを作成します。</p>

                    <div class="exercise-container">
                        <h5>実習 1-1: Hello World JSPページの作成</h5>
                        <p>最初のJSPページを作成して、Eclipse・Tomcat・ブラウザの連携を確認します。</p>
                        
                        <h6>手順</h6>
                        <ol>
                            <li>Project Explorerで <code>src/main/webapp</code> を右クリック</li>
                            <li>「New」→「File」を選択</li>
                            <li>File name: <code>hello.jsp</code></li>
                            <li>「Finish」をクリック</li>
                            <li>以下のコードを入力:</li>
                        </ol>

                        <h6>hello.jsp</h6>
                        <pre class="code-block"><code class="language-jsp">&lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Hello World - JSP/Servlet Tutorial&lt;/title&gt;
    &lt;style&gt;
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        .container {
            background-color: #f0f8ff;
            padding: 20px;
            border-radius: 10px;
            display: inline-block;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;h1&gt;Hello World!&lt;/h1&gt;
        &lt;h2&gt;JSP/Servlet/JDBC チュートリアルへようこそ&lt;/h2&gt;
        
        &lt;%
            // スクリプトレットの例
            String currentTime = new java.util.Date().toString();
            String message = "開発環境の構築が完了しました！";
        %&gt;
        
        &lt;p&gt;&lt;strong&gt;現在時刻:&lt;/strong&gt; &lt;%= currentTime %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;メッセージ:&lt;/strong&gt; &lt;%= message %&gt;&lt;/p&gt;
        
        &lt;hr&gt;
        &lt;h3&gt;環境情報&lt;/h3&gt;
        &lt;ul style="list-style: none;"&gt;
            &lt;li&gt;&lt;strong&gt;Java Version:&lt;/strong&gt; &lt;%= System.getProperty("java.version") %&gt;&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;OS Name:&lt;/strong&gt; &lt;%= System.getProperty("os.name") %&gt;&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;Server Info:&lt;/strong&gt; &lt;%= application.getServerInfo() %&gt;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                        <h6>動作確認手順</h6>
                        <ol>
                            <li>Eclipseの「Servers」ビューで作成したTomcatサーバーを右クリック</li>
                            <li>「Add and Remove...」を選択</li>
                            <li>左の「Available」リストから「SimpleUserManagementSystem」を選択</li>
                            <li>「Add」ボタンで右の「Configured」リストに移動</li>
                            <li>「Finish」をクリック</li>
                            <li>Tomcatサーバーを右クリック→「Start」でサーバー開始</li>
                            <li>ブラウザで以下のURLにアクセス: <code>http://localhost:8080/SimpleUserManagementSystem/hello.jsp</code></li>
                        </ol>

                        <h6>期待される結果</h6>
                        <p>ブラウザに以下の内容が表示されれば、環境構築が正常に完了しています:</p>
                        <ul>
                            <li>「Hello World!」のタイトル</li>
                            <li>現在時刻の表示</li>
                            <li>完了メッセージ</li>
                            <li>Java・OS・サーバーの情報</li>
                        </ul>
                    </div>

                    <!-- データベース接続テスト -->
                    <h3 class="section-title">1.10 データベース接続の基本テスト</h3>
                    <p>PostgreSQL JDBCドライバーを配置し、基本的なデータベース接続テストを行います。</p>

                    <div class="env-step">
                        <h6>手順 1-10: PostgreSQL JDBCドライバーの配置</h6>
                        <ol>
                            <li><a href="https://jdbc.postgresql.org/download.html" target="_blank">PostgreSQL JDBC Driver</a>から最新版をダウンロード（例: postgresql-42.6.0.jar）</li>
                            <li>Project Explorerで <code>src/main/webapp/WEB-INF/lib</code> フォルダを右クリック</li>
                            <li>「Import」→「General」→「File System」を選択</li>
                            <li>ダウンロードしたJDBCドライバー（.jarファイル）を選択してインポート</li>
                            <li>プロジェクトを右クリック→「Refresh」でプロジェクトを更新</li>
                        </ol>
                    </div>

                    <div class="exercise-container">
                        <h5>実習 1-2: データベース接続テストJSPの作成</h5>
                        <p>PostgreSQLへの接続をテストするJSPページを作成します。</p>
                        
                        <h6>手順</h6>
                        <ol>
                            <li><code>src/main/webapp</code>フォルダに <code>db-test.jsp</code> ファイルを作成</li>
                            <li>以下のコードを入力:</li>
                        </ol>

                        <h6>db-test.jsp</h6>
                        <pre class="code-block"><code class="language-jsp">&lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;
&lt;%@ page import="java.sql.*" %&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Database Connection Test&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 20px; }
        .success { color: green; background-color: #d4edda; padding: 10px; border-radius: 5px; }
        .error { color: red; background-color: #f8d7da; padding: 10px; border-radius: 5px; }
        .info { background-color: #d1ecf1; padding: 10px; border-radius: 5px; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;PostgreSQL データベース接続テスト&lt;/h1&gt;
    
    &lt;%
        // データベース接続情報
        String url = "jdbc:postgresql://localhost:5432/postgres";
        String username = "postgres";
        String password = "postgres123"; // インストール時に設定したパスワード
        
        Connection conn = null;
        Statement stmt = null;
        ResultSet rs = null;
        
        try {
            // JDBCドライバーの読み込み
            Class.forName("org.postgresql.Driver");
            
            // データベースに接続
            conn = DriverManager.getConnection(url, username, password);
    %&gt;
    
    &lt;div class="success"&gt;
        &lt;h3&gt;✓ データベース接続成功！&lt;/h3&gt;
        &lt;p&gt;PostgreSQLデータベースに正常に接続できました。&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class="info"&gt;
        &lt;h4&gt;接続情報&lt;/h4&gt;
        &lt;ul&gt;
            &lt;li&gt;&lt;strong&gt;データベースURL:&lt;/strong&gt; &lt;%= url %&gt;&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;ユーザー名:&lt;/strong&gt; &lt;%= username %&gt;&lt;/li&gt;
            &lt;li&gt;&lt;strong&gt;接続状態:&lt;/strong&gt; &lt;%= conn.isClosed() ? "切断" : "接続中" %&gt;&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
    
    &lt;%
            // 簡単なクエリテスト
            stmt = conn.createStatement();
            rs = stmt.executeQuery("SELECT version()");
            
            if (rs.next()) {
                String version = rs.getString(1);
    %&gt;
    
    &lt;div class="info"&gt;
        &lt;h4&gt;PostgreSQL バージョン情報&lt;/h4&gt;
        &lt;p&gt;&lt;%= version %&gt;&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;%
            }
            
        } catch (Exception e) {
    %&gt;
    
    &lt;div class="error"&gt;
        &lt;h3&gt;✗ データベース接続エラー&lt;/h3&gt;
        &lt;p&gt;&lt;strong&gt;エラーメッセージ:&lt;/strong&gt; &lt;%= e.getMessage() %&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;確認事項:&lt;/strong&gt;&lt;/p&gt;
        &lt;ul&gt;
            &lt;li&gt;PostgreSQLサービスが起動しているか&lt;/li&gt;
            &lt;li&gt;ユーザー名・パスワードが正しいか&lt;/li&gt;
            &lt;li&gt;JDBCドライバーがWEB-INF/libに配置されているか&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
    
    &lt;%
        } finally {
            // リソースのクリーンアップ
            try {
                if (rs != null) rs.close();
                if (stmt != null) stmt.close();
                if (conn != null) conn.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    %&gt;
    
    &lt;hr&gt;
    &lt;p&gt;&lt;a href="hello.jsp"&gt;← Hello Worldページに戻る&lt;/a&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                        <h6>動作確認</h6>
                        <ol>
                            <li>PostgreSQLサービスが起動していることを確認</li>
                            <li>ブラウザで <code>http://localhost:8080/SimpleUserManagementSystem/db-test.jsp</code> にアクセス</li>
                            <li>「データベース接続成功！」のメッセージと PostgreSQL バージョン情報が表示されることを確認</li>
                        </ol>
                    </div>

                    <!-- トラブルシューティング -->
                    <h3 class="section-title">1.11 トラブルシューティング</h3>
                    <div class="warning">
                        <h5>よくある問題と解決方法</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <h6>1. Tomcatが起動しない</h6>
                                <ul>
                                    <li>ポート8080が使用されていないか確認</li>
                                    <li>JDKのバージョンがTomcatと互換性があるか確認</li>
                                    <li>Eclipse内のServersビューでサーバーの状態を確認</li>
                                </ul>
                                
                                <h6>2. プロジェクトが認識されない</h6>
                                <ul>
                                    <li>プロジェクトを右クリック→「Refresh」</li>
                                    <li>「Project」→「Clean」→「Build Project」</li>
                                    <li>Dynamic Web Projectとして正しく作成されているか確認</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6>3. データベース接続エラー</h6>
                                <ul>
                                    <li>PostgreSQLサービスが起動しているか確認</li>
                                    <li>PgAdminで接続テストを実行</li>
                                    <li>ユーザー名・パスワードが正しいか確認</li>
                                    <li>JDBCドライバーがlibフォルダに配置されているか確認</li>
                                </ul>
                                
                                <h6>4. 文字化けが発生する</h6>
                                <ul>
                                    <li>JSPファイルのエンコーディング設定をUTF-8に変更</li>
                                    <li>Eclipse: Window → Preferences → General → Workspace → Text file encoding</li>
                                    <li>ブラウザの文字エンコーディング設定を確認</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- 理解度確認クイズ -->
                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li><strong>Dynamic Web Projectで使用される主要なディレクトリの役割を説明してください。</strong>
                                <ul>
                                    <li>src/main/java: （　　　　　　　　　　　）</li>
                                    <li>src/main/webapp: （　　　　　　　　　　　）</li>
                                    <li>WEB-INF/lib: （　　　　　　　　　　　）</li>
                                </ul>
                            </li>
                            <li><strong>JSPファイル内でJavaコードを記述するために使用するタグは何ですか？</strong></li>
                            <li><strong>PostgreSQL JDBCドライバーを使用してデータベースに接続する際に必要なURL形式を記述してください。</strong></li>
                            <li><strong>Eclipse内でTomcatサーバーを起動する前に、プロジェクトをサーバーに関連付ける操作の名称は何ですか？</strong></li>
                        </ol>
                        
                        <details style="margin-top: 20px;">
                            <summary>解答例を表示</summary>
                            <div style="margin-top: 10px; padding: 10px; background-color: #f8f9fa; border-radius: 5px;">
                                <ol>
                                    <li>
                                        <ul>
                                            <li>src/main/java: Javaソースファイル（Servlet、Model、DAOクラスなど）</li>
                                            <li>src/main/webapp: Webリソース（JSP、HTML、CSS、JSファイルなど）</li>
                                            <li>WEB-INF/lib: 外部ライブラリ（JARファイル）の配置場所</li>
                                        </ul>
                                    </li>
                                    <li>スクリプトレット（&lt;% %&gt;）と式（&lt;%= %&gt;）</li>
                                    <li>jdbc:postgresql://[host]:[port]/[database_name]</li>
                                    <li>Add and Remove（プロジェクトをサーバーに追加する操作）</li>
                                </ol>
                            </div>
                        </details>
                    </div>

                    <!-- まとめ -->
                    <h3 class="section-title">1.12 まとめ</h3>
                    <p>このステップでは、JSP/Servlet/JDBC開発に必要な基本環境を構築しました：</p>
                    <ul>
                        <li><strong>JDK 17</strong>: Java開発の基盤環境</li>
                        <li><strong>Eclipse IDE</strong>: 統合開発環境</li>
                        <li><strong>Apache Tomcat</strong>: Webアプリケーションサーバー</li>
                        <li><strong>PostgreSQL + PgAdmin</strong>: データベース環境</li>
                        <li><strong>Dynamic Web Project</strong>: Webアプリケーション開発プロジェクト</li>
                    </ul>
                    
                    <p>次のステップでは、MVCアーキテクチャの基本概念を学び、Servlet・JSPの役割と基本的な実装方法を習得します。</p>

                    <!-- ナビゲーション -->
                    <div class="d-flex justify-content-between mt-4">
                        <a href="README.html" class="btn btn-secondary">← チュートリアル概要</a>
                        <a href="step2-mvc-architecture.html" class="btn btn-primary">次の章: MVCアーキテクチャ →</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
</body>
</html>