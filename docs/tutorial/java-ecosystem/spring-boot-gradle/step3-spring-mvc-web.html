<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring Boot + Gradle チュートリアル Step 3 - Spring MVCとWebコントローラー</title>
    
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            padding-top: 56px;
        }
        
        .navbar {
            background-color: #4caf50;
        }
        
        .sidebar {
            position: sticky;
            top: 70px;
            height: calc(100vh - 70px);
            overflow-y: auto;
        }
        
        .chapter-title {
            color: #4caf50;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #4caf50;
            padding-bottom: 0.5rem;
        }
        
        .section-title {
            color: #66bb6a;
            margin-top: 1.2rem;
            margin-bottom: 0.8rem;
        }
        
        .quiz-container {
            background-color: #e8f5e8;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #4caf50;
        }
        
        .exercise-container {
            background-color: #f3e5f5;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid #9c27b0;
        }
        
        .highlight {
            background-color: #ffecb3;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #ffc107;
        }
        
        .warning {
            background-color: #ffebee;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            border-left: 4px solid #f44336;
        }
        
        .code-block {
            background-color: #1e1e1e;
            border-radius: 5px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .nav-link.active {
            background-color: #4caf50 !important;
            color: white !important;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Spring Boot + Gradle チュートリアル</a>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="step1-environment-setup.html">
                                Step 1: 環境構築
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step2-docker-postgresql.html">
                                Step 2: PostgreSQL環境
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="step3-spring-mvc-web.html">
                                Step 3: Webコントローラー
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step4-spring-data-jpa.html">
                                Step 4: データベースアクセス
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step5-user-registration.html">
                                Step 5: ユーザー登録機能
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step6-thymeleaf-ui.html">
                                Step 6: 画面実装
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step7-user-list-detail.html">
                                Step 7: 一覧・詳細機能
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step8-user-update-delete.html">
                                Step 8: 更新・削除機能
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step9-security-error.html">
                                Step 9: セキュリティ基礎
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step10-deployment.html">
                                Step 10: デプロイメント
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">Step 3: Spring MVCとWebコントローラー</h1>
                </div>

                <div id="step3">
                    <h2 class="chapter-title">Spring MVCとWebコントローラー</h2>
                    
                    <div class="highlight">
                        <h5>この章で学ぶこと</h5>
                        <ul>
                            <li>Spring MVCアーキテクチャの理解</li>
                            <li>@Controllerアノテーションの使用</li>
                            <li>リクエストマッピングの基本</li>
                            <li>HTMLページの表示</li>
                            <li>フォームデータの受け取り</li>
                            <li>基本的な例外ハンドリング</li>
                        </ul>
                    </div>

                    <h3 class="section-title">3.1 Spring MVCアーキテクチャとは</h3>
                    <p>Spring MVCは、Model-View-Controller（MVC）パターンを実装したWebフレームワークです。ブラウザからのリクエストを受け取り、処理して、HTMLページを返すWebアプリケーションを構築できます。</p>

                    <div class="highlight">
                        <h5>MVCパターンの構成要素</h5>
                        <ul>
                            <li><strong>Model（モデル）:</strong> データと業務ロジックを担当</li>
                            <li><strong>View（ビュー）:</strong> ユーザーインターフェース（HTMLページ）を担当</li>
                            <li><strong>Controller（コントローラー）:</strong> リクエストを受け取り、ModelとViewを制御</li>
                        </ul>
                    </div>

                    <h3 class="section-title">3.2 @Controllerアノテーションの基本</h3>
                    <p>@Controllerアノテーションは、クラスがSpring MVCのコントローラーであることを示します。Webブラウザからのリクエストを処理し、HTMLページを返すために使用します。</p>

                    <div class="exercise-container">
                        <h5>実習 3-1: 基本的なWebコントローラーの作成</h5>
                        <p>ユーザー情報を表示する簡単なWebコントローラーを作成します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>新しいファイルを作成：<code>src/main/java/com/example/usermanagement/controller/UserController.java</code></li>
                            <li>以下のコードを記述：</li>
                        </ol>
                        <h6>UserController.java</h6>
                        <pre class="code-block"><code class="language-java">package com.example.usermanagement.controller;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
@RequestMapping("/users")
public class UserController {
    
    @GetMapping
    public String listUsers(Model model) {
        // サンプルデータをモデルに追加
        model.addAttribute("message", "ユーザー一覧ページです");
        model.addAttribute("userCount", 3);
        return "users/list"; // templates/users/list.htmlを表示
    }
    
    @GetMapping("/welcome")
    public String welcome(Model model) {
        model.addAttribute("title", "ユーザー管理システムへようこそ");
        model.addAttribute("description", "このシステムでユーザー情報を管理できます。");
        return "users/welcome";
    }
}</code></pre>
                        <h6>アノテーションの説明</h6>
                        <ul>
                            <li><strong>@Controller:</strong> このクラスがWebコントローラーであることを示す</li>
                            <li><strong>@RequestMapping("/users"):</strong> このコントローラーのベースURLを設定</li>
                            <li><strong>@GetMapping:</strong> GETリクエストを処理するメソッドを定義</li>
                            <li><strong>Model:</strong> テンプレートにデータを渡すためのオブジェクト</li>
                        </ul>
                    </div>

                    <h3 class="section-title">3.3 Thymeleafテンプレートの作成</h3>
                    <p>コントローラーから返されるビュー名に対応するHTMLテンプレートを作成します。</p>

                    <div class="exercise-container">
                        <h5>実習 3-2: Thymeleafテンプレートの作成</h5>
                        <p>コントローラーで指定したビューに対応するHTMLファイルを作成します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>ディレクトリを作成：<code>src/main/resources/templates/users/</code></li>
                            <li>新しいファイル：<code>src/main/resources/templates/users/list.html</code></li>
                            <li>以下のHTMLを記述：</li>
                        </ol>
                        <h6>users/list.html</h6>
                        <pre class="code-block"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ユーザー一覧&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container mt-5"&gt;
        &lt;h1&gt;ユーザー管理システム&lt;/h1&gt;
        
        &lt;div class="alert alert-info"&gt;
            &lt;p th:text="${message}"&gt;メッセージがここに表示されます&lt;/p&gt;
            &lt;p&gt;現在のユーザー数: &lt;span th:text="${userCount}"&gt;0&lt;/span&gt;名&lt;/p&gt;
        &lt;/div&gt;
        
        &lt;div class="card"&gt;
            &lt;div class="card-body"&gt;
                &lt;h5 class="card-title"&gt;機能メニュー&lt;/h5&gt;
                &lt;a href="/users/welcome" class="btn btn-primary"&gt;ようこそページ&lt;/a&gt;
                &lt;a href="/" class="btn btn-secondary"&gt;ホームに戻る&lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                        <h6>手順（続き）</h6>
                        <ol start="4">
                            <li>新しいファイル：<code>src/main/resources/templates/users/welcome.html</code></li>
                            <li>以下のHTMLを記述：</li>
                        </ol>
                        <h6>users/welcome.html</h6>
                        <pre class="code-block"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ようこそ&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container mt-5"&gt;
        &lt;div class="jumbotron bg-light p-5 rounded"&gt;
            &lt;h1 class="display-4" th:text="${title}"&gt;タイトル&lt;/h1&gt;
            &lt;p class="lead" th:text="${description}"&gt;説明文&lt;/p&gt;
            &lt;hr class="my-4"&gt;
            &lt;p&gt;ユーザー管理機能を使って、効率的にユーザー情報を管理しましょう。&lt;/p&gt;
            &lt;a class="btn btn-primary btn-lg" href="/users" role="button"&gt;ユーザー一覧を見る&lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>

                    <h3 class="section-title">3.4 フォーム処理の基本</h3>
                    <p>ユーザーからの入力を受け取るフォーム処理を実装します。</p>

                    <div class="exercise-container">
                        <h5>実習 3-3: フォーム処理の実装</h5>
                        <p>ユーザー情報を入力するフォームとその処理を作成します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>UserController.javaに以下のメソッドを追加：</li>
                        </ol>
                        <h6>UserController.java（追加部分）</h6>
                        <pre class="code-block"><code class="language-java">import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;

// 既存のクラスに以下のメソッドを追加

@GetMapping("/new")
public String showCreateForm(Model model) {
    model.addAttribute("title", "新しいユーザーを作成");
    return "users/create";
}

@PostMapping("/create")
public String createUser(
    @RequestParam("name") String name,
    @RequestParam("email") String email,
    @RequestParam(value = "age", defaultValue = "0") int age,
    Model model) {
    
    // 入力値の確認（実際のデータベース保存は後の章で実装）
    model.addAttribute("message", "ユーザー情報を受け取りました");
    model.addAttribute("userName", name);
    model.addAttribute("userEmail", email);
    model.addAttribute("userAge", age);
    
    return "users/result";
}</code></pre>
                        <h6>手順（続き）</h6>
                        <ol start="2">
                            <li>新しいファイル：<code>src/main/resources/templates/users/create.html</code></li>
                            <li>以下のHTMLを記述：</li>
                        </ol>
                        <h6>users/create.html</h6>
                        <pre class="code-block"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ユーザー作成&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container mt-5"&gt;
        &lt;h1 th:text="${title}"&gt;ユーザー作成&lt;/h1&gt;
        
        &lt;form action="/users/create" method="post" class="mt-4"&gt;
            &lt;div class="mb-3"&gt;
                &lt;label for="name" class="form-label"&gt;名前&lt;/label&gt;
                &lt;input type="text" class="form-control" id="name" name="name" required&gt;
            &lt;/div&gt;
            
            &lt;div class="mb-3"&gt;
                &lt;label for="email" class="form-label"&gt;メールアドレス&lt;/label&gt;
                &lt;input type="email" class="form-control" id="email" name="email" required&gt;
            &lt;/div&gt;
            
            &lt;div class="mb-3"&gt;
                &lt;label for="age" class="form-label"&gt;年齢&lt;/label&gt;
                &lt;input type="number" class="form-control" id="age" name="age" min="0" max="120"&gt;
            &lt;/div&gt;
            
            &lt;button type="submit" class="btn btn-primary"&gt;作成&lt;/button&gt;
            &lt;a href="/users" class="btn btn-secondary"&gt;キャンセル&lt;/a&gt;
        &lt;/form&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                        <h6>手順（続き）</h6>
                        <ol start="4">
                            <li>新しいファイル：<code>src/main/resources/templates/users/result.html</code></li>
                            <li>以下のHTMLを記述：</li>
                        </ol>
                        <h6>users/result.html</h6>
                        <pre class="code-block"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;作成結果&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container mt-5"&gt;
        &lt;h1&gt;作成結果&lt;/h1&gt;
        
        &lt;div class="alert alert-success"&gt;
            &lt;p th:text="${message}"&gt;メッセージ&lt;/p&gt;
        &lt;/div&gt;
        
        &lt;div class="card"&gt;
            &lt;div class="card-header"&gt;
                &lt;h5&gt;入力された情報&lt;/h5&gt;
            &lt;/div&gt;
            &lt;div class="card-body"&gt;
                &lt;p&gt;&lt;strong&gt;名前:&lt;/strong&gt; &lt;span th:text="${userName}"&gt;名前&lt;/span&gt;&lt;/p&gt;
                &lt;p&gt;&lt;strong&gt;メールアドレス:&lt;/strong&gt; &lt;span th:text="${userEmail}"&gt;メール&lt;/span&gt;&lt;/p&gt;
                &lt;p&gt;&lt;strong&gt;年齢:&lt;/strong&gt; &lt;span th:text="${userAge}"&gt;年齢&lt;/span&gt;歳&lt;/p&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        
        &lt;div class="mt-3"&gt;
            &lt;a href="/users/new" class="btn btn-primary"&gt;もう一度作成&lt;/a&gt;
            &lt;a href="/users" class="btn btn-secondary"&gt;ユーザー一覧に戻る&lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>

                    <h3 class="section-title">3.5 パスパラメータの処理</h3>
                    <p>URLの一部をパラメータとして受け取る方法を学びます。</p>

                    <div class="exercise-container">
                        <h5>実習 3-4: パスパラメータの使用</h5>
                        <p>URLからユーザーIDを受け取って詳細情報を表示する機能を作成します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>UserController.javaに以下のメソッドを追加：</li>
                        </ol>
                        <h6>UserController.java（追加部分）</h6>
                        <pre class="code-block"><code class="language-java">import org.springframework.web.bind.annotation.PathVariable;

// 既存のクラスに以下のメソッドを追加

@GetMapping("/{id}")
public String showUser(@PathVariable("id") Long id, Model model) {
    // サンプルデータ（実際のデータベースアクセスは後の章で実装）
    model.addAttribute("userId", id);
    model.addAttribute("userName", "ユーザー" + id);
    model.addAttribute("userEmail", "user" + id + "@example.com");
    model.addAttribute("userAge", 20 + (id.intValue() % 50));
    
    return "users/detail";
}

@GetMapping("/search")
public String searchUsers(
    @RequestParam(value = "keyword", defaultValue = "") String keyword,
    Model model) {
    
    model.addAttribute("keyword", keyword);
    model.addAttribute("message", keyword.isEmpty() ? 
        "検索キーワードを入力してください" : 
        "「" + keyword + "」で検索しました");
    
    return "users/search";
}</code></pre>
                        <h6>手順（続き）</h6>
                        <ol start="2">
                            <li>新しいファイル：<code>src/main/resources/templates/users/detail.html</code></li>
                            <li>以下のHTMLを記述：</li>
                        </ol>
                        <h6>users/detail.html</h6>
                        <pre class="code-block"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ユーザー詳細&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container mt-5"&gt;
        &lt;h1&gt;ユーザー詳細&lt;/h1&gt;
        
        &lt;div class="card"&gt;
            &lt;div class="card-header"&gt;
                &lt;h5&gt;ユーザー情報（ID: &lt;span th:text="${userId}"&gt;1&lt;/span&gt;）&lt;/h5&gt;
            &lt;/div&gt;
            &lt;div class="card-body"&gt;
                &lt;div class="row"&gt;
                    &lt;div class="col-md-6"&gt;
                        &lt;p&gt;&lt;strong&gt;名前:&lt;/strong&gt; &lt;span th:text="${userName}"&gt;名前&lt;/span&gt;&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;メールアドレス:&lt;/strong&gt; &lt;span th:text="${userEmail}"&gt;メール&lt;/span&gt;&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;年齢:&lt;/strong&gt; &lt;span th:text="${userAge}"&gt;年齢&lt;/span&gt;歳&lt;/p&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        
        &lt;div class="mt-3"&gt;
            &lt;a href="/users" class="btn btn-primary"&gt;ユーザー一覧に戻る&lt;/a&gt;
            &lt;button class="btn btn-warning"&gt;編集&lt;/button&gt;
            &lt;button class="btn btn-danger"&gt;削除&lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                        <h6>手順（続き）</h6>
                        <ol start="4">
                            <li>新しいファイル：<code>src/main/resources/templates/users/search.html</code></li>
                            <li>以下のHTMLを記述：</li>
                        </ol>
                        <h6>users/search.html</h6>
                        <pre class="code-block"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;ユーザー検索&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container mt-5"&gt;
        &lt;h1&gt;ユーザー検索&lt;/h1&gt;
        
        &lt;form action="/users/search" method="get" class="mt-4"&gt;
            &lt;div class="input-group"&gt;
                &lt;input type="text" 
                       class="form-control" 
                       name="keyword" 
                       placeholder="検索キーワードを入力してください"
                       th:value="${keyword}"&gt;
                &lt;button class="btn btn-primary" type="submit"&gt;検索&lt;/button&gt;
            &lt;/div&gt;
        &lt;/form&gt;
        
        &lt;div class="alert alert-info mt-3"&gt;
            &lt;p th:text="${message}"&gt;メッセージ&lt;/p&gt;
        &lt;/div&gt;
        
        &lt;div class="mt-3"&gt;
            &lt;a href="/users" class="btn btn-secondary"&gt;ユーザー一覧に戻る&lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>

                    <h3 class="section-title">3.6 基本的な例外ハンドリング</h3>
                    <p>エラーが発生した場合の処理を実装します。</p>

                    <div class="exercise-container">
                        <h5>実習 3-5: 例外ハンドリングの実装</h5>
                        <p>無効なユーザーIDの場合のエラーハンドリングを追加します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>UserController.javaのshowUserメソッドを更新：</li>
                        </ol>
                        <h6>UserController.java（更新部分）</h6>
                        <pre class="code-block"><code class="language-java">@GetMapping("/{id}")
public String showUser(@PathVariable("id") Long id, Model model) {
    // 無効なIDのチェック
    if (id <= 0 || id > 1000) {
        model.addAttribute("errorMessage", "無効なユーザーIDです: " + id);
        return "users/error";
    }
    
    // サンプルデータ
    model.addAttribute("userId", id);
    model.addAttribute("userName", "ユーザー" + id);
    model.addAttribute("userEmail", "user" + id + "@example.com");
    model.addAttribute("userAge", 20 + (id.intValue() % 50));
    
    return "users/detail";
}</code></pre>
                        <h6>手順（続き）</h6>
                        <ol start="2">
                            <li>新しいファイル：<code>src/main/resources/templates/users/error.html</code></li>
                            <li>以下のHTMLを記述：</li>
                        </ol>
                        <h6>users/error.html</h6>
                        <pre class="code-block"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;エラー&lt;/title&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container mt-5"&gt;
        &lt;h1 class="text-danger"&gt;エラーが発生しました&lt;/h1&gt;
        
        &lt;div class="alert alert-danger"&gt;
            &lt;h5&gt;エラー内容&lt;/h5&gt;
            &lt;p th:text="${errorMessage}"&gt;エラーメッセージ&lt;/p&gt;
        &lt;/div&gt;
        
        &lt;div class="mt-4"&gt;
            &lt;a href="/users" class="btn btn-primary"&gt;ユーザー一覧に戻る&lt;/a&gt;
            &lt;a href="/" class="btn btn-secondary"&gt;ホームに戻る&lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>

                    <h3 class="section-title">3.7 動作確認</h3>
                    <p>作成したWebコントローラーが正常に動作することを確認しましょう。</p>

                    <div class="exercise-container">
                        <h5>実習 3-6: アプリケーションの動作確認</h5>
                        <p>各機能が正常に動作することを確認します。</p>
                        <h6>手順</h6>
                        <ol>
                            <li>アプリケーションを起動：</li>
                        </ol>
                        <pre class="code-block"><code class="language-bash">./gradlew bootRun</code></pre>
                        <h6>確認すべきURL</h6>
                        <ul>
                            <li><a href="http://localhost:8080/users" target="_blank">http://localhost:8080/users</a> - ユーザー一覧</li>
                            <li><a href="http://localhost:8080/users/welcome" target="_blank">http://localhost:8080/users/welcome</a> - ようこそページ</li>
                            <li><a href="http://localhost:8080/users/new" target="_blank">http://localhost:8080/users/new</a> - ユーザー作成フォーム</li>
                            <li><a href="http://localhost:8080/users/1" target="_blank">http://localhost:8080/users/1</a> - ユーザー詳細（ID: 1）</li>
                            <li><a href="http://localhost:8080/users/search" target="_blank">http://localhost:8080/users/search</a> - ユーザー検索</li>
                            <li><a href="http://localhost:8080/users/9999" target="_blank">http://localhost:8080/users/9999</a> - エラーページ</li>
                        </ul>
                        <h6>動作テスト</h6>
                        <ol start="2">
                            <li>フォーム送信機能のテスト：
                                <ul>
                                    <li>「/users/new」でフォームに入力</li>
                                    <li>「作成」ボタンをクリック</li>
                                    <li>結果ページで入力内容が表示されることを確認</li>
                                </ul>
                            </li>
                            <li>検索機能のテスト：
                                <ul>
                                    <li>「/users/search」で検索キーワードを入力</li>
                                    <li>「検索」ボタンをクリック</li>
                                    <li>検索結果が表示されることを確認</li>
                                </ul>
                            </li>
                        </ol>
                    </div>

                    <div class="warning">
                        <h5>トラブルシューティング</h5>
                        <ul>
                            <li><strong>404 Not Foundエラー:</strong> URLパスとコントローラーのマッピングが一致しているか確認してください。</li>
                            <li><strong>テンプレートが見つからない:</strong> HTMLファイルがtemplatesディレクトリの正しい場所に配置されているか確認してください。</li>
                            <li><strong>フォーム送信でエラー:</strong> form要素のaction属性とmethod属性が正しく設定されているか確認してください。</li>
                            <li><strong>Thymeleaf構文エラー:</strong> th:text="${変数名}"の形式が正しいか確認してください。</li>
                        </ul>
                    </div>

                    <div class="quiz-container">
                        <h5>理解度確認クイズ</h5>
                        <ol>
                            <li>@Controllerと@RestControllerの違いは何ですか？</li>
                            <li>@GetMappingと@PostMappingはそれぞれどのようなHTTPリクエストを処理しますか？</li>
                            <li>Modelオブジェクトの役割は何ですか？</li>
                            <li>@PathVariableアノテーションは何のために使用しますか？</li>
                            <li>@RequestParamアノテーションのdefaultValueパラメータの目的は何ですか？</li>
                        </ol>
                        <details>
                            <summary>解答例</summary>
                            <ol>
                                <li>@ControllerはHTMLページ（ビュー）を返し、@RestControllerはJSONなどのデータを直接返す</li>
                                <li>@GetMappingはGETリクエスト（データ取得）、@PostMappingはPOSTリクエスト（データ送信）を処理</li>
                                <li>コントローラーからビュー（テンプレート）にデータを渡すためのオブジェクト</li>
                                <li>URLパスの一部を変数として受け取るために使用</li>
                                <li>パラメータが指定されなかった場合のデフォルト値を設定する</li>
                            </ol>
                        </details>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a href="step2-docker-postgresql.html" class="btn btn-secondary">← 前の章 Step 2: PostgreSQL環境</a>
                        <a href="step4-spring-data-jpa.html" class="btn btn-primary">次の章 → Step 4: データベースアクセス</a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>
</body>
</html>