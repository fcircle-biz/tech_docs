<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring AI + Ollama チュートリアル ステップ1 - 環境構築とプロジェクト作成</title>

    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts - Noto Sans JP -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Highlight.js CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- Mermaid.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>

    <style>
        :root {
            --primary-color: #f57c00;
            --secondary-color: #ff9800;
            --accent-color: #4caf50;
            --background-color: #fff3e0;
            --text-color: #333;
            --border-color: #ddd;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f8f9fa;
            padding-top: 56px;
        }

        .navbar {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        }

        .sidebar {
            position: fixed;
            top: 56px;
            bottom: 0;
            left: 0;
            z-index: 100;
            padding: 48px 0 0;
            box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
            background-color: #f8f9fa;
            overflow-y: auto;
        }

        .sidebar-heading {
            font-size: .75rem;
            text-transform: uppercase;
        }

        .sidebar .nav-link {
            font-weight: 500;
            color: #333;
            padding: 0.5rem 1rem;
            border-left: 3px solid transparent;
        }

        .sidebar .nav-link:hover {
            color: var(--primary-color);
            background-color: var(--background-color);
            border-left-color: var(--primary-color);
        }

        .sidebar .nav-link.active {
            color: var(--primary-color);
            background-color: var(--background-color);
            border-left-color: var(--primary-color);
            font-weight: 700;
        }

        main {
            padding-top: 20px;
        }

        .chapter-title {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 10px;
            margin-bottom: 30px;
            font-weight: 700;
        }

        .section-title {
            color: var(--secondary-color);
            margin-top: 30px;
            margin-bottom: 20px;
            font-weight: 600;
            border-left: 4px solid var(--secondary-color);
            padding-left: 15px;
        }

        .highlight {
            background: linear-gradient(to right, #fff3e0, #ffe0b2);
            border-left: 4px solid var(--primary-color);
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .highlight h5 {
            color: var(--primary-color);
            font-weight: 700;
            margin-bottom: 15px;
        }

        .code-block {
            background-color: #282c34;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .code-block code {
            color: #abb2bf;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .exercise-container {
            background-color: #f0f7ff;
            border: 2px solid #2196F3;
            border-radius: 8px;
            padding: 25px;
            margin: 25px 0;
        }

        .exercise-container h5 {
            color: #1976D2;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .quiz-container {
            background-color: #f1f8e9;
            border: 2px solid var(--accent-color);
            border-radius: 8px;
            padding: 25px;
            margin: 25px 0;
        }

        .quiz-container h5 {
            color: var(--accent-color);
            font-weight: 700;
            margin-bottom: 15px;
        }

        .alert-custom {
            border-radius: 8px;
            padding: 15px 20px;
            margin: 15px 0;
        }

        footer {
            margin-top: 50px;
            padding: 30px 0;
            background-color: #212529;
        }

        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-primary:hover {
            background-color: #e65100;
            border-color: #e65100;
        }

        .mermaid {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <!-- ナビゲーションバー -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fab fa-java"></i>
                <strong>Spring AI + Ollama + Qwen3 実践チュートリアル</strong>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
                <div class="position-sticky pt-3">
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>チュートリアルステップ</span>
                    </h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="step1-environment-setup.html">
                                <i class="fas fa-cog"></i> ステップ1: 環境構築とプロジェクト作成
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step2-spring-ai-ollama-integration.html">
                                <i class="fas fa-plug"></i> ステップ2: Spring AIとOllamaの統合設定
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step3-chat-implementation.html">
                                <i class="fas fa-comments"></i> ステップ3: チャット機能の実装
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step4-thymeleaf-view.html">
                                <i class="fas fa-file-code"></i> ステップ4: Thymeleafビューの作成
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step5-docker-containerization.html">
                                <i class="fab fa-docker"></i> ステップ5: Dockerコンテナ化
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step6-docker-compose-integration.html">
                                <i class="fas fa-layer-group"></i> ステップ6: docker-compose統合環境
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="step7-testing-troubleshooting.html">
                                <i class="fas fa-check-circle"></i> ステップ7: 動作確認とトラブルシューティング
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2"><i class="fas fa-cog"></i> ステップ1: 環境構築とプロジェクト作成</h1>
                </div>

                <div id="step1">
                    <!-- ステップタイトル -->
                    <h2 class="chapter-title">Spring AI開発環境のセットアップとGradleプロジェクト作成</h2>

                    <!-- このステップの目標 -->
                    <div class="highlight">
                        <h5><i class="fas fa-bullseye"></i> このステップで実装すること</h5>
                        <ul>
                            <li><strong>JDK 17のインストール</strong> - Java開発環境の構築と環境変数設定</li>
                            <li><strong>Visual Studio Codeのセットアップ</strong> - IDEと必要な拡張機能のインストール</li>
                            <li><strong>Docker Desktopのインストール</strong> - コンテナ環境の準備と動作確認</li>
                            <li><strong>Gradleプロジェクトの作成</strong> - Spring Bootプロジェクトの初期化</li>
                            <li><strong>build.gradleの設定</strong> - Spring Boot 3.4.0とSpring AI BOM 1.0.0-M6の追加</li>
                            <li><strong>依存関係の追加</strong> - web、thymeleaf、spring-ai-ollamaの設定</li>
                            <li><strong>Hello Worldアプリの作成と実行</strong> - 開発環境の動作確認</li>
                        </ul>
                        <p><strong>所要時間：</strong> 約2時間</p>
                    </div>

                    <!-- 前提条件 -->
                    <div class="alert alert-info alert-custom">
                        <h6><i class="fas fa-info-circle"></i> 前提条件</h6>
                        <ul class="mb-0">
                            <li>コマンドライン操作の基本的な知識</li>
                            <li>テキストエディタやIDEの基本的な使用経験</li>
                            <li>インターネット接続（ソフトウェアダウンロード用）</li>
                            <li>管理者権限のあるPC（ソフトウェアインストール用）</li>
                        </ul>
                    </div>

                    <!-- セクション1.1: JDK 17のインストール -->
                    <h3 class="section-title">1.1 JDK 17のインストールと環境変数設定</h3>
                    <p>Spring Boot 3.4.0を使用するため、Java Development Kit（JDK）17以上が必要です。ここではAmazon Corretto JDK 17をインストールします。</p>

                    <div class="exercise-container">
                        <h5><i class="fas fa-tasks"></i> 実装 1-1: JDK 17のインストール</h5>
                        <p>Amazon Corretto JDK 17は、Amazonが無償で提供する本番環境対応のOpenJDKディストリビューションです。</p>

                        <h6><i class="fas fa-list-ol"></i> 手順</h6>
                        <ol>
                            <li><strong>JDK 17のダウンロード</strong>:
                                <ul>
                                    <li>Amazon Corretto公式サイトにアクセス: <a href="https://aws.amazon.com/corretto/" target="_blank">https://aws.amazon.com/corretto/</a></li>
                                    <li>「Downloads」セクションで「Corretto 17」を選択</li>
                                    <li>使用しているOS（Windows/macOS/Linux）に応じたインストーラーをダウンロード</li>
                                </ul>
                            </li>

                            <li><strong>インストールの実行</strong>:
                                <ul>
                                    <li><strong>Windows</strong>: ダウンロードした.msiファイルを実行し、インストールウィザードに従う</li>
                                    <li><strong>macOS</strong>: .pkgファイルを実行し、インストールウィザードに従う</li>
                                    <li><strong>Linux</strong>: パッケージマネージャーでインストール</li>
                                </ul>
                                <pre class="code-block"><code class="language-bash"># Ubuntu/Debian
wget -O- https://apt.corretto.aws/corretto.key | sudo apt-key add -
sudo add-apt-repository 'deb https://apt.corretto.aws stable main'
sudo apt-get update
sudo apt-get install -y java-17-amazon-corretto-jdk

# macOS (Homebrew)
brew install --cask corretto17</code></pre>
                            </li>

                            <li><strong>環境変数の設定</strong>:
                                <p><strong>Windows:</strong></p>
                                <ul>
                                    <li>システム環境変数を開く（「システムの詳細設定」→「環境変数」）</li>
                                    <li>システム変数で「新規」をクリック</li>
                                    <li>変数名: <code>JAVA_HOME</code></li>
                                    <li>変数値: <code>C:\Program Files\Amazon Corretto\jdk17.x.x_xx</code></li>
                                    <li>Path変数に <code>%JAVA_HOME%\bin</code> を追加</li>
                                </ul>

                                <p><strong>macOS/Linux:</strong></p>
                                <pre class="code-block"><code class="language-bash"># ~/.bashrc または ~/.zshrc に追加
export JAVA_HOME=/Library/Java/JavaVirtualMachines/amazon-corretto-17.jdk/Contents/Home
export PATH=$JAVA_HOME/bin:$PATH

# 設定を反映
source ~/.bashrc  # または source ~/.zshrc</code></pre>
                            </li>
                        </ol>

                        <h6><i class="fas fa-check-circle"></i> 動作確認</h6>
                        <p>新しいターミナル/コマンドプロンプトを開いて、以下のコマンドを実行します：</p>
                        <pre class="code-block"><code class="language-bash">java -version
javac -version</code></pre>

                        <h6><i class="fas fa-thumbs-up"></i> 期待される結果</h6>
                        <div class="alert alert-success">
                            <pre class="mb-0">openjdk version "17.0.x" 2024-xx-xx LTS
OpenJDK Runtime Environment Corretto-17.0.x.x.1 (build 17.0.x+xx-LTS)
OpenJDK 64-Bit Server VM Corretto-17.0.x.x.1 (build 17.0.x+xx-LTS, mixed mode, sharing)</pre>
                        </div>

                        <h6><i class="fas fa-exclamation-triangle"></i> トラブルシューティング</h6>
                        <div class="alert alert-warning">
                            <p><strong>エラー:</strong> 'java' は、内部コマンドまたは外部コマンド、操作可能なプログラムまたはバッチ ファイルとして認識されていません。</p>
                            <p><strong>解決方法:</strong></p>
                            <ul class="mb-0">
                                <li>環境変数PATHにJAVA_HOME\binが正しく追加されているか確認</li>
                                <li>ターミナル/コマンドプロンプトを再起動して再度確認</li>
                                <li>JAVA_HOMEのパスが正しいか確認（フォルダが実際に存在するか）</li>
                            </ul>
                        </div>
                    </div>

                    <!-- セクション1.2: Visual Studio Codeのセットアップ -->
                    <h3 class="section-title">1.2 Visual Studio Codeのセットアップと必要な拡張機能</h3>
                    <p>Visual Studio Code（VS Code）は軽量で高機能なコードエディタです。Java開発に必要な拡張機能をインストールします。</p>

                    <div class="exercise-container">
                        <h5><i class="fas fa-tasks"></i> 実装 1-2: VS Codeと拡張機能のインストール</h5>

                        <h6><i class="fas fa-list-ol"></i> 手順</h6>
                        <ol>
                            <li><strong>VS Codeのインストール</strong>:
                                <ul>
                                    <li>公式サイトからダウンロード: <a href="https://code.visualstudio.com/" target="_blank">https://code.visualstudio.com/</a></li>
                                    <li>インストーラーを実行し、デフォルト設定でインストール</li>
                                    <li>「PATHへの追加」オプションにチェックを入れることを推奨</li>
                                </ul>
                            </li>

                            <li><strong>必須拡張機能のインストール</strong>:
                                <p>VS Codeを起動し、左サイドバーの拡張機能アイコン（四角が4つ）をクリックして、以下を検索してインストール：</p>
                                <ul>
                                    <li><strong>Extension Pack for Java</strong> (Microsoft) - Java開発の基本パック</li>
                                    <li><strong>Spring Boot Extension Pack</strong> (VMware) - Spring Boot開発支援</li>
                                    <li><strong>Docker</strong> (Microsoft) - Dockerファイル編集とコンテナ管理</li>
                                    <li><strong>Gradle for Java</strong> (Microsoft) - Gradleビルドツール統合</li>
                                </ul>

                                <p>または、ターミナルから一括インストール：</p>
                                <pre class="code-block"><code class="language-bash">code --install-extension vscjava.vscode-java-pack
code --install-extension vmware.vscode-boot-dev-pack
code --install-extension ms-azuretools.vscode-docker
code --install-extension vscjava.vscode-gradle</code></pre>
                            </li>

                            <li><strong>VS Code設定の最適化</strong>:
                                <p>設定（Ctrl+,またはCmd+,）を開いて、以下を確認：</p>
                                <ul>
                                    <li>「Java: Home」がJDK 17のパスに設定されていることを確認</li>
                                    <li>自動保存を有効化: 「Files: Auto Save」を「afterDelay」に設定</li>
                                </ul>
                            </li>
                        </ol>

                        <h6><i class="fas fa-check-circle"></i> 動作確認</h6>
                        <p>VS Codeでコマンドパレット（Ctrl+Shift+P / Cmd+Shift+P）を開き、「Java: Configure Java Runtime」と入力して実行します。</p>

                        <h6><i class="fas fa-thumbs-up"></i> 期待される結果</h6>
                        <div class="alert alert-success">
                            <p>Java Runtimeの設定画面が開き、JDK 17が認識されていることを確認できます。</p>
                        </div>
                    </div>

                    <!-- セクション1.3: Docker Desktopのインストール -->
                    <h3 class="section-title">1.3 Docker Desktopのインストールと動作確認</h3>
                    <p>Ollamaをコンテナで実行するため、Docker Desktopをインストールします。</p>

                    <div class="exercise-container">
                        <h5><i class="fas fa-tasks"></i> 実装 1-3: Docker Desktopのインストール</h5>

                        <h6><i class="fas fa-list-ol"></i> 手順</h6>
                        <ol>
                            <li><strong>Docker Desktopのダウンロードとインストール</strong>:
                                <ul>
                                    <li>公式サイトからダウンロード: <a href="https://www.docker.com/products/docker-desktop/" target="_blank">https://www.docker.com/products/docker-desktop/</a></li>
                                    <li>OSに応じたインストーラーをダウンロード（Windows/macOS/Linux）</li>
                                    <li>インストーラーを実行</li>
                                    <li><strong>Windows:</strong> WSL 2バックエンドを有効化（推奨）</li>
                                    <li>インストール完了後、Docker Desktopを起動</li>
                                </ul>
                            </li>

                            <li><strong>Dockerアカウントの作成（オプション）</strong>:
                                <p>Docker Hubアカウントがあると便利ですが、ローカル開発のみであれば必須ではありません。</p>
                            </li>

                            <li><strong>リソース設定の最適化</strong>:
                                <p>Docker Desktop設定（歯車アイコン）→ Resourcesで以下を設定：</p>
                                <ul>
                                    <li><strong>Memory:</strong> 8GB以上（Qwen3:7bモデル用）</li>
                                    <li><strong>CPUs:</strong> 4コア以上（推奨）</li>
                                    <li><strong>Disk:</strong> 20GB以上</li>
                                </ul>
                            </li>
                        </ol>

                        <h6><i class="fas fa-check-circle"></i> 動作確認</h6>
                        <p>ターミナルで以下のコマンドを実行します：</p>
                        <pre class="code-block"><code class="language-bash">docker --version
docker compose version
docker run hello-world</code></pre>

                        <h6><i class="fas fa-thumbs-up"></i> 期待される結果</h6>
                        <div class="alert alert-success">
                            <pre class="mb-0">Docker version 24.0.x, build xxxxx
Docker Compose version v2.x.x

Hello from Docker!
This message shows that your installation appears to be working correctly.</pre>
                        </div>

                        <h6><i class="fas fa-exclamation-triangle"></i> トラブルシューティング</h6>
                        <div class="alert alert-warning">
                            <p><strong>Windows:</strong> "Docker Desktop requires Windows 10 Pro/Enterprise" エラー</p>
                            <p><strong>解決方法:</strong> Windows 10 Homeの場合、WSL 2をインストールする必要があります：</p>
                            <pre class="code-block mb-0"><code class="language-bash">wsl --install
wsl --set-default-version 2</code></pre>
                        </div>
                    </div>

                    <!-- セクション1.4: Gradleプロジェクトの作成 -->
                    <h3 class="section-title">1.4 Spring Boot + Gradleプロジェクトの作成</h3>
                    <p>Spring Initializrを使用せず、手動でGradleプロジェクトを作成します。これにより、プロジェクト構造を深く理解できます。</p>

                    <div class="exercise-container">
                        <h5><i class="fas fa-tasks"></i> 実装 1-4: プロジェクトディレクトリの作成</h5>

                        <h6><i class="fas fa-list-ol"></i> 手順</h6>
                        <ol>
                            <li><strong>プロジェクトディレクトリの作成</strong>:
                                <pre class="code-block"><code class="language-bash">mkdir ai-chat
cd ai-chat</code></pre>
                            </li>

                            <li><strong>Gradleプロジェクトの初期化</strong>:
                                <p>Gradle Wrapperを使用してプロジェクトを初期化します：</p>
                                <pre class="code-block"><code class="language-bash"># Gradleがインストールされていない場合は、以下でインストール
# macOS: brew install gradle
# Windows: choco install gradle

# プロジェクト初期化
gradle init --type java-application --dsl groovy --test-framework junit-jupiter --project-name ai-chat --package com.example.aichat</code></pre>
                            </li>

                            <li><strong>不要なファイルの削除</strong>:
                                <p>自動生成されたサンプルコードを削除します：</p>
                                <pre class="code-block"><code class="language-bash"># Windows
rmdir /s app\src\main\java\com\example\aichat
rmdir /s app\src\test\java\com\example\aichat

# macOS/Linux
rm -rf app/src/main/java/com/example/aichat/*
rm -rf app/src/test/java/com/example/aichat/*</code></pre>
                            </li>

                            <li><strong>プロジェクト構造の整理</strong>:
                                <p>以下のディレクトリ構造を確認します：</p>
                                <pre class="code-block"><code class="language-bash">ai-chat/
├── gradle/
│   └── wrapper/
├── app/
│   ├── build.gradle
│   └── src/
│       ├── main/
│       │   ├── java/
│       │   └── resources/
│       └── test/
├── gradlew
├── gradlew.bat
└── settings.gradle</code></pre>
                            </li>
                        </ol>
                    </div>

                    <!-- セクション1.5: build.gradleの設定 -->
                    <h3 class="section-title">1.5 build.gradleの設定とSpring AI依存関係の追加</h3>
                    <p>Spring Boot 3.4.0とSpring AI BOM 1.0.0-M6を使用するため、build.gradleを設定します。</p>

                    <div class="exercise-container">
                        <h5><i class="fas fa-tasks"></i> 実装 1-5: build.gradleの作成</h5>

                        <h6><i class="fas fa-list-ol"></i> 手順</h6>
                        <ol>
                            <li><strong>app/build.gradleファイルの編集</strong>:
                                <p>VS Codeでapp/build.gradleを開き、以下の内容に置き換えます：</p>
                                <pre class="code-block"><code class="language-groovy">plugins {
    id 'java'
    id 'org.springframework.boot' version '3.4.0'
    id 'io.spring.dependency-management' version '1.1.6'
}

group = 'com.example'
version = '0.0.1-SNAPSHOT'

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}

repositories {
    mavenCentral()
    maven { url 'https://repo.spring.io/milestone' }
}

dependencies {
    // Spring Boot Starter
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'

    // Spring AI BOM
    implementation platform('org.springframework.ai:spring-ai-bom:1.0.0-M6')

    // Spring AI Ollama
    implementation 'org.springframework.ai:spring-ai-ollama-spring-boot-starter'

    // Validation
    implementation 'org.springframework.boot:spring-boot-starter-validation'

    // Development Tools
    developmentOnly 'org.springframework.boot:spring-boot-devtools'

    // Test
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    testRuntimeOnly 'org.junit.platform:junit-platform-launcher'
}

tasks.named('test') {
    useJUnitPlatform()
}</code></pre>
                            </li>

                            <li><strong>settings.gradleの確認</strong>:
                                <p>ルートディレクトリのsettings.gradleを確認：</p>
                                <pre class="code-block"><code class="language-groovy">rootProject.name = 'ai-chat'
include 'app'</code></pre>
                            </li>
                        </ol>

                        <h6><i class="fas fa-check-circle"></i> 依存関係の解決</h6>
                        <p>Gradle依存関係をダウンロードします：</p>
                        <pre class="code-block"><code class="language-bash">cd app
./gradlew build --refresh-dependencies</code></pre>

                        <h6><i class="fas fa-thumbs-up"></i> 期待される結果</h6>
                        <div class="alert alert-success">
                            <pre class="mb-0">BUILD SUCCESSFUL in 30s
5 actionable tasks: 5 executed</pre>
                        </div>
                    </div>

                    <!-- セクション1.6: Hello Worldアプリケーション -->
                    <h3 class="section-title">1.6 Hello Worldアプリケーションの作成と実行</h3>
                    <p>Spring Bootの基本的なアプリケーションを作成して、環境が正しく構築されているか確認します。</p>

                    <div class="exercise-container">
                        <h5><i class="fas fa-tasks"></i> 実装 1-6: メインクラスとコントローラーの作成</h5>

                        <h6><i class="fas fa-list-ol"></i> 手順</h6>
                        <ol>
                            <li><strong>メインクラスの作成</strong>:
                                <p>app/src/main/java/com/example/aichat/AiChatApplication.javaを作成：</p>
                                <pre class="code-block"><code class="language-java">package com.example.aichat;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class AiChatApplication {

    public static void main(String[] args) {
        SpringApplication.run(AiChatApplication.class, args);
    }
}</code></pre>
                            </li>

                            <li><strong>テストコントローラーの作成</strong>:
                                <p>app/src/main/java/com/example/aichat/HelloController.javaを作成：</p>
                                <pre class="code-block"><code class="language-java">package com.example.aichat;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class HelloController {

    @GetMapping("/")
    public String hello() {
        return "Hello, Spring AI + Ollama World!";
    }
}</code></pre>
                            </li>

                            <li><strong>application.ymlの作成</strong>:
                                <p>app/src/main/resources/application.ymlを作成：</p>
                                <pre class="code-block"><code class="language-yaml">server:
  port: 8080

spring:
  application:
    name: ai-chat</code></pre>
                            </li>
                        </ol>

                        <h6><i class="fas fa-check-circle"></i> アプリケーションの実行</h6>
                        <p>Gradleコマンドでアプリケーションを起動します：</p>
                        <pre class="code-block"><code class="language-bash">./gradlew bootRun</code></pre>

                        <h6><i class="fas fa-thumbs-up"></i> 期待される結果</h6>
                        <div class="alert alert-success">
                            <p>ブラウザで <code>http://localhost:8080</code> にアクセスすると、以下が表示されます：</p>
                            <pre class="mb-0">Hello, Spring AI + Ollama World!</pre>

                            <p class="mt-3">コンソールには以下のようなログが表示されます：</p>
                            <pre class="mb-0">  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::               (v3.4.0)

2025-11-11 xx:xx:xx.xxx  INFO xxxxx --- [  main] c.e.aichat.AiChatApplication   : Started AiChatApplication in x.xxx seconds</pre>
                        </div>

                        <h6><i class="fas fa-exclamation-triangle"></i> トラブルシューティング</h6>
                        <div class="alert alert-warning">
                            <p><strong>エラー:</strong> Port 8080 already in use</p>
                            <p><strong>解決方法:</strong></p>
                            <ul class="mb-0">
                                <li>別のアプリケーションがポート8080を使用している場合、そのアプリケーションを停止する</li>
                                <li>または、application.ymlでserver.portを別の値（例: 8081）に変更する</li>
                            </ul>
                        </div>
                    </div>

                    <!-- システム構成図 -->
                    <h3 class="section-title">1.7 構築した環境の全体像</h3>
                    <p>このステップで構築した開発環境の構成を図で確認します。</p>

                    <div class="mermaid">
                        flowchart TB
                            subgraph Dev["開発環境"]
                                JDK["JDK 17<br/>Amazon Corretto"]
                                VSCode["VS Code<br/>+ 拡張機能"]
                                Docker["Docker Desktop"]
                            end

                            subgraph Project["Gradleプロジェクト"]
                                Gradle["Gradle 7.6+<br/>Wrapper"]
                                Build["build.gradle<br/>Spring Boot 3.4.0<br/>Spring AI BOM 1.0.0-M6"]
                                App["AiChatApplication<br/>メインクラス"]
                            end

                            JDK --> Gradle
                            VSCode --> Project
                            Gradle --> Build
                            Build --> App
                            Docker -.-> |次ステップで使用| Future["Ollama<br/>コンテナ"]

                            style Dev fill:#fff3e0
                            style Project fill:#f0f7ff
                            style JDK fill:#f57c00,color:#fff
                            style VSCode fill:#007acc,color:#fff
                            style Docker fill:#2496ed,color:#fff
                    </div>

                    <!-- ステップ完了チェック -->
                    <div class="quiz-container">
                        <h5><i class="fas fa-clipboard-check"></i> ステップ1完了チェックリスト</h5>
                        <p>以下の項目が完了していることを確認してください：</p>
                        <ul class="list-unstyled">
                            <li><input type="checkbox"> JDK 17がインストールされ、<code>java -version</code>で確認できる</li>
                            <li><input type="checkbox"> JAVA_HOME環境変数が正しく設定されている</li>
                            <li><input type="checkbox"> Visual Studio Codeと必要な拡張機能がインストールされている</li>
                            <li><input type="checkbox"> Docker Desktopがインストールされ、<code>docker --version</code>で確認できる</li>
                            <li><input type="checkbox"> <code>docker run hello-world</code>が成功する</li>
                            <li><input type="checkbox"> Gradleプロジェクト（ai-chat）が作成されている</li>
                            <li><input type="checkbox"> build.gradleにSpring Boot 3.4.0とSpring AI BOM 1.0.0-M6が設定されている</li>
                            <li><input type="checkbox"> AiChatApplicationメインクラスが作成されている</li>
                            <li><input type="checkbox"> <code>./gradlew bootRun</code>でアプリケーションが起動する</li>
                            <li><input type="checkbox"> ブラウザで http://localhost:8080 にアクセスして「Hello, Spring AI + Ollama World!」が表示される</li>
                        </ul>
                    </div>

                    <!-- 現在のファイル構成 -->
                    <div class="alert alert-light alert-custom">
                        <h6><i class="fas fa-folder-tree"></i> 現在のプロジェクト構成</h6>
                        <pre class="code-block"><code class="language-bash">ai-chat/
├── gradle/
│   └── wrapper/
│       ├── gradle-wrapper.jar
│       └── gradle-wrapper.properties
├── app/
│   ├── build.gradle                        # Gradle依存関係設定
│   └── src/
│       ├── main/
│       │   ├── java/com/example/aichat/
│       │   │   ├── AiChatApplication.java  # メインクラス
│       │   │   └── HelloController.java    # テストコントローラー
│       │   └── resources/
│       │       └── application.yml         # アプリケーション設定
│       └── test/
├── gradlew                                  # Gradle Wrapper (Unix)
├── gradlew.bat                              # Gradle Wrapper (Windows)
└── settings.gradle                          # プロジェクト設定</code></pre>
                    </div>

                    <!-- 次のステップ -->
                    <div class="alert alert-info alert-custom">
                        <h6><i class="fas fa-forward"></i> 次のステップの予告</h6>
                        <p><strong>ステップ2: Spring AIとOllamaの統合設定</strong>では、以下の内容を実装します：</p>
                        <ul class="mb-0">
                            <li>Spring AIフレームワークの概要理解</li>
                            <li>spring-ai-ollama-spring-boot-starterの設定</li>
                            <li>application.ymlでのOllama接続設定</li>
                            <li>ChatClientインターフェースを使用した基本的なAI対話機能</li>
                        </ul>
                    </div>

                    <!-- ステップ間ナビゲーション -->
                    <div class="d-flex justify-content-between mt-5 mb-4">
                        <a href="README.html" class="btn btn-secondary">
                            <i class="fas fa-home"></i> チュートリアルTOP
                        </a>
                        <a href="step2-spring-ai-ollama-integration.html" class="btn btn-primary">
                            次のステップ：Spring AIとOllama統合 <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- フッター -->
    <footer class="bg-dark text-white mt-5">
        <div class="container-fluid py-3">
            <div class="row">
                <div class="col-12 text-center">
                    <p class="mb-0">© 2025 F-Circle. All rights reserved.<br>
本資料はAIツールを活用し、人間による編集・監修のもと作成されています。無断転載・再配布を禁じます。</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Highlight.js 初期化 -->
    <script>hljs.highlightAll();</script>

    <!-- Mermaid.js 初期化 -->
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });
    </script>
</body>
</html>
